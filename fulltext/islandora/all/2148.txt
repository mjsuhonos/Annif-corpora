Ryerson University

Digital Commons @ Ryerson
Theses and dissertations

1-1-2012

Power Line Communication For Automotive Applications
Xiaoguang Huang
Ryerson University

Follow this and additional works at: http://digitalcommons.ryerson.ca/dissertations Part of the Electrical and Computer Engineering Commons Recommended Citation
Huang, Xiaoguang, "Power Line Communication For Automotive Applications" (2012). Theses and dissertations. Paper 1707.

This Thesis is brought to you for free and open access by Digital Commons @ Ryerson. It has been accepted for inclusion in Theses and dissertations by an authorized administrator of Digital Commons @ Ryerson. For more information, please contact bcameron@ryerson.ca.

POWER LINE COMMUNICATION FOR AUTOMOTIVE APPLICATIONS
by

Xiaoguang Huang Bachelor of Electrical Engineering Tongji University, China, 2000

A thesis presented to Ryerson University in partial fulfillment of the requirements for the degree of Master of Applied Science in Electrical and Computer Engineering Program with Specialization in Communications Toronto, Ontario, Canada, 2012 c Xiaoguang Huang, 2012 

I hereby declare that I am the sole author of this thesis. I authorize Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research.

Xiaoguang Huang

I further authorize Ryerson University to reproduce this thesis by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research.

Xiaoguang Huang

ii

Ryerson University requires the signatures of all persons using or photocopying this thesis. Please sign below, and give address and date.

iii

RYERSON UNIVERSITY DEPARTMENT OF ELECTRICAL AND COMPUTER ENGINEERING CERTIFICATE OF EXAMINATION
Chief Advisor Examining Board

Advisory Committee

The thesis by Xiaoguang Huang entitled Power Line Communication for Automotive Applications is accepted in partial fulfillment of the requirements for the degree of Master of Applied Science in Electrical and Computer Engineering Program with Specialization in Communications

Date Chair of Examining Board iv

Abstract
Power Line Communication for Automotive Application
Master of Applied Science, 2012, Xiaoguang Huang, Electrical and Computer Engineering, Ryerson University

The following thesis is an investigation on adopting Power Line Communication (PLC) technology from AC (Alternating Current) lines to DC (Direct Current) lines and possibility to apply it on automotive applications. Prototype modules are built with existing PLC chip to verify communication performance over the battery DC lines. In order to ensure reliable data transmission over the vehicle DC power lines, research is expanded to analyze the characteristics of vehicle DC-bus network. Typical automotive components are selected and tested for interference and noise analysis. Detailed studies on impulsive noise and its statistic distribution are presented. As well, the characteristics of Lead-acid battery are reviewed on the possible impacts to carrier frequency. Overall, PLC technology is promising for automotive applications. But the test result shows there is limitation to apply existing PLC product to automotive DC applications. Directly adopting the control method used in AC application to DC is not trivial. Further study and future research areas are recommended to be conducted to mature the PLC technology being utilized on automotive systems.

v

Acknowledgment
First, I would like to express my sincere gratitude to my supervisor, Professor Lian Zhao for her guidance throughout my MASc study and research, for her immense knowledge, patience, enthusiasm and continuous support. I could not image to complete this thesis without her tremendous encouragement and motivation. Besides my supervisor, I would like to thank Professor Minco He, for providing great technical support and sharing practice experience on electronic design. It helped me in all the time when doing research and writing of this thesis. My sincere thanks also go to Eric Weiss and Ken Grogan from Mobile Climate Control Inc., for their willingness on participating in this research project, for their valuable industry advice and generous support on providing testing components. Last but not the least, I would like to thank my family: my wife Xiang Chen and my son Jason Huang, for their unconditional love, enormous support and encouragement along the way.

vi

Contents
1 Power Line Communication Introduction 1.1 PLC over the AC Line . . . . . . . . . . . 1.2 PLC for Home Applications . . . . . . . . 1.3 AC vs. DC . . . . . . . . . . . . . . . . . 1.4 Research Motivation . . . . . . . . . . . . 1.5 Outline of the Thesis . . . . . . . . . . . . 1 2 4 7 8 9 10 10 12 13 14 14 16 16 19 19 21 22 23 24 25 26 27 30 35 36 38 38 40 40

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

2 PLC for Automotive Application 2.1 Automotive Control Revolution . . . . . . . . . 2.2 Advantages of PLC for Automotive Applications 2.3 Research Strategy . . . . . . . . . . . . . . . . . 2.3.1 Noise Analysis . . . . . . . . . . . . . . . 2.3.2 Data Rate Selection . . . . . . . . . . . 3 PLC Prototype 3.1 PLC Chip . . . . . . . . . . . . . 3.2 Prototype . . . . . . . . . . . . . 3.2.1 System Design . . . . . . 3.2.2 Control logic: . . . . . . . 3.2.3 Coupling circuits: . . . . . 3.2.4 Transmit Signal Path: . . 3.2.5 Receive Signal Path: . . . 3.2.6 Power Circuits: . . . . . . 3.3 Performances . . . . . . . . . . . 3.3.1 Functionality Verification . 3.3.2 Signal Analysis . . . . . . 3.3.3 Transmission Capability . 3.4 Conclusion . . . . . . . . . . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

. . . . . . . . . . . . .

4 DC Line Characteristics 4.1 Channel Noise Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4.1.1 Fourier Transform . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4.1.2 Window Function . . . . . . . . . . . . . . . . . . . . . . . . . . . . . vii

4.1.3 Autocorrelation . . . . . . . . . . . . . . . 4.1.4 Short Time Fourier Transform . . . . . . . 4.2 Interference & Noise Measurement . . . . . . . . . 4.2.1 Resistive Load . . . . . . . . . . . . . . . . 4.2.2 Inductive Load . . . . . . . . . . . . . . . 4.2.3 DC Motor . . . . . . . . . . . . . . . . . . 4.3 Impulse Noise Statistic Analysis . . . . . . . . . . 4.3.1 Solenoid Impulses- Inductive Load . . . . 4.3.2 Heater Valve Actuator Operation Impulses 4.3.3 Muffin Fan Analysis . . . . . . . . . . . . 4.3.4 Vehicle Noise Analysis . . . . . . . . . . . 4.4 Battery vs. Carrier Frequency . . . . . . . . . . . 4.4.1 Introduction . . . . . . . . . . . . . . . . . 4.4.2 Battery Modeling . . . . . . . . . . . . . . 4.4.3 Carrier Frequency Verification . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

41 44 47 48 49 53 60 65 67 67 70 74 74 75 78 81 81 82 83 85 92

5 Conclusion 5.1 Research Summary and Findings . . . . . . . . . . . . . . . . . . . . . . . . 5.2 Design Criteria . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5.3 Recommendations/ Future Research . . . . . . . . . . . . . . . . . . . . . . Bibliography A Abbreviation List

viii

List of Tables
3.1 4.1 Prototype Liability Test - Cable Length vs. LED Switching Speed . . . . . 36 49

Reference Thermal Noise Power Chart . . . . . . . . . . . . . . . . . . . . .

ix

List of Figures
1.1 1.2 1.3 2.1 3.1 3.2 3.3 3.4 3.5 3.6 3.7 3.8 3.9 3.10 3.11 3.12 3.13 3.14 3.15 3.16 3.17 3.18 3.19 4.1 4.2 4.3 4.4 4.5 4.6 4.7 4.8 Smart meter transfer info by PLC . . . . . . . . . . . . . . . . . . . . . . . . Home PLC diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Home network with PLC . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Full Electrical Vehicle Chassis Layout . . . . . . . . . . . . . . . . . . . . . . Cypress CY8CPLC10 Block Diagram . . . . . . . . . . . . . . . FSK Modem PHY Block Diagram . . . . . . . . . . . . . . . . . Prototype PCB Assembly Layout . . . . . . . . . . . . . . . . . Prototype System Logic Diagram . . . . . . . . . . . . . . . . . Transmitter Diagram . . . . . . . . . . . . . . . . . . . . . . . . Receiver Diagram . . . . . . . . . . . . . . . . . . . . . . . . . . Power Filter Circuit . . . . . . . . . . . . . . . . . . . . . . . . . Prototype Wiring Connection Layout . . . . . . . . . . . . . . . I 2 C transmitting diagram . . . . . . . . . . . . . . . . . . . . . I 2 C receiving diagram . . . . . . . . . . . . . . . . . . . . . . . FSK OUT Signal Overview . . . . . . . . . . . . . . . . . . . . FSK OUT Signal (VI ) Waveform . . . . . . . . . . . . . . . . . Waveform (VO ) before Coupling Capacitor . . . . . . . . . . . . Transmitting Signal Feedback Power Input . . . . . . . . . . . . Signal Spectrum of Waveform after Coupling Capacitor . . . . . Waveform after Coupling Capacitor . . . . . . . . . . . . . . . . Receiver Signal after Coupling Capacitor Overview in 1 sec . . . Receiver Signal Waveform after Coupling Capacitor . . . . . . . Receiver Signal Spectrum of Waveform after Coupling Capacitor Autocorrelation . . . . . . . . . . . . . . . . . . . . . . . . . . Fourier Transform of Autocorrelation Function . . . . . . . . . Spectrum of Y' has similar spectrum as original signal Y . . . STFT, the spectrogram of Y' . . . . . . . . . . . . . . . . . . 15W Solenoid Power ON, Graph of Voltage cross the Coil . . . Power Contactor Turned OFF, Graph of Voltage cross the Coil Coil Power ON Signal Analysis . . . . . . . . . . . . . . . . . Coil Power OFF Signal Analysis . . . . . . . . . . . . . . . . . x . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2 5 6 11 17 18 20 21 23 25 26 27 29 30 31 31 32 32 33 33 34 34 35 43 44 45 46 50 51 52 53

4.9 4.10 4.11 4.12 4.13 4.14 4.15 4.16 4.17 4.18 4.19 4.20 4.21 4.22 4.23 4.24 4.25 4.26 4.27

Electrical Model of DC Motor . . . . . . . . . . . . . . . . . . . . . DC Motor Application (Blower & Fan) Power ON Signal Analysis . 14" Fan Power OFF Signal Analysis . . . . . . . . . . . . . . . . . . Dual Shaft Blower Continue Operation Signal Waveform Analysis . Fan Continue Operation Signal Waveform Analysis . . . . . . . . . Single Impulse Noise Waveform . . . . . . . . . . . . . . . . . . . . Impulses Cumulative Variance Analysis . . . . . . . . . . . . . . . Computer Simulated Impulse Waveform Analysis Steps . . . . . . . Solenoid Impulses Analysis . . . . . . . . . . . . . . . . . . . . . . . Heater Valve Actuator Operation Impulses . . . . . . . . . . . . . . Muffin Fan Operation Impulses . . . . . . . . . . . . . . . . . . . . Signal Waveform Analysis with Engine OFF . . . . . . . . . . . . . Signal Waveform Analysis with Engine Operation . . . . . . . . . . Randles Battery Model . . . . . . . . . . . . . . . . . . . . . . . . . Battery Model in DC application . . . . . . . . . . . . . . . . . . . Battery Model for AC signals . . . . . . . . . . . . . . . . . . . . . Signal Test Station Diagram . . . . . . . . . . . . . . . . . . . . . . Battery impact to Carrier Frequency, with 10K  resistor load . . . Battery impact to Carrier Frequency, with solenoid (15 watts) load

. . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . .

55 56 57 58 59 61 62 63 66 68 69 72 73 75 76 77 78 79 80

xi

Chapter 1 Power Line Communication Introduction
Power Line Communication (PLC), also known as power line carrier communication, Power line Digital Subscriber Line, Power Line Telecom, Power Line Networking, or Broadband over Power Lines (BPL) are systems for carrying data on a conductor which is also used for electric power transmission. Power Line Communication system transmits message/ information through the existing power grids. Different types of PLC use different frequency band depending on the transmission characteristic of the power wiring [1]. Obviously it will be a significant cost-saving by eliminating installation of dedicated communication cables. Power grid has wide coverage in human habitat areas. By using power line broadcasting data message, it comes with a well setup transmitting media infrastructure. This is a great advantage of PLC technology comparing with other types of communication system. As we have evidenced in recent decades, the information technology developed fast and expanded rapidly. There is an increasing demand on building faster and reliable communication channels for variable applications. Due to the power line inherited special features and characteristics, especially its wide coverage in city and urban area, PLC has drawn lots of attention and turned out to be very promising for certain applications.

1

1.1

PLC over the AC Line

Power line communication technology over the AC line was originally developed for remote meter automatic reading and it has a long history. The first remote electricity supply metering was proposed in the United Kingdom in 1838. After that, the first patent on power line signaling was proposed in 1897. In 1905, applications were patented in the United States. When it comes to 1913, the first commercial production of electromechanical meter repeaters took into place. By late 1980, relatively sophisticated error control coding techniques within the hardware of PLC modems were proposed[1] [2]. In the past, utility companies assign staffs to go to field collecting consumption data from on-site metering devices. This is somehow time consuming and associates with high labor cost. With the development of PLC technology, nowadays companies can rely on PLC devices to automatically collect field data and transfer the data through the power lines to a central database for billing, troubleshooting, and analyzing.

Figure 1.1: Smart meter transfer info by PLC (http : //industrial - embedded.com/smart - communication - s - f sk - modulation - techniques)

Shown in Fig. 1.1, the PLC meters collect consumption, diagnostic, and status data from water or energy metering devices in individual household. A data concentrator gathers data from a certain number of meters and transfers back to data center for analysis. By using PLC meters, it is not only saving the expense of periodic trips to each physical location for reading meters, but also providing more accurate billing based on real time consumption 2

rather than an estimated or predicted usage. The timely information coupled with systematical analysis could help both utility providers and customers to better understand and control the usage and production of electricity, natural gas and water resources.

Both one-way and two-way PLC meter reading systems have been successfully used for decades. In a one-way PLC system, the readings are only sent from the end transmitter devices (i.e. the meters), then pass through the communication infrastructure to a master controller/ receiver which collects and publishes the readings. In a two-way system, the end device not only submits messages, but also accepts commands from the master station. The two-way system supports both inputs and outputs, allows obtaining readings, conveys messages or reconfigures the network. This type of broadcast allows the communication system to reach many thousands of devices simultaneously. Comparing with the two-way system, one-way communication solution might have a lower cost at the beginning, but it is difficult to upgrade or reconfigure the system when operating conditions/ requirements are changed. In a power line communication system, the basic key component modulator is responsible for transferring the control message into a waveform which can be carried by power lines. In order to build a robust communication link and high immunization for interference, a proper carrier frequency needs to be carefully selected. Generally speaking, for the same conduct, higher frequency/ data rate implies higher transmission impedance. It turns to higher frequency has shorter transmitting range. As a result, for a traditional long distance PLC meter reading with over hundreds kilometers distance, a low carrier frequency is usually selected [1]. Besides using a low frequency for long distance communication, nowadays PLC with higher frequencies at different voltage power level is also widely used in variable applications. In European countries, due to the low cost and easy accessibility, PLC is used for transmitting radio programs over the power lines. The frequency in radio program is in the range from 100KHz to 500KHz . In 2004, the U.S. Federal Communications Commission adopted rules

3

to facilitate the deployment of BPL (Broadband over Power Line) which allows to provide Internet access service over the power lines. End user is able to access high-speed Internet by plugging a computer into any regular power outlet through a "PLC Modem". Depending on the power network physical characteristics and service coverage, signal booster or repeater might be required in order to overcome signal attenuation. The system is expected to operate within frequency from 10M to 30M Hz [15]. Not just above mentioned communication systems over the AC line using PLC technology, studies and researches are still on the way to find out more about PLC applications. Recently, an ultra high speed rate transmission over power line named E-Line has been successfully demonstrated by using a single power line conductor. It claims symmetric and full duplex communication well in excess of 1 Gbit/s in each direction [7]. As we all could foresee, with the maturity of PLC technology, there is no doubt that more reliable and faster PLC communication systems over the power grids will become available in the near future.

1.2

PLC for Home Applications

Further than applying PLC over the hydro power lines, the technology is currently being developed for home applications and networks [3]. Most old homes are not designed and included with specialized network wiring. By using existing power wires as message transmitting media, PLC technology makes it easy to do and as well keeps the cost very competitive comparing with either wireless solution or adding new network wiring[21]. As stated in [17], home network connectivity is expected to become a standard feature in the near future. This allows implementing remote control for smart power management at house to save the energy. Mostly important, it enables manufactures and their service center to perform remote maintenance or early fault diagnostics on the connected appliances within the house. With the help of PLC technology, converting or building an intelligent home becomes easier. 4

One of the reasons why PLC could be adopted to use at personal home is the fast development of information technology and renovation on electronic components. Comparing with past, the cost for making a PLC transceiver has been dropped down dramatically to an affordable level. The technology is no longer solely used in industrial or commercial applications. Another fact is that digital consumer electronic products like digital TVs (DTVs), PVRs, computers, etc. are widely used at home nowadays. This increases the demand for home networking technologies which enable seamless distribution of data and multimedia [15]. As a result, we have seen PLC be widely used in household applications.

Figure 1.2: Home PLC diagram (http : //f ocus.ti.com/docs/solution/f olders/print/502.html)

For home PLC applications, basically users need a power line adapter, then connect the adapter to establish a wired connection within the existing electrical cables at home. Fig. 1.2 shows how it works. A message is modulated by processor with digital signal carrier. Later, the signal will be amplified before coupling to the wire network. On receiver side, useful information is selected by the filter and demodulated by the processor to machine codes. The devices connected on the network may be either plugged into regular power outlets, or permanently wired in place. Since the carrier signal may propagate to nearby homes on the same distribution system, the control schemes have a "house address/ID" that designates to the owner. 5

Typical home-control power line communication devices are designed for remote-controlling of lighting and appliances. The system consists of digital and analog messages such as ON/OFF, timing or variable sensor readings. It operates by modulating a carrier waveform between 20 and 200 kHz (medium speed data bus) and transfer it into the household power wiring from transmitter to central controller. The messages are shown on a display, depending on the application, users are able to adjust or reset the settings.

Figure 1.3: Home network with PLC (http : //www.broadbandbuyer.co.uk/Shop/ShopDetail.asp?P roductID = 6021)

PLC is also used in a home network to interconnect home computers and entertainment devices (including TVs, Blu-ray players, game consoles, etc.) together, see Fig. 1.3. The signals of these devices usually contain audios, videos and high quality images which are high volume data message. In order to complete the transmission, a higher data rate is required. Normally the transmit frequency ranges from 1.6 MHz to 80 MHz. Right now, HomePlug Powerline Alliance is the most established and widely accepted home power line networking standard [16]. As the latest HomePlug AV HPAV states, by employing advanced Physical Layer (PHY) and Media Access Control (MAC) technologies, HPAV provides a 200 Mbps (million bits per second) class powerline network for highquality, multi-stream entertainment over existing AC wiring at home [16]. By September 2010, HomePlug estimated that over 45 million HomePlug devices had been sold and used worldwide. The published HomePlug standards make the PLC technology reach to a quite reliable level. [18].

6

1.3

AC vs. DC

Besides Alternating-Current (AC) power network, Direct-Current (DC) power network has long history and has been widely implemented in variable fields too. Originally, the transmission and distribution of electricity was started with direct current (DC). During that time, Edison's direct current was the standard for the United States in the late 19th century. But due to high power loss of DC transmission along the conductors, later on AC technology gradually replaced DC and has dominated electrical energy generation, transmission and distribution field for decades [6]. The basic principle of AC transmission is to generate high power voltage and reduce the transmitting current, alternatively reduce the power loss to achieve better efficiency. Due to increasing demand for power in modern society, AC generator capacity and transmitting voltage level keep increasing. As a result, mass power generator stations are required to be built to work together. All these trends brought up concerns relating to higher conductor resistance, power phase shift, synchronization, etc. In order to find a better solution, DC network has been re-evaluated and developed into a new technology with better performance. High Voltage Direct Current (HVDC) system, it uses electronic devices like mercury arc valves, thyristors (or IGBTs) for bulk power transmission from distant generating stations [8]. For long-distance transmission, HVDC system appears to be less expensive and lower power losses. For underwater power cables, HVDC also avoids the heavy currents caused by the cable capacitance. HVDC could apply on the existing AC distribution grids and increase system stability by preventing cascading failures from one power grid to another [8]. With all these advantages, DC system starts gaining back the lost "battle field" in power transmission field.

Direct-current systems could be directly used on storage batteries, and provide valuable load-leveling and backup power during interruptions. DC power could be easily paralleled to improve system reliability. It also allows economical operation by using smaller machines/generators during periods of light load. Due to its own specialties and operation 7

advantages, except for power transmission, DC system also has wide applications [6]. For examples: · Electric railways use DC power between 500V and 750V; · Conventional vehicle control system is based on battery DC supply of 12V, 24V; · Hybrid or electrical vehicle power train system rely on high voltage DC supply 320V, 600V; · Electronics devices, like cell phone, computer, consume low DC power 3.6V or 5V; · Telephone exchange communication equipments use -48V as standard power supply; · Solar power has DC output and the power is converted to AC and fed into power grids.

1.4

Research Motivation

DC system is commonly found in many low-voltage applications in our daily life. As we discussed earlier, power line communication has already been successfully applied in variable AC applications. Therefore, can we apply PLC on DC powered applications too? Can we directly transfer the control method from AC line to DC line? What is the difference between AC system and DC network on electrical characteristics? To answer all these questions, we decided to select a target application to start the research. Automotive application is catching our eyes. The reasons for conducting the research work on automotive are: First, automotive industry plays a significant role in North America economy and involves a huge group of consumers. Second, from technical point of view, vehicle is powered by batteries which consists a DC network. Third, personally being an electrical engineer working at automotive industry for years, I have a good understanding of assessment practices and have been actively involved with recent design trends and new technologies. 8

A typical automotive system, like HVAC (Heating, Ventilation and Air condition) system, includes most common electrical components such as sensors, coils and motors. By utilizing PLC technology on in-vehicle applications, it will directly benefit the industry for lower cost and easy installation control. Most importantly, it will prove PLC can work on DC power networks. The objective of our research is to analyze the characteristics of vehicle DC-bus network, by using the method of building and testing prototype controllers to get conclusion on practical solutions for applying PLC technology on battery power DC lines.

1.5

Outline of the Thesis

· Chapter 1 - Power Line Communication Introduction. Present a brief introduction of the technology concepts and variable PLC applications. Summarize the research motivation and objective. · Chapter 2 - PLC for Automotive Application. Review possibility to apply PLC technology to vehicle DC power lines. List benefits and challenges on integrating PLC into automotive control system. · Chapter 3 - PLC Prototype. Build PLC prototype controllers with an existing PLC chip to verify automotive communication performance. Test results show certain limitations and require further research on the characteristics of the DC lines. · Chapter 4 - DC Line Characteristics. Typical automotive components are tested for interference and noise analysis. Present a detailed study on impulsive noise and its statistic distribution, battery impacts to carrier frequency. · Chapter 5 - Conclusion. Summarize on research findings, design criteria. A few PLC design guidelines are proposed for future reference.

9

Chapter 2 PLC for Automotive Application
2.1 Automotive Control Revolution

In the last few years, control technology applied in automotive has been developed dramatically. Today's new technology evolution has focused primarily on safety, reliability, and driving comfort to the drivers and passengers. Numerous in-vehicle applications that have traditionally relied on mechanical transmissions now have been gradually switched to electrical controlled components, like powered window motion control, automatic climate control, etc. [5]. Further to that, some intelligent electronic equipments start taking into place. Instead of having multi-circuits/wires for a particular function control, the new "smart" control unit is able to exchange the information via dedicated communication networks. For instance, the most popular control protocols are Local Interconnect Network (LIN), controller area network (CAN) or Flex-ray [19]. On the other hand, as we evidenced so far, due to the fuel crisis and pollution issues, the trends in automotive industry development is trying to adopt more "Green" technology. All major manufacturers and many of their suppliers have invested significantly in it. Basically it is switching from the traditional fossil fuel power to cleaner energy - electrical power. No matter it is a new hybrid vehicle or new generation full electrical car, the conventional combustion engine is gradually stepping out and replaced by the powerful electrical motor. This totally changes automotive industry and service landscaping. Consumers no longer 10

Figure 2.1: Full Electrical Vehicle Chassis Layout (http : //www.f ord.com/technology/electric/)

need to change the engine oil in certain period time or worry about coolant overdue. As replacements, more and more electrical powered components and circuits are going to be added into the system. As stated in [4], most vehicles today have already had more than 50 different control units or nodes, plus all the new components we need for the next generation vehicle (see Fig. 2.1, the platform layout of new Ford full electrical vehicle), the total control units inside the vehicle will become a considerable big number. If we continue with the existing control design methods, the wiring of the whole vehicle will become very clumsy and inefficient. The complex wiring system will directly result to some issues like high cost, installation difficulties (need dedicated design and accessing), troubleshooting difficulties and power waste due to extra weight. To help reduce CO2 emission level and increase fuel efficiency, design engineers are seeking new technologies and design techniques, which will help to lower wire harness weight. Furthermore, in order to remain competitive in todays market, manufacturers are looking at reducing warranty repair cost and improving user satisfaction. As a result, the designers are actually confronted with the challenge of finding new ways to reduce vehicle weight without sacrificing system reliability. Different approaches have been proposed to reduce the wiring weight for the fuel efficiency, which provides the vehicle the ability to travel further within the same amount of fuel.

11

Converting the regular 12V DC or 24V DC to a higher voltage is a way being considered. For instance, in the old 24V DC system, a vehicle with a 10kW power requirement needs heavy wiring and switching components to distribute more than 400A current draw. In a new 610V system, 10kW of power requires just 16A. For the same power consumption, higher voltage results in lower current and alternatively reduces the size and weight of the wiring. Some other research suggested reducing thickness of the conductor insulation or changing the conductor to lighter material to reduce the wiring weight. Except above mentioned solutions, from control perspective, another way to reduce the wiring weight is to limit total numbers of wire as much as possible. In an extreme condition where there is no wires at all, it will become a wireless control system and the wiring weight will be dropped down to the minimum level. However, relying on wireless control has some potential problems, such as lack of security, interference, inability to power devices and comparatively higher cost, which makes it not appropriate for automotive applications. As far as we know, the simple and economic way to power each single control unit inside the vehicle is to connect the battery power wires directly to the unit. If the existing DC power bus line can be used on transmitting control messages, the communication system will be extremely simplified. Accordingly the total wiring weight will be reduced too. As stated in Chapter 1, due to the success of PLC in the AC line applications, this technology looks very promising for automotive DC Power Line applications too.

2.2

Advantages of PLC for Automotive Applications

First, Lower Cost. Power line communication for automotive application could simply rely on the car power line network for transmitting signals/ messages. It does not need any extra dedicated cables for communication, which simplifies and limits the wiring harness for different control systems inside the vehicle [9]. Complex and costly wiring harness are replaced by digital communication semiconductors. By reducing harness wires, it saves system overall cost. 12

Second, Simplicity. By using PLC in vehicle network communication, one power line can be used for multiple independent networks. As a result, there are less circuits needed in the system. All these lead to simple installation and easier troubleshooting. From a long time run, the maintenance cost will be lower too. Third, Flexibility. Since PLC only deals with the power cables, it is expandable and easy to add more transceivers to the power-line network after installation. For instance, if the system upgrade only needs to change certain logic or add certain functionalities and no implementation of any new components, the entire process could be ended up with simply reflashing the new software to a particular controller. Comparing with the traditional method to modify the control body circuits, PLC provides more flexibility for either creating new applications or upgrading existing systems. To sum up, all these three features and benefits make PLC technology very attractive for automotive applications. The control approach has gained wider recognition among the industry.

2.3

Research Strategy

Since PLC technology has potential to benefit vehicle design, questions are being asked: how to integrate PLC into an existing vehicle control system? Could PLC provide reliable communication via vehicle noisy power lines? The quickest approach for the integration of PLC on automotive applications is finding an existing available PLC product in the market, with minimum modification, and applying it on a test module which is good for DC lines communication. In our research, Cypress PLC chip is selected to build up a prototype for the evaluation. In order to verify the communication performance, variable parameters are selected to be tested. Moreover, DC-Bus power line communication is a complex subject which involves control protocol, noise analysis, message transmission strategy and other factors. Therefore we focus on analyzing possible interference and noise properties, as well the channel characteristics. 13

2.3.1

Noise Analysis

Noise is a key factor in terms of communication performance. Knowledge of noise characteristics is essential to optimize system design (for example modulation schemes and channel coding), and predict link performance. DC power lines are inherently a very noisy environment. Every time when a device turns on or off, it introduces a pop or surge into the line. This causes the impulsive noise, which effects the performance of power line communication [20]. So when designing a control system, it is necessary to consider the system ability to deal with all these natural signaling disruptions. Moreover, noise is statistically characterized in terms of duration, frequency, peak amplitude, and time interval between successive pulses. Since the overall noise is contributed by each single component, by testing and verifying performance characteristics of each component, we will have clear picture about possible noise impacts on the communication line. For our research, in order to simulate the similar vehicle electrical noise environment, it is necessary to setup a test station which includes some typical automotive electrical components like battery package (+12V DC / +24V DC ), motors, and different size of inductive and resistant loads.

2.3.2

Data Rate Selection

From the bandwidth perspective, in [12], the study is exploring a frequency bandwidth ranging from 500 kHz to 40MHz, which corresponds to a possible bandwidth for future automotive PLC systems. Generally, automotive multiplex communication buses could be divided into three categories [9]. 1. Hi-speed Multimedia bus for PC and Entertainment systems (1M -100Mbps) 2. Medium-speed Data bus for Telematics Data exchange (10K -1 Mbps) 14

3. Low-speed Data bus for activation of actuators and sensors (1K -10Kbps) Currently, for those signals that related to safety applications, to ensure the control liability, dedicated twisted wires or fiber optic cables are used. Most automotive electronic applications, like window lifter, door locker or air conditioning, normally do not generate large data flows. They do not require high data transfer rates and are not involved in time critical or hard real-time operations [12]. Choosing these types of applications will be a good start point to apply PLC technology on automotive application. In our thesis, different carrier frequencies will be tested along with battery to check the link performance. Since the target application is a vehicle control system, the typical data needed includes analogue signals (such as HVAC (Heater, Ventilation and Air Condition) temperature reading, refrigerate pressures and etc.) and digital signals (ON/ OFF commands and alarms). From application point of view, it only requires a low/ medium bit rate.

15

Chapter 3 PLC Prototype
As introduced in Chapter1, PLC technology has been widely used in AC applications. There are a variety of PLC products in the market for specific design needs on different applications. Among those, some of the off-the-shelf products already have the capability for certain DC applications. In order to verify its readiness on vehicle DC power line communications, we select a chip made by Cypress (Model No.: CY8CPLC10) to build up a prototype transceivers to evaluate the performance.

3.1

PLC Chip

Cypress CY8CPLC10 is an integrated Powerline Communication chip. It provides a complete communication solution by integrating FSK (Frequency Shift Keying) PHY (Physical Layer) modem, network protocol and application code into a chip. For simple application, signal amplifier and coupling circuits are additional components required to setup the communication [22]. Cypress uses proprietary 2.4kbit/s FSK modulation between 130-134kHz, which is within the PLC communication band specified by European standards body CENELEC. Other popular modulation schemes have also been considered for standardization, including: SFSK (synchronous FSK) and OFDM (orthogonal frequency division multiplexing) system. The transmitter power consumption is 630mW, and the receiver needs 500mW. The overall power 16

consumption could drop down to 25mW in sleep mode while still retaining the ability to wake up from a 135kHz signal.

Figure 3.1: Cypress CY8CPLC10 Block Diagram (CypressDocumentN o.001 - 52478, RevC, page2)

A block diagram of CY8CPLC10 is shown in Fig. 3.1. The key component is the FSK modem. It converts the transmit data into FSK signal and modulates to the power line. It also demodulates the FSK signal received on the line and converts it back into recognized format data [23]. Along with the modem, there are processor, memory, timers and I/Os working together to maintain network protocol. The system is able to detect the line status and only transmit message when the line is free (BIU, Band-In-Use). During transmitting process, it verifies the address, packet integrity and perform CRC (Cyclic Redundancy Check) on received packets. Afterwards, an acknowledgment is sent for valid packets. If lost message happens, the packet will be automatically re-transmitted.

17

Fig.3.2 shows details of PLC transceiver.

Figure 3.2: FSK Modem PHY Block Diagram (CypressDocumentN o.001 - 50001, RevK, page3)

Transmitter In transmitter, digital data from the network layer is processed bit by bit, and then passes to modulator. Depending the input data is high level logic "1" or low level logic "0", the modulator divides the local oscillator frequency to generate a sine wave at 133.3kHz for signal logic "0" or 131.8kHz for Logic "1". The frequency of logic "1" can be configured to 130.4kHz for a wider FSK bandwidth too [22]. In the end, the sine waves will be fed to the Programmable Gain Amplifier (PGA) to generate final modulated FSK signals.

18

Receiver On the receiver side, FSK signals received from the power line are amplified and sent to High Frequency (HF) Band Pass Filter. The out-of-band frequencies are filtered out. Only desired spectrum from 125kHz to 140kHz is selected for the next process. In the Mixer Block, filtered FSK signals multiply local oscillator signal to produce heterodyned frequency. This frequency is further filtered by the Intermediate Frequency (IF) Band Pass Filters. Then the signals are fed to the correlator which produces DC components (consisting of Logic "1" and "0") . An external Low Pass filter blocks frequencies lower than 7.5KHz . Passed signals go to the internal Low Pass Filter (LPF) which only outputs the demodulated digital data at 2400 baud and suppresses all other higher frequency components generated in the correlation process. The signals out of LPF are digitized by the hysteresis comparator. This helps to eliminate the effects of correlator delay and false logic triggers. The Digital Receiver deserializes this data and outputs to the Network Layer for interpretation [22].

3.2
3.2.1

Prototype
System Design

Cypress CY8CPLC10 needs an external host micro-controller to configure the modem and network protocol. The communication between PLC and host controller is via an I 2 C interface. To verify the PLC communication performance, Microchip dsPIC30F4013 is selected to be added on the system to build the prototypes. Microchip dsPIC30F4013 is a high performance CPU with modified Harvard Architecture. It uses 24-bit wide instructions and 16-bit wide data path. It comes with up to 33 interrupt sources, five 16-bits Timers/ Counters and four 16-bits Compare/ PWM outputs. It is equipped with I 2 C module which supports Multi-Master/Slave modes [25]. To test and verify system performance, two transceiver modules are built for evaluation.

19

The boards layout is shown in Fig. 3.3.

Figure 3.3: Prototype PCB Assembly Layout

For the signal transmission, first, the message is transferred from micro-controller to PLC chip via I 2 C serial link. PLC Network Layer generates Powerline Transceiver (PLT) packets once the message is successfully received. Then FSK modem modulates the packets and submits the data to the power lines with coupling circuits. On the receiver side, the signals transmitted are received by the coupling circuits and demodulated by the FSK Modem and 20

reconstructed to PLT packets. Later PLT packets are decoded by the Powerline Network Protocol and then transferred to the host micro-controller in an I 2 C format. A block diagram is shown in Fig. 3.4.

Figure 3.4: Prototype System Logic Diagram

3.2.2

Control logic:

Regarding to the two prototype transceiver modules we built, one is setup as master controller and another one is setup as slave controller. To simplify the process, messages are always being transmitted from master controller to slave one. To verify transmission performance, a group of LED lights are added in both controllers. Additional, one "Rotation Switch" and one "Speed Control Potentiometer" are added in the master controller to enrich the control features. The "Rotation Switch" is a normal open (NO) switch. Every time when it is pressed, it changes the rotating direction of the lights to an opposite way. The "speed control potentiometer" is able to send 0-5v analog feedback to the host PIC controller. Depending on the different voltage value sent, it changes the rotating speed of the lights automatically. The LEDs on the master controller are designed to light on one by one. Once it's operated, master controller collects the status of each flashing light (ON or OFF).The messages are modulated and transmitted via power cable. When delivered to slave controller, ideally the slave controller should start to operate the LED lights exactly the same way as what the 21

master controller does. By comparing the performance of two groups of LED lights, we are able to verify the performance on the selected PLC chip.

3.2.3

Coupling circuits:

Since the vehicle battery is low DC power line, coupling can be completed by using a series connected capacitor. An ideal capacitor blocks the DC power voltage, and passes high frequencies for a wide range of terminating impedance values. Consider a coupling capacitor C terminating into a resistor R, constituting a high-pass filter. The -3dB (half-power) cut-off point fLF would be dependent on component values given as (3.1): 1 2RC

fLF =

(3.1)

The suitability of a certain coupling capacitor depends on the impedance of the load into which it terminates. When transmitting data into the power cables, the equivalent impedance will be dominated by all connected parallel loads. On another side, when receiving data from the cables, the receiver input impedance stays constant and its value depends on the receiver design. For instance, take 0.5µF as the value of the capacitor, when measuring data received from the power line, assume the terminating impedance is 1M . As result, in the -3 dB cut off point, the frequency will be 0.318 Hz. However, when transmitting a signal into the power line, the access impedance can be very low. Let's say an equivalent impedance is about 0.1, and then it yields a cutoff frequency at 3.18 MHz [37]. Considering both the receiver and transmitter, only frequencies above 3 MHz can be injected efficiently. Another parameter needs to be considered is the frequency response of the coupling capacitor itself. For a capacitor, it comes with inductance which is primarily introduced by the physical dimensions including the leads. The lead inductance can be calculated by equation (3.2) [43]: 2L ) - 0.75](nH ) r 22

Ldc = 2L[ln(

(3.2)

where Ldc is Low Frequency or DC inductance; L is wire length in cm; r-wire radius in cm. Acting as coupling capacitor, it should operate predictably over the frequency range of interest, therefore its self-resonant point should be much higher than the upper limit of the communication frequencies. In the prototype design, given transmission frequency 130KHz and assume transmission line impedance at 0.1, based on (3.1) capacitance should be 12.24µF . So a 10µF capacitor is selected for prototype coupling interface design.

3.2.4

Transmit Signal Path:

In transmit circuit, the FSK transmit signal is generated on the F SK OU T pin from the Cypress PLC device. It has a higher amplitude, approximately 1.55 Vp-p. For low DC power circuit board, the signal can be directly applied into an amplifier circuits without unnecessary transmit filtering circuits. It helps to simplify the circuit design and save assembly cost [24].

Figure 3.5: Transmitter Diagram

As the diagram shown in Fig. 3.5, the signal connected to op-amp inverting input through 23

resistor R10 . As well, it brings a feedback from the amplifier output with resistor R11 . This consists an inverting amplifier circuit. Consider the amplifier has higher input impedance and the current draw through either inverting terminal or non-inverting terminal is close to zero, for the signal itself, the amplifier overall gain is: Av = -(R11 /R10 ). Since R10 and R11 have the same value and equal to 620, it results a 1× gain for the signal. Consider the DC circuit effects, we have VI - V- = V- - VO , V- = V+ = VBAT × (R8 /(R8 + R9 )), Design R8 = R9 = 10k , then V- = V+ = VBAT /2, The output voltage VO will be: VO = 2V+ - VI = VBAT - VI . (3.3)

Two transistor NPN and PNP after op-amp consist a pull and push amplify circuit. It enhances the transmitter driving capability for the possible low impedance loads presented on the power lines. Capacitor C3 provides DC isolation for the transmitter on the device side. Then signal will pass to the next coupling circuits.

3.2.5

Receive Signal Path:

Once PLC signals pass through the line and reach the receiver, in Fig 3.6 the resistor R16 provides a signal input impedance for the receiver. The combination of capacitor C 8(1.5µF ) and inductor L1(1mH ) consists a signal selective filter. Given transmitting carrier frequency 130KHz , parallel connected C 8 and L1 show infinite impedance to transmitting frequency.

24

Figure 3.6: Receiver Diagram

For frequencies other than 130KHz , this filter appears a very low impedance to the ground and eliminates some unwanted noise. Capacitor C 23 works as DC isolation and only allows AC signal passing to the receiver. These signals include relatively high amplitude transmitter signals, and any signals coupled in from the line. Then diodes D3 and D4 are able to limit the high amplitude signal going to the receiver and protect the receiver circuitries. Finally resistors R14 and R15 set the Vcc/2 as bias voltage which is required on the receive pin for the PLC device.

3.2.6

Power Circuits:

The Transmitter and Receiver need to be powered by battery as discussed in the previous sections. However the transmitting signals go through the same power path. If add the battery power directly into the transmitter or receiver circuits, the PLC signals could be transmitted back on the path and affect the power supply. It eventually impacts the transmission signals. In order to avoid the negative feedback, some filter components are added in the main 25

power input to help filter out the known transmission signals. See Fig. 3.7.

Figure 3.7: Power Filter Circuit

For DC power, inductor L has zero impedance. For the given 130KHz PLC signal, based on formula (3.4), (3.5) XC = 1 2f C (3.4)

XL = 2f L

(3.5)

Inductor L generates about 384 impedance to against the signal back from transmission circuits. Capacitor C has 0.006 impedance. It helps filter out the PLC signal. Diode D rectifies the voltage when AC power is present to the line. All these components together maximumly reduce the signal feedback and other noise impacts to the communication circuits.

3.3

Performances

To verify the prototype performance, two 6VDC Alkaline Batteries (Energizer Max) are series connected to provide 12VDC. The master controller and slave controller are connected to the battery through 18GA cables as shown in Fig. 3.8. The cable length L1 (master unit to battery) and L2 (slave unit to battery) are the same. Signal is generated by the master control board and goes through the power cable L1. After

26

Figure 3.8: Prototype Wiring Connection Layout

signal passes battery, it continues to pass through the power line L2 and reaches the slave controller. To check on overall system performance, functionality verification, signal analysis and transmission capability are being considered.

3.3.1

Functionality Verification

Master controller generates the signal. Accordingly, slave controller follows the command from the master unit. As presented in the control logic on flashing light, there are two critical control parameters, rotating direction (named "flash" in the codes;1- left rotating, 0- right rotating) and rotating speed (named "span"; value from 0 to 0xff). The PIC micro-control unit monitors the rotating switch status, and switches "flash" value (either 1 or 0) once the switch is pressed. Meanwhile the PIC converts analogue voltage (0-5V) inputs from the potentialmeter to a digital value and passes it to "span". "span" simply provides a value as time delay. Here is a glance of the main program codes: void attribute ((interrupt)) T 1Interrupt(void) {if (IEC 0bits.T 1IE &&IF S 0bits.T 1IF ) {P ORT Bbits.RB 7 =P ORT Bbits.RB 7; N op(); N op(); 27

times = times - 1; if (times == 0) {times = span; if (P ORT Bbits.RB 7 == 1) {movbit = movbit + 0x80; N op(); N op(); //keep RB7 status P ORT B = movbit; movbit = movbit - 0x80; } else{P ORT B = movbit; N op(); N op(); } cycles = cycles - 1; if (f lash == 1) //left rotate {movbit = (movbit 1); N op(); N op(); if (cycles == 0 movbit > 16) {cycles = 5; movbit = 1; } } else //right rotate {movbit = (movbit 1); N op(); N op(); if (cycles == 0 movbit == 0) {cycles = 5; movbit = 0x0010; } } }

IF S 0bits.T 1IF = 0; N op(); N op(); // clear Timer1 interrupt flag T M R1 = 0x5000; N op(); N op(); //delay time settings } return; }

Every time when a different light is turned ON, PIC controller sends the updated lights status to the PLC chip via a I 2 C series link. The I 2 C bus is two-wire serial interface, one wire is clock line"SCL" and another one is data line"SDA". I 2 C employs comprehensive protocol to ensure reliable transmission and reception of data information [26]. In prototypes, to ensure the data could be successfully transferred from PIC controller

28

to PLC device, following steps are executed. They are: enable the I 2 C module; check the module status; write data into transmit buffer; transfer data and verify the feedback. Refer to the brief flow chart diagram in Fig. 3.9.

Figure 3.9: I 2 C transmitting diagram

When PIC controller reads message from other device via I 2 C , it involves steps as shown in the diagram (Fig. 3.10). They are: initiating read function; reading data from other device; saving it into a temporary memory I2CRSR; moving the message to receiver buffer I2CRCV; taking the message and cleaning the buffer memory. When the message is successfully received, micro controller converts the data to relevant flashing lights on the slave board. If there is no message lost during transmission, the operation of the flashing lights in slave unit should be the same as the master unit's. 29

Figure 3.10: I 2 C receiving diagram

3.3.2

Signal Analysis

For further evaluate the communication performance, signals have been recorded at each transmission stage. It provides a better view and easy understanding on how the control system works. Transmitter On the transmitter side, once the micro-controller requires the PLC device to send a message, on the device pin F SK OU T , a waveform contained with 133KHz/130KHz signals will be generated. In Fig. 3.11, when there is no message transmitting, F SK OU T output remains at high and equals to device power input VDD which is about 5.5V DC . Once the device starts transmitting data, the signal waveform has peak to peak amplitude of 4V DC and runs between 0 to 4V DC . 30

Figure 3.11: FSK OUT Signal Overview

From Fig. 3.11, each packet lasts about 45.5ms. The PLC chip comes with Carrier Sense Multiple Access (CSMA) protocol. Before the transmitter attempting a transmission, it provides the random selection of a period between 85 and 115ms (seven possible values in this range) for verifying if Band-In-Use (BIU) indicates the line is available. After completing a transmission, the application should wait 125 ms before the next transmission [22].

Figure 3.12: FSK OUT Signal (VI ) Waveform

Fig. 3.12 is a detailed view of the signal waveform out of pin  F SK OU T  . The device basically generates a 50% ramp waveform for message transmission. Period of t = 7.7µs or 130.4KHz represents data '1', and period of t = 7.5µs or 133.3KHz represents to data '0' [22]. 31

As per previous analysis, signal waveform VI is boosted up through the amplify circuits. As discussed before, the signal prior the coupling circuit is VO = VBAT - VI (see equation 3.3). It means the VO is opposite of VI and operating range is mirrored from the line of VBAT /2. See Fig. 3.13.

Figure 3.13: Waveform (VO ) before Coupling Capacitor

Figure 3.14: Transmitting Signal Feedback Power Input

In the VO waveform, noise is added into the signal. This is mainly contributed by the transmitting signal itself. The transmitting signal not only goes through the power cable to reach the receiver, but also comes back to affect the transmitter power input circuits. Even with the filter circuits, some waveforms are still able to pass through and come back to the 32

transmitting circuits. See Fig. 3.14, these small noise added on the power supply will be amplified by the transmitting circuits and result in the final waveform of VO . Once the signal VO passes over the coupling capacitor, depending on the battery characteristics, the message waveform will vary. Apply Fourier transform and the signals frequency remains the same, see Fig. 3.15. As expected, low amplitude noise had been added in. As shown in Fig. 3.16, the shape of final waveform submitted on the power line has been dramatically changed.

Figure 3.15: Signal Spectrum of Waveform after Coupling Capacitor

Figure 3.16: Waveform after Coupling Capacitor

33

Receiver Once signal passes the battery, it goes through the cables to reach the receiver, the coupling capacitor isolates the DC signal and passes the message signal to the PLC device for analysis. In receiver circuits design, Resistor R14 and R15 set the receiver bias voltage at V cc/2 and equals to 2.75V DC . The signal received is regulated in the acceptable range required by the receive pin for the PLC device.

Figure 3.17: Receiver Signal after Coupling Capacitor Overview in 1 sec

Figure 3.18: Receiver Signal Waveform after Coupling Capacitor

From the waveform records (Figs. 3.17, 3.18, 3.19), even though the signal is still available and the frequency remains the same, the useful signal itself is getting weaker and weaker. Under the lab test condition (which is 100mm 18GA cables for each controller and no other 34

Figure 3.19: Receiver Signal Spectrum of Waveform after Coupling Capacitor

components connected into the network), master controller and slave unit can successfully communicate with each other. However, in order to verify reliability of prototypes communication, more tests are being performed in next section.

3.3.3

Transmission Capability

To better understand how the communication goes between the master and slave controller, each flash light is marked with unique label LT 1 to LT 5 in the software. Whenever a flash light is lit up, it is recorded one time. When test starts, the master controller keeps rotating the flash lights till every light has been recorded 1000 times. Then it stops and turns off all the lights at the same time. By checking the number of times recorded for lights flashing on the slave controller, we can find out how many signals are missing during the entire communication test. In ideal condition, no message lost, it should count 1000 times as well. (Note: for nonstop transmission, system is programmed in the unacknowledgement mode.) The communication liability tests are conducted through 1. Changing the cable length (from 250mm to 2000mm); 2. Varying LED light switching time (interval from 0.4 sec to 1.5 sec); 3. Adding additional electrical loads. 35

For all the evaluation tests, power cable either from master controller or slave controller to the battery are kept the same length. Over hundreds of tests are being performed, the results are presented as a percentage of successful transmitting rate. They are summarized in Table 3.1. Generally, transmission performance deteriorates when cable becomes longer or LEDs flash faster. 1.5 sec 250mm 99.9% 500mm 95.0% 800mm 87.0% 1000mm 68.0% 1500mm 50.0% 2000mm 35.0% 1.0 sec 99.9% 93.5% 84.0% 66.0% 49.5% 30.0% 0.6 sec 0.4 sec 99.8% 99.6% 91.0% 88.0% 80.5% 75.0% 65.2% 60.5% 47.0% 43.8% 27.0% 20.0%

Table 3.1: Prototype Liability Test - Cable Length vs. LED Switching Speed

In the additional loads and noise tests, two relays and one solenoid are selected to be parallel connected into the circuits. All these devices are continually being turned on and turned off for every two seconds. Test results show that the extra loads can further decrease the transmitting performance. When the cable length is less than 1000mm, the good transmission rate drops down 5% - 8%. When the cable length is over 1000mm, the performance is reduced more, by average 10% - 15%.

3.4

Conclusion

Proved in above tests, the selected PLC chip can communicate via battery powered DC lines. Since the chip has already been embedded with a transceiver package. It is easier to be integrated into control system and can be built in a short period time. However, for some particular application (like Battery DC Line) or system with special requirements, these off-the-shelf products have their limitations and are lack of flexibility. Applying existing chip to the battery DC lines, the main concerns are short transmission range and being vulnerable to any noise/ interference. This is because the chip is usually 36

designed for AC applications. The low frequency transmission signal will be getting weaker through the line. The signal is easily buried in other noise during the communication and causes the critical transmission data lost. Detailed review and modification on the chip/ device is needed before it could be applied on the DC power lines for reliable and accurate communication. By performing all these tests, we find out that in order to build robust automotive DC power line communication network, there are two important areas need to be addressed and analyzed first. · Vehicle DC line noise analysis. By knowing the possible noise feature on the line, it will assist us to select proper carrier frequency which has less noise impacts from other power component loads along the DC line. · DC line characteristics analysis. Battery powered DC line appears to have special "lossy" characteristics. Detailed analysis on the line performance will provide guidelines to the communication design and carrier frequency selection.

37

Chapter 4 DC Line Characteristics
To optimize data transmission in communication system , a good knowledge of the channel properties is necessary. It becomes more important for systems with data transmissions over embedded power lines. The operation of electric systems such as windshield wipers and relays usually not only generate pulses, which will be added with the radio electric noise and presented on the line, but also widely modify the total load impedance of the power line [30]. Except the possible channel noise, in DC power system, battery has very unique characteristics and is considered as a key factor when selecting a carrier frequency. Different rating battery will result in different communication performance. In this chapter, we will focus on channel characteristics analysis which includes noise analysis and battery modeling.

4.1

Channel Noise Analysis

Any communication system consists of three main essential parts. They are transmitter, transmission channel and receiver. In reality, variable unknown factors could interact on the process of signal transmission. They could occur at any time or exist in entire transmission band. For instance, certain amount of transmission loss or attenuation happens in every transmission channel. As a result, the signal power progressively decreases while distance increasing. 38

Except attenuation which is inherited from physical transmission media, there are more serious effects to the transmitting message such as signal distortion, interference and noise. These are more likely to alternate the shape of the transmission signals and cause difficulties to recognize the signals at the receiver side [27]. Distortion is imperfect system response to the desired signal. Since distortion is caused by the system, it may be corrected or at least reduced by improving system design. Unlike interference or noise, distortion disappears when the transmission signal is turned off. Different from distortion, interference is contamination by extraneous signals from other sources - such as other transmitters, power lines and machinery, switching circuits, etc. Comparing with transmitting signals, if interfering signals occupies different frequency band, then appropriate filtering could help removing the interferences. Regarding to the noise, it refers to random and unpredictable electrical signals which are produced by natural processes both internal and external to the system. When such random variations are superimposed on an information-bearing signal, the message may be partially corrupted or totally destroyed. Filtering could reduce certain noise contamination, but it it cannot help to eliminate them all. Because of this, noise constitutes one of the fundamental limitations for communication system design. Either interference or noise is harmful for the transmitting message, it alternatively increases receiver design cost for accurately detecting information signals. This is more particular serious if unknown noise/ interference has the same/ similar performance as the transmitting signals. A good knowledge of any possible interference along the line and the properties of the channel noise is very important. It helps optimizing the system design and enhance communication efficiency. In the following study, we will focus on the performance of some typical automotive electrical components, as well the possible interference/ noise appears on the DC lines. First let's have a quick look at some of the methods we are going to use in signal analysis.

39

4.1.1

Fourier Transform

By using Fourier transform, a signal could be converted from time domain to frequency domain. Some difficult problems in time domain become quite clear and easier in the frequency domain. According to Fourier Transform, a signal could be projected into an infinite sum of sine and cosine terms for a periodic signal with period T0 . A general expression of Fourier Series is shown in equation (4.1):
  n=1   n=1

x(t) = A0 + where : = and A0 =

An cos(nt) +

Bn sin(nt);

(4.1)

2 = 2f T0

(T0 is period of signal x(t));

1  T0 /2 x(t) cos(nt)dt; An = T0 -T0 /2 1  T0 /2 Bn = x(t) sin(nt)dt; T0 -T0 /2

1  T0 /2 x(t)dt; T0 -T0 /2

(n = 1, 2, . . .) (n = 1, 2, . . .)

The Fourier series could be simplified with the expression of complex exponentials as (4.2), which is in the form of Fourier transform,

 -



x(t) =

X (f ) exp(j 2f t)df ;

X (f ) =



-

x(t) exp(-j 2f t)dt.

(4.2)

4.1.2

Window Function

Fourier transform analysis is a powerful tool for analyzing a stationary deterministic/ predictable signals. However, most signals encountered in practice are random and can not be predicted in advance. For the random signals, blindly applying Fourier transform might not be helpful on the signal analysis because the Fourier transform of the signal may not exist[33].

40

In order to analyze random signals, we need to have a method to find out the spectral content of random signals and sequences. One of the solution is called short term signal analysis which has been traditionally introduced to deal with the non-stationarity of real world signals. This approach usually applies analysis on "snapshot" of the signal, the interval should be short enough in which we could consider the generating system to be "stationary". Splitting signal into shorter frames through a process called signal segmentation. Then applying stationary analysis tools, such as Fourier transform, to analyze each segment [31]. For signal segmentation, we simply take a window of the signal over some defined interval. A window based on raised-cosine shape called the Hamming window could avoid the distortion caused by a rectangular window which has constant value "1" in the defined interval and "0" in the rest area. The mathematic expression of Hamming window is shown as,  [n] = 0.54 - 0.46 cos where N is the number of samples in the section. Comparing with the negative effects contributed by the spectrum of a rectangular window ( sin(x)/x or sinc(x) shape), Hamming window has better performance which generates a spectrum with a narrow central lobe and small side lobes [34].
(

2n N -1

)

(4.3)

4.1.3

Autocorrelation

Selecting a right window size is the key factor for successfully applying Hamming window function. To analyze random signals, besides the window function, autocorrelation function of a signal provides useful information and enables us to analyze the random signals frequency content. Autocorrelation function describes the general dependence between the values of the sample signal at one time and the values of the same signal at another time. Consider a

41

sampled signal (i.e. discrete sampling signal), the autocorrelation is defined as (4.4): Rgg (m) = 1 N
N- m+1  n=1

g (n)g (n + m - 1)

m = 1, 2 , . . . , M + 1

(4.4)

where M is the number of lags. For a given signal y (t) = x(t) + n(t), how to decide whether or not there is message x(t) present inside the detected signal y (t)? One simple way to make this decision is to correlate y(t) with itself which is autocorrelation of the signal [35]. 1  T /2 [x() + n()][x( +  ) + n( +  )]d = Rx ( ) + Rn ( ) + 2Rxn ( ) T - T /2

Ry ( ) =

(4.5)

Naturally occurring noise is often un-correlated with deterministic signals. It is also often uncorrelated with itself. Therefore, Rxn ( ) in equation (4.5) approximately equals to zero and Rn ( ) will be a spike if n(t) was white noise. That means if Ry ( ) exhibits a shape which is more than simple a spike and/or a negligibly small background noise, then the present shape infers that a true message is received. Rx provides an indication on how strongly the signal values at two different time instants are related to each other[35]. After knowing that autocorrelation function is able to display true message in a mixed signal, the question left is how to convert the autocorrelation result to reflect the actual signal x(t). As autocorrelation property states that the autocorrelation function of a periodic signal is also periodic [33]. if x(n) = A sin(0 n + ), then Rxx (m) = A2 /2 cos(0 m)

Therefore if 0 = 2/N , then Rxx (m) is periodic with periodic N. To illustrate the autocorrelation function, we computer two sinusoidal signals X1 (fX 1 = 150Hz ), X2 (fX 2 = 50Hz ) and a random signal X3 , Y is the sum of all three signals. Assume the sampling frequency fs is 5KHz and sample size N = 1024. X1 = 0.7 sin(2 150t); X3 = randn(N ); 42 X2 = cos(2 50t); Y = X1 + X2 + X3 .

Figure 4.1: Autocorrelation

Autocorrelation functions of each signal are shown in Fig. 4.1. As the result shows, autocorrelation of noise X3 is simply a pulse function. Autocorrelation of X2 and X3 in Fig. 4.1 show constant duty cycle. Take graph of X2 as an example. The result shows one duty cycle with period of m = 100 lags. Considering the sampling frequency fs = 5KHz , the detected signal frequency should be fX 2 = 1/(m × (1/fs )) = 50Hz . This matches the preset X2 frequency. Direct observing method is good for a simple periodic signal. Once the signal is getting complicated, for instance autocorrelation of Y (the mixed signal) in Fig.4.1, the direct observing method becomes inefficient. Further analysis is required. Based on Wiener-Khintchine theorem, power spectral density (PSD) of a WideSense Stationary (WSS) random process is the Fourier transform of the corresponding autocorrelation function. Or the autocorrelation is the inverse Fourier transform of the PSD [32].

43



Sgg (f ) =



-

Rgg ( ) exp(-j 2f  )d

(4.6)

In case of discrete sampling signals:
  n-

Sgg (f ) =

Rgg [n] exp(-j 2nf )

(4.7)

It means by applying Fourier transform to autocorrelation function of a given signal , we are able to transfer the signal into frequency domain for spectrum analysis. Here we take autocorrelation of Y (the mixed signal) in Fig. 4.1 as an example. Apply Fourier Transform, in Fig. 4.2, frequencies of X1 (150Hz) and X2 (50Hz) are highlighted in the spectrum of Y.

Figure 4.2: Fourier Transform of Autocorrelation Function

4.1.4

Short Time Fourier Transform

As for the above mentioned methods using on signal analysis, they are considered as powerful tool to study signals spectrum. The graphic of Frequencies vs. Magnitude clearly shows the result whether certain frequencies exist or not. However, none of the method can be used to find out when the signal occurs, when it stops and how the signal changes along the time line. For instance, let us assume signals X1 , X2
 = 0.7sin(2 150t1 ) in the previous example have different operation time. , assume signal X1

44

 where t1  0.0512s (or starts at 257 sampling point), and X2 = cos(2 50t2 ) where 0 

t2  0.1536s (or stops after 768 sampling point). X 3 is still a random signal and Y  =
  X1 + X2 + X3 .

Apply Fourier transform to signal Y  , see Fig. 4.3, the new signal Y  has similar spectrum as original signal Y . Both contain the main frequencies 50Hz and 150Hz in their spectrum. By only comparing with Fourier transform itself, it's hard to tell the difference between Y 
  and Y even though X1 and X2 have different start and stop time in Y  .

Figure 4.3: Spectrum of Y' has similar spectrum as original signal Y

For better understanding on the signal characteristic, it is good to know more details about the signal such as the starting time, duration, etc. We can conduct analysis called Short Time Fourier Transform (STFT), which is a combination of previous analysis to present signal into a more dynamic way. In order to introduce the time line into the spectrum analysis, based on window function theory, separate the time line with a moving window (Hamming Window). In each time segment, Fourier transform will exam the frequency content of the signal and generate 2-D

45

Figure 4.4: STFT, the spectrogram of Y'

time-frequency distribution called spectrogram [38]. The results could also be presented in a 3-D format for more direct visual impression and analysis (see Fig. 4.4). The image is generated with Hamming window at time duration of 0.0512 second (or 256 sample points) and 200 overlapping point. The different color in color bar indicates the signal intensity
  50Hz are highlighted as continue line with heavier 150Hz and X2 level. Time duration of X1

46

red color (higher magnitude) in the spectrogram figure. STFT is a simple way to presents non-stationary signal frequency trends. However, due to limitations on the window function and Fourier transform, any signal whose time duration is smaller than the time duration of the window will "disappear" after transformation. Therefore, signal STFT results are not as good as it is in either time or frequency domain [39].

Each analysis method has its own advantages and disadvantages. Considering the fact that the signals are unknown and non-stationary, all the above analysis methods (including Fourier Transform, Hamming Window, Autocorrelation function and STFT) will be carried out in the following study to analyze measured signal waveforms. By comparing the results, we try to find out if there is any possible and predictable or noise, which could happen along th vehicle DC power lines.

4.2

Interference & Noise Measurement

Vehicle is an extreme complex system which involves thousands of different components. Considering electrical parts alone, in any new generation vehicle, the total number of the parts will be over one hundred. When any of the electrical load is energized, it generates certain noise and passes to the power circuits. For interference and noise analysis, ideally it is better to test the electrical characteristics of every single component in a vehicle to have a better understanding on possible interference and noise impact to the transmitting signals along the DC line. However, this approach requires tremendous efforts in testing. To be more practical, we classify the electrical components into three categories as resistive load, inductive load, and capacitive load. Then select some typical components from each category for evaluation. Any complicated product, it could be analyzed as combination of these three basic types.

47

4.2.1

Resistive Load

In a vehicle, resistive components include all the exterior and interior lights, motor speed control resistors, conducting cables (depending on the length, the cable resistance mainly affects the power and signal transmission). Generally resistive load consumes partially/ fully converts the electrical power to heat depending on the application. Thermal energy causes microscopic particles to exhibit random motion. This random motion of charged particles such as electrons could generate random currents or voltages which affect the stability of the transmission line. Such impacts is called thermal noise in communication [27]. Thermal noise can be modeled by a voltage source representing the noise of the non-ideal resistor in series with an ideal noise free resistor. For a given bandwidth, the root mean square (RMS) of the noise voltage Vn , is given by (4.8) [29]:


Vn =

4kB T Rf

(4.8)

where kB is Boltzmann's constant in joules per kelvin (1.38 × 10-23 ), T is the resistor's absolute temperature in kelvins, and R is the resistor value in ohms (). Then the noise dissipates power will be: (Vn )2 = 4kB T f R

P =

(4.9)

Consider the noise generated at the resistor can transfer to the remaining circuit, and the maximum noise power transfer happens when the remaining circuit equivalent resistance is matching the noise generating resistance [29]. In this case only half of the source voltage drops across any one of these resistors, resulting noise power is given by (4.10): PM = (Vn /2)2 = kB T f R (4.10)

Signal power is often measured in dBm (decibels relative to 1 milliwatt). Convert P from watts to dBm (4.11) : PdBm = 10 log(kB T f × 1000) (4.11)

48

Under room temperature 25  C (298  K), the noise power at different bandwidths are calculated and listed in Table (4.1) for reference: Bandwidth (f ) Thermal Noise Power 1 Hz -174 dBm 100 Hz -154 dBm 1 kHz -144 dBm 100 kHz -124 dBm 1 M Hz -114 dBm 2 M Hz -111 dBm 10 M Hz -104 dBm 20 M Hz -101 dBm
Table 4.1: Reference Thermal Noise Power Chart

The resistive thermal noise power increases along with the bandwidth increasing. When plotted the thermal noise magnitudes versus frequencies, it has approximately performance as a white noise, which has a horizontal line of constant value in its spectrum. For overall analysis on system performance analysis, adding a white noise to simulate the impacts of the thermal noise.

4.2.2

Inductive Load

Typical inductive loads in vehicle are relays, solenoids, electrical energized valves, clutches, etc. They all consist of electromagnetic coil. Electromagnetic coil is formed when conductor (usually an insulated solid copper wire) is wound around a core to create an inductance or electromagnet. Inductors store energy in magnetic field which is produced by the current through the windings. The stored energy in an inductor tries to maintain constant current through its windings, which means inductors always oppose the changes of current. In DC circuit, a coil shows inductance characteristics at the moment when it's powered on or de-energized. A fully discharged inductor has zero current through. Initially it acts as an open-circuit. When attached it to a power source, the coil tries to maintain the status at zero current, the maximum voltage will be added on the coil right away. Over the 49

time, the inductor's current rises to the maximum value and the terminal voltage decreases correspondingly. Once the current draw becomes steady, it generates constant magnetic force through the coil and inductor itself simply acts as a resistor (or a short circuit for a "perfect" inductor) in the circuit. See coil power on voltage curve in Fig. 4.5.
Signal Graph in Time Domain (Solenoid Coil Power ON, Fs=2.5MHz, COLC0001) 14 12 10 8 6 4 2 0 -2

Amplitude (V)

0

0.02

0.04

0.06

0.08

0.1 0.12 Time (sec)

0.14

0.16

0.18

0.2

Figure 4.5: 15W Solenoid Power ON, Graph of Voltage cross the Coil

On another side, when turning off the power of a fully charged inductor, it tries to maintain the coil at its maximum current draw. Then the coil acts as a power supply which converts its stored electromagnetic energy to electrical power back into the circuit. However this new "power source" has an opposite polarity to the original supply source. As a result, at the power off moment, the voltage on the line has a huge drop. Shown as Fig. 4.6. Once the energy stored by coil is consumed up, both the coil voltage and current will come back to zero. In DC circuit, a coil could be modeled as a pure inductor (L) is series connected to a resistor (R). Its time duration constant  ( = L/R; where L in henrys, R in ohms) will determine how long an inductor could be fully charged or discharged. It reflects the amount of time for current values to change approximately 63 percent from their starting values to their final values in a transient situation. So by knowing a coil starting and final value, 50

Signal Graph in Time Domain (Power Contactor Power Off, Fs=10MHz, SOLC0003) 300 200 100 0 -100 -200 -300 -400 -500

Amplitude (V)

0

0.005

0.01

0.015

0.02

0.025 0.03 Time (sec)

0.035

0.04

0.045

0.05

Figure 4.6: Power Contactor Turned OFF, Graph of Voltage cross the Coil

formula (4.12) helps to determine the inductor current/ voltage values during the transient. 1 x = (xf - xs ) 1 - exp(t/ )
( )

(4.12)

Where xs and xf represent the start value and final value respectively. In our study, typical vehicle coils were selected for evaluation. They are relays, solenoid valve and contactor. As per above analysis, at the moment a coil is either powered ON or turned OFF, the voltage crossing the coil has significant change. Such change could cause negative impacts to transmitting message along the same power line. To determine the possible impacts, all the selected parts are tested with different sampling frequencies (100MHz, 50MHz, 25MHz, 10MHz and 1MHz). We select some of the test results and present in Fig. 4.7 and Fig. 4.8. 1. MAT COLC0001; 15W, 12VDC coil power ON, Fs=2.5MHz, V=5V 2. MAT SOLC0001; Power Contactor power ON, Fs=2.5MHz, V=5V 3. MAT RLYC0003; Relay coil power OFF, Fs=10MHz, V=20V 4. MAT SOLC0003; Power Contactor power OFF, Fs=10MHz, V=100V 51

Signal graph in Time domain of MAT_COLC0001 14 12 10 8 6 4 2 0 -2

Amplitude (V)

0

0.05

0.1 Time (sec)

0.15

0.2

Signal graph in Time domain of MAT_SOLC0001 15

10

5 Amplitude (V)

0

-5

-10

-15

-20

0

0.05

0.1 Time (sec)

0.15

0.2

Figure 4.7: Coil Power ON Signal Analysis

By comparing all the test results, we find that there is no interference or noise during coil continue operation. Noise happens at the time when a coil is either powered ON or turned OFF. Moreover, because he noise caused by coil power-off has much higher magnitude, the coil power-off affects the communication on power circuit more in a negative way. From spectrum point of view, it shows the similar result. The impulse noise caused by voltage sudden change contains very wide bandwidth. At the time when coil is powered ON, the frequency intensity starts getting weak when it is over 1MHz. However, at the time when coil is powered off, the frequency shows strong magnitude from zero Hertz to the sampling frequency.

52

Signal graph in Time domain of MAT_RLYC0003 10 0 -10 -20 Amplitude (V) -30 -40 -50 -60 -70 -80

0

0.01

0.02 0.03 Time (sec)

0.04

0.05

Signal graph in Time domain of MAT_SOLC0003 300 200 100 0 -100 -200 -300 -400 -500

Amplitude (V)

0

0.01

0.02 0.03 Time (sec)

0.04

0.05

Figure 4.8: Coil Power OFF Signal Analysis

4.2.3

DC Motor

Motor stands an important role in vehicle control system design. It drives all the motion control such as windshield wiper, coolant pump, HVAC blower and adjustable mirror. There are many different types of DC motor. By far the most common used in vehicle applications are permanent-magnet brushed and brushless motor. The main difference between these two types of motor is the communication system. The brushless DC motor has an electronic control system which automatically changes the power into different winding circuits. However, the brushed DC motor still comes with commutates and brushes, which required to be physically contacted in order to switch the power. Because of the system difference, the brushless DC motor has longer life time. And theoretically it will be out of

53

service till the bearings are worn out. Besides longer operation time, brushless motor has other advantages comparing to the brushed motor. First, it has much less level of operation noise, no electrical sparks and inrush current happened at the starting point. Second, it is embedded with programmable firmware which ensuring easy control with better performance. Overall, brushless DC motor has less negative impact on the other circuits in the system. Therefore, in terms of noise analysis, we select brushed DC motor instead of brushless motor. (Note: in the following discussion, "motor" or "DC motor" refers to "brushed DC motor") The motor commutation system is composed of brushes, commutator and rotor windings. The way the commutation system works is that when power is applied, the polarities of the energized winding and the stator magnet(s) are misaligned, then the rotor rotates until it is almost aligned with the stator's field magnets. Once the rotor reaches alignment, the brushes move to the next commutator contacts, and energize the next winding. The rotation reverses the direction of current through the rotor winding, leads to a "flip" of the rotor's magnetic field, drives it to continue rotating [40]. When rotor winding moves and crosses through the motor's magnetic field, it generates a voltage cross the motor terminal called Back Electrical Magnetic Force (BEMF). BEMF opposes the drive voltage and is proportional to the speed of the motor. On the electrical side, rotor windings contribute certain value of conductor resistance (RM ) and winding inductance (LM ) to the circuits. When current I flows through, each element has a voltage drop. See figure (4.9): Voltage drops cross inductance and resistance plus BEMF Vemf equals the supply voltage V , given as (4.13) [41]: V = LM dI + RM I + Vemf dt (4.13)

If connect a motor to battery power supply, at the beginning, motor has zero speed and the BEMF will equal to zero. Motor inductance is relevantly small and could be omitted for approximate calculation. Based on equation (4.13), the current draw at the motor start point will be: I0 = V /RM . Motor winding resistance (RM ) has small value, as result the 54

Figure 4.9: Electrical Model of DC Motor

beginning inrush current is a large one. Depending on the motor type, usually surge current is about 3-5 times of the normal operation current [42]. Higher power rating motor, higher inrush current will be. Once the motor starts rotating, BEMF starts building up. The voltage difference (V ) between supply voltage V and Vemf becomes smaller, total current running through motor decreases. Once the motor reaches the maximum speed, the inrush current will come down to normal operation level. As soon as the motor goes into continue operation mode, as previously mentioned, the brushes and commutator keep switching the different winding in order to maintain the motor rotation. As each brush transition from one commutator contact to the next, one coil's field will rapidly collapse, as the next coil's field will rapidly charge up. This whole process only takes in a few microsecond. Reflecting to the voltage, pulses are presented when phase changes during motor operation. By knowing how a brushed DC motor works, we understand due to the phase change, it brings up certain interferences and noise depending on how the motor commutation system is configured and what is the motor speed at the time. As well, the inrush current happens at the time when motor is starting, provides negative inferences to the lines too.

In order to verify any possible impacts from DC motor operation, we selected some typical

55

motor products for evaluation. The samples include: 1, dual shaft three speeds blowers (250Watts and 350Watts) 2, 4" muffin fan (35Watts) 3, 12" and 14" pusher fans (125Watts and 150Watts) These are common components used in vehicle HVAC system for moving airflow. The evaluation includes stages of starting up, normal operation and stop. Again, each sample motor is tested at different sampling frequencies. All the results were recorded for analysis.

Signal graph in Time domain of MAT_BLR_1523 14 12 10 8 6 4 2 0 -2

Amplitude (V)

0

0.1

0.2 Time (sec)

0.3

0.4

0.5

Signal graph in Time domain of MAT_DMFC1201 14 12 10 8 6 4 2 0 -2

Amplitude (V)

0

0.05

0.1 Time (sec)

0.15

0.2

Figure 4.10: DC Motor Application (Blower & Fan) Power ON Signal Analysis

Fig. 4.10 is DC Motor power ON graphics with its spectrum analysis. Similar as inductor "POWER ON", DC motor high inrush at the start moment generates an impulse noise which 56

contains wider spectrum with higher magnitude to impact power line characteristics. 1, MAT BLR 1523; 250W dual shaft blower, Fs=1MHz, V=2V; 2, MAT DMFC1201; 12" pusher fan, Fs=2.5MHz, V=2V Fig. 4.11 is an example of motor powered OFF. Due to inertia, fan or blower wouldn't stop right away when the power is switched off. It always takes a while for motor completely stops rotating. The duration time will vary from one motor to another.
Signal graph in Time domain of MAT_SPF_1407 18 16 14 12 Amplitude (V) 10 8 6 4 2 0 -2 0 1 2 Time (sec) 3 4 5

Figure 4.11: 14" Fan Power OFF Signal Analysis

From the motor power off spectrum graph, at the moment of power off, motor terminal voltage has no big drop due to the motor BEMF. As a result, the impulse noise at power off has much lower magnitude and less impacts as well. As reviewed, when a motor is turned off, it has a slow down period before it completely stops. On its spectrum, this reflects to a section of low frequency noises and the spectrum is usually less than 20KHz. These type of noise would not affect communication with selection of higher carrier frequencies. MAT SPF 1407; 14" pusher fan, Fs=100KHz, V=5V, T=5sec As the last part of the motor analysis, we investigate the possible impacts from its continue operation. Again, multiple sampling frequencies have been used for evaluation. Some of the graphics were listed in Fig. 4.12 and Fig. 4.13 for reference. 1, MAT BLRC0002; 300W dual shaft blower, Fs=10MHz, V=100mV, Speed=2075rpm; 2, MAT BLR 1506; 250W dual shaft blower, Fs=10MHz, V=200mV, Speed=2405rpm; 57

3, MAT DMFC1202; 12" pusher fan, Fs=50MHz, V=100mV, Speed=2070rpm; 4, MAT SPFC1403; 14" pusher fan, Fs=10MHz, V=1V, Speed=2710rpm;
Signal graph in Time domain of MAT_BLRC0002 0.4 0.3 0.2 0.1 0 -0.1 -0.2 -0.3 -0.4 0.8 Signal graph in Time domain of MAT_BLR_1506

0.6

0.4 Amplitude (V) 0 0.01 0.02 0.03 Time (sec) 0.04 0.05

Amplitude (V)

0.2

0

-0.2

-0.4

-0.6

0

0.01

0.02 0.03 Time (sec)

0.04

0.05

Fourier Transform autocorrelation of signal MAT_BLRC0002 160 140 120 80 100 Magnitude (dB) Magnitude (dB) 80 60 40 20 20 0 -20 0 60 120

Fourier Transform autocorrelation of signal MAT_BLR_1506

100

40

0

1

2 3 Frequency (Hz)

4 x 10

5
6

-20

0

1

2 3 Frequency (Hz)

4 x 10

5
6

Figure 4.12: Dual Shaft Blower Continue Operation Signal Waveform Analysis

58

Signal graph in Time domain of MAT_DMFC1202 0.4 0.3 0.2 0.1 0 -0.1 -0.2 -0.3 -0.4

Signal graph in Time domain of MATSPFC1403 4 3 2 1 0 -1 -2 -3 -4

Amplitude (V)

Amplitude (V)

0

0.002

0.004 0.006 Time (sec)

0.008

0.01

0

0.01

0.02 0.03 Time (sec)

0.04

0.05

Fourier Transform autocorrelation of signal MAT_DMFC1202 160

Fourier Transform autocorrelation of signal MAT PFC1403 S 180 160

140 140 120 120 Magnitude (dB) 100 Magnitude (dB) 0 0.5 1 1.5 Frequency (Hz) 2 2.5 x 10
7

100 80 60

80

60 40 40 20 0

20

0

1

2 3 Frequency (Hz)

4 x 10

5
6

Figure 4.13: Fan Continue Operation Signal Waveform Analysis

Based on the signal waveforms and their spectrum analysis, we could find some electrical sparks happen at the time when the motor is changing the phases or brush moves from one

59

commutator section to another. Such electrical sparks generate wider bandwidth impulse noise into the line. Depending on the motor's configuration and speed, the interval between each spark is different. From the sample testing, the time is about 1 or 2 ms (milli-second). Except the sparks, there are some consistent frequencies in both blowers and fans. The observation is mainly around frequencies at 4MHz, 2.5MHz and 1MHz. There are certain differences from one motor to another. Certainly, these frequencies need to be avoided when selecting communication carrier frequency.

4.3

Impulse Noise Statistic Analysis

As for results from operation spectrum analysis on coils and motors, it shows that the impulse noise caused by voltage jump has much wider bandwidth, which most negatively impact on any communication happened along the same power line. To define a better system design, we need to take a closer look at the pulse noise and investigate on its statistic characteristic. As previous test results show, impulse noise mainly happens when devices/ components are either powered on or turned off. Brush motor normal operation also presents continue impulses with higher amplitude. In order to have better view of impulse noise distribution, extensive tests have been carried out for statistic analysis. All these tests are concentrated on operation of some typical components such as solenoid valve ON/OFF, actuator rotating and muffin fan high speed. To have a close to actual vehicle testing environment, we select regular automotive parts to setup the test. These include 18GA GXL cables (power- 1 meter; ground 1.2 meter) used as power lines, ON/OFF toggle switch, tyco VF4 type relay and 12VDC 550CCA battery. The toggle switch is used as a signal input to energize the relay. Once the relay is turned on, it will connect the battery power to the test components via its main power circuit. Ideally, noise measurement system should acquire data continuously during measurements, much like a strip-chart recorder. However, our noise measurement instrument is not capable of performing continuous acquisitions because of the memory and timing limitations[45]. 60

The equipment used for detecting impulses is LeCroy WaveJet 322 Oscilloscope. Instead of having continuous measurement, massive consequent observation windows are recorded for the following analysis.

Fig. 4.14 is a single impulse waveform which is detected from actuator rotation measurement. The impulse with a shape of damped sinusoidal form could be found in almost all the test records. To classify the pulses, two categories are usually considered - single pulse and burst. In general, a burst is defined as a sequence of distinct pulses. Experiment shows a burst usually contain 2 or 3 impulses together [44] [47].
Single Pulse Waveform of Actuator Operation 150 100 50 Amplitude (volt) 0 -50 -100 -150 -200

0

0.2

0.4 time (sec)

0.6

0.8 x 10

1
-6

Figure 4.14: Single Impulse Noise Waveform

Impulses time-domain characteristics have important information relating to the performance of data communication. The key parameters of the impulse noise in time-domain include impulse amplitude, width, and inter-arrival time (IAT). The amplitude together with the width define the impulse energy. The inter-arrival time defines the impulse frequency and, together with the energy, define the impulse noise power[45]. It is difficult to directly process a damped sinusoidal pulse signal and analyze its prop61

erties. In [44], it provides an approach for the analysis. It is based on calculating the cumulative variance of the sampled signal y (k ) during the sampling period time k , expressed as (4.14):
k -1  i=1

[

y (k ) =

-1  1n ( xi ) - ( (xi ))2 n i=0 2

]

(4.14)

where xi is the signal amplitude sampled at the instant i, n is the total number of samples during an observation window.
150 100 50 0 -50 -100 -150 -200

Amplitude (volt)

0
6

0.1

0.2

0.3

0.4

0.5 Time (sec)

0.6

0.7

0.8

0.9 x 10

1
-3

3 2.5 Cumulative y(k) 2 1.5 1 0.5 0

x 10

0

0.1

0.2

0.3

0.4

0.5 Time (sec)

0.6

0.7

0.8

0.9 x 10

1
-3

Figure 4.15: Impulses Cumulative Variance Analysis

See Fig. 4.15, with the presence of background noise, the cumulative variance is a linear function of k , and thus a jump in the line indicates the presence of a pulse. The duration of a pulse or a burst corresponds to the time interval during which the slope of y (k ) is significantly different than the slope of background noise. The upper curve shows a recording for one observation window with a few impulses. The abrupt change of the y (k ) slope on the lower 62

curve shows the instants when a transient phenomenon begins and stops [44]. This graphic analysis has a good indication of when a pulse occurs and how long it lasts. But it has limitation for analysis burst details. Depending on how many impulses involved and the duration of each pulse, the slope of burst on y (k ) might not show the break point between each pulse. Then a burst is considered as a "wider" pulse with longer duration. In order to complete the analysis and maximumly capture all the possible pulses in an observation window, we try a different approach.
80 60 40 20 0 -20 -40 -60 -80 Impulse Waveform Absolute Value Waveform Envelope Threshold

Amplitude (volt)

0

0.1

0.2

0.3

0.4

0.5 0.6 Time (sec)

0.7

0.8

0.9 x 10

1
-6

Figure 4.16: Computer Simulated Impulse Waveform Analysis Steps

In Fig. 4.16, it is a computer impulse waveform (blue solid line waveform) which is used to simulate the impulsive noise waveform in Fig. 4.14. The mathematic expression is: y (t) = - exp(-t/ ) × sin(2f t). To analysis it, we have following steps: · Absolute Value (green dot curve): Instantaneous noise voltage amplitudes are as likely to be positive as negative. To avoid missing counting any possible higher amplitude on the negative side, first, taking absolute value of the impulse waveform and flipping all the negative amplitude to the positive side. 63

· Envelope (red dash curve): Since the impulse is a damped sinusoidal waveform, directly setting up a threshold upon the waveform would NOT be enough to accurately determine the impulse width and IAT. In order to count all the waves as one complete pulse, an efficient way is to envelope the waveform by connecting each peak value together. It greatly simplifies the analysis and provides a good overall view of the pulses under investigation. · Thresholds (light blue dash line): Once the envelope outline is formed, to eliminate other impacts from signals or background noises, an threshold need to be established and only the portion of the envelope which amplitude above the threshold will be take into account. Rest of the waveforms lower than the check line are filtered out. In the following analysis, the threshold is selected based on the equation 4.15: thd = (Vpeak - Vmean ) × 20% + Vmean (4.15)

where Vpeak and Vmean are observed waveform amplitude peak value and mean value respectively. · Calculation: The threshold crosses each envelope and creates two interact time points. One is at up slope t1 and another one at down slope t2 . The time difference (t2 - t1 ) will be the approximate impulse width/ duration. The next impulse up slope timing t1 minus previous t2 will be the inter-arrival time between these two pulses. In the following components impulses analysis, above steps will be followed to capture all the pulses above the threshold in every observation window. All the pulses observed are kept for further statistic analysis. In our statistic study, we concentrate on analyzing the Probability Density Function (PDF) and Cumulative Density Function (CDF) of the impulses peak amplitude, pulse width and inter-arrival time. Usually CDF provides an overall picture about when and how much the parameter has been changed. PDF describes how the value is distributed. In order to better understand the probability distribution, mathematical models and simulation graphs 64

have been applied and presented for statistical characterizations.

4.3.1

Solenoid Impulses- Inductive Load

Switching solenoid ON/OFF operation randomly generates impulse noises. For statistic analysis, there are more than 10K impulses detected and recorded through the solenoid tests. The results have been classified and plotted in PDF and CDF for reviewing (Fig. 4.17): As we could see, the impulses amplitude peak value, width and IAT from solenoid ON/OFF operation has a bell-shaped probability density function. Along the PDF graph, an envelope and computer simulation curves are made for comparison. It appears all the parameters are randomly distributed and have characteristic of Gaussian distribution. The expression of Gaussian waveform is: A (x - µ)2  y= exp 2 2 2 Where µ is mean and  2 is variance of the waveform. Based graphics in Fig. 4.17 and formula 4.16, parameter A, µ and  2 could be estimated as: A µ 2 PDF of Peak Amplitude 0.3 174 20.25 PDF of Impulse Width 0.0046 0.058 5.29E-4 PDF of Impulse IAT 0.12 0.11 1.44E-2
( )

(4.16)

As the result tells the impulses has pretty high amplitude and the average is about 174dBm. The impulse itself has short duration and about 70% pulse width is in range between 0.05µS and 0.1µS . 90% interarrival time between two pulses is less than 0.5µS . Impulses occur very close to each other

65

0.03 peak envelope simulation Percent of Cumulative Probability (x100%) 170 175 180 Solenoid Impulses Peak Amplitude (dBm) 185 1 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 165 165 170 175 180 Solenoid Impulses Peak Amplitude (dBm) 185

0.025 Percent Probability (x100%)

0.02

0.015

0.01

0.005

(a)
0.09 0.08 0.07 Percent Probability (x100%) 0.06 0.05 0.04 0.03 0.02 0.01 0 Impulse Width Envelope Simulation 1 Percent of Cumulative Probability (x100%) 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 0 0.05 0.1

(b)

0

0.05

0.1

0.15 0.2 0.25 0.3 0.35 Solenoid Impulses Width (µS)

0.4

0.45

0.5

0.15 0.2 0.25 0.3 0.35 Solenoid Impulses Width (µS)

0.4

0.45

0.5

(c)
0.45 1 0.4 0.35 Percent Probability (x100%) 0.3 0.25 0.2 0.15 0.1 0.05 0 Percent of Cumulative Probability (x100%) Pulse IAT Envelope Simulation 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 0 0.5 1

(d)

0

0.5

1

1.5 2 2.5 3 3.5 Solenoid Impulses IAT (µS)

4

4.5

5

1.5 2 2.5 3 3.5 Solenoid Impulses IAT (µS)

4

4.5

5

(e)

(f)

Figure 4.17: Solenoid Impulses Analysis

66

4.3.2

Heater Valve Actuator Operation Impulses

Actuator rotating operation impulses has different distribution as solenoid one. See Fig. 4.18. The pulse peak amplitude has almost "linear" decrease distribution. The PDF starts from the threshold 50dBm and ends around 80dBm. The simulation curve could be expressed as yp = A  (-x + B ), where A=1.17E-3 and B=79.5. The PDF of pulse width close to Gaussian distribution with µ = 0.05 and  2 = 1.23E - 3. Similar as solenoid impulses, the majority pulse width is between 0.08µS and 0.15µS . Its IAT distribution more like exponential curve. The estimated mathematic expression could be as: y = A × exp(-B × x), where A = 0.16 and B = 10. But the time between two pulses are much longer, most are in the range of 0.1mS to 0.4mS . This is related to the nature of actuator slower rotating action for the valve operation.

4.3.3

Muffin Fan Analysis

The selected muffin fan is rated 35W at 12VDC. The rotation of high speed is about 5100RPM (Round per Minute). During the time when fan operates continuely, the impulses happen as the commutation system is switching phases. It generates a periodic impulsive noise, which means it can be predicted that how often an impulse happens. See Fig 4.19, the IAT graph has a few discrete value listed along the time line and the majority IAT is about 1.5mS . On distribution side, the peak amplitude and width are still appears to be Gaussian waveforms. The mean and variance value for mathematic expression are: Peak Amplitude, µ = 72;  2 = 1.69; Pulse Width, µ = 3.2;  2 = 0.36.

As we could find from above analysis summary on different components impulses analysis summary, depending on system configuration and its working condition, the impulse noise appears different from one part to another. However, impulses from the same category components show the similar characteristics.

67

0.045 0.04
Percent of Cumulative Probability (x100) 1

Percent Probability (x100%)

0.035 0.03 0.025 0.02 0.015 0.01 0.005 0 50

Peak Amplitude Probability Envelope Simulation

0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1

55 60 65 70 75 Actuator Operation Impulse Peak Amplitude (dBm)

80

0 50

55 60 65 70 75 Actuator Operation Impulses Peak Amplitude (dBm)

80

(a)
0.14
1.1 Percent of Cumulative Probability (x100%)

(b)

0.12 Percent Probability (x100%) Impulse Width Probability Envelope Simulation

1 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 0.2 0.4 0.6 0.8 1 Actuator Operation Impulses Width (µS) 1.2 1.4

0.1

0.08

0.06

0.04

0.02

0

0

0.1

0.2 0.3 0.4 Actuator Operation Impulses Width (µS)

0.5

0.6

(c)
1 Percent of Cumulative Probability (x100%) 0.16 0.14 Percent Probability (x100%) 0.12 0.1 0.08 0.06 0.04 0.02 0 Impulses IAT Probability Envelope Simulation 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 0.2 0.4 0.6 0.8 1 Actuator Operation Impulses IAT (mS) 1.2 1.4

(d)

0

0.2

0.4 0.6 0.8 1 1.2 Actuator Operation Impulses IAT (mS)

1.4

1.6

(e)

(f)

Figure 4.18: Heater Valve Actuator Operation Impulses

68

0.35 1 Percent of Cumulative Probability (x100%) 95 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 70 75 80 85 90 95 Muffin Fan Operation Impulses Peak Amplitude (dBm)

0.3 Percent Probability (x100%)

0.25

Peak Amplitude Envelope Simulation

0.2

0.15

0.1

0.05

0

70

75 80 85 90 Muffin fan Operation Impulses Peak Amplitude (dBm)

(a)
0.25 Impulse Width Envelope Simulation 1 Percent of Cumulative Probability (x100%) 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 0 2

(b)

0.2 Percent Probability (x100%)

0.15

0.1

0.05

0

0

2

4 6 8 10 12 14 Muffin Fan Operation Impulses Width (µS)

16

18

4 6 8 10 12 14 Muffin Fan Operation Impulses Width (µS)

16

18

(c)
0.09 1 0.08 Percent Probability (x100%) 0.07 0.06 0.05 0.04 0.03 0.02 0.01 0 0 0.5 1 1.5 2 Muffin Fan Operation Impulses IAT (mS) 2.5 3 Percent of Cumulative Probability (x100%) 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 0 0.5

(d)

1 1.5 2 Muffin Fan Operation Impulses IAT (mS)

2.5

3

(e)

(f)

Figure 4.19: Muffin Fan Operation Impulses

69

4.3.4

Vehicle Noise Analysis

The goal of noise analysis is to investigate the possible influence from any electrical components along the power line. Some typical products in automobile were tested previously for classification of continues, periodical, non-periodical, narrow band and broadband disturbances. For a communication system, the non-periodical impulsive noise is very critical. As shown in the impulsive noise distribution analysis, any inductive loads and motors contribute certain amount impulsive noise into the power line during its operation. As a result, the pulses are being added together and impact communication on the same line. Moreover, in a vehicle working environment, engine is a big source for impulse noise too. It is caused by ignitions with a very high probability of occurrence [4]. In order to further understand the possible noise caused by engine operation and the transmitting environment upon vehicle DC power line, two residential vehicles are selected for testing. Both vehicles are conventional combustion engine with six cylinders. One is 1997 Mazda 626 with manual gear, made in Japan. Another is 2005 GM Chevy Malibu with automatic gear, made in Canada.

Tests are divided into two classes, under engine running and under engine shut-down. Due to accessibility, two location were used for detecting the signals, one is at battery terminal ends and the other one at the driver side cigarette ignition power outlet. · Tests without engine operation are proceeded while some common electrical applications are turning ON. They are radio station, windshield wiper and HVAC blower. Measured waveforms and spectrum analysis are shown in Fig. 4.20. 1. MAT MZD 1003; Mazda; Engine OFF; Radio ON (@ 98.1MHz); Fs=100MHz 2. MAT MZD 1015; Mazda; Engine OFF; Radio ON (@ 98.1MHz); Windshield Wiper ON; HVAC Blower High Speed; Fs=100MHz. 3. MAT MLB 1002; Malibu; Engine OFF; Radio ON (@ 98.1MHz); Fs=100MHz.

70

4. MAT MLB 1011; Malibu; Engine OFF; Radio ON (@ 98.1MHz); Windshield Wiper ON; HVAC Blower High Speed; Fs=100MHz. · Another group of tests are done under engine running. The engine speed had been setup at 1000RPM and 2000RPM respectively. Test results are shown in Fig.4.21. 1. MAT MZDA1009; Mazda; Engine @1000rpm; Fs=100MHz. 2. MAT MZDA2009; Mazda; Engine @2000rpm; Fs=100MHz. 3. MAT MLBA1005; Malibu; Engine @1000rpm; Fs=5MHz. 4. MAT MLBA2005; Malibu; Engine @2000rpm; Fs=5MHz. Based on all the test results we get, the most consistent noise along the DC power line are in the range of 5M Hz to 10M Hz . Impulsive noise are mainly caused by motor application, such as HVAC blower and windshield wiper. Frequency of engine impulsive noise is proportionally increased with engine speed. When engine is running fast, the impulse noise happens more frequently. However impulse noise characteristic is different from one car to another. As the results presented, the impulses from the older Mazda has much wider spectrum than Malibu's. For instance, the engine impulse spectrum of Mazda could show up to around 25MHz, but Malibu impulse spectrum only reach around 2MHz. The difference is because that nooise is being considered on the design for new generation vehicle. Some other research have been done on vehicle DC line impulsive noise, which provides information on the noise from different perspective. In [46], two-state hidden MarkovianGaussian noise mode is used for noise analysis. The damped sine waves are concentrated at the frequencies from 3 to 12 MHz. the spectrum of the burst waves are distributed at frequencies from 5 to 40 MHz. In [44] [47] [50], noise is recorded in a moving vehicle. Results show that the peak amplitude of pulses recorded in moving vehicle is much higher than the ones observed in stationary conditions. The most critical moments are when a vehicle is in braking or accelerating. The pulse characteristics are often quite different from one car to another. Additional measurements may be required to conduct to get more comprehensive picture on the pulse characteristics. 71

Fourier Transform autocorrelation of signal MAT\_MZD\1003 120

100

80 Magnitude (dB)

60

40

20

0

-20

0

1

2 3 Frequency (Hz)

4 x 10

5
7

Fourier Transform autocorrelation of signal MAT_MZD_10015 140

120

100 Magnitude (dB)

80

60

40

20

0

0

1

2 3 Frequency (Hz)

4 x 10

5
7

Fourier Transform autocorrelation of signal MAT_MLB_1002 120

100

80 Magnitude (dB)

60

40

20

0

-20

0

1

2 3 Frequency (Hz)

4 x 10

5
7

Fourier Transform autocorrelation of signal MAT_MLB_1011 140

120

100 Magnitude (dB)

80

60

72

40

20

0

1

2 3 Frequency (Hz)

4 x 10

5
7

Figure 4.20: Signal Waveform Analysis with Engine OFF

Fourier Transform autocorrelation of signal MAT_MZDA1009 180

160

140 Magnitude (dB)

120

100

80

60

0

1

2 3 Frequency (Hz)

4 x 10

5
7

Fourier Transform autocorrelation of signal MAT_MZDA2009 180

160

140 Magnitude (dB)

120

100

80

60

40

0

1

2 3 Frequency (Hz)

4 x 10

5
7

Fourier Transform autocorrelation of signal MAT_MLBA1005 160

140

120 Magnitude (dB)

100

80

60

40

20

0

0.5

1 1.5 Frequency (Hz)

2

2.5 x 10
6

Fourier Transform autocorrelation of signal MAT_MLBA2005 150

100 Magnitude (dB) 50

73
0

0

0.5

1 1.5 Frequency (Hz)

2

2.5 x 10
6

Figure 4.21: Signal Waveform Analysis with Engine Operation

Pulses mainly are caused by interference sources rather than randomly generated noise. Besides conducting impulse research on different vehicle, we need to look at researching on components level. It still provides useful information. Depending on how often and how long a component is in operation. The impacts to the line could be estimated and predicted. From above analysis, we could see vehicle DC power line is a very noise channel. In order to build a reliable communication system on the power line, proper carrier frequency, qualified transfer modes, automatic repeat and correct protocol are required.

4.4

Battery vs. Carrier Frequency

In DC power system, battery stands a very important role. It is the power source of the system, which has unique electrical characteristics. Different rating battery results in different communication performance.

4.4.1

Introduction

There are many different brands and models of battery are available in today's market. Most are Lead-Acid batteries. The Lead-Acid battery, also commonly known as a car (or 12V) starter battery, which has been utilized due to its high power and tolerance to abusive conditions for many years. it proved to be a safe and reliable DC source for automotive electrical systems. Because of its better cost/performance ratio, Lead-Acid battery dominates the conventional automobile industry. However, in the next generation of Hybrid Electrical Vehicle (HEV) or full Electrical Vehicle (EV), the Nickel Metal Hydride (NiMH) battery is currently leading the way. Many people believe that NiMH batteries are going to be replaced by Lithium based batteries in the near future once the technology becomes more cost effective [51]. Due to accessibility, our research will be focused on the common Lead-Acid Batteries. Acting as the power source in a vehicle, battery always has its own specialties. Some of the battery's important parameters are listed out for evaluation. 74

In a conventional vehicle electrical system, a battery is simply used to start the engine and power few simple functions. In order to maintain the battery desirable state of charge, an alternator will serve to convert mechanical energy into electrical power. Battery is not a pure or ideal power supply. It has its own impedance, which consist of resistance, capacitance and inductance. The impedance of a battery is a presentation of its voltage-current relationship between a function of frequency and other variables, such as temperature and State of Charge (SOC). Batteries have losses during operation, and these losses may be simply represented as a resistance. It is important to understand the impedance of a battery is a nonlinear, state-dependent quantity.

4.4.2

Battery Modeling

Figure 4.22: Randles Battery Model

To better understand the performance of batteries, the electrochemical Randles Battery Model is used for illustration. This model contains an inductor L connected in series with a resistor R1 and with a parallel network made up of another resistor R2 and a capacitor C, as shown in Fig. 4.22 [53]. From DC perspective, any battery has certain inner resistance depending on its condition. The internal resistance determines how much instantaneous current the battery could deliver. The lower its value, the better it can respond to sudden current demands. However, the internal resistance of batteries is not constant, it varies by the loads, working temperature, battery aging condition and other affects. An increase in internal resistance can correlate to 75

a battery performance drop. When a battery is connected into a DC circuit, the Capacitor C simply acts as an open circuit and the inductor impedance XL will equal to zero. Then the resistors R1 and R2 will be the only values remaining in the model (Fig. 4.23) to determine the battery performance regarding to surge current demands.

Figure 4.23: Battery Model in DC application

The value of internal resistance is usually about m (milli-Ohms). It effects the battery performance with the internal voltage drop. After a battery is fully charged, theoretically, it is capable of replacing back all the energy removed from the cell. However, through repeated cycles of charging and discharging, there is small and permanent damage, which causes the battery to never regain its original capabilities. For instances, an actual mechanisms failure of grid corrosion could happen inside of the lead-acid batteries. It causes the battery either to become unable to provide the energy that is needed to run an operation for the time needed known as capacity loss, or to be incapable of providing the power to run the operation known as power loss. Either loss will cause the internal resistance increasing and the battery performance decreasing [52] .

For a AC signal, battery's capacitance and inductance will dramatically affect the bypass signals performance. For a AC analysis, a DC power supply could be considered as a short circuit. The Randles Model becomes (Fig. 4.24): And the formulas to calculate reactance of the inductor and capacitor are: 1 2f C

XC =

(4.17)

76

Figure 4.24: Battery Model for AC signals

XL = 2f L And the total impedance of battery AC model: X = XL + R 1 + XC  R 2

(4.18)

(4.19)

Generally the battery inductor L has a very small value. The capacitor C is fairly large for many cells, from thousands of microfarads to farads depending on the cell type and capacity. When signal frequency is low, the effect of the inductance can be ignored. Capacitance is relatively large comparing with R2. Then the total battery resistance, R1 and R2, will be considered for low frequency analysis. As we reviewed, for a battery in a good condition, the internal resistance is quite small. As a result, the low frequency signal could be considered as being grounded. In another word, low frequency will be filtered out by the battery. When the frequency is higher, XL will become large and its phase angle L is 90 degree ahead of the signal. On the other side, XC is getting much smaller and the effect of R2 will be masked. Also the phase angle of capacitor C is 90 degree after the signal. Then certain portion of the imagination part of inductance and capacitance will be deducted. The total impedance of the battery will change along with the frequency change.

The traditional way to measure battery internal resistance is to apply either a high DC current source or an AC source at 1kHz and measure the voltage response at the battery terminals [53]. In [54] [55], other alternative solutions to do the internal resistance measurement 77

are introduced. However, it's not easy to accurately detect the value of battery parameters. Plus each parameter value is not constant and could be vary by different conditions. In order to limit the environment impacts on battery performance, all our tests are done in a room temperature 22C with 50% RH (Relative Humidity). Furthermore, we will conduct tests by applying a series of signal frequencies to Lead-Acid battery to find out a better selection for carrier frequency.

4.4.3

Carrier Frequency Verification

In order to verify the battery impacts on carrier frequencies and check each frequency performance on the DC line, a test station is setup as shown in Fig. 4.25.

Figure 4.25: Signal Test Station Diagram

1. The signal generator is Agilent model # 33220A. It is able to create signal waveform up to 20M Hz . For our frequency verification, sinusoidal waveform is used. The sample frequencies selected are 100KHz, 500KHz, 750KHz, 1MHz, 2MHz, 5MHz, 10MHz, 15MHz and 20MHz with amplitude 5VP -P . 2. Different coupling capacitor are used for performance evaluation. They include 1µF , 10µF , 22µF , 1000µF . 3. All connection cable are 18GA GXL wire. Length L23 = 400mm, L34 = 1000mm. 78

4. EverStar Lead-Acid Battery is selected, it is rated for 550CCA 5. Resistive and inductive load are used for evaluation. The components selected are 10K  resistor and 15 Watts Solenoid Valve. 6. All tests are proceed in room temperature 22C and 50% RH to minimize the environment impacts on the battery.

Figure 4.26: Battery impact to Carrier Frequency, with 10K  resistor load

Test results of signal strength at load side (point 4 in Fig. 4.25) are shown in Fig. 4.26 and Fig. 4.27. From above test results, none of the resistor load, inductive load, and coupling capacitor affects the response frequency amplitude much at the detecting end. This is mainly caused by the battery dynamic impedance change under the different frequencies. Meanwhile, the frequency response to different loads is different too. Based on the results from our tests, for resistive load, the peak response frequency amplitude happens around 15M Hz . And the inductive load is at around 10M Hz . Being the way how the test is

79

Figure 4.27: Battery impact to Carrier Frequency, with solenoid (15 watts) load

setup, any electrical load is equally parallel connected with battery impedance. Generally, for resistors or inductors, the total resistance/ inductance for parallel connected resistor/ inductors is less than any of the individual component value. More specifically, the total resistance/ inductance in parallel is equal to the reciprocal of the sum of the reciprocals of their individual values. Since battery impedance changes dynamicly along with different sampling frequency, the frequency responses at different loads too. Due to the difference in battery design and manufacturing, battery impedance is different from one to another. Plus most electrical loads have unpredictable operation time. These all add up the complexity on the simulation test we have conducted for analysis. Our research goal for the tests in this section is to demonstrate the dynamic frequency response of the battery DC circuits. Extensive tests are required on more detailed statistic analysis.

80

Chapter 5 Conclusion
5.1 Research Summary and Findings

In this research, a market available PLC chip is used to build up prototype control nodes to evaluate the performance of PLC on battery DC power line for automotive application. The evaluation result indicates the existing PLC product which is mainly designed for AC applications has poor performance and not ready to "plug and play" on vehicle battery powered DC circuits. The study shows the physical layer for transferring message and the structure of the cable network are quite different between AC lines( characterized at 110V AC 60Hz or 220V AC 50Hz) and vehicle battery DC lines (low DC voltage complying with batteries and electronic devices). A direct transposition of the work done for PLC in-house applications to in-vehicle communication is not trivial. More dedicated research and study need to be taken on in order to find out a proper solution to adopt PLC technology to automotive applications. Tests are being performed on some typical automotive electrical components. Two sample vehicles have been measured and analyzed for noise in a static condition. The test results are presented in the form of peak amplitude probability distributions, pulse duration distributions and inter-arrival time distributions, as well with simple first-order mathematical models. It shows the impulsive noise from either electrical loads operation or vehicle engine has wider bandwidth and causes negative impact to the transmitting signals. Moreover, in frequency domain, carrier frequency under 10MHz is possible cropped up with other inter81

ferences or noise along the same power lines, which has more challenge for the signal to be detected correctly on the receiver end. Due to the specialty of battery in automotive applications, Randles battery model is selected to perform test on electrical characteristics difference. Based on the result from carrier frequency response comparison test, battery can "filter out" either too low or too high frequency. Frequencies in the range from 10MHz to 15MHz have better response, so they are good for future design work. It also suggests increasing transmitting power can help to overcome the battery "lossy" property. However, the transmitting power cannot be arbitrarily increased due to EMC constraints.

5.2

Design Criteria

Based on the results from this research work, following are some design criteria need to be taken into consideration for battery DC power line communication. 1. Noise: To have reliable communication with less noise impact, disturbances with high probability of occurrence have to be avoided through choice of qualified transfer modes and carrier frequency. Even disturbances with less probability of occurrence may not be neglected because of the required all time functionality of the system communication[4]. 2. Bandwidth: Communication regulation specifies available bandwidth based on a particular application. Transmitting signals on vehicle DC power network is just at proposal stage, no formal standard/ regulation has been released. Theoretically a broad frequency range is available for carrier frequency selection. In order to optimize the system design and minimize potential impact to other on-board electronic devices, it is a good practice to follow the existing automotive EMC standards. The most related ones are SAE551 & SAE1113. These documentations could be used as a basic guidelines to follow.

82

3. Transmitting Range: as a general rule, lower transmitting frequency f has less transmission attenuation and longer transmitting range. On another side, higher transmitting frequency provides better message transmission rate. For vehicle battery DC lines, the most concerns are the battery "lossy" characteristics and intermittent operation of inductive/ capacitive loads. System overall impedance is different when the load or frequency changes, which eventually affects the possible maximum transmitting range on the power lines. Based on the transmitting data rate requirements of the application, it's important to select proper frequency to maximize the transmitting range. 4. Cost: Cost is always essential and determines the way how the design idea leads to a mass production. It varies from different system designs. For instance, vehicle DC power lines are low DC voltage circuits. It is better to choose capacitor coupling for an in-vehicle application, as that is the simplest and most economy solution for coupling circuit design. As well, the cost of transmitter and receiver could be different if we select different frequency. Usually with frequency increases, the total components cost tends to be more expensive. Therefore, to minimize the system cost, we prefer to select frequency as lower as possible.

5.3

Recommendations/ Future Research

PLC technology is very promising for automotive applications. But due to the unavoidable noise and specialties of battery DC power lines, further studies and investigations need to be carried on to find out how PLC could be finally commercialized on in-vehicle applications. First, as reviewed before, further research is needed to conduct on impulsive noise analysis, which will help to better understand PLC communication performance on automotive applications. Second, vehicle power network characteristics are different from one to another. In order to get statistics summary on signal performance, additional tests and measurements are

83

needed to perform on large samples of vehicles. It is required to perform the tests under all possible vehicle operating modes too, such as accelerating, braking, driving on bumping road, etc. Therefore, based on the data collected, a complete channel model can be set up for DC-lines in vehicles including the description of the channel inherent noise. Third, battery dynamic impedance and unpredictable electrical loads always affect PLC communication performance, which leads to different system frequency response. In order to have a better signal transmission performance, in-depth research on advanced transmission techniques such as multi-hopping or frequency diversity is needed to optimize the system. Last but not least, due to noise impacting on vehicle power lines, there is possible transmitting message lost. To enhance transmitting performance, automatic repeat request (ARQ) protocol can be applied to retransmit the missing packets. And acknowledge packets are subjected to impulse hit. However, either retransmission or additional acknowledgment degrades packet transmitting rate. Therefore, selecting a proper control protocol is the key to build up a reliable communication network. Control Area Network (CAN) is the most popular protocol, which has been widely accepted by automotive industry. Implementing CAN into a system design not only enhances the control performance, but also makes it easier to integrate into other systems.

84

Bibliography
[1] N. Pavlidou, A.J. Han Vinck, J. Yazdani, B. Honary, "Power line communications: state of the art and future trends", Communications Magazine, IEEE, Volume: 41, Issue: 4, Pages: 34 - 40, 2003. [2] J.T. Tengdin, "Distribution Line Carrier Communications - An Historical Perspective", Power Delivery, IEEE Transactions on, Volume: 2, Issue: 2, Pages: 321 - 329, 1987. [3] H.C. Ferreira, H.M. Grove, O. Hooijen and A.J. Han Vinck, "Power Line Communications: An Overview", IEEE AFRICON 4th, Volume 2, Pages: 558 - 563, 1996. [4] T. Huck, J. Schirmer, T. Hogenmuller, K. Dostert, " Tutorial about the Implementation of a Vehicular High Speed Communication System ", International Symposium on

Power Line Communications and Its Applications , Pages: 162 - 166, 2005. [5] V. Degardin, M. Lienard, P.Degauque, P. Laly, "Performances of the HomePlug PHY layer in the context of in-vehicle PLC", IEEE International Symposium on Power Line Communications and Its Applications , Pages: 93 - 97, 2007. [6] Wikipedia the free encyclopedia "War of Currents",

http : //en.wikipedia.org/wiki/AC vs DC [7] Wikipedia - the free encyclopedia "Broadband over power lines", //en.wikipedia.org/wiki/Broadbando verp owerl ines [8] D.M. Larruskain, I. Zamora1, A.J. Mazn1, O. Abarrategui, J. Monasterio2, "Transmishttp :

85

sion and Distribution Networks: AC versus DC ", Department of Electrical Engineering Univ. of the Basque Country - Bilbao (Spain) [9] Y. Maryanka, "Wiring Reduction by Battery Power Line Communication", Passenger Car Electrical Architecture (Ref. No. 2000/088) IEEE Seminar, Pages: 8/1 - 8/4, 2000. [10] F. Benzi, T. Facchinetti, T. Nolte, L. Almeida, " Towards the Powerline Alternative in Automotive Applications", IEEE International Workshop on Factory Communication Systems , No. 10, Pages: 259 - 262, 2008. [11] M. Lienard, M.O. Carrion, V. Degardin, P. Degauque, "Modeling and Analysis of InVehicle Power Line Communication Channels", IEEE Transactions on Vehicular Technology , Volume 57, No. 2, Pages: 670 - 679, Mar 2008. [12] S. De Caro, A. Testa, R. Letor, "A Power Line Communication Approach for Body Electronics Modules", Power Electronics and Applications, 13th European Conference , Pages: 1 - 10, 2009. [13] E. Bassi, F. Benzi, L. Almeida, T. Nolte, "Powerline Communication in Electric Vehicles", IEEE International Electric Machines and Drives Conference , No. 10, Pages: 1749 - 1753, 2009. [14] K. Ouahada, H.C. Ferreira, A.J.H. Vinck, D.J.J. Versfeld, "Combined Non-Binary Codes and M-FSK Modulation for Power Line Comm", IEEE International Symposium on Power Line Communications and Its Applications, Pages:110 - 115, 2006. [15] K. Srinivas, K. Manjunath, N. Richard, L. Haniph, "Harnessing the potential of powerline communications using the HomePlug AV standard", www.rfdesign.com, Broadband Technology, 2006. [16] "HomePlug AV White Paper", HomePlug Powerline Alliance, Inc.,, 2005. [17] A. Ricci, V. Aisa, V. Cascio, G. Matrella, P. Ciampolini, "Connecting electrical appliances to a Home Network using low-cost Power-Line Communication", Power Line 86

Communications and Its Applications, 2005 International Symposium on, Pages: 300 304, 2005. [18] K.H. Afkhamie, S. Katar, L. Yonge, and R. Newman, "An Overview of the upcoming HomePlug AV Standard", Power Line Communications and Its Applications, 2005 International Symposium on, (ISPLC 2005), Vancouver, BC, Pages: 400-404, 2005. [19] T. Huck, J. Schirmer, T. Hogenmuller, K. Dostert, "Tutorial about the implementation of a vehicular high speed communication system", Power Line Communications and Its Applications, 2005 International Symposium on, (ISPLC 2005), Pages: 162 - 166, 2005. [20] A. Schiffer, "Statistical channel and noise modeling of vehicular DC-lines for data communication", Vehicular Technology Conference Proceedings, 2000. VTC 2000-Spring Tokyo. 2000 IEEE 51st, Volume: 1, Pages: 158 - 162, 2000. [21] Yu-Ju Lin, H.A. Latchman, R.E. Newman, S. Katar, "A comparative performance study of wireless and power line networks", Communications Magazine, IEEE, Volume: 41, Issue: 4, Pages: 54 - 63, 2003. [22] "Powerline Communication Solution", Cy-

press Semiconductor Corporation, CY8CPLC10,Document Number: 001-50001, Rev K, Jan 2011. [23] "Designing an External Host Application for Cypresss Powerline Communication IC CY8CPLC10", Cypress Semiconductor Corporation, AN524782, Rev C, Feb 2011. [24] "Cypress Powerline Communication Board Design Analysis", Cypress Semiconductor Corporation, AN55427, Document No. 001-55427, Rev A, Dec 2010. [25] "High-Performance, 16-Bit Digital Signal Controllers", Microchip Technology Inc., dsPIC30F3014/4013, DS70138G, 2010. [26] "dsPIC30F Family Reference Manual, High-Performance Digital Signal Controllers", Microchip Technology Inc., dsPIC30F, DS70046E, 2006. 87

[27] A. Bruce Carlson, "Communication Systems - An Introduction to Signals and Noise in Electrical Communication", Rensselaer Polytechnic Institute, Third Edition, 1986. [28] Ron Mancini, "OP AMP for Everyone - Design Reference", Texas Instrument, SLOD006B, Aug 2002. [29] R. Sarpeshkar, T. Delbruck, C.A. Mead, "White Noise in MOS transistor and Resistor", Circuits and Devices Magazine, IEEE , Volume: 9 , Issue: 6, Page(s): 23 - 29, 1993. [30] W. Gouret, F. Nouvel, G. El-Zein, "Powerline Communication on Automotive Network", Vehicular Technology Conference, 2007. VTC2007-Spring. IEEE 65th, Publication Year: 2007 , Page(s): 2545 - 2549. [31] B. Ghoraani, "Time-Frequency Feature Analysis", Electrical and Computer Engineering, Ryerson University , 2010. [32] S. Haykin, "Communiation System", Second Edition, McMaster University ,By John Wiley & Sons Inc, 1983. [33] Ronald L. Fante, "Signal Analysis and Estimation", Textron Defense System, Wilmington, Massachusetts,By John Wiley & Sons Inc, 1988. [34] P. Lynn, W. Fuerst, "Introductory digital signal processing with computer applications", Second Edition, the University of Michigan,By John Wiley & Sons Inc, 1998. [35] Z. Hussain, A. Sadik, P. O'Shea, "Digital Signal Processing - An Introduction with MATLAB and Application", RMIT University, Australia,By Springer-Verlag Berlin Heidelberg, 2011. [36] http : //www.mathworks.com/help/techdoc/ref /f f t.html MathWorks, MatLab

R2011b documentation [37] P.A.J. van Rensburg, H.C. Ferreira, A.J. Snyders, "An Experimental Setup for In-Circuit Optimization of Broadband Automotive Power-Line Communications", 88

Power Line Communications and Its Applications, 2005 International Symposium on, Page(s):322-325, May 2005. [38] G. Boultadakis, K. Skrapas, P. Frangos, "Time-Frequency Analysis of Radar Signals", RTO SET Symposium on Target Identification and Recognition Using RF Systems, RTO-MP-SET-080, Oct 2004. [39] L. Durak, O. Arikan, "Short-time Fourier transform: two fundamental properties and an optimal implementation", Signal Processing, IEEE Transactions on, Volume: 51, Page(s): 1231 - 1242, 2003. [40] Y.B. Li, S.L. Ho, W.N. Fu, B.F. Xue, "Analysis and Solution on Squeak Noise of Small Permanent-Magnet DC Brush Motors in Variable Speed Applications", Magnetics, IEEE Transactions on ,Volume: 45 , Page(s): 4752 - 4755 , 2009. [41] J. Cros, G.C.R. Sincero, P. Viarouge, "Design method for brush permanent magnet DC motors", Electric Machines and Drives Conference, IEMDC '09. IEEE International ,Page(s): 1625 - 1632, 2009. [42] J. Scott, J. McLeish, W.H. Round, "Speed Control With Low Armature Loss for Very Small Sensorless Brushed DC Motors", Industrial Electronics, IEEE Transactions on ,Volume: 56 , Issue: 4, Page(s): 1223 - 1229, 2009. [43] Hugh Hildreth Skilling "Electromechanics: A First Course in Electromechanical Energy Conversion", ISBN 0882757946 [44] V. Degardin, M. Lienard, P. Degauque, E. Simon, P. Laly, "Impulsive Noise Characterization of In-Vehicle Power Line", Electromagnetic Compatibility, IEEE Transactions on , Volume: 50, Page(s): 861 - 868, 2008. [45] K.L. Blackard, T.S. Rappaport, C.W. Bostian, "Measurements and models of radio frequency impulsive noise for indoor wireless communications", Selected Areas in Communications, IEEE Journal, Volume: 11, Page(s): 991 - 1001, 1993. 89

[46] Y. Yabuuchi, D. Umehara, M. Morikura, T. Hisada, S. Ishiko, S. Horihata, "Measurement and analysis of impulsive noise on in-vehicle power lines", Power Line Communications and Its Applications (ISPLC), 2010 IEEE International Symposium on , Page(s): 325 - 330, 2010. [47] V. Degardin, P. Laly, M. Lienard, P. Degauque, "Impulsive Noise on In-Vehicle Power Lines: Characterization and Impact on Communication Performance", Power Line Communications and Its Applications, 2006 IEEE International Symposium on, Page(s): 222-226, 2006. [48] F. Rouissi, V. Degardin, M. Lienard, P. Degauque, "Low amplitude Impulsive Noise in vehicular power line network", Intelligent Transport Systems Telecommunications,(ITST),2009 9th International Conference on , Page(s): 538 - 542, 2009. [49] A. Schiffer, "Statistical Channel and Noise Modeling of Vehicular DC-Lines for Data Communication", Vehicular Technology Conference Proceedings, 2000. VTC 2000Spring Tokyo. 2000 IEEE 51st, Volume: 1, Page(s): 158 - 162, 2000. [50] F. Nouvel1, P. Tanguy1, S. Pillement, and H.M. Pham, "Experiments of In-Vehicle Power Line Communications", http : //cdn.intechopen.com/pdf s/14996/InT ech - Experimentso fi nv ehiclep owerl inec ommunications.pdf , Laboratory IETR Rennes, University of Rennes , Irisa Labs, France [51] "Lead-based http : //batteryuniversity.com/learn/article/leadb asedb atteries [52] M. Cugnet, J. Sabatier, S. Laruelle, S. Grugeon, B. Sahut, A. Oustaloup, J.-M. Tarascon, "On Lead-Acid-Battery Resistance and Cranking-Capability Estimation", Industrial Electronics, IEEE Transactions on, Volume: 57, Pages: 909 - 917, 2010. [53] "Characterize Batteries and Power Consumption Using the NI PXI-4071 7 -digit Digital Multimeter", http : //zone.ni.com/devzone/cda/tut/p/id/2721,National Instruments, Tutorial Document, May 2011. 90 Batteries",

[54] R. Saiju, University of Kassel, and S. Heier, University of Kassel "Performance Analysis of Lead Acid Battery Model for Hybrid Power System", Transmission and Distribution Conference and Exposition, 2008. T&D. IEEE/PES , Pages: 1-6, 2008. [55] F. Coupan, I. Sadli, I. Marie-Joseph, A. Primerose and H. Clergeot "New Battery Dynamic Model: Application to lead-acid battery", Computer and Automation Engineering (ICCAE), 2010 The 2nd International Conference on, Volume: 5, Pages: 140 145, 2010.

91

Appendix A Abbreviation List

AC ARQ Bd BIU BPL BEMF CAN CCA CDF CRC CSMA DC DTV EV FSK HEV HFBPF HPAV HVAC HVDC IAT IFBPF LIN LPF

Alternating-Current Automatic Repeat Request Baud, synonymous to Symbols per Second Band-In-Use Broadband over Power Lines Back Electrical Magnetic Force Controller Area Network Cold Cracking Amps Cumulative Density Function Cyclic Redundancy Check Carrier Sense Multiple Access Direct-Current Digital Television Electrical Vehicle Frequency Shift Keying Hybrid Electrical Vehicle High Frequency Band Pass Filter HomePlug AV Heating, Ventilation and Air Condition High Voltage Direct Current Interarrival Time Intermediate Frequency Band Pass Filter Local Interconnect Network Low Pass Filter

92

MAC Mbps NC NiMH NO OFDM PDF PGA PHY PLC PLT PSD PVR RH RPM SCL SDA SFSK SOC SRF STFT WSS

Media Access Control Million Bits per Second Normal Close Nickel Metal Hydride Normal Open Orthogonal Frequency Division Multiplexing Probability Density Function Programmable Gain Amplifier Physical Layer Power Line Communication Powerline Transceiver Power Spectral Density Personal Video Recorder Relative Humidity Round Per Minute Signal on Clock Line Signal on Data Line Synchronous Frequency Shift Keying State of Charge Self-Resonant Frequency Short Time Fourier Transform WideSense Stationary

93

