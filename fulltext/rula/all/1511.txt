Ryerson University

Digital Commons @ Ryerson
Theses and dissertations

1-1-2009

Design And Development Of Ryerson Femtosatellite
Bryan Stuurman
Ryerson University

Follow this and additional works at: http://digitalcommons.ryerson.ca/dissertations Part of the Electrical and Computer Engineering Commons Recommended Citation
Stuurman, Bryan, "Design And Development Of Ryerson Femtosatellite" (2009). Theses and dissertations. Paper 1197.

This Thesis is brought to you for free and open access by Digital Commons @ Ryerson. It has been accepted for inclusion in Theses and dissertations by an authorized administrator of Digital Commons @ Ryerson. For more information, please contact bcameron@ryerson.ca.

DESIGN AND DEVELOPMENT OF RYERSON FEMTOSATELLITE

by

Bryan Stuurman B.Eng Ryerson University 2007

A thesis presented to Ryerson University In partial fulfillment of the requirement For the degree of Master of Applied Science in the program of Electrical and Computer Engineering

Toronto, Ontario, Canada, 2009 © Bryan Stuurman 2009

PROPERTY OF RYERSON UNIVERSITY LIBRARY

AUTHOR'S DECLARATION

I hereby declare that I am the sole author of this thesis.

I authorize Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research.

I further authorize Ryerson University to reproduce this thesis by photocopying or by other means, in total or in part, at the request of other

111

DEDICATION

This thesis is dedicated to the hardworking members of laboratory EPH132. Without your encouragement, assistance and distraction none of this would have been possible.

lV

ABSTRACT

Design and Development of Ryerson FemtoSatellite
Master of Applied Science 2009, Bryan Stuurman Electrical and Computer Engineering, Ryerson University

This thesis describes the design and development of Ryerson University's femtosatellite. The motivation for this project is to achieve a new level of miniaturization of a satellite system to reduce costs and development time. A design is presented which demonstrates attitude control, earth contact capability and basic satellite functionality. This design weighs less than 100 grams including a 25 gram payload capacity. Earth observation and inspector satellite pay loads are the proposed missions for this spacecraft. A prototype was constructed and its various subsystems functioned to their design capacities.

v

ACKNOWLEDGMENTS

I would like to first thank my thesis supervisor, Dr. Krishna Dev Kumar, for his support and encouragement throughout this research work. Before I had started my Masters degree I would have thought none of this possible.

Now I would like to thank people I know who have made this work possible. You're all listed alphabetically. Amin Zou: thank you for the help with chapter 3. Dmitri: You condensed attitude dynamics into two lines of code, and then showed me how to simulate it. Geoff: For convincing me about that z-axis torquer. "Don't aggravate the underactuated system" is a wise idea. Godard: You actually read my thesis first. Brave man, good advice. Kam: You taught me where the sun was, and pointed out that the Earth is the center of the universe. Mike Algier: For spelling my name wrong in your thesis. Noel: Telemetry props brother, you kept me sane as Alger syndrome slowly took hold. Suketu: I owe you for all your Solidworks help. Surjit: For checking the math, and agreeing with it. And Tom: For late nights in the lab and cherry pie.

I am also indebted to the following people and organizations: Mark Psiaki of Cornell University - you seem to publish papers. about ideas years before I have them. The Hapi Snacks company for your addictive wasabi peas, and the Maxwell House Corporation for your palatable, dark colored, liquid caffeine beverage.

Finally I must thank my family and girlfriend for their continued support of my graduate studies career. It takes special people to tolerate the odd hours and strange party conversion of a graduate student. I don't feel that anyone else could fill your shoes.

Vl

TABLE OF CONTENTS

AUTHOR'S DECLARATION .................................................................. .............................. iii DEDICATION ......................................................................................................................... iv ABSTRACT ....................................................... ..... ......... .......................................................... v ACKNOWLEDGMENTS .................. ..................................................................................... vi TABLE OF CONTENTS ........................................................................................................ vii LIST OF FIGURES ................................................................................................................. xi LIST OF TABLES ................................................................................................................. xiv NOMENCLATURE ................................................................................... .. ......................... xvi ACRONYMS ...................................... ................................................................................. xviii 1. Introduction .......................................................................................................................... ! 1.1 1.2 Motivation ........ .......................................................................................................... 2 Literature Review ............................. ................. ......................................................... 3 1.2.1 1.2.2 1.2.3 1.3 1.4 1.5 Satellite on a chip ....................... ........................................................ ............ 4 State-of-the-art ......................................................................... ...................... 6 Picosatellites: a quick review ......................................................................... 9

Design framework .................................................................................................... 10 Contributions .......... ..... .............................................. ............. ............... ................... 11 Thesis outline ........................................................................................ ................... 11

2. Requirements and Design ............ ...................................................................................... 13 2.1 2.2 Introduction .............................................................................................................. 13 Requirements ................ ............................................................................................ 13 2.2.1 2.2.2 2.2.3 2.2.4 Mission requirements .............................................................. ..................... 13 System level requirements ........................................................................... 14 Command and data handling subsystem requirements ................................ 14 Communication subsystem requirements ..................................................... 15
Vll

2.2.5 2.2.6 2.2.7 2.3 2.4 2. 5 2.6 2.7 2.8

Power subsystem requirements .................................................................... 16 Attitude determination and control subsystem requirements ....................... 16 Structure and thermal subsystem requirements ........................................... .17

System block diagrams ............................................................................................. 17 Command and data handling .................................................................................... 20 Communications subsystem ..................................................................................... 24 Attitude determination and control hardware ........................................................... 31 Power subsystem ....... ......................................... ... ....................................... .. .... ..... .37 Structure and thermal ............................................................................................... 46

3. Attitude Determination and Control Algorithms ................................................. .............. 51 3.1 3.2 3.3 3.4 Introduction .............................................................................................................. 51 International geomagnetic reference field ................................................................ 52 Attitude dynamics .................................................................................................... 54 Attitude determination .............................................................................................. 56 3.4.1 3.4.2 3.4.3 3.5 Measurement model ..................................................................................... 56 Linearized system model for determination ................................................. 57 Kalman filter structure ................................................................................. 58

Attitude control ........... ........................................................... ............... ................... 60 3.5.1 3.5.2 3.5.3 3.5.4 3.5.5 Linearized system model for control. ........................................................... 60 Calculating control gains ................................................................... ........... 61 Aerodynamic disturbance rejection .............................................................. 62 Magnetic actuator mapping .......................................................................... 62 Numerical Simulation .................................................................................. 63

4. Fabrication and Testing ....................... ......... ............. .... .. ................................................... 73 4.1 4.2 Introduction .............................................................................................................. 73 Assembly .............................. .................................................................................... 73 4.2.1 Power subsystem ....................................................................................... ... 74

Vlll

4.2.2 4.2.3 4.2.4 4.2.5 4.3

Command and data handling ........................................................................ 75 Communication ............................................................................................ 76 Attitude Determination and Control.. ........................................................... 77 Payload ......................... ........... .......................................... 77

Testing procedures ................................................................................................... 78 4.3 .1 4.3.2 4.3.3 4.3.4 4.3.5 4.3.6 4.3.7 Power subsystem initial test ......................................................................... 78 Command and Data handling subsystem initial test .................................... 78 Communication subsystem initial test.. ........................................................ 79 Attitude Determination and Control initial test ............................................ 80 Payload system ............................................................................................. 82 Simulated environment ........................................................................... ..... 83 Integrated satellite system ............................................................................ 83

4.4

Results ...................................................................................................................... 84 4.4.1 4.4.2 4.4.3 4.4.4 4.4.5 4.4.6 Power subsystem initial test ......................................................................... 84 Communication subsystem initial test. ......................................................... 87 Attitude determination and control subsystem initial test ............................ 87 Payload subsystem initial test ...................................................................... 88 Simulated environment test .......................................................................... 88 Structure finite element analysis .................................................................. 92

4.4. 7 Thermal simulations ..................................................................................... 95 5. Conclusions ............................................. .......... ................................................................. 97 5.1 Conclusions ............................................. ............. ........ ..................... ....................... 97 5.1.1 5.1.2 5.1.3 5.2 Communications ........................................................................................... 97 Attitude determination and control .............................................................. 97 Structure ....................................................................................................... 98

Future work .............................................................................................................. 98 5.2.1 Magnetic control .......................................................................................... 98

lX

5.2.2 5.2.3 5.2.4

Simulated environment test .......................................................................... 98 Orbit reconfiguration and formation flying using aerodynamic drag .......... 98 Launch ....................................................................................................... 99

References .............................................................................................................................. 10 1

X

LIST OF FIGURES
Figure 1.2-1 Yield strength vs. mass density for various materials (Janson, 1999) ................. 5 Figure 2.3-1 System block diagram .................................................. ...................................... 17 Figure 2.3-2 Hardware block diagram of satellite system ...................................................... 18 Figure 2.3-3 Prototype PCB art showing various subsystem components, body fixed coordinate frame denoted in the upper right hand comer....... ............................ 19 Figure 2.4-1 C&DH subsystem hardware block diagram ....................................................... 20 Figure 2.4-2 CDH main loop firmware flow .......................................................................... 21 Figure 2.4-3 CDH interrupt firmware flow ......... ... ........... .. .................................................... 22 Figure 2.5-1 Communication subsystem hardware block diagram ........................................ 24 Figure 2.5-2 Radio patch antenna drawing (Tronquo 2006) ................................................... 26 Figure 2.5-3 Antenna radiation pattern, modified for clarity (Tronquo 2006) ....................... 27 Figure 2.5-4 Link budget geometry ........................................................................................ 28 Figure 2.6-1 Attitude determination and control hardware block diagram .............. .............. 31 Figure 2.6-2 Magnetic torque rod rendering ........................................................................... 35 Figure 2.7-1 Power subsystem hardware block diagram ........................................................ 37 Figure 2.7-2 (a) PCB art of power subsystem and (b) photograph of assembled power subsystem illustrating magnetic torque coil space constraints ....................... 3 8 Figure 2.7-3 MPPT boost converter structure ......................................................................... 39 Figure 2.7-4 Solar array (a) power and (b) current characteristics (non-dimensional) given various insolation and temperature conditions. adapted from (Femia, 2005). 40 Figure 2.7-5 (a) A simple buck converter and (b) A synchronous buck converter ................ 41 Figure 2.7-6 LM2852 power converter circuit diagram ....................................... .. ................ 41 Figure 2.7-7 LM2852 efficiency curve (National Semiconductor, 2006) .............................. 42 Figure 2. 7-8 Schematic of converter shutdown circuit. ................................................ .......... 43

Xl

Figure 2.8-1 Femtosatellite renderings (a) complete satellite, sunside view (b) Earth side showing patch antenna (c) Sunside with solar panels removed for clarity (d) solar scaffolding ................... ...... ........... ................................. ......................... 46 Figure 2.8-2 Thermal model of satellite system ........... .......................................................... 49 Figure 3.3-1 Co-ordinate frames used in this chapter. ....................... ..................................... 54 Figure 3.4-1 Kalman filter block diagram ..... ........ ................................................................. 58 Figure 3.5-1 Euler angles for fully actuated satellite during stabilization .............................. 64 Figure 3.5-2 Angular velocity of fully actuated satellite during stabilization ........................ 65 Figure 3.5-3 Control torque for fully actuated satellite to achieve stabilization .................... 65 Figure 3.5-4 Quatemion imaginary components for fully actuated satellite during attitude stabilization ...................... .... ..... .............................................. ........................ 66 Figure 3.5-5 Euler angles for uncontrolled satellite in Earth orbit .................................. ....... 67 Figure 3.5-6 Quatemion imaginary components for Earth orbiting satellite .......................... 68 Figure 3.5-7 Euler angles for Earth orbiting satellite ....... ...................................................... 68 Figure 3.5-8 Desired control torque for Earth orbiting satellite ............................................. 69 Figure 3.5-9 Realized magnetic control torque for Earth orbiting satellite ............. ............... 69 Figure 3.5-10 Desired and realized torque plot for the first half orbit of simulation ............. 70 Figure 3.5-11 Applied dipole moment and geomagnetic field in body fixed frame ............... 71 Figure 3.5-12 Magnitude of nadir pointing error. ............ ..... ................................. ................. 71 Figure 4.4-1 Battery voltage ripple from telemetry broadcast. ............................................... 85 Figure 4.4-2 Bus voltage ripple during telemetry broadcast.. .................... ... ..... ..................... 86 Figure 4.4-3 Bus voltage during telemetry broadcast. ............................................................ 86 Figure 4.4-4 Captured image from femtosatellite prototype payload system ......................... 88 Figure 4.4-5 Hardware in the loop simulated Euler angles for one orbit ............................... 90 Figure 4.4-6 Hardware in the loop applied dipole moments for one orbit ............................. 90 Figure 4.4-7 Detailed view of dipole moments during first 100 seconds of orbit. ................. 91

Xll

Figure 4.4-8 Pulse indicating duration of control law calculation .......................................... 91 Figure 4.4-9 Deflection as a result of7.5g static load ............................................................ 93 Figure 4.4-10 Safety factor distribution for 7.5g static load ................................. .................. 93 Figure 4.4-11 Resonant modes of femtosatellite structure ............................. ........................ 94 Figure 4.4-12 Temperature of the three major nodes for two orbits ............... .... .................... 95 Figure 4.4-13 Temperature rates of the three major nodes for two orbits .............................. 96

Xlll

LIST OF TABLES
Table 2.2-1 Mission requirements .......................................................................................... 13 Table 2.2-2 System requirements ........................................................................................... 14 Table 2.2-3 C&DH requirements ..................................................................... ....................... 14 Table 2.2-4 Communication requirements ... ... .................................................................... ... 15 Table 2.2-5 Power requirements ............................................................................................ . 16 Table 2.2-6 ADCS requirements ............................................................................................. 16 Table 2.2-7 Structure and thermal requirements ..................................................................... 17 Table 2.5-1 Radio antenna comparison .................................................................................. 25 Table 2.5-2 Angular radius of the Earth given various orbits ....................... .......................... 26 Table 2.5-3 Maximum range for various orbits ...................................................................... 28 Table 2.5-4 Best and worst case link budgets .......................................... ............................... 29 Table 2.5-5 Minimum Required signal strength for various bitrates ...................................... 29 Table 2.5-6 Link margins for various ranges and datarates, all values in dBm...................... 30 Table 2.7-1 Power budget ....................................................................................................... 44 Table 2.8-1 Femtosatellite mass budget.. ................................................................................ 48 Table 2.8-2 Thermal node heat capacities .............................................................................. 48 Table 2.8-3 Thermal junctions between nodes ....................................................................... 48 Table 3.5-1 Numerical simulation parameters and initial conditions ..................................... 63 Table 4.2-1 Components for assembly in step 1 ..................................................................... 74 Table 4.2-2 Components for assembly in step 2 ..................................................................... 74 Table 4.2-3 Components for assembly in step 3 ..................................................................... 75 Table 4.2-4 Components for assembly in step 4 ..................................................................... 76 Table 4.2-5 Components for assembly in step 5 ..................................................................... 77 Table 4.2-6 Components for assembly in step 6 ..................................................................... 77
XlV

Table 4.3-1 Power system test parameters .............................................................. ...... .......... 78 Table 4.3-2 Command and Data handling subsystem test parameters ......... ... ....................... 79 Table 4.3-3 Communication system test parameters ................................................... ........... 80 Table 4.3-4 Attitude determination and control test parameters ............................................. 81 Table 4.3-5 Payload system test parameters ........................................................................... 82 Table 4.4-1 Power subsystem test results ............................................................................... 84 Table 4.4-2 Communication subsystem test results ................................................................ 87 Table 4.4-3 ADCS test results .................................................................... ............................ 87 Table 4.4-4 Simulated environment additional parameters ............ ..... ................................... 89 Table 4.4-5 Natural frequencies for various resonant modes .......................... ....................... 94

XV

NOMENCLATURE

A, A

Area (m 2 ) DCM describing the rotation from the inertial frame to the body frame

B

Magnetic field (tesla) Drag coefficient (dimensionless) Kronecker delta function 3x3 identity matrix Quatemion imaginary components

f
H

Frequency (Hz) Kalman filter observation matrix Current (Amperes) Satellite inertia tensor (kg· m 2 )

Li
K L

Kalman filter gain matrix (9xl) Inductance (Henries) Space loss in communications link (dB)

M
1]

Magnetic dipole moment (amp· turn· m 2 ) Quatemion scalar component Demagnetization factor (dimensionless)

N

Number of turns (dimensionless) Atmospheric density (kg I m 3 ) Earth angular radius (rad) Unit quatemion describing rotation (dimensionless column vector 4xl) Kalman filter process noise (3x3) Kalman filter measurement noise (3x3) Communications path length (m) Kalman filter error covariance matrix (9x9)

p
Pnnnlon

q Q R

s
p

XVI

RE,REarth

Earth Radius (6378000 meters) Time (seconds) Torque (Nm) Control effort (Nm) Magnetic permeability relative to free space (dimensionless) Scalar potential function of geocentric radius, coelevation, east longitude and time Kalman filter innovation vector Voltage

t
T

u

Jir
V(r,B,¢,t)
V V

V, V,
OJ, iiJ

v

Orbital velocity (m/s) Angular rate (rad/s) State vector Linearized system state vector Orbital angular velocity

X

X
Q

xvn

ACRONYMS

ADACS AWG CMOS COTS dB dBi dBm DC DCM DOF DMA DUT EKF EMI FIFO GPS IC IGRF LEO MEMS MPPT PCB PWM RMS

Attitude Determination And Control System American Wire Gauge Complementary Metal Oxide Semiconductor Commercial Off The Shelf Decibels Decibels with respect to an isotropic radiator Decibel milliwatts Direct current Direction cosine matrix Degrees of Freedom Direct Memory Access Device under test Extended Kalman Filter Electromagnetic interference First In Fast Out Global Positioning System Integrated circuit International Geomagnetic Reference Field Low Earth Orbit Micro Electro-Mechanical Systems Maximum Power Point Tracker/Tracking Printed Circuit Board Pulse Width Modulation Root mean square System On a Chip Denotes a number given in hexadecimal representation

soc
OxNN

XVlll

Chapter 1
Introduction

The design and launch of a large orbital satellite is a costly endeavor. Since the first satellite launch in 1957, satellite systems continue to grow in mass and size to meet mission objectives, despite increasing levels of miniaturization in the electrical systems that the satellites employ. Small satellites are now becoming the satellite of choice for research institutions to demonstrate technology and accomplish simple scientific missions (Alger, 2008). It is hoped that these small satellites can cause a shift in the design philosophy of conventional satellites, and encourage the space industry to shift to a less expensive, faster to deploy strategy in leveraging orbital technologies.

Recently, concern over orbital debris has grown due to anti-satellite activities by the American and Chinese governments, and due to the collision of a derelict soviet radar satellite and an Iridium constellation satellite (lannotta and Malik, 2009). Mission designers need to consider the end of life disposal of their craft. The usage of a small satellite constructed of demiseable materials can lead to less orbital debris. A small satellite is easier to de-orbit and has a low probability of on orbit breakup.

Forthwith a design is proposed to reduce the satellite system launch mass to less than 100g, and to reduce the component count to the bare minimum required for a functional satellite. The design will demonstrate the capacity for a number of relevant missions, some of which are not possible with larger satellite systems.
1

Introduction

1.1 Motivation
Classically, the space industry is the most conservative of all the aerospace sectors, preferring to leverage only the qualified of flight hardware. Significant prejudice is given to components with flight heritage, even if the technology exists to improve upon these components. Managing risk is an important part of a mission designer's job and building a newer, faster, smaller subsystem carries huge risk over employing an older, slower, larger subsystem that has proven its capacity for reliable operation. This attitude has lead to the ballooning of mass and volume requirements, the culmination being the largest telecommunications satellite ever launched: TerreStar 1. TerreStar 1 had a system bus mass of 6910 kg, and required a 145 kg payload adapter for a total launch payload of 7055 kg. This satellite was carried into earth orbit by an Ariane 5 launcher. The total cost of the satellite, launch and insurance is estimated to be over 500 million dollars (Marot, 2009).

Large spacecraft suffer a number of disadvantages, the biggest being cost. Between the cost of individual subsystems to the cost of launch and maintenance, these satellites consume money every step of the way. This large consumption of money drives the culture of risk management, where no component shall be permitted to fail and compromise the mission. This reliability comes at increased cost, and decreased flexibility in fulfilling the mission requirements. This is a vicious cycle, where cost rises and launch opportunities decrease.

Small satellites benefit from just the opposite design philosophy. Risk is embraced in expectation of higher returns. Instead of managing risk, commercial-off-the-shelf (COTS) components are leveraged to manage cost. Low cost-high risk missions are justifiable as the success of the mission results in substantial return on investment, where the cost of failure is inherently minimized due to the inexpensive nature of the mission.

Small satellites also offer the opportunity for innovative new mission configurations, where payload capabilities are replicated or distributed across multiple satellites flying in formation. Formation flight is inherently cheaper with lower mass satellites, possibly even free if

2

Introduction

environmental forces can be utilized to achieve the formation. Larger satellites are generally not considered candidates for close formation flying.

Compared to large satellites which can take years to design and launch, small satellites often proceed through the design cycle rapidly, sometimes taking advantage of immediate COTS component availability to perform breadboard subsystem tests in mere weeks. This leads to the hardware being developed in parallel with the mission requirements, and the hardware design being flexible to requirement changes. Large satellite equipment is fraught with lead times, bulk orders for special items, regulatory hurdles to procurement and large price tags. Parallel development of a satellite comes with the risk that the components chosen will not fulfill the end requirements. Should this occur with a large satellite, the result would be devastating in terms of cost and development time, whereas with a small satellite the loss is limited to small dollar sums and minimal time expense.

The motivation of this project is to push satellite design to a new level of miniaturization. The femto class of satellites has never been achieved with the proposed capabilities. Small disposable satellites can achieve cost and time-to-launch reductions which larger satellites cannot. Furthermore this design will offer "trickle down technology" - the degree of miniaturization employed in this study can be applied to larger satellites, likely of pico- and nano- class, to increase payload capacity and as such offer a higher return on investment on small satellites.

1.2 Literature Review
This literature review will cover relevant material to the design presented in this study. Femtosatellite proposals similar to electronic microchips are first discussed, then femtosatellites constructed from a printed circuit boards are covered. Printed circuit board satellites are considered state of the art as they stand the greatest chance of mission success. Finally, picosatellites and specifically cubesats are discussed to grant insight into current amateur and small satellite design paradigms.

3

Introduction

A femtosatellite is a satellite with a mass of 100 grams or less. To date and to the authors knowledge, no femtosatellites have been flown with the technical exception of the US government radio experiment Project west ford, which placed 480 million copper dipoles into a 3200 km orbit (Larson and Wertz, 1999). Being passive orbiting objects, we can consider the project (called "Needles" in-house) an inadequate representation of what femtosatellite capabilities should be. Furthermore the project was a public relations failure due to the perceived orbital debris hazards the project created to spacecraft and astronauts at the time.

Femtosatellite design has been investigated formally since the late 1990's, with significant early efforts exerted by The Aerospace Corporation. Femto satellites grow from the space industries need to reduce flight mass to reduce launch costs, which encourages suppliers to develop innovative new ways to solve typical mission challenges. Since actuators on a spacecraft necessarily scale with the size and inertia of the craft, which is in tum dictated by payload, initial efforts were put towards application of micro electro-mechanical systems (MEMS) and micro fabrication techniques to miniaturize sensors. The philosophy is that greater benefits to the aerospace community can be achieved through the miniaturization of sensors, which would scale independently of vehicle mass. (Smit, 1997) The reduction in sensor size available with MEMS and the corresponding increase in the computational abilities of commercial microelectronics, with decreasing electrical power and physical space requirements, now lead the push for a fully miniaturized spacecraft. At the extreme end of this push is the community looking to fabricate an entire satellite on a silicon wafer, in the same manner as typical system-on-a-chips are currently fabricated. Such a satellite would be incredibly low cost in volume, and exceptionally light, and as such the mission cost would be small.

1.2.1

Satellite on a chip

A satellite or significant fraction of a satellite, fabricated onto a silicon wafer shows some advantages over a conventional design approach. Firstly, a high level of integration can be achieved through miniaturization. Secondly, power requirements for MEMS sensors and actuators are significantly lower than their larger counterparts. Furthermore, while a
4

Introduction

fabrication process for a system on a chip can be expensive in money and time to design and implement, economies of scale being to take effect during production, where thousands of satellites can be fabricated with low lead time and little additional cost.

Silicon as a structural material is rather effective, having a higher yield strength than aluminum, titanium and stainless steel, while being less dense than all three. The thermal conductivity of silicon is less than that of aluminum ( 150 W I mk versus 240 W I mk ), however silicon's coefficient of thermal expansion is similar, and its melting point is more than double. Silicon is much more brittle than aluminum or titanium, but due to the significant reduction in launch mass and size, it is expected that the resultant structure would survive the launch environment (Janson, 1999).

1

Density (gmtcc)

10

Figure 1.2-1 Yield strength vs. mass density for various materials (Janson, 1999)

Current satellite-on-a-chip efforts are hindered by several technology limitations: Solar cells, a primary energy source for space systems, cannot be fabricated with current CMOS processes (used for System On a Chip fabrication). Additional complications arise when requiring energy storage, due to the substantial surface area a chip level capacitor would require (Barnhart, 2006).

Further issues arise from on chip antennas, which have limited range, to a maximum of 5 meters, requiring close proximity of a much more powerful radio transponder and the

5

Introduction

associated formation keeping requirements. Upper atmospheric effects such as atomic oxygen are especially detrimental to the survivability of the craft, as are the thermal extremes of an effectively passive thermal node in earth orbit. (Barnhart, 2006)

1.2.2

State-of-the-art

Major David Barnhart and the team of researchers at Surrey Space Center have put forth two concepts: a satellite on a PCB, and a satellite on a chip. Both of these are presented in their paper "A low cost Femtosatellite to enable distributed space missions". The less extreme concept of a femtosatellite is the assembly of several highly integrated SOCs in addition to their supporting components to fulfill the requirements of a complete spacecraft. Typically these designs seek to minimize the additional mass cost associated with multiple module integration and require many parts to perform more than one task. As a result, the proposal of the Printed Circuit Board satellite (PCBSat) is being actively developed to fill the intermediate gap between picosatellites and satellites on a chip.

The attractive features of a PCB Sat are its significantly larger area, ability to integrate several subsystems from different processes, and ease of manufacture. COTS components are leveraged wherever possible to reduce construction costs and take advantage of cumulative industry experience.

PCBSats are constructed of circuit board or circuit board clamshell. Circuit boards are typically constructed from FR4 glass epoxy and can contain several layers of copper traces inside and on its surface. FR4 is a common material in electrical engineering and has several decades of proven performance behind it. Densities are typically in the range of I400kg I m 3 and a tensile yield strength of around 240MPa. This is a yield comparable to aluminum with only 52% of the mass penalty, which is attractive, and good justification for using FR4 as a structure. Being less ductile than aluminum the design must prevent the FR4 from being stressed into distortion, otherwise de-lamination and failure will occur rapidly.

6

Introduction

PCBSats typically contain few provisions for attitude control. Me Vittie and Kumar propose a tethered formation of two identical units, each with a single magnetic torque coil (MeVittie and Kumar, 2007). The expectation is that the tethered structure will eventually tighten in orbit and become gravity gradient stable, while the single axis magnetic torque rod can be used to dampen rotation about the nadir. Similarly Barnhart et al. propose a similar design with a single magnetic torque coil, without the addition of a gravity gradient formation. (Barnhart, 2009) One notable exception to this is the 1OOg inspector satellite proposed by Huang et. Al. which uses an array of micro thrusters and a Sec fuel tank aboard a 50x50x50 mm satellite fabricated using photostructurable glass/ceramic materials. These thrusters can be used for attitude and orbit control, and the whole motion module weighs less than 45 grams. (Huang, 2002)

There are particular challenges which need to be addressed with the two PCBsat proposals in order to make the designs space-worthy. Below is a discussion of their shortcomings.

Barnhart/Surrey PCBSAT:
It should be noted that Barnhart acknowledges that the existing prototype PCBsat was not

designed with the space environment in mind. Instead their prototype is intended as a payload module for EyaSat the classroom satelliteTM. EyaSat is a satellite system trainer for aerospace engineering students, and is not flight-able . With this in consideration, the issues limiting the space-worthiness of the Barnhart PCB sat will be addressed.

The communication subsystem does not have enough broadcast power to reach earth from LEO. Instead the satellite must be in close proximity to a larger satellite with ground contact capabilities to be useful. Formation flying with this larger satellite is not addressed, and could limit mission lifetime as differential drag separates the PCBSAT from its mother ship. While this does not mean the mission is unfeasible, it does limit the capabilities of the satellite and its mission.

Attitude control is not formally addressed with the especially under-actuated single magnetic actuator case. The attitude paper referenced is specifically for drag stabilized satellites with 3

7

Introduction

axis magnetic dipole control. The method of attitude control presented by (Psiaki, 2004) uses three deployed vanes to create a badminton style shuttle-cock to create aerodynamic stiffness about the pitch and yaw axis. Stability is then achieved with active magnetic torque rods on all three axes.

The proposed design is actually double the weight of a formal femtosatellite after integration into the flight structure. While the PCB of the PCB sat is only 70 grams, the proposed budget for the enclosed Femto is 200 grams.

The maximum power point tracking (MPPT) circuit proposed from the Maxim application note (Maxim, 2000) is designed to track only a single voltage point in the solar arrays VI curve. This point is chosen in the application note to be the "typical" maximum power point for an earth based cell, which benefits from a moderate thermal environment and suffers from slightly lower insolation. In the orbital environment the temperature of the array can rise to a maximum (equilibrium) of 122 degrees Celsius (Wertz 2009). The internal resistance of the solar cell increases with temperature, and hence the MPP voltage drops. The converter proposed will not track the MPP in this case.

Finally the antenna appendages significantly increase satellite cross section without being treated as deployable appendages. Without some form of active antenna deployment or redesign of the particular radio systems using these antennas the satellite will not fit in the PPOD launcher as proposed.

Me Vittie and Kumar /Ryerson Space Systems Dynamics and Control "Ryefem" PCBsat: Me Vittie and Kumar propose a similar electrical design to Barnhart/Surrey with some flightability issues. While most of the issues presented are not complete failures of the design, they do stand between the design and a complete spacecraft. They are reviewed below.

The radio module proposed comprises almost 20% of the mass budget of the Femtosatellite. This unit offers a tradeoff in the design: ground contact is probably achievable using this module as shipped, however the mass penalty is large. 8

Introduction

Ultra-capacitor energy storage is significantly less mass efficient than lithium polymer batteries, and as a result the ultra-capacitor design can only operate for very brief bursts. Sustained operation during eclipse does not appear feasible due to the limited energy storage capabilities of the ultra-capacitor.

The dual satellite tethered configuration actually makes this Femto 200g, since the other Femto is required for attitude stability. Further each Femto is a clone of the other, yet only one appears to fulfill the mission set out to it. This either results in the waste of half the satellite system or the mission/satellite must be modified to be functional even when pointing in the negative nadir.

1.2.3

Picosatellites: a quick review

As picosatellites, and specifically cubesats, evolved from larger spacecraft, the femtosatellite will evolve from the spacecraft that venture forth before it. The current state of the art in the smallest class of satellites will be reviewed to
gro.~

accustomed with the design philosophies

relating to creating a low cost, lightweight satellite. For a complete treatment of picosatellites refer to (Alger, 2008)

Structurally cubesats are far more complicated than PCBsats. Typically the load bearing frame is comprised of aluminum, with several PCBs layered inside. A notable exception to this approach is CAPE-l (University of Louisiana) which integrates the printed circuit boards with the structure. CAPE-l was successfully launched on the 1ih of April, 2007 and its beacon is listed as semi-operational as of April 2009. Cubesats do not have the mass or volume budgets to afford sealed enclosures for their electrical systems, and as a result the electrical systems are exposed to the vacuum of space, and possibly LEO atmosphere through the less than airtight gaps in the structure.

Attitude determination on cubesats is typically accomplished via magnetometers and sun sensors, when accomplished at all. Attitude control on cubesats is typically magnetic torquers

9

Introduction

or passive. A notable exception to this paradigm is University of Toronto's CanX-2, with momentum wheels and cold gas thrusters.

Power subsystems on cubesats are often elaborate, leveraging maximum power point trackers, deployable solar cells, power control, battery management and enhanced telemetry points. This is likely due to the low amounts of power available in this form factor, as well as the availability of low cost COTS components to implement a variety of these features with little surface, mass and power consumption. Power storage on cubesats exclusively leverages lithium polymer batteries due to their huge mass advantage over NiCd and NiMH cells, as well as the simpler charging protocols.

1.3 Design framework
The scope of this work is to create and prototype a femtosatellite designed for low earth orbit operation. This femtosatellite will be capable of completing basic imaging missions, or missions with similar pointing requirements with payload masses not exceeding 25 grams. This will entail a completely custom design encompassing the following subsystems

·

Command and data handling: This subsystem is responsible for the command and
autonomous operation of the spacecraft, and the dispatching of ground commands at specific execution times.

·

Communication: This subsystem is responsible for the radio data link between the
satellite and ground station. Communication is required to be bi-directional between the satellite and ground.

·

Power: The power subsystem manages energy accumulation from the solar arrays,
battery charge condition and regulates battery voltage down to the bus voltage for reliable spacecraft operation.

·

Attitude determination and control (ADCS): The ADCS estimates the attitude, or
orientation with respect to the earth, of the spacecraft from onboard sensors and maintains required pointing through the actuators on the craft.

10

Introduction

·

Payload: While many payloads could be compatible with the femtosatellite, a

specific payload subsystem has been created to take and store images of various visible objects.
· Structure and thermal: This subsystem carries the mechanical and thermal loads of

the spacecraft during launch and orbit. Typically the structure is most important during launch, whereas the thermal subsystem is crucial during the satellites orbital lifetime.

1.4 Contributions
The present study contributes the following to the state of the art in femtosatellite design:

1.

The femtosatellite platform now has capacity for full attitude determination and control.

11.

The femtosatellite platform now has a lightweight communications system capable of contacting a ground station from low earth orbit.

Derived from the aforementioned contributions, the following missions become feasible for the femtosatellite to perform.

1.
11.

The femtosatellite can act as an inspector satellite to a co-orbiting satellite. The femtosatellite can perform simple earth observation tasks requiring nadir pointing.

111.

The femtosatellite can act as a store-and-forward communications satellite carrying short text messages.

1.5 Thesis outline
Chapter I presents an introduction to femtosatellites and a literature review of studies to date, as well as works related to small satellite design. Chapter 2 covers the requirements used in the design of the spacecraft, and then the specifics of the design. Chapter 3 covers in detail

II

Introduction

the attitude determination and control algorithms used in this design. Chapter 4 details the fabrication method of the satellite, test procedures and results of prototype testing. Finally chapter 5 draws conclusions from this work and offers further avenues of study to realize additional success in this area of research.

12

Chapter 2
Requirements and Design

2.1 Introduction
In this chapter first the requirements for the femtosatellite and mission are presented, and then the subsystem design is explored in detail. While each subsystem is explored individually, many share hardware components with other subsystems. A hardware inventory and block diagram will be shown at the beginning of each subsystem description to give the element physical context.

2.2 Requirements
2.2.1 Mission requirements
Table 2.2-1 Mission requirements Verification 10 Requirement
The mission shall take pictures of arbitrary visible MIS01 MIS02 MIS03 MIS04 MIS05 MIS06 objects. The mission shall be straightforward to launch. The mission should be reconfigurable. The mission should be low cost. The mission data shall be completely recorded. The mission should employ innovative methods. Proposal Proposal Proposal Proposal Proposal Proposal Design Design Design Design Design Design

Origin

method

13

Requirements and Design

2.2.2

System level requirements
Table 2.2-2 System requirements
Verification

ID
SYS01 SYS02 SYS03 SYS04

Requirement
System shall stabilize attitude on all three axes. System shall fit inside a standard cubesat. System shall have 25 grams of payload capacity.

Origin
MIS01 MIS02 MIS02&MIS03

method
Design Design Design Design

System shall use COTS components where possible. MIS04 System shall report basic and payload telemetry to

SYS05 SYS06 SYS07 SYS08 SYS09 SYS10

the ground station. System shall be low cost. System shall be robust.

MIS05 MIS04 Proposal

Design Design Design, Test Design Design Design

System shall support various small science missions. MIS03 System shall be implemented on a single PCB. MIS04&MIS06

System shall use solder/ epoxy for mechanical joints. MIS04&MIS06 The mission should observe standards and MIS02

SYS11

paradigms in small/amateur satellite design.

Design

2.2.3

Command and data handling subsystem requirements
Table 2.2-3 C&DH requirements
Verification

ID
CDH01 CDH02 CDH03 CDH04 CDH05 CDH06 COHO? CDH08

Requirement
Timekeeping shall be accurate to ±250ms. CDH shall maintain a 16 element instruction queue.

Origin
SYSO 1&SYS08 SYS08

method
Design, Test Design Design Design Design Design Design

CDH shall store telemetry for a minimum of one day. MIS05&SYS07 CDH shall allow for a minimum of 1 reprogramming. CDH shall use firmware watchdog timer. CDH shall employ a safe-hold mode. CDH shall maintain queue in non-volatile storage. CDH shall use only the top surface of the PCB. MIS03&SYS07 SYS07 SYS07 SYS07

SYS09&COM15 Design

14

Requirements and Design

2.2.4

Communication subsystem requirements
Table 2.2-4 Communication requirements
Verification

ID
COM01 COM02 COM03 COM04 COM05

Requirement
COM shall transmit data at a minimum of 300 bps. COM shall allow for a reconfigurable bit rate. COM data rate shall default to 1200bps. COM shall transmit a beacon. COM beacon shall be a maximum of 100 bytes. COM beacon shall be transmitted a minimum of once

Origin
SYS11 SYS07 SYS11 MIS05&SYS11 MIS05

method
Design Design Design Design Design

COM06

every 2 minutes. COM beacon shall be re-configurable from the

SYS11

Design

COMO? CO MOB

ground station. COM beacon transmit power shall be +27dBm. COM beacon shall be disabled during ground station

SYS11&SYS07 Design SYS05 Design

COM09

operations. COM shall transmit with a maximum power in excess

Design

COM10

of +27dBm. COM transmit power shall be reconfigurable from

SYS07

Design, test

COM11 COM12

ground. COM shall radiate RF energy towards the earth. COM shall not use error correction, encryption or

SYS07 SYS05

Design Design

COM13

data whitening while beaconing. COM shall allow for the enabling of error correction, encryption or data whitening via ground station

SYS11&SYS07 Design

COM14

command. COM shall use the bottom of the PCB as a radio

SYS07

Design

COM15

reflector.

SYS09&COM12 Design

15

Requirements and Design

2.2.5

Power subsystem requirements
Table 2.2-5 Power requirements
Verification

10

Requirement POW shall charge battery when battery is at correct

Origin

method

POW01 POW02 POW03 POW04 POW05

temperature. POW shall not attempt charge battery beyond 100%. POW shall not allow battery to fully discharge. POW shall supply 3.0V ± 3% to the system. POW shall supply up to 1A without fault. POW shall supply energy to the system at a minimum

SYS07 SYS07 SYS07 Proposal Proposal

Design Design Design Design, Test Design, Test

POW06

efficiency of 90% from nominal to full load. POW shall attempt maximum power point tracking on all

Proposal

Design, Test

POW07

solar arrays. Solar arrays shall perform at a minimum of 15% peak

SYS07

Design

POW08

efficiency. POW shall not use the back of the PCB for any

Proposal

Design

POW09

components aside from the solar array.

SYS09&COM15

Design

2.2.6

Attitude determination and control subsystem requirements
Table 2.2-6 ADCS requirements

IVerification
10 Requirement ADC shall achieve a mean nadir pointing ADC01 accuracy of 5 degrees.
~DC actuators shall weigh no more than 15

Origin

method Design,

SYS01&SYS05&SYS08 Simulation

~DC02

grams. ADC shall last the lifetime of the spacecraft.

Proposal SYS07

Design, Test Design Design Design

~DC03

ADC04 ADC05

ADC shall allow for update of control algorithm. SYS07 &SYS08 ADC shall only use the top surface of the PCB. SYS09&COM15

16

Requirements and Design

2.2.7

Structure and thermal subsystem requirements
Table 2.2-7 Structure and thermal requirements
Verification

ID SCT01

Requirement
SCT shall survive launch environment stresses. SCT should insulate the electronics from LEO

Origin
SYS07

method
Design, Test

SCT02 SCT03

atmosphere.
~hermal control shall not use heaters.

SYS07 Proposal

Design Design

2.3 System block diagrams

--Power subsystem Command and data handling Communication -Power- -Data- -

I

Attitude determination and control system

Payload

L---

Figure 2.3-1 System block diagram

-

I I

The topology of the satellite system is illustrated in Figure 2.3-1. This satellite uses a star topology in both the data and power networks. This topology grows from the hardware interfaces, which lend themselves to the star topology while making a ring topology significantly more complicated. Figure 2.3-2 shows the corresponding hardware block diagram of the satellite system. The method of interface for each connection is detailed where applicable. The electrical subsystems only interface passively with the structure and thermal system of the satellite; hence these systems are omitted for clarity.

17

Requirements and Design

~~~-a-rr_a_ys--~==--~ro_n_v_e-rte_r_s~~~----~--~
I

6

------>,

Solar

MPPT

Battery

········

--Power---Data-Microwave

L------Ana log

Power regulator

r----"t .

Logic
3.7V

Payload

Long term storage memory

Magnetometer

Main processor

.--------------- ..
I I I I I I

~PWM-

Magnetic attitude actuators

!
I I I

Radio

!
I I I

-------- ·------L--------'

LOGIC

RF amplifiers

Figure 2.3-2 Hardware block diagram of satellite system

18

Requirements and Design

MPPT converters

Power regulator

Batt er y

90mm

t;;t~~==~~ - ~~-,.,~--r .-:-..-:-..7 .....,....

+--------------- Microprocessor
Magnetometer

RF amplifiers

'
~--------------------------90mm--------------------------~

Figure 2.3-3 Prototype PCB art showing various subsystem components, body fixed co-ordinate frame denoted in the upper right hand corner

19

Requirements and Design

2.4 Command and data handling
Hardware utilized: cc251 0 microprocessor AT25DF641 flash memory

Cc2:510 micmprooess<N

·········· ············SP!

AT25DF641
64 ~vlegabit flash mem::::~y

Figure 2.4-1 C&DH subsystem hardware block diagram

The command and data handling subsystem exists inside the cc251 0 microprocessor. This microprocessor offers better cycle performance than the classic 8051 architecture due to the elimination of wasted bus states. The C&DH's responsibilities are to process ground station commands and execute them in a timely manner, while recording telemetry for later processing. All subsystems are connected directly to the C&DH in a star topology.

The 64 megabit flash memory allocated to the C&DH system is used to store telemetry items for later retrieval. The amount of flash memory required is determined by the telemetry string size, beacon frequency and storage interval. The requirements indicate that the telemetry string must be less than 100 bytes, broadcast at an interval of 2 minutes and stored for 1 day (1440 minutes) Hence the memory block allocated to the C&DH must be greater than 1440 X 100 = 72000 2 As it is convenient to allocate memory in blocks with sizes of 2n , the base (2.1)

i

7

(or 131 072)

bytes are allocated to the C&DH. The corresponding address vectors OxOOOOOOh through OxO 1FFFF are exclusively forbidden to the rest of the satellite subsystems. This is a total of 1.63% of the memory space available on the satellite.

20

Requirements and Design

While realtime operating systems are available for the 8051, the initial mission, with very well defined payload operations and timing requirements will not require one. The software operates in a single main loop, each time performing a number of housekeeping tasks, these tasks are: · · · · · checking to see if the radio has received a valid ground packet checking to see if a payload instruction must be executed recording telemetry handing off control to the attitude/navigation subsystem handing off control to the power subsystem

Yes·

Process packet

Record telemetry

no

Yes·

Execute queued instruction

CaiiADACS code

no Call power subsystem code

Figure 2.4-2 CDH main loop firmware flow

Further, in parallel with the main loop, several interrupts will occur, these interrupts are: Highest priority - System clock Low priority - Radio module

21

Requirements and Design

Increment tick counter

>--------Transmitting

Receiving Reset tick counter Yes---+ Increment second counter
I

Set DMA for radio to buffer

Set DMA for buffer to radio

No

~----------~
Yes-. Flag!

I

c~Ret~um)
Figure 2.4-3 CDH interrupt firmware flow

y

The system clock interrupt must be serviced with the highest priority to maintain good counting accuracy. If the free running counter overflows before the last timer interrupt has been served, the new interrupt will alias with the previous and a tick will be lost. All timekeeping on the satellite depends on this interrupt operating flawlessly. This interrupt has multiple initiation sources, however none of them will be used to avoid overloading the interrupt service routine.

The C&DH maintains three separate clocks: a second counter, a millisecond counter and an arbitrary timeout counter. The seconds counter is initiated during boot up, right after the deploy switch is released. The seconds counter begins at zero, counts seconds since boot and is never reset. The seconds count is maintained in a 32-bit unsigned integer which can accumulate a maximum of 4294967295 seconds before overflowing, or approximately 136 22

Requirements and Design

years. The milliseconds counter is initiated concurrently with the seconds counter, and accumulates every millisecond to a maximum count of 999. The counter is reset to zero at the edge of the thousandth tick, corresponding with the accumulation of another second. This counter serves to provide finer granularity for the seconds counter. Finally the timeout counter accrues ticks at the same rate and phase as the millisecond counter, however is free to be reset by user code. This timer is used for generating reliable multi-millisecond user delays without additional code fragments to handle overflow conditions. The timeout count is maintained in a 16-bit unsigned integer which can accumulate a maximum of 65.535 seconds before overflowing.

The radio is assigned to the lowest priority interrupt as it is the slowest data source on the satellite, and has extensive hardware buffering to ensure the integrity of the received data. In a usual radio exchange, the interrupt service routine will only be entered once to start the transaction, and once to complete it, with the direct memory access (DMA) controller and the radio first-in-fast-out (FIFO) buffer handling the intermediate steps. For these reasons the radio can tolerate some latency in interrupt processing.

Since interrupts can be dangerous to program flow and command execution latency, all efforts are made to reduce the amount of time from interrupt entry to interrupt exit. Furthermore, to harden the system against single event upsets, all masked interrupt sources will vector instead to the main loop entry point for satellite re-initialization. Given sufficient code space these interrupts could be allocated their own service routine which explicitly remasks the interrupt source and returns control to the main loop. Such a service routine can also be used to increment a special fault counter. The probability that a SEU would unmask an interrupt as opposed to corrupting less critical data is low given the relative memory space they occupy, however the occurrence of a spurious interrupt would be catastrophic to the stability of the system as a spurious interrupt allows for the execution of random bytes in memory.

23

Requirements and Design

2.5 Communications subsystem
Hardware utilized: CC251 0 microprocessor T7026 Radio amplifier module UPG20 15 radio antenna switch Antenna
Transmit Logic
signal~---.~~~~~~-----,

Patch Antenna

Cc251 0 microprocessor

.,,

UPG2015 RF switch

T7026 RF amplfiier module

UPG2015 RF switch

Microwave Receive lo9ic si9nal

Figure 2.5-1 Communication subsystem hardware block diagram

The communication system takes advantage of the embedded radio modem in the cc251 0 microprocessor. This modem offers a full complement of features to make data transmission between the ground station and the satellite as robust as possible. The minimum signal required for a 1% bit error rate at 2400 bps is -103 dBm, or 5 *10"-14 W. Data can be transmitted at variable rates to manage the ratio of bit energy to noise Eb I N 0 for flawless communication. The radio supports automatic data whitening which ensures even power distribution across the expected spectrum. Forward error correction is supported in hardware, data can be packed with extra check bits to prevent single bit faults from corrupting transmitted data. Finally the module supports 128 bit AES encryption, which can be used to prevent unauthorized access to the most sensitive of commands the satellite must perform.

The radio modules responsibilities are exclusively the reception of commands from the ground station and their transfer to the C&DH's command buffer, and the transmission of the C&DH's telemetry or Payload data packets to the ground station. The radio requires very 24

Requirements and Design

little computational power from the cc251 0 microprocessor, as the radio has associated hardware modules to streamline the movement of data to and from RAM. Radio interrupt design is covered in the command and data handling section of this chapter.

The default mode of the radio is receive mode, awaiting the reception of a valid preamble to a packet. In receive mode the T7026 amplifier module is put into receiver mode, activating its low noise amplifier (LNA). The antenna switch is configured to patch the LNA portion of the amplifier in between the cc251 0 and the antenna, leaving the power amplifier open circuited at both ends. The LNA adds 16 dB of power intensity (gain) to the received signal to improve link budget performance.

When instructed by the C&DH the radio module will enter transmit mode. The T7026 amplifier will enter transmit mode, and the antenna switch will remove the LNA portion from the circuit and replace it with the power amplifier. The power amplifier adds up to 30dB of gain, to a maximum output power of 28 dBm, or 630 mW. This enables the femtosatellite to contact earth from LEO.

The antenna used is a planar patch antenna as described by (Tronquo 2006) or (V ermeeren et al, 2001 ). This style of antenna is flat, with radio emissions radiated from its broadside with circular polarization. The addition of a reflector attenuates emission in the normal direction of one antenna surface, while amplifying emission on the opposite surface. This antenna was chosen over more conventional dipole, monopole or designs primarily for space conservation and deployment simplification.
Table 2.5-1 Radio antenna comparison
Antenna style Dipole patch Gain 6dbi 6dbi mass 5-10g -2g height 22mm 2.54mm polarization Linear Circular Deployment complexity high low

The dipole antenna is heavier than expected because of the extra height associated with the dipole radiator. In order to keep the impedance high enough for effective coupling the 25

Requirements and Design

radiators must be 22mm above the reflector plane. Given that the desired height of the femtosatellite must be 1Omm inside the launcher this implies that the antennas must be on some deployable mechanism with a high degree of mechanical and electrical (specifically radiofrequency) robustness. The patch antenna is small enough to simply use without designing for a deployable structure. The simplicity of using a patch antenna comes with a static 2.54mm height penalty, negligible mass penalty as the patch can be made from foil, and no electrical penalty. Circular polarization is a desired quality to avoid polarization attenuation of the received signal which is inherent in mismatched linear systems.

Figure 2.5-2 Radio patch antenna drawing (Tronquo 2006)

The choice of a directional antenna requires that the direction of radiation be coincident with the direction to the recipient of said radiation. This implies attitude control must point the antenna at the earth. The angular radii of the earth at orbital heights of 400 km and 800 km are (Larson and Wertz 1999) (2.2)
Table 2.5-2 Angular radius of the Earth given various orbits

Orbital Height 400km 800 km

p

70.22° 62.69°

26

Requirements and Design

As such the beam width of an antenna to illuminate all of the Earth from these orbits would be double the Earth angular radius, or 140.44° for the 400 km height and 125.38° for the 800
km height. The selected patch antenna offers a beam width of 120 deg before the antenna

attenuates the transmitted signal.

r · · · · . .... \
I

;r\

l I

\

t

Figure 2.5-3 Antenna radiation pattern, modified for clarity (Tronquo 2006)

The lack of full earth illumination means that the link on an overhead pass will be hindered during the opening and closing minute. Given that the radio module will be in low data rate beacon mode at the initiation of any contact window it is likely that the link budget margins can absorb this loss. The losses at the extreme edge of the beam width are manifested as gains in the center of the radiation pattern, with almost 9 dBi of gain directly overhead.

The link budget for this satellite has been designed around a 400 km circular orbit. Considering an overhead pass we can calculate the absolute maximum received signal strength and absolute minimum received signal strength and compare these values against the radios sensitivities to estimate the quality of our link. Because the final launch parameters for this satellite are open to some leeway, the link budget will also be calculated for an 800 km circular orbit, which is a typical sun synchronous orbit altitude.

The maximum distances from the ground station to the satellite are calculated below. (Larson and Wertz 1999) Assumed parameters are a minimum elevation angle orbital altitude of 400 km and 800 km:
&min

of 5 degrees,

27

Requirements and Design

sin 17max =sin p cos &min
Amax400km

= 90- 5 min -rymax

(2.3)

D
max

= R sin A-max E · SlnlJmax

Table 2.5-3 Maximum range for various orbits

Orbital height
400km 800km

1lmax

A max

Dmax

69.62° 62.26°

15.37° 22.73°

1804 km 2784 km

This distance is the source of the single greatest loss in the radio linlc space loss. Space loss is calculated by (Larson and Wertz 1999)

Ls = 147.55-20 logS- 20 log f

(2.4)

Where Ls is the loss in decibels, S is the path length (or range) of the communication link in meters and f is the carrier frequency in Hz. Finally the received signal strength for each case can be calculated based on the link parameters. Figure 2.5-4 and Table 2.5-4 illustrate the best case, an overhead pass at a 400 km altitude; and worst case, the edge of the contact window at 800 km altitude; link budgets.

Figure 2.5-4 Link budget geometry

28

Requirements and Design

Table 2.5-4 Best and worst case link budgets
Overhead@ 400km height !rX power Frequency Range Satellite antenna gain Equivalent Radiated Power In watts space loss
~round

Edge of window @ 800km height 27dBm 2450 MHz TX power Frequency Range Satellite antenna gain Equivalent Radiated Power in watts space loss ground antenna gain Ground LNA gain Received Signal Strength RSS in Watts Bit energy (Eb) System temperature 27 dBm 2450 MHz 2784000 m OdBm 27 dBm 501.19 mW -169 dB 30 dBi 16 dB -96.13 dBm 2.4x10- 13

400000 m 5dBm 32 dBm 1584.89 mW -152 dB 30 dBi 16 dB -74.27 dBm 3.7x10- 11

antenna gain

K;round LNA gain Received Signal Strength RSS in Watts Bit energy (Eb) System temperature No Eb/No

w

w

1.5x 10-14 J 100000 K 1.38x1018

1 X 10-16 J 100000 K 1.38x1018

W/Hz No Eb/No

W/Hz

40 dB

18 dB

To achieve a 1% bit error rate using FSK demodulation, the required ratio of bit energy to noise spectral density is 9 dB. Assuming a 25.3 dB system noise figure, the receiver sensitivity for various bitrates at 1o/o bit error rate is calculated in Table 2.5-5.
Table 2.5-5 Minimum Required signal strength for various bitrates
Noise Data rate (BPS) density (W/Hz)
18 2400 1.38x 1018 10000 1.38x 1018 250000 1.38x 1018 500000 1.38x10-

~atasheet

Required Eb (J)

RSS (dBm)

RSS (dBm)
-103 -98 -90 -82

1.09572 x 1

o-l7
17

-105.8 -99.6 -85.6 -82.6

1.09572x101.09572 x 1

o-17 17 1.09572 x 1o-

29

Requirements and Design

As a result we can calculate the link margin, which is the amount in excess of minimum required signal strength for a 1% bit error rate, for each datarate and range. This data is shown in Table 2.5-6.
Table 2.5-6 Link margins for various ranges and datarates, all values in dBm.
rate/range
400

Links with margins below 3db are not expected to function well due to implementation losses. Areas blacked out are calculated to be negative values, which represent received signal strengths below the minimum required to achieve 1% bit error rate. Overall the link performance appears excellent, offering the possibility of high data rates while overhead and the opportunity to monitor the satellite beacon towards the very edge of the contact window.

30

Requirements and Design

2.6 Attitude determination and control hardware
Hardware utilized: cc251 0 microprocessor PNI MS21 00 magnetometer and Z axis sensor A, B and Z axis magnetic torquers 3 Allegro A3903 DC motor drivers XORgate

PWM

Allego A3903 DC motor Driver

Power PWM

A magnetic
torquer

1--PWMPNI MS2100 Magnetometer 1---SPICc2510 microprocessor Enable '- Logic XOR gate PWM.. Allego A3903 DC motor Driver

Analog
I

I

PWM

Allego A3903 DC motor Driver

Power PWM

z magnetic
torquer

PNI External Z-axis sensor

Figure 2.6-1 Attitude determination and control hardware block diagram

The attitude determination and control system is designed to stabilize the satellite on all three axes and to provide proper pointing throughout the mission lifetime. The attitude determination system relies solely on the three axis magnetometer to make attitude measurements in conjunction with a Kalman filter. The attitude control system uses a combination of 3 magnetic torque actuators and passive drag stabilization to provide pointing of the antenna and payload to the nadir. For a detailed review of the attitude determination and control algorithms employed on this satellite please refer to chapter 3.

Magnetometer selection was driven by the need to reduce component count in interfacing with the cc251 0 microprocessor. Magneto-resistive magnetometers are often complicated by

31

Requirements and Design

the addition of external amplifiers and magnetic set/reset circuitry which increases footprint and power requirements, as well as slowing design work. The MS21 00 from PNI corporation integrates dual axis magneto-inductive compassing with a digital measurement ASIC, which has provisions for attaching a third out of plane sensor. This sensor uses only 6 wires to interface with the microprocessor (3 of which are bus wires) and consumes an order of magnitude less power than traditional magnetometers. The magneto-inductive design 1s inherently less prone to offset drift, improving the effectiveness of ground calibration.

Magnetometer data is compared to the IGRF ephemeris model of the geomagnetic field. The most current model is the IGRF2005, which is a 13th order spherical harmonic approximation of the geomagnetic field, with estimations of the secular variation components. Given a specific time and location the local magnetic intensity and direction can be determined. Orbital position to determine magnetic field will be determined using the SGP4 propagator from Celestrack and updated elements from the ground station.

Attitude control is accomplished through magnetic torque rods and drag stabilization. Drag stabilization works to restore the pitch and yaw angles with respect to the satellites velocity vector to zero, however this method offers no damping, especially since the satellite will be constructed to be as rigid as possible. In a 400 km orbit the peak torques from aerodynamic drag occur when the orientation about an axis is 90 degrees to the direction of travel. These torques are introduced by offsetting the center of mass of the satellite by 1em from the center of pressure. The aerodynamic stabilization dictates the choice of the satellites co-ordinate system and resulting flying wedge configuration.

The magnetic torque rods are driven by the allegro A3903 DC motor driver, which is an intelligent H bridge. The motor driver IC is implemented in a 2mm by 2mm DFN-8 package, which is placed on the circuit board inside the Z-axis torque coil to take advantage of its EMI shielding effects. The XOR gate is used to create the complementary PWM signal to drive the A3903 ICs. The traces which carry the complementary PWM signal are paired to limit EMI.

32

Requirements and Design

The magnetic torque rods are the primary mass consumer of the ADACS subsystem and as such every effort is made to minimize their mass. A tradeoff exists between mass and power with magnetic torquer design, where for a given dipole moment a fixed number of amp-turns are required to create it. More wire windings allow for lower currents (and hence power) but add weight with each tum. Less windings make the torquer less power efficient and drive up energy requirements.

The magnetic torque actuators have been sized for a dipole moment of 0.01 Amp· turn· m 2 · This realizes a minimum peak torque of 3. 7 5 ·1 o-7 Nm, which corresponds to an angular acceleration of 0. 72° I sec 2 · This "minimum peak torque" occurs when the satellite is positioned at the magnetic equator, which exhibits the lowest magnetic field magnitude. Maximum peak torque occurs over the magnetic poles and has a magnitude of 1.14 ·1 o-<> Nm, corresponding to an angular acceleration of 2.18° I sec 2 , which is sufficient for an Earth observation satellite. The equation for calculating the dipole moment of a magnetic torque rod is given below.
M= NIA
-+Nd Jlr

1

(2.5)

To realize a low mass, low power magnetic torque actuator a variation on the classic design is presented. The magnetic torque actuators mass is dependent on two items: the mass of its core, and the mass of its windings. Cores are selected based on their magnetic performance and geometry to optimize the dipole moment produced. Windings are selected based on their ability to carry current and proper resistance characteristics. Core optimization beyond using ferrite cores proves to be difficult as higher permeability magnetic alloys saturate quickly, limiting their usefulness as an electromagnet.

Given that we are limited to a MnZn ferrite core or an open core and the core geometry is fixed by the mission, which is true in this case as the femtosatellite severely constrains the available volume; we must find additional mass and power savings in the winding. In this case copper as a winding material was abandoned in favor of aluminum. The density of

33

Requirements and Design

aluminum is around 2700kg I m 3 , as compared with coppers 8900kg I m 3 · The design current is only 50 rnA at full moment, meaning that the higher resistivity of aluminum will not cause excessive power dissipation.

The two in plane magnetic torque rods are constructed identically. The core is 3mm diameter manganese zinc ferrite, 75mm long. The mass of the core is 2.8 grams. The demagnetization factor ( Nd) of this geometry is estimated to be .01, the maximum allowable current into the torque rod is SOmA, and thus the required number of windings is
1 (-+Nd)M
N

=

,Ur

!A

= 284

(2.6)

Using aluminum American wire gauge #30 (AWG30 or 30AWG) wire the total winding mass is 0.8 grams, and the final mass of the torquer is 3.6 grams.

The one out of plane magnetic torque actuator (body Z axis torquer) is limited by the internal height of spacecraft. The internal gap between the board surface and the solar array is 5mm tall; hence the area must be increased to realize the required magnetic moment. An inner diameter of 40mm was selected for the coreless actuator to provide a good balance between surface area consumption and magnetic performance. The demagnetization factor for this configuration is tentatively estimated at 0.8, however demagnetization factors for hollow cylinders trends downwards for increasing ratios of inner radius to outer radius (Kobayashi 1996).

The resulting actuator having a dipole moment of .01 at a current of 50 milliamps is 48 mm in diameter, 5.52 grams in mass, comprised entirely of 286 turns of the same aluminum wire used in the previous torque rod construction. This mass is expected to be the maximum mass (due to uncertainty in demagnetization factor), and can likely be reduced after extensive testing.

34

Requirements and Design

Figure 2.6-2 Magnetic torque rod rendering

The total mass of the attitude control actuators is 12.85 grams, neglecting electronic support equipment, which is consumes negligible additional mass (sub gram) due to modem electronic packaging paradigms. The surface area consumption of the two in plane torquers is 6cm 2 cumulative, or 7.5% of the available. Surface area usage of the final open core torque actuator is low despite the large diameter, using only 5.52cm 2 , or 7.0%. The total area bounded by the open core actuator is 12.5cm 2 , but this area is not unusable. The power electronics which drive the magnetic torque actuators can be placed inside the Z axis torquer to make effective use of the space, while taking advantage of the conductive shield the aluminum windings will create to limit electromagnetic noise emissions to the rest of the craft. The Power subsystem section describes additional capitalization of this space and shielding effect for the power subsystem.

35

Requirements and Design

The inductance of the two ferrite rods can be found by the following formula:
2

L = J1N A= 8.6mH I

(2.7)

Given the inductance and the PWM frequency the ripple current can be calculated. The PWM frequency is chosen to be the highest possible with 8 bit precision, which is 101kHz. The ripple current in the torquer is then:

di = VL = 3.0 = 349AI dt L 0.0086 1s

M=-d'-=
!PWM

J!j_

349
}Q}QQQ

(2.8)

=3.45mA

36

Requirements and Design

2. 7 Power subsystem
Hardware utilized: CC251 0 microprocessor Battery LM2852 synchronous power converter LM3 814 current sensors Sun-side Solar array Earth-side solar array
--Power-

Sun-side solar array

LM3814 Current sensor

MPPT converter

Battery

Earth-side Solar array

LM3814 Current sensor

MPPT converter +-'1'---.J

PWM

PWM~~~1 PWM I Sh~::::glc---t
I

LM2852 3.0 volt synchronous power converter

PWM

PWM

Cc2510 microprocessor

Figure 2.7-1 Power subsystem hardware block diagram

The electrical power subsystem is responsible for providing regulated power from the battery to the electrical loads of the satellite, and extracting the maximum amount of power from the solar arrays. Battery charging must also be controlled to maximize battery lifetime. The power converters are located inside the Z-axis magnetic torque coil to take advantage of the EMI shielding the windings offer, and the otherwise unusable space bounded by the torquer. 37

Requirements and Design

(hi

Figure 2.7-2 (a) PCB art of power subsystem and (b) photograph of assembled power subsystem illustrating magnetic torque coil space constraints

The Femtosatellite uses two solar arrays, one mounted to the bottom of the printed circuit board, at the surface of the radio reflector, and hence is referred to as the "earth side" array. This nomenclature stems from the fact that the antenna must always point towards to the earth to satisfy link requirements. Hence the second array, mounted on the scaffolding on the other side of the satellite faces the sun more often, and is referred to as the "sun side" array. The sun side array is the primary power collector, with a surface area of 64cm 2 , the maximum energy input is 1.3 W. The array voltage is 4.4 V peak. Given that the desired attitude for earth observation and antenna pointing is aligned with the orbital frame, the orbit inclination will introduce cosine losses in this array seasonally.

The earth side solar array serves two functions, the first is to provide the satellite power while tumbling and before initial attitude capture. The second long term task is to harness solar energy from earths albedo, which can be as high as 35%, or 478 WI m 2 · (Larson and Wertz, 1999) The size of this array is hindered by the communication antenna, and as such only covers 39cm 2 · The maximum solar energy collected from this array is 280 mW. The array voltage is 4.4 V peak.

38

Requirements and Design

The maximum power point tracking converter has been implemented with a minimum of components, and a fail safe method of energy harvesting should the main processor fall offline. The structure of the converter is a boost converter.

I. So 1 ar .arr ayT>-+-o....,.[...... o __

J __.....---·~~ll-0-·-T---+-<·(
Jf

8 at tery I

Control

Figure 2.7-3 MPPT boost converter structure

The structure of this converter allows for maximum energy extraction as long as the maximum power point of the array is below the battery voltage in addition to the diode forward voltage, which is the case when the array is experiencing low insolation, or is heated to a high temperature. In the case when the array maximum power point voltage exceeds the voltage of the battery and diode, the array will operate in direct energy transfer mode, which is expected to be less efficient. Given that the battery will only be discharged 10% per orbit, the minimum battery voltage is expected to be in the range of3.6 to 3.7V, which is about the maximum power point of a room temperature solar array under maximum insolation, hence direct energy transfer in this case would be optimal regardless. In actual fact the majority of battery charging will occur just after the eclipse period when the battery is at optimal temperature to receive the charge, and has just finished its discharge cycle. This period of charging is characterized by exceptionally low insolation values, and the maximum power point voltage will be lower than the expected battery voltage. By the time the array is in full sunlight one quarter of the orbit will have passed, and the array will have attained a significant temperature rise over the optimal, lowering the maximum power point voltage as well. At full insolation the battery will have acquired enough energy to be fully charged, and will float at a voltage of around 4.1V.

39

Requirements and Design

The MPPT algorithm runs on the cc251 0 processor, and uses the "perturb and observe" method of power point tracking. This algorithm is simple, but has been known to demonstrate poor tracking in rapidly varying insolation periods. (Femia 2005) Rapidly varying insolation is not expected however due to the lack of clouds in LEO. The operating point of the array is defined as the voltage the array operates at, and the resultant current at that voltage, in other words: the power output. The operating point is varied by adjusting the duty cycle of the boost converter to load down the array, or unload the array. The Perturb and Observe algorithm makes three power measurements around the current operating point of the array: one at exactly the operating point, one below the operating point (defined by the perturb parameter delta) and one above the operating point. The array operating point is then adjusted in the direction of maximum power, unless both perturbed measurements are lower than the current operating point, implying that the MPP has been achieved.

Voltage
ibl

Figure 2.7-4 Solar array (a) power and (b) current characteristics (non-dimensional) given various insolation and temperature conditions. adapted from (Femia, 2005)

The 3 V regulator chosen for bus regulation is the LM2852-3.0 synchronous buck converter from National Semiconductor. This converter is attractive due to the low space requirements and high efficiency. A synchronous converter offers advantages over a simple freewheeling buck converter because the losses across the freewheeling diode are removed from the system. Instead a MOSFET is used as a switch to allow the converter to freewheel during the un-powered cycle.

40

Requirements and Design

~ L--+--.--~,___-1.-</us voltage

-

~
TI

,Oio

~

-

~

TIT

~

~-----, ·0~0 ];Bus voltage

+---J

~~

Figure 2.7-5 (a) A simple buck converter and (b) A synchronous buck converter

The LM2852 provides this synchronous, high efficiency conversion autonomously, requiring only 5 external components. The final regulator circuit schematic is shown in Figure 2.7-6.

Rf AVin EN Sgnd SNS NC NC REG LM2852 PGND PGND

ss
NC PV[N PV[N

sw sw

l

Figure 2.7-6 LM2852 power converter circuit diagram.

41

Requirements and Design

84~~--~~~~~~_.~~

0,1

1.0

Figure 2.7-7 LM2852 efficiency curve (National Semiconductor, 2006)

As can bee seen in Figure 2.7-7 the efficiency of this power converter is greater than 91% for currents up to 1 amp. The maximum load is less than 0.7 A, and the nominal load is approximately 75 rnA (both shown in table 2.6-1). The efficiency of the regulator is greater than 92% for this entire spectrum, satisfying the power regulation requirements. Additionally the power regulator has a shutdown pin which can be put to good use. There may come a time when the satellite requires a full power cycle to be restored to proper operating condition. This enable pin should normally be in a logic high state to provide power to the satellite. As an extreme measure the fault determination and correction code on the microprocessor, or the ground station command, can assert this pin to a low state through a timer circuit to enforce a satellite wide power outage. After the timer expires the satellite will boot fresh and single event upsets in the cumulative ram of the satellite will be cleared.

42

Requirements and Design

Shutdown

Blackout

Figure 2.7-8 Schematic of converter shutdown circuit.

After the assertion of the blackout pin, the blackout timer capacitor will be charged, and discharge through the blackout timer resistor, the resulting discharge curve is (2.9) C is chosen to be 2uf to facilitate rapid charging (before the blackout disables the processor) and R is chosen to be 1OMohm to ensure a long term reset. The gate threshold voltage of the disable FET is 1.2V, or 40% of the initial capacitors charge voltage. The resulting blackout time is then ln(.6) = - = 10.21s 20 which is sufficient to reset the entire satellite to its initial state.
-t

(2.10)

The battery has been chosen to store 500mAh of energy at a nominal voltage of 3.7V. This battery is a single cell lithium polymer secondary cell type with a rectangular form factor. This battery chemistry undergoes irreversible changes when the cell is discharged below 2.8V, and the spacecrafts power management software will be programmed to shutdown the spacecraft before the battery undergoes this change. The maximum permissible voltage is 4.2V before irreversible and catastrophic failure occurs.

43

Requirements and Design

Lithium polymer battery chemistry is temperature sensitive. The impedance of the battery increases as the temperature decreases, and capacity will be perceived to decrease. At high temperatures the battery is capable of very high discharge currents, which can cause internal heating and eventual catastrophic failure. Typical safety cutoffs for lithium polymer batteries are around 90 degree Celsius. The femtosatellite will never draw more than 7SOmA from the battery, limiting the capacity for internal heating and allowing operation at higher temperatures without catastrophic failure.

The power budget was calculated using a reference orbit of 400 km mean altitude, circular, 45 degree inclination. Cosine losses have been calculated presuming the primary mission of nadir pointing is maintained, and these losses have been included in the "RMS duty" calculation. Eclipse periods have been estimated as half of the orbital period, despite being somewhat less. Overall Table 2.7-1 represents the absolute minimum power the satellite will be expected to operate on.
Table 2.7-1 Power budget Electrical Loads
Voltage Amperage Item Microprocessor Radio system RX Radio system TX Magnetic torque rods Sums Max load Duty cycle Average load

(V) 3 3 4.2 3

(A)
0.02 0.02 0.5 0.15 0.69

(W)
0.06 0.06 2.1 0.45 2.67

(non-dim)
1 0.95 0.05 0.01

(W)
0.06 0.057 0.105 0.0045 0.2265

Solar Supplies
Area cell array Upper (sunshine) Lower (earthshine)
~urns

Efficiency Max supply

RMS duty

Average supply

(m2)
0.0064 0.0039

(non-dim)
0.15 0.15

(W)
1.309 0.234 1.54344

(non-dim)
0.225 0.225

(W)
0.295 0.053 0.347

44

Requirements and Design

The orbital average power consumption is shown to be 121 mW less than the orbital supply, resulting in a balanced budget with a 53% surplus. This surplus can be partially allocated to payload power requirements, and additional ground contact associated with payload operations.

The energy required during the eclipse period is 629J, this corresponds with 53mAh of battery capacity discharged during the eclipse period, or slightly less than 10%, meaning the battery operates at a very shallow depth of discharge, potentially improving the cycling performance by as much as a factor of 10.

45

Requirements and Design

2.8 Structure and thermal
Hardware Utilized: Printed circuit board Solar scaffolding Solar arrays

I c)

(d)

Figure 2.8-1 Femtosatellite renderings (a) complete satellite, sunside view (b) Earth side showing patch antenna (c) Sunside with solar panels removed for clarity (d) solar scaffolding

The structure of the femtosatellite is primarily FR4 fiberglass, which is the prime component of the Printed circuit board (PCB); which is used for mounting and operating the electric circuits of the satellite. The printed circuit board is sized to fit inside of a cubesat such that many could be stacked inside of a typical cubesat for transit and deployment in LEO. In addition to the main wafer structure, thin aluminum scaffolding is used to support the sun side solar array.

46

Requirements and Design

The printed circuit board is an ideal structural material for small satellites. FR4 has the same yield strength as aluminum, with half of the density. FR4 also has a lower magnetic permeability than aluminum (approaching that of free space) which reduces the systems impact on the magnetometer measurements. The satellite is designed to fit into a 90 mm by 90 mm by 10 mm rectangle, with notches in the comers to clear the side rails of the host vehicle. The PCB is shaped to exactly these dimensions to maximize electronics area.

The PCB topside is used for mounting electronics and their associated traces. The bottom is used for mounting solar panels to form the earth side array, and mounting the antenna. Additionally the copper ground plane on the backside of the array makes an efficient reflector ofRF energy, meaning that the structure is acting as part of the antenna as well.

The aluminum scaffolding is designed to support the solar array, as well as to conduct energy gathered from the solar array to the main board. Both heat and electricity flow down the solar scaffolding. The solar scaffolding is constructed from 0.30 mm aluminum plate, and gains rigidity from the solar array it is soldered to.

Solder or epoxy is used for all mechanical joints. Small machine screws are typically used to assemble a small satellite, sometimes these screws are made from aluminum. Aluminum screws are very sensitive to stripping during installation, and steel screws have a large magnetic signature which makes them unattractive in such a small package. Solder and epoxy suffer from neither of these flaws, and avoid requiring holes in the PCB which complicate circuit routing.

Thermally, the satellite consists of three major nodes: the upper solar array, the PCB and lower array, and the battery. Each of these nodes has a high degree of internal heat conductivity, and some isolation from adjacent nodes.

47

Requirements and Design

Table 2.8-1 Femtosatellite mass budget
Mass Item
PCB Battery electronics Solar array Magnetic control rods Patch antenna Payload

(grams)
28 12 5 10 15 5 25 100

Sum

Table 2.8-2 Thermal node heat capacities
Heat capacity Node
Sunside array PCB Battery

(J/deg)
3.84 15.26 14.4

Table 2.8-3 Thermal junctions between nodes
Resistance Junction
Sunside to PCB PCB to battery

(deg/w)
4.16 0.38

48

Requirements and Design

iI
e=.85, a=.765

Sunside solar array 3.84J/deg

'

I

Battery 14.4J/deg 0.38 deg/w

I

· t

PCB 15.26J/deg

e=.85, a=.765

+

Figure 2.8-2 Thermal model of satellite system

'

Aluminized Mylar foil (0.002 inch or 0.05mm thick) is epoxied around the perimeter of the satellite to reduce the exposure of the electronics to the LEO atmosphere. In addition the aluminized Mylar foil has an excellent capacity for rejecting radiant heat, and low thermal conductivity. The thermal properties of the aluminized Mylar imply that the spacecraft transfers negligible heat energy about its perimeter, simplifying analysis. The foil does not make an air tight seal around the satellite. Solar degradation of the aluminized Mylar material was put at less than 1o/o per year based on observations of the Echo 1 satellite (Ford, 1964). Atomic oxygen effects however are less forgiving, and the aluminum layer does not prevent the oxidization of the Mylar below (Banks et. AI., 2004). The expected lifetime of the Mylar in a 400km orbit is about one year.

49
PROPERTY OF

RYERSON UNIVERSITY LIBRARY

Chapter 3
Attitude Determination and Control Algorithms

3.1 Introduction
The algorithms which govern the behavior of the attitude determination and control system are presented in this chapter. Both algorithms are dependent on the geomagnetic field for functionality. When using the geomagnetic field for attitude determination, the unfiltered attitude information is only 2 DOF, and the satellite attitude about the local magnetic field is unknown. Similarly with magnetic actuation, only torques that lie in the plane perpendicular to the local magnetic field are available.

Magnetic attitude determination is employed to reduce component count and thus hardware complexity. The corresponding increase in software complexity is preferred as mass and volume are more severely constrained than computing power and storage space. Magnetic attitude control is preferred over reaction wheels and thrusters due to the lack of moving parts, finite fuel constraints and volume constraints. A fully magnetic ADACS is possible given the nature of the Earth's magnetic field, which varies significantly in direction over the period of an orbit from the satellites perspective. This variation allows for full 3 DOF sensing and actuation over the period of an orbit, enabling system functionality. This chapter presents a quick review of the international geomagnetic reference field to give better context to the space the algorithms function in. Attitude determination is detailed, 51

Attitude Determination and Control Algorithms

followed by attitude control. Figure 2.3-3 shows the layout of the magnetic torquers and sensors used in this chapter.

Throughout this chapter a quatemion representation of spacecraft body to orbit orientation is used. This quaternion is always normalized, where (3.1) and the expected stacking order of the orientation quaternion is

q1 q2 q= q3 q4

ex

=[:]=

eY e_ 17

(3.2)

Euler angles in this chapter have been converted from quatemion representation in the 3-2-1 sequence as done in (Kuipers, 1998).
_ e= + 21Jex rolltan _ 1 ( 2eY 2 2 217 +2e= -1 1

J
(3.3)

pitch= sin- ( -2exe= -217ey)
_ + 21]8= yawtan _ 1 ( 2exey 2 2 21] +2ex -1

J

3.2 International geomagnetic reference field
Both the attitude determination and attitude control subsystems of this satellite depend exclusively on the Earth's magnetic field. The model which describes the expected magnitude and direction of this field at a given position and time is the International Geomagnetic Reference field. The IGRF2005 model will be reviewed as an introduction to the ADCS algorithms. The IGRF2005 model represents the geomagnetic field as a 13th order spherical harmonic expansion. This model is in the 1oth generation, and makes valid field predictions from 1900 to 2010. The magnetic field Bat a particular point and time is given by the negative gradient of a scalar potential function
B=-'VV

(3.4)

52

Attitude Determination and Control Algorithms where the scalar potential function Vis given by the spherical harmonic expansion (3.5)

where

R Earth

is the earth equatorial radius,

g;

and

h;

are the Gaussian coefficients of degree

n and order m, r, (), ¢ are the geocentric radius, coelevation and east longitude from the
prime meridian and
~m

is the associated Legendre function of degree nand order m.

The B field in tangential co-ordinates can be calculated with (Makovec, 2001):

-dV = ~ k B, = dr

[(R~nh )n+
k

2

n (g"·m(t)cos(m¢) + h"·m(t)sin(m¢) )P"·m (n +I)~[ (B) ]
2

J

Bo

-1-dV [(R =---=-I r d() n=l r

Earth

)n+ n [ (gn ,m(t)cos(m¢) + hn,m(t)sin(m¢) )-~ dPn ,m(())]] m=o d()
2
Earth

I

B¢

-1 -dV -1 [(R =-.---=-.-I r drp n=l r
k

Sln ()

Sln ()

)n+ n m(gn,m(t)sin(m¢)+hn,m(t)cos(m¢))Pn,m(B)] ] m=O
(3.6)

I[

where

s

=....:___....:__

(2n-1)!!

n,m

(n-m)!
0 i =I; j

0 (2-8m )(n-m)! (n+m)!

8~ ={1
J

i=

j}
(3.7)
2
2

pO,O= 1 pn,n = sine pn-l,n-1 pn,m = cosepn-l,m_ Kn ,mpn-2,m Kn ,m =
( ( n -1) - m (2n -1)(2n- 3) 0

n>

1

l

n =1

53

Attitude Determination and Control Algorithms

3.3 Attitude dynamics
The co-ordinate frames used in this chapter are the body fixed co-ordinate frame FB , the orbital co-ordinate frame F0 and the inertial co-ordinate frame F; . All of these co-ordinate frames are right handed systems. For the purpose of this study the Earth centered inertial coordinate frame is considered sufficiently inertial, where Z lies along the Earth's spin axis, and X points towards the Vemal Equinox. The orbital co-ordinate frame X is in the direction of the along track velocity and Z points towards the Earth's center of mass. Finally the body fixed co-ordinate frame represents the spacecrafts own co-ordinate system, with the origin at the satellites center of mass.

zI

z0

\~

0

Figure 3.3-1 Co-ordinate frames used in this chapter

54

Attitude Determination and Control Algorithms The system dynamic equations can be written as follows:

io = I-I (f

- iiJ X I iiJ)

(3.8)

(3.9)

0

(J)_

-(J)y (J)x
X

(J)x (J)y (J)

q=-

1 2

-(J)_ (J)y -(J)
X

0
-(J) -(J)

0
-(J)_

q

(3.10)

y

0
(3 .11)

f =

fdrag

+ fdist + M X B

Where iiJ is the body frame angular velocity with respect to the inertial frame, I is the satellite inertia tensor, q is the quatemion which represents the orientation from the orbital co-ordinate frame to the body fixed co-ordinate frame and f is the vector sum of external torques on the system in the body frame. r comprises the aerodynamic drag component
r drag , and the disturbance torques r dist
,

and the torque due to the applied magnetic dipole

M

and the Earth's magnetic field

iJ .
0

The orbital co-ordinate frame rotates about the pitch axis at an angular velocity of

0=

-2Jr p
0

(3.12)

where Pis the orbital period, in seconds. This quantity is expressed in the orbital co-ordinate frame.

The drag torque is the sum of the drag torques from each face of the satellite exposed to the LEO atmosphere in the direction of the satellites velocity. In general, the drag force experienced by an arbitrary face of the satellite can be modeled in the body frame as follows
1 2 " _ (-V)- pV Cd(An ·V) Fn = 2 0

l

"

(3.13)

55

Attitude Determination and Control Algorithms

where

V

is the unit vector in the direction of the satellites motion, p the atmospheric

density, V the along track scalar velocity of the satellite, Cd the drag coefficient and A the vector area of the face. The product

An ·V

accounts for the contribution of a particular face to

the cross sectional area of the satellite, but only if this product is positive - a negative result indicates that the surface is not forward-facing. As such the torque due to drag acting on the satellite can be computed as (3.14) where CP(n) is the respective center of pressure of the surface under evaluation, em is the centre of mass of the satellite and Fn is calculated from equation(3.13).

3.4 Attitude determination
An extended Kalman filter (EKF) is employed to estimate the satellite attitude and body rates using the measured geomagnetic field unit vector. The filter design employed is an adapted version of (Psiaki, 1990). This filter uses the difference between the propagated and measured magnetic field vectors to rotate the attitude estimate about the 2 degrees of freedom the magnetic measurement constrains. Given sufficient magnetic vector variance over an orbital period, the filter converges on an attitude estimate.

3.4.1

Measurement model

The measurement used is the output of the magnetometer. The geomagnetic field is sensed along the three body fixed axis of the satellite, and can be defined as
Bmeas

=
AbiBeci

(3.15)

Where

Bmeas

and

Beci

is the geomagnetic field in the body fixed and Earth centered inertial
Abi

frames respectively, and

is the co-ordinate transformation matrix given by
2(qlq2 + q3q4) -ql + q2 - q3 + q4 2(q2q3 -qlq4)
2 2 2 2

(3.16)

56

Attitude Determination and Control Algorithms Where qn is the quaternion which represents the orientation from the Earth centered inertial co-ordinate frame to the body fixed co-ordinate frame.

3.4.2

Linearized system model for determination

The attitude dynamics are linearized about the nominal attitude

11dJ = I- 1 [ 11 r- 11w x In-n xI 11w]

(3.17)

However, the skew symmetric of a vector multiplied by another vector is equivalent to a cross product, therefore the following is true

!1dJ = I- 1 [ 11 r +In x 11w- n xI11w]

= I- 1 [ 11 r + (IQ)f1w- (fu)l1w =I- 1 [ 11r+((IQ)-(fu))11w

J
(3.18)

J

=I-I ( (IQ)- (fu)) /).(J) +I-I f1 T
Where

n is the skew symmetric form of the orbital frame angular velocity with respect to

the inertial frame. This formulation of the linearized attitude dynamics lends itself well to discretization. The rest of the attitude dynamics are linearized similarly to (Psiaki, 1990) as follows . 1 !1q =- /).(J) 2 (3.19) (3.20) (3.21) and it is assumed i dist = 0 , the quatemion, when linearized about small angles, experiences negligible change in the scalar component, and the scalar component is thus dropped from the linearized state vector. The linear state vector used to establish the linear state propagation matrix is

(3.22)

The 9x9 linear state propagation matrix can then be written as a 3x3 matrix of 3x3 matricies as follows

57

Attitude Determination and Control Algorithms

1-1(10.-fu)
F=

0 0 0

1-l
0 0

l? Yz ;,]
0 0

(3.23)

0

The linear state vector is not used in the propagation of the Extended Kalman filter.

3.4.3

Kalman filter structure

The Kalman filter is a recursive filter, where the output is dependant only on the propagated state vector X , propagated error covariance P and the latest measurement

B . Figure 3.4-1

illustrates the overall structure of the filter. This particular implementation of the extended Kalman filter uses a modified innovation vector, and quatemion multiplication instead of addition in the update phase. Throughout this section a subscript of k indicates a value calculated in the previous iteration of the filter, a subscript of k+ 1 indicates a value calculated in the current iteration of the filter, a superscript of- indicates a value calculated before the current iteration update phase of the filter, and a superscript of+ indicates a value calculated after the current iteration update phase of the filter.

Initialize Po,Q,R, Xo

,
Propagate states and error covariance Xk+1, Pk+1
~

Update and Innovate

Figure 3.4-1 Kalman filter block diagram

Propagation phase
58

Attitude Determination and Control Algorithms State propagation is performed via the standard nonlinear equations of rigid body motion covered in equations (3.8) through (3.11). The state vector used is then

(3.24)

where the (") embellishment indicates that the parameter is an estimate. Propagation of the error covariance matrix P cannot be performed with the nonlinear equations and must use the linear state propagation matrix F as follows (3.25) where Q is the process noise.

Update phase

The innovation vector is unique to this filter, and employs the unit vector cross product of the measured and pre-update estimated magnetic field.
V=

B Bmeas X " IBmeas II B-1

(3.26)

Due to the unique innovation vector, the observation matrix is calculated in a unique manner as well and is given by (3.27) The gain calculation stage of the filter is the standard implementation, and is performed by

(3.28)

However the state update must be split to account for the non-standard innovation. While angular velocity and disturbance torque estimates are performed in the usual manner, the quaternion update employs quatemion multiplication (3.29) (3.30)

59

Attitude Determination and Control Algorithms

(3 .31) Where the ( · ) operator is used to represent the quatemion multiplication sequence of operations. The estimated state vector [ m;+I the attitude control system.
q;+J
r;+I

Jr is now ready to be passed off to

3.5 Attitude control
The attitude control system makes use of three state feedback controllers to control the roll, pitch and yaw axis. The axis are treated as uncoupled for the design of the controller, hence axial coupling behaves as a small disturbance to the linear system. Input linearization is used to remove some of the restorative torque of aerodynamic drag on the pitch axis. The control law used is from (Wie, 2008), a quatemion regulator: (3.32) Where iiJ is the angular velocity of the body fixed co-ordinate frame, velocity of the orbital co-ordinate frame,
1]

n

is the angular

and £ and the quatemion real and imaginary

components (respectively), kP is a 3x3 diagonal matrix of proportional gains and kd is a 3x3 diagonal matrix of derivative gains. The iiJ , Kalman filter.
1]

and £ parameters are estimated by the

3.5.1

Linearized system model for control

The parameters used for linearization are

60

Attitude Determination and Control Algorithms Considering only a single (arbitrary) axis case the linearized system equations of motion from (3.8) to (3.10) become (3.33)
& . =-{1) .
J J

1 2

(3.34)

where j

E ( x,

y, z) , hence the coupling between the axes is neglected. The three axes can

now be treated as three separate linear systems for the purposes of calculating control gains.

3.5.2

Calculating control gains

Using a negative state feedback controller on the system defined by equations (3.33) and (3.34), the system is represented by the state space equation (3.36)
X=AX-BKX X=(A-BK)X

(3.35)

0 [~J=[_k r ~r~][~J
1

(3.36)

-k

p ,j

J

d,j

J

This linearized system lends itself to pole placement in the usual manner. The eigenvalues of the state matrix are the system poles. Solving algebraically (3.37)

det(SJ- A)= det[

S _
1

kp ,jlj

This is the characteristic equation of the closed loop response of the linear system. This can be equated to the classical second order system equation
2 2 1 1 S 2 +kd,J.r~ S+kp,J.r~ =S +2~"{J)S+{J) =0 J J '=' n n
1

(3.38)

(3.39)

kd ,J. =

2s{J) 1 .
n J

(3.40)

s

in this case is chosen to equal 1. The 2% settling time is chosen to be 180 seconds to

prevent the satellite from slewing too fast. {J)n can then be calculated from the settling time

61

Attitude Determination and Control Algorithms

(3 .41) Control gmns for the controller from equation (3.32) are calculated for each axis from equations (3.39) and (3.40), then placed in their respective gain matrices as follows
0

(3.42)

3.5.3

Aerodynamic disturbance rejection

Aerodynamic drag torque acts to create stiffness about the pitch and yaw axes, quite significantly so on the pitch axis. By subtracting the aerodynamic drag torque from the control effort the system tracking is better maintained than treating aerodynamic drag torque as a disturbance. The final control law is presented below (3.43)

3.5.4

Magnetic actuator mapping

To apply the desired control torques to the system, they must be transformed into a magnetic moment. This is done using the rule proposed by (Sidi 1997). The magnetic dipole moment is calculated from the desired control torque by
Bxii M= --r BB

(3.44)

Where

M

is the dipole moment vector,

B is

the Earths magnetic field in the body frame,

and ii is the desired control torque. After mapping, torque components which act around the local magnetic field direction are lost. Here aerodynamic drag torque assists the controller substantially about pitch and yaw when actuation about these axes is compromised by enforcing stiffness and in doing so, transferring energy to the other axes through the coupling in the equations of motion.

62

Attitude Determination and Control Algorithms

3.5.5

Numerical Simulation

To validate the control design, numerical simulations were performed on two system models. The parameters and initial conditions used in these simulations are detailed in Table 3.5- 1.
Table 3.5-1 Numerical simulation parameters and initial conditions

Parameter
I

Value

[2.794
.038 .104

.038 3.098 .009 0 2.927 0

.009

.104]

5 X 10-

kgm 2

Satellite inertia tensor

5.863

kp
Proportional gain coefficients

[2.r9

~ ]x!O~
5.539

kd
Derivative gain coefficients
q

[l.r
[.1483

0 1.347 0

~ ]x!O~
2.548 .9664r

=[£ 17r
.1482 .1483

Quatemion representation of initial orientation error Angular velocity vector ( w ) Right ascension of ascending node ( n ) Orbital radius ( ro ) Orbit eccentricity (e) Orbital period ( P) Orbital inclination ( i ) Argument of latitude ( U) Atmospheric density ( p) IGRF/WMM coefficient order (k) Date Sidereal Time

[o

0 0] rad Is 0 rad 6778000 m 0 5553 s 0 rad 0 rad

2.72·10- 12 kglm 3 12 15 July 2009 0 rad

63

Attitude Determination and Control Algorithms

Figure 3.5-1 to Figure 3.5-4 illustrate the response of a hypothetical satellite system to this controller. This satellite system assumes torque is available about all axis, and regulates its attitude with respect to the non-rotating inertial frame. No disturbances are assumed. The system is stabilized to zero angular error in about 400 seconds, which represents about Ill oth of an orbit. The magnitudes of the angular velocities are below 0.14 deg/s.

Tlme(sec)

Figure 3.5-1 Euler angles for fully actuated satellite during stabilization

64

Attitude Determination and Control Algorithms

-

-

Roll rete Pitch rate YtMrat·

.0.02

.0.04

If
.0.06

f

/'
I

/'

I

/'
I

I'

/:'
I

\ , __ / f /
' I

.0.140:-------=-----:-:::-----:-::----:::-------:::::-----:::::-----::::-------::!::--------:: 100 150 200 250 300 350 450 50
Time(sec)

Figure 3.5-2 Angular velocity of fully actuated satellite during stabilization

-AoiiiOiqUO

1-

Pitehtorc,JI

- · vowtooque

;/'<~-----~------1

---~~'-=-~------~

-

((,'
I
I
I

!,-( i
~

-2

f/
II

ij'

I

Time(..c)

Figure 3.5-3 Control torque for fully actuated satellite to achieve stabilization

65

Attitude Determination and Control Algorithms

0.1 6 , - - - - - - - - . - - - - . - - - . . . , . . - - - - - - - , - - - - , - - -- , -- - - , - - - - - - - r - - - - - : - . , - - - ,

tj
0.14 0.12 0.1

0.08

0.06

\

'\

0.04

0.02

Tlme (soc)

Figure 3.5-4 Quaternion imaginary components for fully actuated satellite during attitude stabilization

The plots below illustrate the controller performance in a 400km earth orbit of 45 degree inclination. Initial attitude errors are about 20 degrees roll, 15 degrees pitch and 20 degrees yaw. Figure 3.5-5 shows the Euler angle history for the satellite without any control. Clearly evident is the stiffness about pitch and yaw as a result of aerodynamic drag. The roll axis is subject only to gravity gradient and coupling torques which are several orders of magnitude smaller. As such the roll axis limit cycle is not visible on the timescale presented.

66

Attitude Determination and Control Algorithms

I

\ \

30

I

I

I

\

1/\

20

10

I

\/
I

,' \ I
/"\

/\

I

-10

\I \ /\

(
\ I

\

I

\:'
1\
I I \

-20

J

I

I

I
I
\J

I

-30

~----~--~----L---~--~----~--_L

0

~

~

~

~

~

~

~

____L __ _J __ _~
~

900

1000

Time(aec)

Figure 3.5-5 Euler angles for uncontrolled satellite in Earth orbit

Figure 3.5-6 to Figure 3.5-12 demonstrate the performance of the above control law and magnetic mapping law on the simulated satellite system in Earth orbit. Here the controller is applied to regulate the attitude of the satellite such that it aligns itself with the orbital frame. This attitude is desired to accomplish various Nadir pointing missions, and to maintain the link budget. Figure 3.5-12 in particular shows the magnitude of the nadir pointing error vector, which is particularly important to earth observation applications. Nadir pointing error is limited to 1 degree after only 2 orbits and remains bounded for the duration of the simulation.

67

Attitude Determination and Control Algorithms

0.1 5 . - - - - - - - . - - --

-..-------.-------.---------,

0.1

a

0.05 \

~

:;-

L J
0 )

J r ~,~~ ~
I

',1111.

.

f\

I

I

I

.

'.

'".

1 1

w'l

f \['y\·'i'.,w-_.. .. AA -"'-"""~-- ~r-~~-c<"',--~.----~-<=l f,j\JfiJvv..nv"Vv\)~~--~~-

li

l,','"\'

''"'

i

\'

v

J j
.0.1 .0.15

1/

I

.0.2 0 ' - - - - - - - ' - - - - - - - ' - - - - - - - ' - - - - --

-'----------'

Figure 3.5-6 Quaternion imaginary components for Earth orbiting satellite

1S

10

I
s

I

I

·5

'I

II
·10

~I

"15 o:-------:':o .5=-----'----1:'-::.5 -

-

:------

--:'2 .5 : - - - - : - - - 3 : : " : :.5 - --l..,__-_j4 .-=-5- - - J _
Olt>i1s

Figure 3.5-7 Euler angles for Earth orbiting satellite

68

Attitude Determination and Control Algorithms

J
I

·'0ol__ _o ,L.5_ ____l_ _ _L __ _~---!2 .5::----:----,3:-':: . 5--___l-----:-.L:_5 ----..J_
Olbits

Figure 3.5-8 Desired control torque for Earth orbiting satellite

-Magnetic rclllotqUO Magnetic pitch torque - - . Magnetic y-IOtqUO

'I

'

0

',~~~----~--------------!
I

£

i e
~

·2

i
l

-~
4

' 1 0 o~---,o:'::-_5_ __J._ ___,.J':---~---!2 .5::------:-:----,3:'::. 5--_J.--------:-4.':-5- - - - - :
Olbits

Figure 3.5-9 Realized magnetic control torque for Earth orbiting satellite

69

Attitude Determination and Control Algorithms

The magnetic mapping law has the capacity to vastly corrupt the desired control torque given sub optimal magnetic field vectors. Figure 3.5-10 shows a detailed view of the desired versus realized control torques during the first half orbit (2776 seconds) of simulation. Note the capacity for sign inversion of the desired torque. A zero reference line has been added to this plot to assist with visualization.

--,~Av~~
-2

\

\)

I

~o~--~o .~~--7 o.1--~0~ . 15~~o7 2--~o .~~--~o .3~--o~ . 35~~o~ . 4--~0.4~5--~o.s
Olbils

Figure 3.5-10 Desired and realized torque plot for the first half orbit of simulation

70

Attitude Determination and Control Algorithms

-1L__--,L---_l_-____j__ __l__----:.t____ 0 0.5 2.5
Orbits

___L_ _J __

____j__ __ j __

__J

3.5

;,
I 1
I
1

3

/

I

I
\I

~L--~0~.5_ __ l __

____l_1 . 5~-_l_-----:2L . 5--~-~3 .5--~--L__~~
Orbits

Figure 3.5-11 Applied dipole moment and geomagnetic field in body fixed frame

15~-~--~-~--~--~-~--~-~~-~----

10

Figure 3.5-12 Magnitude of nadir pointing error

71

Fabrication and Testing

Chapter 4
Fabrication and Testing

4.1 Introduction
During the latter half of this study a prototype femtosatellite was fabricated. This chapter covers the assembly instructions for the prototype, as well as baseline test procedures to verify system functionality. Finally simulation and test results measured from the prototype hardware are presented.

4.2 Assembly
This section details the correct method to assemble the femtosatellite. After the completion of a subsystem, immediately follow the corresponding test procedure in the following section. All instructions pertain to version 1.0 of the prototype board, which contains no version marking information. Subsequent femtosatellites will indicate their version number on both sides of the PCB.

All soldering shall be done with tin-lead solder and in accordance with NASA Technical standard 8739.3 "Soldered Electrical Connections". The satellite shall never be assembled with power applied. A pre-heater shall be used to ramp up board temperature at a rate of no more than 2 degrees Celsius per second. Moisture sensitive components must be baked if original packaging is opened for more than 24 hours, or if humidity papers indicate so. The satellite must be baked before any rework can be performed.

73

Fabrication and Testing

4.2.1

Power subsystem

Beginning with a bare femtosatellite PCB, assemble the following power components in the order listed.
Table 4.2-1 Components for assembly in step 1
Schematic name Manufacturer PN
REG Lout Cout Css Cf Rf DEP_SW CSB C1,C2 R3 LM2852YMXA-3.0 b82462-g4223-M TPSC107K006R0150 generic 0402 ceramic generic 0402 ceramic generic 0402 thick film JSM08022SAQNL LM3814M-1.0 generic 0402 ceramic generic 0402 thick film

Description
3.0V regulator 22uH inductor 1OOuf capacitor 2. 7nf slow start cap 1uf filter 1Oohm filter deploy switch NC

Solder method
REF LOW IRON IRON IRON IRON IRON IRON

battery current sense IRON 0.1 uf capacitor 1Okohm pull up IRON IRON

After assembly there are enough components placed to test the most basic function of the power subsystem. Please refer to "power subsystem initial test" test procedure before continuing. Component damage can occur if the power subsystem is not tested at this point.

Continuing the power subsystem assembly, place the following components in the order listed in Table 4.2-2.
Table 4.2-2 Components for assembly in step 2
Schematic name Manufacturer PN
CSA1 C3,C4 R2 CSA2 C5,C6 R1 LM3814M-1.0 generic 0402 ceramic generic 0402 thick film LM3814M-1.0 generic 0402 ceramic generic 0402 thick film

Description

Solder method

battery current sense IRON 0.1 uf capacitor 1Okohm pull up IRON IRON

battery current sense IRON 0.1 uf capacitor 1Okohm pull up IRON IRON

74

Fabrication and Testing
Table 4.2-2 Components for assembly in step 2(Contd.)
CS1 ,CS2,CBAT LS1,LS2 QS1,QS2 01 CB2 R8 R9 TPSC1 07K006R0150 ELL-CTV1 02M IRLML2502PbF 20CJQ030 generic 0402 ceramic generic 0402 thick film generic 0402 thick film 1OOuf capacitor 1mH inductor NFET Dual diode 0.1 uf capacitor 1kohm resistor 2kohm resistor IRON IRON IRON IRON IRON IRON IRON

This completes the power system peripheral components. The last two items that form the power system, the cc2510f32 processor and battery, will be addressed later. 4.2.2 Command and data handling

With a femtosatellite PCB that has the power subsystem assembled and verified for Power "initial test" functionality, continue to assemble the following components in order listed.
Table 4.2-3 Components for assembly in step 3
Schematic name Manufacturer PN
CC2510 Cd COn Cser Rbias XTAL Rrst erst DEBUG flash cc2510f32 generic 0402 ceramic generic 0402 ceramic generic 0402 ceramic generic 0402 thick film CSX-325T generic 0402 thick film generic 0402 ceramic generic .1" header at25df641

Description

Solder method

Microprocessor/radio REF LOW 1uf decoupling .1 uf decoupling 1Opf decoupling 56k resistor 26MHzTCXO 1Ok resistor .1 uf decoupling IRON IRON IRON IRON IRON IRON IRON

2 rows of 5 pins each IRON 32MBit flash memory IRON

After assembly basic processor functionality should be verified. Please refer to "Command and data handling initial test" in testing procedures. This test is not required to prevent damage but will greatly speed debugging if a fault has occurred at this stage.

75

Fabrication and Testing

4.2.3

Communication

Continue assembly on a PCB populated with the power and command and data handling systems, which have been verified for Power and C&DH "initial test" functionality. Assemble the following components in order listed.
Table 4.2-4 Components for assembly in step 4
Schematic name Manufacturer PN AMP SW1,SW2 C231,C241 C232,C242 C233 C234 L231 ,L232,L241 CSW1,CSW2 Camp1 ,Camp5 Camp2 Camp3,Camp4 Lamp1 Lamp2 C9 C10 C7 C8 C11 R5 R6 R7 C30 C31 c17 ANT T7026 UPG2015 RF grade 0402 ceramic RF grade 0402 ceramic RF grade 0402 ceramic RF grade 0402 ceramic RF grade 0402 RF grade 0402 ceramic RF grade 0402 ceramic RF grade 0402 ceramic RF grade 0402 ceramic RF grade 0402 RF grade 0402 RF grade 0402 ceramic RF grade 0402 ceramic generic 0402 ceramic RF grade 0402 ceramic RF grade 0402 ceramic generic 0402 thick film generic 0402 thick film generic 0402 thick film generic 0402 ceramic generic 0402 ceramic RF grade 0402 ceramic Custom Description RF frontend RF switch 100pf 1.0pf 1.8pf 1.5pf 1.2nH 56pf 2.7pf 2.2pf 2.0pf 3.9nH 15nH 1.8pf 3.9pf .1uf 100pf 1pf 10k 12k 2k .1uf .1uf 56pf Antenna Solder method REFLOW REF LOW REFLOW REF LOW REFLOW REF LOW REFLOW REF LOW REFLOW REF LOW REF LOW REF LOW REF LOW REFLOW REF LOW REFLOW REFLOW REFLOW REF LOW REF LOW REF LOW IRON IRON IRON IRON

76

Fabrication and Testing After assembly the communication system functionality should be verified. Please refer to "Communication initial test" in testing procedures. 4.2.4 Attitude Determination and Control

Continue assembly on a PCB populated with the Power, C&DH and Communication systems, which have been verified for Power, C&DH and communication "Initial test" functionality. Assemble the following components in the order listed.
Table 4.2-5 Components for assembly in step 5
Schematic name Manufacturer PN
MAG R+,RZsense H1,H2,H3 LA,LB LZ MS2100 generic 0402 thick film SEN-Z A3903

Description
Magnetometer 43ohm

Solder method
REFLOW IRON

z axis sense inductor IRON H bridge REFLOW

Magnetic torque rods IRON Magnetic torque coil IRON

After assembly ADAC system functionality should be verified. Please refer to "Attitude Determination and control initial test" in testing procedures. 4.2.5 Payload

Continue assembly on a PCB populated with the Power, C&DH, Communication and ADAC systems, which have been verified for Power, C&DH, Communication and ADAC "Initial test" functionality. Assemble the following components in the order listed.
Table 4.2-6 Components for assembly in step 6
Schematic name Manufacturer PN
BS1 CAM ADG3248 COMmedia C328

Description
Bus switch VGA camera

Solder method
REF LOW IRON

After assembly Payload system functionality should be verified. Please refer to "Payload test" in testing procedures.

77

Fabrication and Testing

4.3 Testing procedures
4.3.1 Power subsystem initial test

After assembling the basic power system the regulated voltage must be tested over the input voltage range to ensure the safety of all components dependant on this system. The power system is capable of damaging the rest of the satellite if the output voltage is too high, or fluctuates rapidly.

This test shall be performed with a bench power supply of adjustable voltage as a replacement for the battery. Initially the bench supply shall limit the current into the regulator to less than 1OOmA to prevent damage in the event of total device failure. The current limit shall be increased thereafter to suit the needs of the test.
Table 4.3-1 Power system test parameters
Parameter Value
Voltage 3.0±.01 0 Volts 3.0±.01 0 Volts 3.0±.01 0 Volts 3.0±.01 0 Volts 3.0±.1 00 Volts 3.0±.100 Volts 0 Volts

Conditions
3.2V @ input, no load @ output 4.2V @ input, no load @ output 3.2V @ input, 1OOmA load @ output 4.2V @ input, 1OOmA load @ output 3.2V @ input, 750mA load @ output 4.2V @ input, 750mA load @ output DEP_sw held open

All test loads shall be removed from the DUT after test is completed 4.3.2 Command and Data handling subsystem initial test

The processor which forms the core of the C&DH, as well as the basis for the entire satellite must be operational at this stage. This test shall be performed with a bench power supply of fixed voltage as a replacement for the battery. The power supply fixed voltage shall be 3.3 volts± 0.01 volts, this voltage shall be verified by a meter external to the supply. The current limit for this test shall be 100mA at the supply. Perform the following steps to prepare the DUT for this trial:

78

Fabrication and Testing
1.

Using JAR embedded workbench attempt to program the C&DH with the "C&DH initial test" code base. The C&DH should program flawlessly and the test code should execute after the programming has completed.

n.

The following parameters should be observed to verify code execution
Table 4.3-2 Command and Data handling subsystem test parameters
Parameter Value Conditions

SPI bus P0.2 P0.3 P0.4 P1.1 P1.0

Activity .5 duty PWM .5 duty PWM .5 duty PWM .5 duty PWM .5 duty PWM

Periodic All All All All All

4.3.3

Communication subsystem initial test

The communication system will be required for later, more complex debugging procedures. The communication system is capable of generating hazardous microwave radiation at the antenna. Health Canada safety Code 6 defines the maximum exposure limits for RF frequencies in the 3kHz to 3000Hz range; the maximum field power density for 2.4GHz band is 10 WI m 2 · The emitted power form the femtosatellite communication system is a maximum of 500mW, in a cone of 120 degrees, hence the minimum radius from the antenna face of the satellite is

r=

J%,
tan(%)

=7.2cm

(4.1)

Additionally, the Specific absorption rate (SAR) for the human body must be below 0.08

W/kg, and for the human eye especially must be below 0.2 W/kg (Health Canada, 1999),
therefore it is strongly recommended that no persons or animals be within one meter of the antenna within its cone of emission. Further take note that metal and concrete objects illuminated by the antenna will reflect RF energy, potentially back at the operator. A licensed

79

Fabrication and Testing

amateur radio operator shall be present at all times during testing to act as the control operator of the station

This test will be performed with a bench power supply of fixed voltage of 3. 7 V as a replacement for the battery. The current limit for this test shall be set to 750 rnA at the supply. Perform the following steps to prepare the DUT for this trial:
1.

Using IAR embedded workbench load the C&DH with the "communication initial test" codebase. The C&DH should program flawlessly and the test code should execute after programming has completed.

11.

Using IAR embedded workbench load the SmartRF04 USB key evaluation module with the "Communication-USE" codebase.

111.

A terminal program shall be used on the host computer, configured to use the SmartRF04 USB key comport with settings 9600 8-N-1

1v.

To prevent damage to the SmartRF04 USB key have 5 meters of space between the femtosatellite and the USB key.

v.

The following parameters should be observed to verify code execution

Table 4.3-3 Communication system test parameters
Parameter Value Conditions

Loop back functional Current <100 rnA >400 rnA Vramp RSSI 1.5 v >-30dBm during reception during transmission during transmission at USB key, during transmission, 5m range

4.3.4

Attitude Determination and Control initial test

The ADAC subsystem is checked in this section for proper operation. "F", "R", "S" and "H" commands are issued through a terminal program on the host computer to evaluate various test parameters. The satellite test code will interpret these commands autonomously.

80

Fabrication and Testing This test will be performed with a bench power supply of fixed voltage of 3. 7V as a replacement for the battery. The current limit for this test shall be set to 750 rnA at the supply. Perform the following steps to prepare the DUT for this test:

1.

Using IAR embedded workbench load the C&DH with the "Attitude initial test" codebase. The C&DH should program flawlessly and the test code should execute after programming has completed.

11.

Using IAR embedded workbench load the SmartRF04 USB key evaluation module with the "Communication-USE" codebase.

111.

A terminal program shall be used on the host computer, configured to use the SmartRF04 USB key comport with settings 9600 8-N-1

IV.

To prevent damage to the SmartRF04 USB key have 5 meters of space between the femtosatellite and the USB key.

v.

The following parameters should be observed to verify code execution
Table 4.3-4 Attitude determination and control test parameters
Parameter Value Conditions

V_LA

.5 duty PWM

initial start, "H" command issued "F" command issued "R" command issued "S" command issued initial start, "H" command issued "F" command issued "R" command issued "S" command issued initial start, "H" command issued "F" command issued "R" command issued "S" command issued "S" command issued "S" command issued "S" command issued

+3.0V -3.0V

ov
V_LB
.5 duty PWM

+3.0V -3.0 v

ov
V_LZ
.5 duty PWM

+3.0V -3.0V

ov
Magx Magy Magz Geomagnetic Geomagnetic Geomagnetic

81

Fabrication and Testing

4.3.5

Payload system

The payload system uses the camera module, flash ram and CDH to shuffle data from the camera buffer to the host computer. A terminal program is used to issue "T" and "I" commands to the satellite, and the satellite will interpret these commands autonomously. This test will be performed with a bench power supply of fixed voltage of 3.7V as a replacement for the battery. The current limit for this test shall be set to 750 rnA at the supply. Perform the following steps to prepare the DUT for this trial:
1.

Using IAR embedded workbench load the C&DH with the "payload system test" codebase. The C&DH should program flawlessly and the test code should execute after programming has completed.

11.

Using IAR embedded workbench load the SmartRF04 USB key evaluation module with the "Communication-USE" codebase.

111.

A terminal program shall be used on the host computer, configured to use the SmartRF04 USB key comport with settings 9600 8-N-1 to issue the commands to the DUT.

tv.

To prevent damage to the SmartRF04 USB key have 5 meters of space between the femtosatellite and the USB key.

v.

The following parameters should be observed to verify code execution
Table 4.3-5 Payload system test parameters
Parameter Value Conditions

SPI bus Radio

Activity Activity

"I" command issued "T" command issued

Upon issuing the "T" command the C&DH will pause for 2 seconds to allow the user to set up a file capture in the users terminal software. Promptly thereafter the image taken and stored with the "I" command will be transmitted via the radio interface. The captured file can be viewed as a JPEG format file to verify payload system functionality.

82

Fabrication and Testing

4.3.6

Simulated environment

The simulated environment testing is designed to test the femtosatellites reaction to a simulated space environment. In this test the femtosatellite will received simulated sensor readings generated by the host computer. In return, the femtosatellite will telemeter its attitude determination and control input information back to the host computer for processing. The host computer will apply the desired control efforts to the simulated model and evaluate the performance of the femtosatellites control system. Perform the following steps to prepare the DUT for this trial:
1.

Using IAR embedded workbench load the C&DH with the "integrated system test" codebase. The C&DH should program flawlessly and the test code should execute after programming has completed.

11.

Using IAR embedded workbench load the SmartRF04 USB key evaluation module with the "Communication-USE" codebase.

111.

To prevent damage to the SmartRF04 USB key have 5 meters of space between the femtosatellite and the USB key.

IV.

Start Matlab/Simulink and load the "Hardware-in-the-loop" model

With the execution of the simulink model, the femtosatellite will receive simulated sensor readings based on the propagated model. All control efforts the femto exerts will be dually applied to the magnetic torquers and the model. The estimated attitude will also be reported to the simulink model for comparison against the propagated attitude.

4.3. 7 Integrated satellite system
The integrated satellite system must finally be tested against the harsh launch and space environments. In this test the femtosatellite will be subjected to launch vibrations, and the vacuum and thermal conditions of low earth orbit.
Launch vibration testing:

The reference launch environment used for this test is the one found in the Dnepr launch vehicle (Kosmotras, 2001 ). The femtosatellite shall be subjected to 6.5g RMS vibration (20Hz to 2kHz) on all axes for a duration of 35 seconds to simulate launch vehicle liftoff. The femtosatellite shall then be subjected to 3.6g RMS vibration (20Hz to 2kHz) for a

83

Fabrication and Testing

duration of 831 seconds to simulate launch vehicle flight. This test will be conducted with the deploy switch in the off (not deployed) state.

At the conclusion of the test the femtosatellite shall be fully functional with no apparent mechanical damage.

Space environment testing: The femtosatellite shall be subjected to vacuum testing while undergoing thermal cycling similar to the thermal extremes it is expected to experience in orbit. This test will be conducted with the satellite fully operational and telemetering health data at full RF power. At the conclusion of the test the femtosatellite shall be fully functional with no evidence of performance degradation.

4.4 Results
4.4.1 Power subsystem initial test

Voltage was measured at the cc251 0 reset pullup resistor Rpu using a LeCroy WaveSurfer 24xs digital oscilloscope.
Table 4.4-1 Power subsystem test results
Parameter Value Voltage Conditions 3.2 V @ input, no load @ output 4.2 V @ input, no load @ output
~.2 V @ input, 1OOmA load @ output

Measurement
~.0±0.006

Result PASS PASS PASS PASS PASS PASS PASS

v 3.0±.010 v 3.0±.010 v 3.0±.010 v 3.0±.100 v 3.0±.100 v ov
3.0±.010

~.0±0.006

3.0±0.006 3.0±0.006
~.0±0.006

14.2 V @ input, 1OOmA load @ output
~.2 V @ input, 750mA load @ output

14.2 V @ input, 750mA load @ output DEP_sw held open

3.0±0.006 0.006

The measured output ripple voltage includes the noise in the oscilloscopes measurements. It should be noted that the oscilloscope shows 6mv of noise when and input is disconnected

84

Fabrication and Testing from all sources and shorted to ground at the connector, hence the ripple performance of the converter is better than the scopes ability to measure it.

Battery ripple rejection

The battery and bus voltage were monitored during a telemetry broadcast. This represents a load step to the power system of almost 500mA from an idle condition of 80mA. The Figure 4.4-1 through Figure 4.4-3 illustrate the robustness of the power system to rapid load changes and high noise on the battery side of the converter.

0.04 ,-----,-------,----.------,---,---.---,-------,-------.------,

~

2:. 0.01
Cl)

0

·c

8:
Cl)

F 0
CD

0

> ~ -0.01

1il
-0.02

-0.03 -0.04 L _ __ _ L __ -0.25 -0.2
_ l __

__L_~

_ _L _ _ _ . . . J __

__J__

__.J__

___J_ _

-0.15

-0.1

-0.05

0.05 0 Time(secords)

0.1

0.15

0.2

0.25

Figure 4.4-1 Battery voltage ripple from telemetry broadcast

85

Fabrication and Testing

0.04

0.03

0.02

;::_
a. ·;::
Q)

0

~
Q)

0.01
ll.JL II.

c.
0

d ....l l,

...
,,, .

J

"'~ uL .I .Iii

0

F
~

"'f

,

.... .......

..1 ~

.I.

.,.

'" '

.,.

··rr~ - ~

IT

.,.,

>

-0.01

Cil

-0.02

-0.03

-0.04 -0.25

-0.2

-0.15

-0.1

-0.05

0

0.05

0.1

0.15

0.2

0.25

Time (seconds)

Figure 4.4-2 Bus voltage ripple during telemetry broadcast

4.----.-----.----.-----.----.-----.----.-----.----.-----.

3.5

3~----------------------------------------------------~
.$ 0
~

2.5

G
0
>
:::l

F
"'

2

Cil

1.5

0.5

0~--~-----L----~----~--~-----L----~----~--~----~

-0.25

-0.2

-0.15

-0.1

-0.05

0

0.05

0.1

0.15

0.2

0.25

Time (seconds)

Figure 4.4-3 Bus voltage during telemetry broadcast

86

Fabrication and Testing 4.4.2 Communication subsystem initial test

The communication system was tested with an RF datarate of 1Okbps. The results demonstrate the functionality of the RF implementation.
Table 4.4-2 Communication subsystem test results
Parameter Value
~onditions

!Measurement

~esult

Loop back Current

Functional Powered <100 rnA >400 rnA during reception during transmission during transmission at USB key, during transmission, 5m range

Functional
~OmA

PASS PASS PASS PASS PASS

~20mA

Vramp RSSI

1.5±.1

v

1.58

v

>-30 dBm

29dBm

4.4.3

Attitude determination and control subsystem initial test

The attitude determination and control system was tested. All measurements were within expected tolerances.
Table 4.4-3 ADCS test results
Parameter Value Conditions Measurement Result

V_LA

.5 duty PWM +3.0V -3.0

nitial start, "H" command issued 'F" command issued 'R" command issued 'S" command issued nitial start, "H" command issued 'F" command issued 'R" command issued 'S" command issued nitial start, "H" command issued 'F" command issued 'R" command issued 'S" command issued 'S" command issued 'S" command issued 'S" command issued

0.5 2.95V -2.97

PASS PASS PASS PASS PASS PASS PASS PASS PASS PASS PASS PASS PASS PASS PASS

v

v

ov
V_LB .5 duty PWM +3.0V -3.0

ov
0.5 2.92V -3.0

v

ov
V_LZ .5 duty PWM +3.0V -3.0

v ov
0.5

2.99V -2.95

v

v

ov
Magx Magy Magz Geomagnetic Geomagnetic Geomagnetic

ov
±541JT ±541JT ±541JT

87

Fabrication and Testing

4.4.4

Payload subsystem initial test

The payload system was tested on the prototype. The image was captured and transmitted in approximately 20 seconds at an RF data rate of 1Okbps. The captured image is presented below.

Figure 4.4-4 Captured image from femtosatellite prototype payload system.

4.4.5

Simulated environment test

Hardware in the loop testing was carried out on the prototype. A summary of the parameters assumed during the simulation can be found in Table 3.5-1 in section 3.5.5. In addition to these parameters, the following were also implemented:

88

Fabrication and Testing
Table 4.4-4 Simulated environment additional parameters

Parameter
ts

Value 1s

Sampling time
td

1s Sensor
~

controller time lag ±.01 amp· turn· m2 7.8125 ·10-5 amp· turn· m2 Single precision 32 bit

Magnetic torquer saturation Magnetic torquer quantization step size Hardware floating point number format

Figure 4.4-5 to Figure 4.4-7 show the response of the simulated satellite in the space environment to the actual controller onboard the femtosatellite. These plots differ greatly from the ideal simulation case due to the impact of quantization on the magnetic actuators. Numerical noise introduced by the single precision floating point was mitigated by measuring magnetic fields in micro Tesla, and calculating control torques in micro Newton meters, which pushes the expected values towards practical values for this number format. Figure 4.4-7 shows a detailed view of the quantization noise which causes the difference in the plots. Overall this test indicates that the system would perform better with a smaller quantization step size, which can be realized with either smaller magnetic torque actuators (less windings or less current) or more bits in the output stage. As the simulations to date have not saturated the best option would be to reduce the magnetic torque rod moment to conserve mass or power.

89

Fabrication and Testing

- 1 5 ' - - -- - - - - - ' - - - - - - - ' - - - - - - - . J . . . . - - - - - - , - ' - - : - ----....,..,_,__

0

1000

2000

3000

4000

5000

____,

Time (Seconds)

Figure 4.4-5 Hardware in the loop simulated Euler angles for one orbit

-2

~~---~1000~---~2000~---~3000~---~4000~---~5000=--~
Time (Seconds)

Figure 4.4-6 Hardware in the loop applied dipole moments for one orbit

90

Fabrication and Testing

4r'1~o ·---,----,----,----.----,----,----,----.---~====~
- - X dipole Ydipole - - zdipole

~~--~1~0--~~~---~~--~~----~oo----~oo----~ro----~oo~--~oo~--~100
Time (Seconds)

Figure 4.4-7 Detailed view of dipole moments during first 100 seconds of orbit

Additionally one of the output pins of the microprocessor was assigned to a value of 1 during the period of calculation. The execution of the control law and magnetic mapping law takes on average 520 IJS as shown in Figure 4.4-8.

3

Time (SecondsI

xlO_.

'

Figure 4.4-8 Pulse indicating duration of control law calculation

91

Fabrication and Testing

4.4.6

Structure finite element analysis

Finite element analysis was performed on the proposed structure to test deflection and natural frequencies under launch conditions. The Dnepr users guide lists the maximum longitudinal acceleration as 7.5 G, and indicates that harmonic oscillations occur at frequencies of up to 20 Hz. For smooth integration with the launch vehicle the natural frequencies of the payload should be greater than 20 Hz in the longitudinal axis and 10 Hz laterally. It is expected that these requirements are typical of most available launch systems. (Kosmotras, 2001)

Solidworks 2009 was used to perform the finite element analysis. A three dimensional polygon mesh was employed, with 4 Jacobian points per element. The results represent a first order analysis and indicate that mechanical testing can proceed with a likelihood of success.

The structure was placed under a load of 7.5 G and the deflection was evaluated as shown in Figure 4.4-9. As expected, the sun side solar array experiences the greatest displacement, with a peak deflection of 23 Jim . Safety factor was also evaluated under a static load of 7.5 G, and the minimum safety factor was found to be 26.9. Additionally the natural frequencies of the structure were evaluated. The natural frequencies were found to be all in excess of 100 Hz, indicating that the structure is very rigid. The results are tabulated in Table 4.4-5, and Figure 4.4-11 illustrates the numbered modes.

92

Fabrication and Testing

Figure 4.4-9 Deflection as a result of 7.5g static load

Figure 4.4-10 Safety factor distribution for 7.5g static load

93

Fabrication and Testing

Table 4.4-5 Natural frequencies for various resonant modes

Mode shape 1 2 3

Natural Frequency 115.68 Hz 165.1 Hz 291.58 Hz 335.31 Hz

4

Figure 4.4-11 Resonant modes of femtosatellite structure

94

Fabrication and Testing

4.4. 7

Thermal simulations

Matlab/Simulink was used to perform thermal simulations of the femtosatellite in orbit. A summary of the parameters assumed during the simulation can be found in Table 3.5-1 in section 3.5.5. As shown in Figure 4.4-12 the sunside array undergoes large temperature swings on orbit, from 72.6 degrees Celsius to -39.2 degrees Celsius. The printed circuit board and battery are buffered from the sun by the array and scaffolding and thus remain bounded by 65 degrees and -37 degrees. All components on the satellite have been chosen for their -40 to 85 degree survivability. The temperature rates illustrated in Figure 4.4-13 are bounded by ±0.1 deg/sec. Heating and cooling rates on this order will create negligible thermal shock on the system.

Sunside array temperature PCB temperature - - ilattery temperature

I

rj
II

I;

/t

·-. . ._---1f
4000

I! F
6000 8000

lj

j

/

j!

\\

\

~

~

10000

Time (Seconds)

Figure 4.4-12 Temperature of the three major nodes for two orbits

95

Fabrication and Testing

.0.06

.0.08

.O. lo~-----::2000=-----:c4000:!::::--------:60007:::----------:8000~----1=0000=----'

Time (Seconds)

Figure 4.4-13 Temperature rates of the three major nodes for two orbits

96

Chapter 5
Conclusions

5.1 Conclusions
Femtosatellites are poised to take advantage of Moore's law by offering the smallest path to space for advancing technologies. The low launch costs and ability to launch redundant systems in parallel allow the use of riskier COTS technology in space. The usage of COTS technology drastically cuts development budget and lead time, which enables more hardware to be flown. This is a virtuous development cycle, which allows for faster development of new space technologies. A femtosatellite design has been shown to fulfill the basic requirements of a satellite system. The enabling features of the femtosatellite system are enumerated below.
5.1.1 Communications

The femtosatellite is capable of matching existing cubesat communication abilities in terms of datarate and ground contact capability with a fraction of the mass and space requirements. The capacity for high speed data communications and reconfigurable broadcast frequency sets this design apart from conventional cubesats in that large payload data objects and various regulatory hurdles can be accommodated quickly at the software level on orbit.

5.1.2

Attitude determination and control

The femtosatellite is capable of nominal pointing missions with simulated pointing accuracy of approximately 5 degrees. This unlocks the capacity for a variety of low resolution earth

97

Conclusions

observation missions where pointing must be known and stabilized. Further capacity exists as an inspector satellite, where the same imaging hardware can be used for high resolution inspection of a larger satellite system in low earth orbit.

5.1.3

Structure

Survivability of the femtosatellite has been demonstrated through finite element analysis. The femtosatellite is constructed from rigid materials and is extremely lightweight, contributing greatly to the stiffness of the satellite system. Due to the lightweight nature of the satellite components and the small deflections expected, the use of solder and epoxy for mechanical fastening is justified.

5.2 Future work
5.2.1 Magnetic control

Better attitude performance may be achieved though investigation of various magnetic control schema. As this femtosatellite offers a full complement of magnetic torquers, it stands to benefit directly from more advanced algorithms. The low launch mass of this system makes it ideal for on orbit testing and validation of control

5.2.2

Simulated environment test

Hardware in the loop testing is very important for the verification of the performance of the femtosatellite, particularly the ADCS algorithms. The limitations imposed by the finite numerical performance of the processor and discrete sampling time should be explored to maximize the systems potential.

5.2.3

Orbit reconfiguration and formation flying using aerodynamic drag

Given that the ballistic coefficient of the femtosatellite varies by a factor of 10 with attitude, this opens the possibility of active orbit reconfiguration, or differential drag formation flying. Large numbers of femtosatellites could be deployed in orbit with minimal cost. Each node

98

Conclusions

can communicate with each other node and with the ground to fulfill autonomous control and payload requirements.

5.2.4

Launch

Finally the fully integrated femtosatellite should be fitted to a host vehicle for deployment in low earth orbit as a validation of the work.

99

References

[ 1]

Alger, M., "Design and development of power and attitude control subsystems for ryesat", Masters Thesis, Aerospace engineering department, Ryerson University, Toronto Ontario, 2008.

[2]

Banks, B., de Groh, K., Miller, S., "Low earth orbital atomic oxygen interactions with spacecraft materials", NASA Technical Memorandum, NASA/TM-2004-213400, 2004.

[3]

Barnhart D.J., Vladimirova, T., Baker, A.M., Sweeting, M.N. "A low-cost femtosatellite to enable distributed space missions", Acta Astronautica, Vol. 64, Issues 11-12,2009, pp. 1123-1143, doi:10.1016/j.actaastro.2009.01.025.

[4]

Barnhart D.J., Vladimirova, T., Sweeting, M.N., "System-on-a-chip design of selfpowered wireless sensor nodes for hostile environments", International symposium on circuits and systems, Seattle Washington, 2008, pp. 824-827.

[5]

Emmons, R., "Indicated Specular Degradation Rate for Aluminized Mylar Surfaces in Near-Earth Orbit from Recent Photometric Observations of the Echo I Satellite", Astronomical Journal, Vol. 69, pp.540-541, 1964.

[6]

Femia et al., "Optimization of perturb and observe maximum power point tracking method", IEEE transactions on power electronics, Vol. 20, No.4, 2005, pp. 963-973.

[7]

Health Canada, "Limits of Human Exposure to Radio frequency Electromagnetic Fields in the Frequency Range from 3 KHZ to 300 GHZ- Safety Code 6", http: I lwww. hcsc.gc.calewh-semtlpubslradiationl99ehd-dhm237lindex-eng.php,

[cited

16

July 2009]. [8] Huang A., Hansen W. W., Janson S. W., Helvajian H., "Development of a 1OOgm class inspector satellite using photostructurable glass ceramic materials", Proceedings of SPIE- Photon Processing in microelectronics and photonics, San Jose California, Vol. 4637,2002,pp.297-304. [9] Iannotta, B., Malik, T., "U.S. Satellite destroyed in Space Collision", Space.com news article, http: I lwww. space. comlnewsl090211-satelli te-collision. html, [cited 21 July 2009].

101

Conclusions

[10] Janson, S.W., "Mass producible silicon spacecraft for 21st century missions", AIAA
. space technology conference and exposition, AIAA-1999-4458, 1999.

[11] Kobayashi, M., Iijima, H., "Surface magnetic charge distributions of cylindrical tubes",
IEEE transactions on magnetics, Vol. 32, No. 1, 1996, pp. 270-273.

[12] Kosmotras,

Dnepr space launch system users guide Issue 2 November 2001,

http: I lwww. kosrnotras. ruluploadldneprl v. zip,

[cited 29 July 2009] .

[13] Kuipers, J.B., Quaternions and rotation sequences, Princeton University press, Princeton New Jersey, 1998, page 168. [14] Larson, W. and Wertz, J., Space mission analysis and design, 3rd edition, Microcosm press/Kluwer academic press, El Segundo, California, 1999. [15] Makovec, K. "A nonlinear magnetic controller for three-axis stability ofnanosatellites", Masters thesis, Aerospace Engineering department, Virginia Polytechnic Institute and state University, Blacksburg Virginia, 2001. [16] Marot, L., "Arianespace launched 'largest commercial satellite"', Reuters news article,
http:llwww.reuters.cornlarticlelrbssTechMediaTelecornNewslidUSLl40858220

o9 o7 o1, [cited 20 July 2009].
[ 17] Maxim, "Harnessing solar power with smart power-conversion techniques", Maxim
application note, http: I lpdfserv .rnaxirn-ic. comlenlaniAN4 84. pdf , 2000 [cited 21

July 2009] [18] McVittie, G., Kumar, K. D., "Design of a COTS femtosatellite and mission", AIAA
Space 2007 conference and exposition, Long beach California, 2007.

[19] National Semiconductor, "LM2852 2A 500kHz synchronous simple switcher buck regulator", Product datasheet, http: I lwww. national. cornldsiLMILM2852. pdf, 2006. [20] Psiaki, M., "Nanosatellite attitude stabilization using passive aerodynamics and active magnetic torquing", Journal of Guidance, Control, and Dynamics, Vol.27 no.3, 2004 pp.347-355, doi: 10.2514/1.1993. [21] Psiaki, M., "Three-axis attitude determination via Kalman filtering of magnetometer data", Journal ofguidance and control, Vol. 13, No.3, 1990, pp. 506-514. [22] Smit, G.N., "Nanotechnology for Guidance, navigation and control", Micro- and
Nanotechnology for space systems, The Aerospace Press, Los Angeles California,

1997, pp. 9-13. 102

[23] Texas Instruments, "CC2410Fx/CC2511Fx Low power SoC with MCU, Memory, 2.4GHz RF transceiver, and USB controller", Product datasheet, [cited 29

http: I /focus. ti. com/docs/prod/folders/print/cc2510f32. html,

July 2009]. [24] Tronquo, A., Rogier, H., Hertleer, C., Van Langenhove, L., "Robust planar textile antenna for wireless body LANs operating in 2.45 GHz ISM band", Electronics letters, Vol. 42, No. 42, 2006, doi: 10.1049/el:20064200. [25] Wie, B., Space vehicle dynamics and control, American institute of aeronautics and astronautics, Retson Virginia, 2008, pp. 427. (26] Unwin, M.J., Oldfield, M.K., "The Design and Operation of a COTS Space GPS Receiver", Proceedings of the 23rd Annual AAS Guidance and Control Conference, Breckenridge, Colorado, 2000. [27] Vermeeren, G., Rogier, H., Olyslager, F., De Zutter, D., "Simple low-cost planar antenna for indoor communication under the Bluetooth protocol", Electronics letters, Vol. 37, No. 19, 2001, pp. 1153-1154.

103

