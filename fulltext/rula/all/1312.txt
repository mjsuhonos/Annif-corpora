Surface Roughness Estimation for FDM Systems

by

Behnam Nourghassemi
Master of Science, Weingarten University 2009 Bachelor of Engineering, Sahand University 2005

A thesis presented to Ryerson University

in partial fulfillment of the requirements for the degree of Master of Applied Science in the program of Mechanical Engineering

Toronto, Ontario, Canada, 2011 c Behnam Nourghassemi, 2011

Author's Declaration
I hereby declare that I am the sole author of this thesis. I authorize Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research.

I further authorize Ryerson University to reproduce this thesis by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research.

ii

Abstract
Surface Roughness Estimation for FDM Systems Master of Applied Science of Mechanical Engineering Ryerson University, Toronto, 2011 Behnam Nourghassemi

By selecting the optimal build angle, the surface roughness of rapid prototyped parts can be minimized. The objective of this study is to develop a model for estimation of surface roughness as a function of build angle and other build parameters for parts built by Fusion Deposition Modeling (FDM) machines. For that purpose, principles of the FDM technique, along with other rapid prototyping techniques, are reviewed and various standards for surface roughness measurements are introduced. Different analytical models for the estimation of surface roughness for FDM systems, which were proposed in the literature, are reviewed and reformulated in a standard format for comparison reasons. A new hybrid model is proposed for analytical estimation of the surface roughness based on experimental results and comparison of the models. In addition, Least Square Support Vector Machine (LS-SVM) is applied for an empirical estimation of the surface roughness. Robustness of the LS-SVM model is studied and its performance is compared to the hybrid model. The experimental results confirm better results for the LS-SVM model.

iii

Acknowledgments
I would like to thank Dr. Vincent Chan for his helpful guidance, encouragement and support throughout the duration of this project. I wish also to express my deep gratitude to the Director of Graduate Studies in the Mechanical Engineering Department, Dr. Greg Kawall, for offering me the opportunity to work under the supervision of Dr. Chan and also for his support in offering the Ryerson Graduate Award. Special thanks also go out to Lynn Reynolds and the Mechanical Engineering Department administrators for all their support throughout my time at Ryerson.

Many people helped me during this project. I would like to thank Haibin(Oscar) Jia for his tutorial on NextEngine 3D scanner, Jimmy Tran and Devin Ostrom for their technical support on FDM 3D printer and also R´ emi Fournioux and other members of the Mechatronics Research Lab for their technical support on SolidWorks.

My special gratitude is to Aleksandar Vakanski, Troy MacAvelia and Akbar Assa for the happy moments we spent together, which helped me to enjoy my time in Canada.

My deepest thanks go to my parents in Iran and also my sister in Sweden and my brother-in-law in the Netherlands for their long lasting and firm support, which has always encouraged me to follow my academic and career goals.

iv

To my parents, who have always supported me.

v

Contents
Author's Declaration Abstract Acknowledgment List of Tables List of Figures Nomenclature 1 Introduction 1.1 1.2 1.3 History of Rapid Prototyping . . . . . . . . . . . . . . . . . . . . . . Application of Rapid Prototyping . . . . . . . . . . . . . . . . . . . . Classification of Rapid Prototyping Technologies . . . . . . . . . . . 1.3.1 1.3.2 1.3.3 1.3.4 1.4 Photopolymer Solidification . . . . . . . . . . . . . . . . . . . Powder Solidification . . . . . . . . . . . . . . . . . . . . . . . Material Deposition . . . . . . . . . . . . . . . . . . . . . . . Lamination . . . . . . . . . . . . . . . . . . . . . . . . . . . . ii iii iv ix xiii xiv 1 1 2 3 4 4 5 6

Process Planning for Rapid Prototyping and Layered Manufacturing . . . . . . . . . . . . . . . . . . . . . . . . . . 7 11 11

1.5

Accuracy of RPLM Systems . . . . . . . . . . . . . . . . . . . . . . . 1.5.1 Errors due to Tessellation of the Original CAD Model . . . .

vi

1.5.2 1.6 1.7

Errors due to Slicing of Tessellated CAD Model . . . . . . . .

12 14

Surface Roughness . . . . . . . . . . . . . . . . . . . . . . . . . . . . Surface Roughness Estimation Models for FDM System . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1.7.1 1.7.2 1.7.3 1.7.4 1.7.5 1.7.6 Cusp Height Model by Dolenc et. al. 1994 [23] . . . . . . . . Roughness Model by Campbell et. al. 2002 [7] . . . . . . . . Roughness Model by Pandey et. al. 2003 [15, 22] . . . . . . . Roughness Model by Mason 2006 [5] . . . . . . . . . . . . . . Roughness Model by Byun et. al. 2006 [20] . . . . . . . . . . Roughness Model by Ahn et. al. 2008 [18] . . . . . . . . . . .

16 18 19 20 24 25 26

1.8

Application of Surface Roughness Estimation Models for Optimization of Rapid Prototyping Process . . . . . . . . . . . . . . . . . . . 28 31 31 33 34 38 40 40 43 45 48 49 54 54 56 59

2 Study on Accuracy of Different Surface Roughness Models 2.1 2.2 Review of Surface Roughness of FDM System . . . . . . . . . . . . . Experimental Test Parts Design and Build . . . . . . . . . . . . . . . 2.2.1 2.2.2 2.3 Test Parts Design in SolidWorks and Parts 3D Printing . . . Surface Roughness Measurement by Laser Scanner . . . . . .

Comparison of the Accuracy of Different Models . . . . . . . . . . . 2.3.1 2.3.2 2.3.3 Surface Roughness Estimation with Different Models . . . . . Roughness Estimation Error for Different Models . . . . . . . Hybrid Model for Surface Roughness Estimation . . . . . . .

3 Support Vector Machine 3.1 LS-SVM for Estimation of Nonlinear Functions . . . . . . . . . . . .

4 Application of LS-SVM for Estimation of the Surface Roughness 4.1 4.2 4.3 Development of LS-SVM for the Surface Roughness Estimation . . . LS-SVM Estimation Results . . . . . . . . . . . . . . . . . . . . . . . Study on Robustness of the LS-SVM System . . . . . . . . . . . . .

vii

5 Conclusion and Future Work Appendix A M-File for Surface Roughness Calculation Appendix B M-File for LS-SVM Model References

66 69 72 74

viii

List of Tables
1.1 2.1 2.2 Features of rapid prototyping processes [10]. . . . . . . . . . . . . . . Reported surface roughness data for different test parts. . . . . . . . ABS material consumption and build time for different subparts with UP! 3D Printer. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2.3 Estimation errors in equally incremental ranges of build angles for layer thicknesses t = 0.2mm, t = 0.253mm, t = 0.254mm and t = 0.4mm. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44 37 7 34

ix

List of Figures
1.1 1.2 1.3 Historical development of rapid prototyping and related technologies [1]. Typical application fields of RP technologies [1]. . . . . . . . . . . . Picture of upper shell body of the telephone made by Fused Deposition Modeling method [6]. . . . . . . . . . . . . . . . . . . . . . . . . 1.4 1.5 1.6 1.7 1.8 1.9 Stereolithography machine [1]. . . . . . . . . . . . . . . . . . . . . . 3 4 5 6 8 9 2 3

Selective Laser Sintering system [1]. . . . . . . . . . . . . . . . . . . Fused Deposition Modeling system [1, 9]. . . . . . . . . . . . . . . . Tessellation of the surface of a spherical shape [9]. . . . . . . . . . . Rotation of tessellated CAD model [13]. . . . . . . . . . . . . . . . . Chordal error as the result of tessellation of a typical surface of CAD model [1, 9]. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

11 12 13 15 16

1.10 Containment problem in RP parts [15].

. . . . . . . . . . . . . . . .

1.11 Staircase effect in RP part [17]. . . . . . . . . . . . . . . . . . . . . . 1.12 Graphical description of Rt , Ru , and Rm [19]. . . . . . . . . . . . . . 1.13 Profile height distribution p(z ) [19]. . . . . . . . . . . . . . . . . . . . 1.14 Surface roughness estimation model parameters.  is the build orientation (build angle), t the layer thickness and N the angle between vertical axis and normal to surface axis [15]. . . . . . . . . . . . . . . 1.15 Cusp height [15, 14]. . . . . . . . . . . . . . . . . . . . . . . . . . . . 1.16 Edge profiles of FDM part surface; a)  = 45 , t = 0.254mm; b)  = 70 , t = 0.254mm [15, 13]. . . . . . . . . . . . . . . . . . . . . .

18 19

21

x

1.17 Approximation of the layer edge by a parabola [22]. . . . . . . . . . 1.18 Arithmetic-mean-surface roughness for Mason model. . . . . . . . . . 1.19 a) Ideal manufactured surface with sharp edges; b) realistic manufacturing surface with round edges; R1 is the radius of fillet and R2 is the radius of the corner and N = 90 -  [20]. . . . . . . . . . . . . . 1.20 Surface angles in Ahn et. al. roughness model [18]. . . . . . . . . . . 1.21 Computing surface roughness value by interpolation of the measured sample data [18]. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1.22 Variation of the surface roughness in different slopes of the build surface tangent [14]. . . . . . . . . . . . . . . . . . . . . . . . . . . . 2.1 Pyramid shaped test part for measurement of surface roughness for various build angles. Borrowed from [22]. . . . . . . . . . . . . . . . 2.2 2.3 Turncheon test part [7, 18]. . . . . . . . . . . . . . . . . . . . . . . . Geometry of turncheon part with step angle step = 5 ; front, top, back and bottom view with corresponding surface build angles. . . . 2.4 2.5 2.6 2.7 UP 3D Printer software setup. . . . . . . . . . . . . . . . . . . . . .

21 24

26 27

28

29

32 33

35 36 37 38

Turncheon test part printing by UP 3D Printer. . . . . . . . . . . . . Top and side view of 3D printed T90 subpart. . . . . . . . . . . . . . Complete turncheon test parts with t = 0.2 mm; subparts from left to right are respectively T 30, T 60 and T 90. . . . . . . . . . . . . . .

38

2.8

Average z profile for the turncheon test parts with layer thickness t = 0.2mm and t = 0.4mm. . . . . . . . . . . . . . . . . . . . . . . . 39

2.9

Measured surface roughness for the turncheon test parts with layer thickness t = 0.2mm and t = 0.4mm. . . . . . . . . . . . . . . . . . . 39

2.10 Estimation of surface roughness by the Mason model for the turncheon part built with t = 0.2mm. . . . . . . . . . . . . . . . . . . . . 2.11 Estimation of surface roughness by the Campbell model for the turncheon part built with t = 0.2mm. . . . . . . . . . . . . . . . . . . . . 41 41

xi

2.12 Estimation of surface roughness by the Pandey model for the turncheon part built with t = 0.2mm. . . . . . . . . . . . . . . . . . . . . 2.13 Estimation of surface roughness by the Byun model for the turncheon part built with t = 0.2mm. . . . . . . . . . . . . . . . . . . . . . . . . 2.14 Estimation of surface roughness by the Ahn model for the turncheon part built with t = 0.2mm. . . . . . . . . . . . . . . . . . . . . . . . 43 42 42

2.15 Average estimation errors for different models for the range of build angles between 0 and 45 . . . . . . . . . . . . . . . . . . . . . . . . 2.16 Average estimation errors for different models for the range of build angles between 45 and 90 . . . . . . . . . . . . . . . . . . . . . . . . 2.17 Average estimation errors for different models for the range of build angles between 90 and 135 . . . . . . . . . . . . . . . . . . . . . . . 2.18 Average estimation errors for different models for the range of build angles between 135 and 180 . . . . . . . . . . . . . . . . . . . . . . . 2.19 Comparison of the average percentage errors for the proposed model and all other roughness models. . . . . . . . . . . . . . . . . . . . . . 4.1 Training data for LS-SVM chosen among the test parts built with different layer thicknesses. 4.2 . . . . . . . . . . . . . . . . . . . . . . . 55 47 46 45 45 44

Surface roughness with the LS-SVM for layer thickness t = 0.2mm. 18.92% of the data used for training. . . . . . . . . . . . . . . . . . . 56

4.3

Surface roughness with the LS-SVM for t = 0.4mm. 18.92% of the data used for training. . . . . . . . . . . . . . . . . . . . . . . . . . . 57

4.4

Surface roughness with the LS-SVM for t = 0.253mm. 36.84% of the data used for training. . . . . . . . . . . . . . . . . . . . . . . . . . . 58

4.5

Surface roughness with the LS-SVM for t = 0.254mm. 53.85% of the data used for training. . . . . . . . . . . . . . . . . . . . . . . . . . . 58

4.6 4.7

Average estimation error for the LS-SVM and other analytical models. 59 Reduced training data points to study robustness of the LS-SVM. . 60

xii

4.8

LS-SVM model with reduced training data for t = 0.2mm. 8.11% of the data used for training. . . . . . . . . . . . . . . . . . . . . . . . . 60

4.9

LS-SVM model with reduced training data for t = 0.4mm. 8.11% of the data used for training. . . . . . . . . . . . . . . . . . . . . . . . . 61

4.10 LS-SVM model with reduced training data for t = 0.253mm. 15.79% of the data used for training. . . . . . . . . . . . . . . . . . . . . . . 4.11 LS-SVM model with reduced training data for t = 0.254mm. 23.08% of the data used for training. . . . . . . . . . . . . . . . . . . . . . . 4.12 Average estimation error for different analytical models and the LSSVM model with reduced number of training data points. . . . . . . 4.13 Robustness of the LS-SVM for surface roughness for the turncheon parts. 100% training corresponds to 74 data points. . . . . . . . . . 4.14 Robustness of the LS-SVM for surface roughness for layer thickness t = 0.253mm. 100% training corresponds to 19 data points. . . . . . 4.15 Robustness of the LS-SVM for surface roughness for layer thickness t = 0.254mm. 100% training corresponds to 13 data points. . . . . . 65 65 64 63 62 61

xiii

Nomenclature
  Rake angle of hot cutter in HCM for post processing of FDM part Cutter movement direction with respect to the layers in HCM for post processing of FDM part Chordal error  Rotation angle of the triangular facet about reference rotation axis in STL file format k a ^i ^ b µ2 µ3 µ4  N ×N  (.) SVM control parameter Estimated value of ai Estimated value of b Variance of the roughness profile distribution Skewness of the roughness profile distribution Kurtosis or forth moment of the roughness profile distribution SVM weight vector Kernel matrix Surface profile angle in Ahn model SVM mapping function

xiv

 k  N step p i A Ai ai aj b bj C cj Cw d K (.) l L(.)

Standard deviation of the roughness profile distribution Kernel parameter for RBF Tangent build angle (build orientation) Normal build angle Incremental surface build angle steps for a turncheon part Normal vector to the triangular facet in tessellation process Loss function for SVM Step area in Ahn model Area of the ith triangular facet in tessellation process Lagrange multiplier (support values) Vertex coordinate of the triangular facet in tessellation process SVM bias term Vertex coordinate of the triangular facet in tessellation process Cusp height Vertex coordinate of the triangular facet in tessellation process Weighted cusp height Kernel parameter for inhomogeneous polynomial kernel Kernel function Evaluation length of the roughness profile Lagrangian

xv

nx

Unit vector corresponding to the reference rotation axis in STL file format

ny

Unit vector corresponding to the reference rotation axis in STL file format

nz

Unit vector corresponding to the reference rotation axis in STL file format

p(z ) Pt R ( n ) R ( p ) R1 R2 Ra RL Rm Rp Rq Rt Ra70

Height distribution of the roughness profile Profile hight Measured roughness values at the next surface angle n Measured roughness values at the previous surface angle p Fillet radius in Byun model Corner radius in Byun model Arithmetic-mean-surface roughness The length of the roughness profile divided by its nominal length Leveling depth Depth of surface smoothness Root-mean-square (RMS) roughness Peak-to-valley height Surface roughness value with build angle of 70 for a given layer thickness

Ra90

Surface roughness value with build angle of 90 for a given layer thickness

xvi

Ramax Ractual Rburr

Maximum allowable surface roughness Real value of the surface roughness Portion of the real surface roughness due to support removal burrs in supported area

Rmaterial

Portion of the real surface roughness due to different build material properties

Rprocess Rstep Sm t tmax tmin vc W w

Portion of the real surface roughness due to build process attributes Portion of the real surface roughness due to stair stepping effect Mean spacing between peaks in the roughness profile Layer thickness Maximum allowable layer thickness Minimum allowable layer thickness Cutting speed in HCM for post processing of FDM part Step width in Ahn model Dimensionless surface roughness adjustment factor for supported facets

x z (x) zc 2D 3D 3DP

Integration element along measurement in roughness profile Value of the roughness profile (height) Position of the center line in roughness profile Two dimensional Three dimensional Three Dimensional Printing xvii

CAD/CAM EDP FDM HCM HSC LM LOM RBF RP RPLM SFF SGC SL SLS

Computer Aided Design and Manufacturing Extruder Deposition Process Fused Deposition Modeling Hot cutter machining for post processing of FDM part High-spot count of the roughness profile distribution Layered Manufacturing Laminated Object Manufacturing Radial bias function kernel Rapid Prototyping Rapid Prototyping and Layered Manufacturing Solid Freeform Fabrication Solid Ground Curing StereoLithography Selective Laser Sintering

xviii

Chapter 1

Introduction
The objective of this study is to develop a model for estimation of surface roughness for parts built with Fusion Deposition Modeling (FDM) machines. FDM is one of the rapid prototyping techniques. In the following, rapid prototyping techniques are classified and their applications reviewed. In addition, CAD file preparation methods for standard rapid prototyping files (stereolithography STL files) are introduced. Moreover, different standards for surface roughness calculation and also various models for surface roughness estimation of the FDM parts are reviewed.

1.1

History of Rapid Prototyping

Unlike subtractive or forming processes such as lathing, milling, grinding or coining etc., in which form is shaped by material removal or plastic deformation [1], Rapid Prototyping and Layered Manufacturing (RPLM), also known as Solid Freeform Fabrication, represents a class of additive manufacturing processes in which objects are constructed layer by layer, usually in terms of a sequence of parallel planner laminae. RP started during early 1980s [1] with the enormous growth in Computer Aided Design and Manufacturing (CAD/CAM) technologies. Historical development of rapid prototyping and related technologies [1] is presented in Figure 1.1.

1

Figure 1.1: Historical development of rapid prototyping and related technologies [1].

1.2

Application of Rapid Prototyping

RPLM was originally used for rapid prototyping to help the designer to verify part geometry [2]. Poor surface finish, limited strength and accuracy are some of the major limitations of RP systems. Finishing operations such as grinding, polishing or NC machining [2, 3, 4, 5] are proposed to improve surface finish. With recent advances and improvements, RPLM is also used to make production tooling, including molds for casting and electrodes for electro discharge machining (EDM) and manufacturing of one-off and small batch production parts [2]. Moreover, due to the potential capability of RP technologies to reduce the required time from conception design to market by 10 - 50 percent [1], their fields of application are increasing rapidly. Some of the fields of application of RP technologies are shown in Figure 1.2. A typical part build by Fused Deposition Modeling method is shown in Figure 1.3.

2

Figure 1.2: Typical application fields of RP technologies [1].

Figure 1.3: Picture of upper shell body of the telephone made by Fused Deposition Modeling method [6].

1.3

Classification of Rapid Prototyping Technologies

Rapid prototyping technologies could be classified from different prospectives. For instance, certain RPLM processes [2] require support structures to support overhang or internal void structures or when the part has no underlying layer to build it on. In the following a short introduction to various rapid prototyping technologies [1, 7, 2, 9, 10, 11] is presented.

3

1.3.1

Photopolymer Solidification

In Photopolymer Solidification process, such as stereolithography (SL) or solid ground curing (SGC), photosensitive liquid resin is used as a fundamental concept [2]. Photosensitive liquid resin can be hardened and form a solid polymer under exposure of the ultraviolet light or laser. StereoLithography machine [1] consists of a build platform (substrate), which is mounted in a vat of resin and a UV Helium-Cadmium or Argon ion laser. The laser scans the substrate and generates the first layer. Platform is then lowered one slice thickness and left for short time (dip-delay) so that liquid polymer settles to a flat and even surface and inhibits bubbles forming. The new slice is then scanned. Schematic of Stereolithography system is depicted in Figure 1.4.

Figure 1.4: Stereolithography machine [1].

1.3.2

Powder Solidification

Powder solidification processes, such as selective laser sintering or 3D printing (3DP), use a similar concept as the previous technique. In this process, powdered material layers are solidified by adding a binder or by sintering with a laser. In Selective Laser Sintering (SLS) process, fine polymeric powder such as polystyrene, polycarbonate or polyamide etc. with 20 to 100 micrometer diameter is spread on the substrate us4

ing a roller. The temperature of the entire bed is raised just below its melting point by infrared heating in order to minimize thermal distortion (curling) and facilitate fusion to the previous layer. Then CO2 laser scans the layer for the sintering of a slice. Once laser scanning cures a slice, bed is lowered and powder feed chamber is raised so that a covering of powder can be spread evenly over the build area. In this process support structures are not required [1] as the un-sintered powder remains as a support structure. Schematic of SLS system is depicted in Figure 1.5.

Figure 1.5: Selective Laser Sintering system [1].

1.3.3

Material Deposition

In material deposition processes, layers are constructed by deposition of drops of molten plastic or wax. An example of this process is Fused Deposition Modeling (FDM) process, in which a thread of build material, such as ABS, is guided through a nozzle. A heater attached to the tip of the nozzle, heats up the build material slightly above (approximately 0.5 C [1]) its melting temperature. The nozzle is adjusted slightly above the desired thickness of the layer on top of the substrate and can move and deposit the molten build material along a desired path on the substrate. After deposition of the first layer, the nozzle height above the substrate is increased by the thickness of the layer and deposition of the second layer starts. 5

The molten drops solidifies within a very short time (approximately 0.1s [1]) after extrusion and cold-welds to the previous layers. Slice thickness is affected by various factors such as material extrusion rates and speed of the nozzle head. In this method, the addition of support structures for overhanging features is necessary. Schematic of FDM system is depicted in Figure 1.6.

Figure 1.6: Fused Deposition Modeling system [1, 9].

A modified version of polymer extrusion process, namely the Extruder Deposition Process (EDP), is also proposed by Reddy et. al. [12] and reported to overcome with many of the shortcomings of the previous systems by manufacturing components with higher bond strength.

1.3.4

Lamination

In Laminated Object Manufacturing (LOM) system a 25 - 50 watt CO2 laser beam [1] is used to cut slices from roll of material in desired contour. A new slice is bonded to previously deposited slice by heat sensitive adhesive which activated using a hot roller. In this process, materials that are relatively cheaper like paper, cardboard, foil, ceramic or plastic roll can be used. The building speed is 5 - 10

6

times [1] as compared to other RP processes. The limitations of the process [1] include fabrication of hollow models with undercuts and reentrant features. In addition, drops of the molten materials formed during cutting or bonding process should be removed and there is also the danger of fire hazards.

Features of various rapid prototyping processes are demonstrated in Table 1.1.

Supports required Material used

Table 1.1: Features of rapid prototyping processes [10]. SL SGC FDM SLS 3DP LOM Yes No Yes No No No Epoxy, Acrylic resin Resin ABS, MABS, Wax, Elastomers 50- 762 254 Nylon, Metals, Wax, Polycarbonate 76 Ceramic, Metal, Paper, Plastic, Ceramic

Layer thickness (µm) x-y resolution (µm) Accuracy (µm) Scan speed (mm s-1 ) Maximum part dimensions (mm3 )

50

100- 200 100

177

76- 203 203- 254 ±127 508

200- 250 ±100 NA

NA

508

±500 NA

±127 380

±51 0.001- 0.008 330× 380× 425

±127 0.007

500× 500× 584

500× 350× 500

254× 254× 254

355× 457× 355

813× 559× 508

1.4

Process Planning for Rapid Prototyping and Layered Manufacturing

Basic planning for rapid prototyping and layered manufacturing (RPLM) [2, 13] consists of creation of geometric model using a solid modeler, determination of suit7

able object orientation during the build process, support structure design, part slicing, path planning within each slice, packing of the artifacts into the workspace, part manufacturing and finally post processing operations as required.

The most basic input to a RPLM system is the description of the shape of the object to be manufactured. In computer aided design (CAD) [2], usually only surface models are used to generate input for RPLM. However, Pratt et. al. [2] have predicted that material information, which are not available in current RPLM data formats, will be needed in future for a variety of purposes such as building multicolor parts.

In order to transfer shape information form CAD to RPLM systems, several types of shape representation methods [2] have been developed. In the polygonal or faceted method (also called tessellation), the object boundary is represented by a mesh of polygonal facets. The concept of tessellation of the surface of a spherical shape by triangular facets is shown in Figure 1.7.

Figure 1.7: Tessellation of the surface of a spherical shape [9].

If all the facets of a tessellated shape are triangular, the model is consistent with the STL format. The STL format, which is a faceted approximation of the initial 8

CAD surface [14], was developed specially for the stereolithography processes [2]. In STL format, each triangular surface is expressed by four data items including the three vertices coordinates aj , bj , cj and the normal vector p, while the whole model is a collection of these vectors, as depicted in Figure 1.7. The area of the ith triangular facet [6], Ai , calculated from Equation (1.1).

Ai =

1 2

a2 - a1 b2 - b1 a3 - a1 b3 - b1

+

b2 - b1 c2 - c1 b3 - b1 c3 - c1

+

c2 - c1 a2 - a1 c3 - c1 a3 - a1

1 2

(1.1)

In the STL format, the orientation of a shape represents its rotation about a reference axis by angle  . The reference axis described by unit vector (nx , ny , nz ) as shown in Figure 1.8.

Figure 1.8: Rotation of tessellated CAD model [13].

The STL file corresponding to the rotated part [13] is calculated using the transformation matrix given by Equation (1.2).

2  nx v + c nx ny v - nz s nx nz v + ny s  M = n2 ny nz v - s  nx ny v y v + c  nx nz v ny nz v + nz s n2 z v + c



      (1.2)

9

where v = 1 - cos  , c = cos  and s = sin .

STL file format is conceptually simple and easy to generate but they have disadvantages [2] of file size, numerical accuracy and errors that mostly arise from limitations of triangulation. This can lead to insufficient slicing algorithms. Another disadvantage of STL format [2] is that it does not carry information on tolerance, surface finish and the build material.

Tessellated CAD model has become a standard for RP technologies [15]. In all RP processes, the solid model of a component to be manufactured is created in a CAD environment and is sliced before transferring the data to the RP machine [15]. The space between any two consecutive horizontal planes is referred to as a slice. In part slicing, the input is usually the 3D object model and the output is a set of 2D slice contours. Support regions for any orientation can be found by calculating the shadows it casts on the slicing planes [2]. After generation of sliced model, the path planning of each slice should be devised. The path planning output is a geometric representation of the generated paths. Criteria for path planning may include minimization of build time and/or requirements on part stiffness and strength. Microstructure in most LM objects results from filament-wise accretion of material [2]. The bonding of adjacent strands is affected by the degree of hardening that has occurred in the first strand by the time its neighbor is laid down. This is governed by the speed of deposition and the area fill strategy used which will determine the time difference between the deposition of adjacent filaments at any given adjacent point. Bonding strengths between filaments will affect overall part strength [2]. In some processes, molten or un-solidified material shrinks as it hardens on top of a previously solidified layer. This generates residual stresses and consequent distortion of the part [2]. A suitable choice of tool paths can minimize this effect.

10

1.5

Accuracy of RPLM Systems

Poor surface finish is one of the major limitations for the RPLM processes which is mainly influenced by tessellation of the original CAD model and slicing during the manufacturing process. These factors will be discussed in this section.

1.5.1

Errors due to Tessellation of the Original CAD Model

As discussed in Section 1.4, any RPLM process starts with the 3D modeling of the part and then the STL file is exported by tessellating the geometric 3D model. In tessellation, various surfaces of a CAD model are approximated piecewise by series of triangles. The maximum deviation between an original surface of a CAD model and corresponding triangle in the tessellated model is referred as "chordal error" [15], which is demonstrated graphically in Figure 1.9.

Figure 1.9: Chordal error as the result of tessellation of a typical surface of CAD model [1, 9].

The resolution of STL file is controlled by chordal error or facet deviation. In other words, by reducing the size of the triangles, the deviation between the actual surfaces and approximated triangles can be reduced. A more detailed discussion about the choice of tessellation resolution and consequent chordal error is presented

11

by Williams et. al. [16].

1.5.2

Errors due to Slicing of Tessellated CAD Model

Any RPLM process is characterized by "build volume" [2], which determines the largest single artifact that can be fabricated at one time. As mentioned in the section 1.4, slicing of tessellated CAD model of any build volume is necessary for part manufacturing in RPLM process planing. In certain circumstances, the slice edges may be inside in certain portion of a tessellated CAD model and outside in the other portion as shown in Figure 1.10 c and d. This phenomenon is called "containment problem" [15] which leads to distortion of the original CAD model of the designed shape.

Figure 1.10: Containment problem in RP parts [15].

12

In addition to containment problem, deposition of sliced layers leads to another problem called "staircase" or "stair-stepping" effect [15] which is shown in Figure 1.11.

Figure 1.11: Staircase effect in RP part [17].

In most of the commercial RP processes, the part is fabricated by deposition of layers contoured in a (x-y) plane in two dimensions. The third dimension (z) results from single layers being stacked up on top of each other, but not as a continuous z-coordinate. Therefore, the prototypes are very exact on the x-y plane but have stair-stepping effect in the z-direction [1]. Staircase effect is one of the major problems of RP processes, which results in a layer thickness that will have a significant effect on the final surface roughness. Although reducing layer thickness improves surface roughness, it increases the build time. Post processing surface treatments also adds to the build time and leads to a degradation [7] of the geometrical definition of the model. Due the effect of stair stepping as the result of stacking layers, geometrical gap occurs between the original CAD model and the fabricated LM part. This error varies according to the surface angle [18].

13

1.6

Surface Roughness

In section 1.5, poor surface roughness was introduced as the main limitation of the RPLM processes. Characterization of surface topography is important in applications involving friction, lubrication, and wear [19]. The concept of roughness, which is often described [19] with terms such as uneven, irregular, coarse texture or broken by prominence, has statistical implications as it considers factors such as sample size and sampling interval.

In rapid prototyping field, the surface measurement of the waviness is known as the surface roughness. Surface roughness can be characterized [19] in two principal planes. Using a sinusoidal curve as a simplified model of the surface profile, roughness can be measured at right angles to the surface in terms of the wave amplitude and parallel to the surface in terms of the surface wavelength, which is also recognized as texture. Roughness measurement limitations depends [19] on the measurement instrument's vertical and horizontal resolutions which correspond to the smallest amplitude and wavelength that the instrument can detect. Similarly, the largest amplitude and wavelength that can be measured by the instrument are the vertical and horizontal ranges.

Many industrial countries have their own national roughness standards [19]. Profile hight, Pt , was among the early parameters used for roughness measurement (DIN 4771). The designation of this parameter was subsequently changed to "peakto-valley height", Rt , when electrical filters were incorporated. Rt defined as the separation of the highest peak and lowest valley (DIN4762/1) as depicted in Figure 1.12. This parameter was further divided into Ru , namely, "depth of surface smoothness" and Rm , namely, leveling depth.

In the USA, MIL-STD-10 (1949), "root-mean-square roughness" (RMS rough-

14

Figure 1.12: Graphical description of Rt , Ru , and Rm [19]. ness) is a widely used standard which is indicated by Rq and defined [19] by Equation (1.3).
l

Rq =

1 l

z 2 (x)dx,
0

(1.3)

where, l, z and x are the evaluation length, height and the distance along measurement, respectively.

The "arithmetic-mean-surface roughness", Ra , is also defined [20] by Equation (1.4). Ra = 1 l
l

|z (x) - zc |dx
0

(1.4)

where z (x) is the value of the roughness profile, l is the evaluation length, and zc is the position of the center line. Although Ra is not a standard method for expressing surface roughness, however, it is typically used for rapid prototyping.

The distribution of heights p(z ), is shown in Figure 1.13. The parameters used to characterize such distributions are the central moments, defined by Equation (1.5).

+

µn =
-

z n p(z )dz

(1.5)

15

Figure 1.13: Profile height distribution p(z ) [19]. The second moment µ2 is known as the variance and represents the deviation of the distribution from its mean. Taking the square root of the variance results in the standard deviation  , which is numerically identical to the RMS roughness defined by Equation (1.3). The third moment µ3 known as the skewness and is a measure of the asymmetry of the distribution. Finally, the fourth moment µ4 is known as the kurtosis and represents the shape of the distribution curve [19].

In addition to amplitude parameters, there are other parameters that are used to characterize texture. One of them is high-spot count (HSC) [19], which is the number of peaks per unit length. Its reciprocal, Sm , is the mean spacing between peaks [19]. Another parameter used to evaluate texture is the profile length ratio RL [19], which is the length of the profile divided by its nominal length. Other parameters found in the literature have not received popular acceptance [19].

1.7

Surface Roughness Estimation Models for FDM System

Any attempt to improve the quality of RPLM products requires a model for prediction of the end surface roughness. For a given layer thickness, t, the surface 16

roughness is dictated largely by the angle that each surface normal makes with the vertical direction [1]. Once part deposition orientation is decided and slice thickness is selected, the tessellated model is sliced and data are generated [1].

The average part surface roughness, which indicates the surface quality, can be calculated [13] by Equation (1.6), Rai Ai , Ai

Raav =

(1.6)

where Raav is average surface roughness of the part, Rai is the roughness and Ai is the area of the ith triangular facet in the STL file. Ai can be calculated from equation 1.1.

By experimental measurement of surface roughness values for supported faces, Pandey et. al. [15] observed that for the same build orientation, the surface roughness of supported faces are approximately 1.2 times of upward facing surfaces. Based on this observation, they proposed [21] that for a supported facet, surface roughness can be calculated by Equation (1.7),

Rai (1 + w),

(1.7)

where Rai is the surface roughness corresponding to ith trapezium if there is no support below it and w is taken as 0.2 based on an experimentally measured surface roughness for the supported area [22].

Since the main focus of this research is on the surface roughness of Fused Deposition Modeling system (FDM), in following literature on the surface roughness estimation is reviewed. For the sake of consistency, some of the original symbols and formulae in the literature are modified. The general model parameters are depicted

17

in Figure 1.14.

Figure 1.14: Surface roughness estimation model parameters.  is the build orientation (build angle), t the layer thickness and N the angle between vertical axis and normal to surface axis [15].

1.7.1

Cusp Height Model by Dolenc et. al. 1994 [23]

Cusp height tolerance concept was introduced by Dolenc et. al. [23] and used as interpretation of surface roughness. As demonstrated in Figure 1.15, the maximum distance from the manufactured part surface perpendicular to the CAD model surface is known as the cusp height, C . This depends on the angle N and the layer thickness, t. Thicker layers and/or high values of cos N will produce larger values for cusp height [14] and consequently a more inaccurate surface will be resulted.

Cusp height for a 2D plane can be calculated [14] by Equation (1.8),    1000t|cos N |, if |cos N | = 1;   0, if |cos N | = 1,

C=

(1.8)

where C is the cusp height in micron as depicted in Figure 1.15, t the layer thickness in mm and N = 90 -  in which  is the build angle in degree as depicted in Figure 1.14. 18

Figure 1.15: Cusp height [15, 14].

However, a 3D part consists of multiple facets in different directions and each may have different cusp height. Hence, facet area, Ai is used [14] as a relative weighting function, which gives a weighted cusp height for each facet as given by Equation (1.9), Cw = C.Ai , (1.9)

in which Cw is the weighted cusp height, C cusp height and Ai area of the ith facet.

1.7.2

Roughness Model by Campbell et. al. 2002 [7]

A mathematical model for prediction of the arithmetic average surface roughness applicable for various RP processes is introduced by Campbell et. al. [7] and given by Equation (1.10),

Ra = 1000t sin

90 -  tan (90 - ), 4

(1.10)

in which Ra is the arithmetic-mean-surface roughness in micron, t is the layer thickness in mm, and  is the build angle in degree, as depicted in Figure 1.14. This model was tested [7] for small number of angles, none of which were downward facing. The evaluation of this model for different RP methods including stereolithography, jetting process, fused deposition modeling, lmaination process and selective bonding

19

process (3DP) were investigated [7] and it was reported that there is at least range of angles in which the surface roughness can be reasonably well predicted. For the FDM process this range was reported [7] between 45 and 180 . It was also observed that most surfaces in FDM display much lower surface roughness than the calculation using Equation 1.10. This phenomenon was interpreted as a sort of smoothing mechanism for FDM process. Campbell et. al. [7] also presented a colored map which gives the idea of surface finish at different locations of the part.

1.7.3

Roughness Model by Pandey et. al. 2003 [15, 22]

One of the highly cited and most accepted models for surface roughness estimation for FDM system [15, 3, 13, 6, 24] is developed by Pandey et. al. [15, 22]. Pandey et. al. [15] realized that layer thickness and build orientation are the two most significant process variables that affect surface finish. According to their empirical observation [15], the edge profiles of a layer manufactured part by FDM system is parabolic. No gap was observed between roads for the case in which the build angle reside in the range between 0 and 70 as shown in Figure 1.16a. They also concluded [15] the radius of curvature effect on surface roughness can be thought of independent as it varies within 5 percent over a wide range of curvature values.

Based on these observations, Pandey et. al. [22] proposed a semi-empirical model by approximating the layer edge profile by a parabola with the base length height as 30 - 35% of the base length as shown in Figure 1.17.
t cos 

and

Using the center line average method for surface roughness evaluation, the Ra value [22] was given by Equation (1.11).

Ra = 1000 which results in

A1 + A2 + A3
t cos 

(1.11)

20

Figure 1.16: Edge profiles of FDM part surface; a)  = 45 , t = 0.254mm; b)  = 70 , t = 0.254mm [15, 13].

Figure 1.17: Approximation of the layer edge by a parabola [22].

69.28

t t  Ra (µm)  72.36 cos  cos 

f or 0    70 ,

(1.12)

in which  is the build angle in degree and t is the thickness of the deposited layer in mm as shown in Figure 1.14.

However, they observed [13] that there is a gap between deposited roads if the

21

build orientation is in between 70 and 90 as shown in Figure 1.16b. Hence, for this range, surface roughness [13] was calculated by assuming linear variation between Ra70 and Ra90 which is given by Equation (1.13). 1 90Ra70 - 70Ra90 +  Ra90 - Ra70 20

Ra (µm) =

f or 70   < 90 (1.13)

For the case of horizontal surface, namely  = 90 , instead of parabola, surface profile was idealized [13] by semicircle with base length t and height 0.5 × t. Therefore, surface roughness for this case is given [13] by Equation (1.14).

Ra (µm) = 112.6 × t(mm)

f or  = 90

(1.14)

Surface roughness for the case of  = 90 was also given by Pandey et. al. [21] with slightly different expression as in Equation (1.15).

Ra (µm) = 117.6 × t(mm)

f or  = 90

(1.15)

Application of support structures are required for build orientation in the range between 90 and 180 , namely the downward facing surfaces. Therefore, it can be concluded that the surface roughness for this range can be calculated from Equation (1.7) which was proposed by Pandey et. al. [21]. Hence, the model for estimation of surface roughness for FDM systems based on the work of this research group can be summarized by Equation (1.16).

Ra =

  t   (69.28  72.36) cos  ,       1  20 90Ra70 - 70Ra90 +  Ra90 - Ra70    117.6 × t,        Ra (1 + w), ( -90) 22

if 0    70 ; , if 70 <  < 90 ; (1.16) if  = 90 ;

if 90 <   180 ,

in which Ra is the arithmetic-mean-surface roughness in micron, t is the layer thickness in mm,  is the build angle in degree, Ra(-90) is the equivalent for the roughness of the build angle ( - 90) and w is a dimensionless adjustment parameter for supported facets and chosen to be 0.2 for FDM system.

Pandey et. al. [22] also implemented standard statistical software (STATISTICA) to find regression equations for hot cutter machined FDM which is given by Equations (1.17) and (1.18).

Ra0 = 2.0 + 0.425x1 + 0.625x2 + 0.275x3 + 0.05x1 x2 + 0.05x1 x3 + 0.1x2 x3 + 0.375x4 Ra90 = 2.525 + 0.275x1 + 0.275x2 + 0.425x3 - 0.275x1 x2 + 0.125x1 x3 - 0.175x2 x3 - 0.675x4

(1.17)

with

x1 = x2 x3 x4 =

vc -22.5 7 .5 ; -27.5 17.5 ; -50 10 ;  -45 45 ,

(1.18)

= =

in which vc is the cutting speed in (mm/min),  the build orientation in degree,  the rake angle of hot cutter in degree and  the cutter movement direction with respect to the layers.

Pandey et. al. [22] observed that application of these formulae for hot cutter machined FDM part gives more than 99% correlation with the experimental date and provides more than 97% confidence level for surface roughness prediction in the

23

direction of HCM .

1.7.4

Roughness Model by Mason 2006 [5]

Mason [5] presented a model for prediction of the arithmetic-mean-surface roughness which is given by Equation (1.19). 1000t cos (90 - ), 2

Ra =

(1.19)

in which, Ra is the arithmetic-mean-surface roughness in micron, t layer thickness in mm and N is the normal build angle in degree which is equals to 90 - .

Since for the range of 0    180 , |cos N | = cos N , therefore, it could be concluded that the roughness in Mason model is indeed half of the Cusp height presented by the equation (1.8). In other words, Ra = graphically in Figure 1.18.
C 2.

This fact is also depicted

Figure 1.18: Arithmetic-mean-surface roughness for Mason model.

24

1.7.5

Roughness Model by Byun et. al. 2006 [20]

Byun et. al. [20] used fillet radius, R1 , and corner radius, R2 , as shown in Figure 1.19b, for profile roughness estimation of the surfaces made by layered manufacturing processes. The profile roughness Ra as a function of f (t, , R1 , R2 ) was given by Equation (1.20).     0,         +

if  = 0, cos (90 - ) -
2 2 +R2 )(1-  ) sin (90- ) ( R1 2 4 1000t

 2,

; (1.20)

Ra =

1000t   4

2 -R2 )(1-  ) ( R1 2 4 (1000t)3

tan (90 - ) sin (90 - ), otherwise,

where Ra is arithmetic-mean surface roughness in micron, t the constant layer thickness for a facet in mm,  the build angle in degree, R1 the radius of fillet in mm and R2 the radius of the corner in mm. In Figure 1.19b, N = 90 -  as compared to Figure 1.14.

For SLA process, both of the fillet radius R1 and corner radius R2 were set to 0.015mm, all facets within 25 of a horizontal plane were considered as the overhang area and the roughness of a support, Rc , was given as 0.25mm. For FDM process, R1 and R2 were set to 0.045mm and 0.01mm respectively and the maximum overhang angle was set to 30 . Finally, for SLS process, R1 and R2 were set to 0.02mm. Ramax was also given as 15µm.

They proposed [20] the variable layer thickness can be calculated by specifying the maximum allowable surface roughness, Ramax , in Equation 1.20 and can be chosen from min(tmax , max(t, tmin )) in which tmax and tmin are the maximum and minimum allowable thickness for the machine.

25

Figure 1.19: a) Ideal manufactured surface with sharp edges; b) realistic manufacturing surface with round edges; R1 is the radius of fillet and R2 is the radius of the corner and N = 90 -  [20].

1.7.6

Roughness Model by Ahn et. al. 2008 [18]

A theoretical model for arithmetic-mean-surface roughness Ra was presented by Ahn et. al. [18] and given by Equation (1.21). A 1000t cos ((90 - ) - ) = , W 2 cos 

Ra =

0 <  < 180

(1.21)

in which t denotes the layer thickness in mm,  the build angle in degree,  the surface profile angle in degree, A the step area and W the step width as depicted in Figure 1.20. In this figure, once again N = 90 -  as compared to Figure 1.14.

26

Figure 1.20: Surface angles in Ahn et. al. roughness model [18]. They realized [18] that when the applied layer thickness is in the range of 0.025 - 0.1mm, the profiles angle is 5    15 . For instance when layer thickness is 0.1mm, the profiles angles is 5 . However, the actual distribution of the surface roughness is different from that of the theoretical surface roughness. This is due to various factors such as stair stepping effect, support removal burrs, material properties and process attributes. Therefore, the actual average surface roughness can be calculated by Equation (1.22).

Ractual = Rstep + Rburr + Rmaterial + Rprocess ,

(1.22)

in which Rstep represents portion of the actual roughness due to stair stepping effect (calculated surface roughness value), Rburr due to support removal burrs in supported area, Rmaterial due to different build material properties and Rprocess due to build process attributes.

Based on this observation, Ahn et. al. [18] proposed the following distribution expression for average surface roughness. R(n ) - R(p ) ( - p ), n - p

R() = R(p ) +

(1.23)

in which, R(p ) and R(n ) are the measured roughness values at the previous and next surface angle p and n respectively. This idea is demonstrated in Figure 1.21. 27

In this way, the accuracy of the calculated roughness values depends on the number of the sample measured surface roughnesses.

Figure 1.21: Computing surface roughness value by interpolation of the measured sample data [18].

1.8

Application of Surface Roughness Estimation Models for Optimization of Rapid Prototyping Process

Surface finish and part deposition time are two important contradicting quantities in rapid prototyping processes. However, surface finish cannot be enhanced up to a level [22] and hence, a compromise should be made between the two aspects pertaining to model building. A compromise between these two contradicting issues can be achieved by using an adaptive slicing scheme. Moreover, selection of a proper part deposition orientation will further provide an improved solution.

A review on the slicing procedures in layered manufacturing is provided by Pandey et. al. [15]. Accurate exterior and fast interior approach is proposed by Sabourin et. al. [25] in which, adaptive slicing is used for precise exterior building, 28

while the interior is built with thick and wide material application. In different adaptive slicing procedures, slice thickness is decided [15] based on the geometry of tessellated CAD model for a user specified maximum allowable cusp height or surface roughness value Ra .

The surface roughness is greatly affected by the build and deposition orientation. As demonstrated by Figure 1.22, the surface roughness is minimized in the regions in which the build direction is horizontal (p1 ) or vertical (p4 ) to the build part surface.

Figure 1.22: Variation of the surface roughness in different slopes of the build surface tangent [14].

RP build orientation optimization algorithms and strategies have been developed by several researchers. An approach based on volumetric error is attempted by Rattanawong et. al. [26, 27], in which the difference in the volume of deposited part and the CAD model is minimized for finding a suitable orientation.

Thrimurthulu et. al. [13] derived a single objective optimization problem for the part deposition orientation determination as a function of the surface average roughness and build time. In this approach, they applied Pandey's roughness model presented by Equations (1.12), (1.14) and (1.13). 29

Li et. al. [6] also proposed an optimization model for surface roughness based on Pandey's surface estimation model presented by Equation 1.12. The same model also used along with a model for build time evaluation of RP process by Padhye et. al. [24] to form a multi-objective problem solving approach based on evolutionary algorithms in order to simultaneously minimizing arithmetic-mean-surface roughness Ra and build time T . For that purpose, they employed and integrated multi-objective genetic algorithm NSGA-II and Multi-objective particle Swarm Optimization (MOPSO), with SQP (Sequential Quadratic Programming) based intermittent local search for optimization purposes.

Pandey et. al. [3] realized that the part surface quality can be improved up to a level of precision in rapid prototyping manufacturing systems and there is a need to make modifications in this systems so that prototypes with better surface finish can be produced without incurring high production costs. For that purpose, hot cutter machining with numerically controlled x - y traversing mechanism is proposed to machine the build edges (staircase) of ABS material. Mason [5] and Hur et. al. [4] also proposed a hybrid-RP system which combines the advantages of a one-setup process from RP and the high accuracy offered by CNC.

30

Chapter 2

Study on Accuracy of Different Surface Roughness Models
In Section 1.7, different models for estimation of arithmetic-mean surface roughness for FDM system were reviewed. In this chapter, the accuracy of these models will be studied in detail and an optimized analytical model will be introduced. The structure of this chapter is as follows: in section 2.1, some experimental results in the literature are reviewed. In section 2.2, several sample parts are designed and built by a FDM machine and their surface roughness is measured with a laser scanner. These results are used in section 2.3 for the evaluation of the accuracy of different models and finally, an optimized analytical model is proposed to estimate the surface roughness of FDM systems.

2.1

Review of Surface Roughness of FDM System

Pyramid shaped parts with different surface build angles are used by several researchers as test parts for measurement of surface roughness [15, 22, 5]. The angle between an upward vector tangent to surface with the vertical axis is called the surface build angle. A pyramid shaped test part is shown in Figure 2.1, in which surface build angles are respectively 15 , 30 , 45 and 60 .

Pandey et. al. [22] reported the surface roughness measurement results for a

31

Figure 2.1: Pyramid shaped test part for measurement of surface roughness for various build angles. Borrowed from [22]. pyramid test part with side angles of 10 , 15 , 30 and 45 and layer thickness of 0.254 mm. The results are given in the third column of Table 2.1.

As shown in Table 1.1, for standard FDM machines, the layer thickness is in the range between 0.05 mm and 0.762mm. However, Mason [5] developed a customized FDM machine with the nozzle thickness of 2.0 mm to build test parts which resulted in very rough surfaces with high surface roughness indexes. These results are given in the forth column of Table 2.1.

Other researches, such as Campbell et. al. [7] and Ahn et. al. [18], proposed a more comprehensive test part for evaluation of their models. This test part, which was introduced and named "turncheon " by Campbell et. al. [7], has a geometry which enables measurement of surface roughness for a range of build angles between 0 to 180 . A sample turncheon test part is shown in Figure 2.2.

Campbell et. al. [7] reported surface roughness measurement results for a turncheon test part built by layer thickness of 0.253 mm and incremental surface build angle steps of step = 2 . Ahn et. al. [18] reported surface roughness measurement results for a turncheon test part built by layer thickness of 0.254 mm and incremental surface build angle steps of step = 3 . These results are presented in the first 32

Figure 2.2: Turncheon test part [7, 18]. and second columns of Table 2.1.

2.2

Experimental Test Parts Design and Build

In order to study the performance of different models in estimation of surface roughness for different surface build angles and layer thicknesses, a turncheon [7] test part with incremental step angle of step = 5 is chosen and designed in SolidWorks 2010. The test part is built twice by UP! Personal Portable 3D Printer 1 . In printing process, the layer thickness of one of the test parts is set to t = 0.2mm and the other test part is built with layer thickness of t = 0.4mm. The surface of the test parts are scanned by NextEngine 3D Scanner
2

and the surface geometry data are collected.

These data are processed by MATLAB and arithmetic-mean surface roughnesses are calculated by Equation (1.4). In the following sections, the design and building of test parts and the measurement of the surface roughness will be explained in more detail.

1 2

www.PP3DP.com https://www.nextengine.com/

33

Table 2.1: Reported surface roughness data for different test parts. Layer Thickness (mm) 0.254 0.254 Reported Reported roughness roughness data [18] . data [22]. (µm) (µm) 33.47 NA NA 18 46.30 19.25 NA NA 49.23 22.1 NA NA 29.56 25.2 NA NA 20.65 NA NA NA 18.58 NA NA NA 16.73 NA NA NA 13.47 NA NA NA 18.15 NA NA NA 28.36 NA NA NA 49.34 NA NA NA 32.39 NA NA NA 9.45 NA



( )

0 10 15 20 30 40 45 50 60 70 75 80 90 100 105 110 120 130 135 140 150 160 165 170 180

0.253 Reported roughness data [7]. (µm) 28.57 24.54 NA 30 32.31 26.54 NA 23.59 22.56 20 NA 17.95 17.43 17.56 NA 17.69 20.77 21.15 NA 25.51 34.36 33.33 NA 27.56 20

2.0 Reported roughness data [5]. (µm) NA NA NA NA 199.03 NA 273.76 NA 273.76 NA 273.76 NA NA NA NA NA NA NA NA NA NA NA NA NA NA

2.2.1

Test Parts Design in SolidWorks and Parts 3D Printing

As shown in Figure 2.3, the turncheon test part consists of several equivalent and parallel cuboids, in which the build angle of each cuboid is increasing by a constant step angle with respect to a reference cuboid. Assuming an upward build direction, the most left cuboid of turncheon is chosen as the reference cuboid and it is designed in a way that the front side of the reference cuboid has a surface build angle of 0 .

34

The total number of cuboid in a turncheon depends on the step angle step and is equal to
180 step .

With this arrangement, as shown in Figure 2.3, the front side of turncheon part spans build angles between 0 to 90 from the most left to the most right hand side; the top side of turncheon part spans build angles between 0 to 90 from the most right to the most left hand side; the bottom side spans build angles between 90 to 180 from the most left to the most right hand side; finally, the back side spans build angles between 90 to 180 from the most right to the most left hand side of the part.

Figure 2.3: Geometry of turncheon part with step angle step = 5 ; front, top, back and bottom view with corresponding surface build angles. In order to ease laser scanning and process of the data, the dimensions of each cuboid is chosen 1 × 5 × 5cm. In this arrangement, the width of the surface to be scanned for surface roughness calculation is 1cm. With the choice of a step angle step = 5 , the turncheon part in total consists of 36 cuboid to span build angles between 0 to 180 . Therefore, the overall dimension of the turncheon part

35

is 36 × 5 × 5cm. Due to the dimension limitations of the available 3D printer, namely14 × 14 × 13.5cm build size, the turncheon part had to be divided to three subparts; T 30, T 60 and T 90; therefore, a reference cuboid is also inserted in the left most hand side of T 60 and T 90 subparts.

These subparts were designed and STL files were generated in SolidWorks 2010. The UP 3D Printer provides a choice for the build layer thickness between 0.2mm and 0.4 mm with 0.1mm incremental steps. In order to study dependency of surface roughness on layer thickness, two sets of test parts with layer thicknesses of 0.2mm and 0.4mm were built. The UP 3D Printer setup options are shown in Figure 2.4 and a picture of the 3D Printer during printing is shown in Figure 2.5.

Figure 2.4: UP 3D Printer software setup. The ABS material consumption and build time for each of individual subparts with different layer thicknesses are given in Table 2.2.

In Figure 2.6, the top and side views of the T 90 subpart with layer thickness of 36

Figure 2.5: Turncheon test part printing by UP 3D Printer. Table 2.2: ABS material consumption and build time for different subparts with UP! 3D Printer. ABS Consumption (gr) Build Time (min) ABS Consumption (gr) Build Time (min) T 30 44.4 225 53.4 86 T 60 45.7 240 54.2 89 T 90 44.1 219 53.2 82

t = 0.2 mm t = 0.4 mm

0.2mm is shown.

With this design, the front side of each of the T 30, T 60 and T 90 subparts from the left to the right hand side spans build angles respectively between 0 to 30 , 35 to 60 and 65 to 90 . The bottom side of each of these subparts from the left to the right hand side spans build angles respectively between 90 to 120 , 125 to 150 and 155 to 180 . The front view of the complete turncheon part with layer thickness 0.2mm is shown in Figure 2.7. In this figure, T 30, T 60 and T 90 subparts are placed respectively in the left, middle and right side.

37

Figure 2.6: Top and side view of 3D printed T90 subpart.

Figure 2.7: Complete turncheon test parts with t = 0.2 mm; subparts from left to right are respectively T 30, T 60 and T 90.

2.2.2

Surface Roughness Measurement by Laser Scanner

The geometric coordinates of the surface of the printed test parts are measured using NextEngine 3D scanner. According to the data sheet, the maximum accuracy of the NextEngine scanner in macro mode is 127µm with a maximum 16 points per mm [8]. The scanned data in macro mode are processed in MATLAB and the geometric coordinates of the surface are linearly interpolated with the sftool in MATLAB. For each build angle, the surface profiles in the build direction are extracted and the arithmetic-mean surface roughnesses is calculated by Equation (1.4). The average z profile for different build angles for the turncheon test parts in the build direction are shown in Figure 2.8. Corresponding surface roughnesses are given in Figure 2.9. The source codes for the MATLAB M-File for extracting surface profiles 38

and calculation of surface roughness is given in Appendix 5.

Figure 2.8: Average z profile for the turncheon test parts with layer thickness t = 0.2mm and t = 0.4mm.

Figure 2.9: Measured surface roughness for the turncheon test parts with layer thickness t = 0.2mm and t = 0.4mm.

39

2.3

Comparison of the Accuracy of Different Models

Different models for the estimation of the surface roughness were introduced in Section 1.7. These models represent the surface roughness as a function of layer thickness t and build angle . The experimental results presented in sections 2.2 and 2.1 will be used to study the accuracy of different surface roughness models.

In this study, (1.8), (1.10), (1.16), (1.19), (1.20) and (1.21) will be referred to, respectively, as Cusp, Campbell, Pandey, Mason, Byun and Ahn models. Since the Mason model restates the Cusp model in the standard format and both models have similar formulation, only the Mason model will be considered in this study.

2.3.1

Surface Roughness Estimation with Different Models

Figures 2.10 to 2.14 show the performance of Mason, Campbell, Pandey, Byun and Ahn models for estimation of surface roughness for different build angles for the turncheon part built with a layer thickness of t = 0.2mm. As seen in Figure 2.10, the Mason model has a fair estimation of the surface roughness for the turncheon part built with layer thickness of t = 0.2mm.

As seen in Figure 2.11, the Campbell model overestimates the surface roughness for the build angles between 0 and 30 and also 155 and 180 . Moreover, according to the equation (1.10), the Campbell model is not able to estimate surface roughness for the build angles of 0 and 180 .

Figure 2.12 shows that for the turncheon part built with layer thickness of t = 0.2mm, the Pandey model has relatively good estimation of the surface roughness especially for the range of build angles between 155 to 180 . However, the model underestimates surface roughness especially for the range of build angles between 90 to 150 . 40

Figure 2.10: Estimation of surface roughness by the Mason model for the turncheon part built with t = 0.2mm.

Figure 2.11: Estimation of surface roughness by the Campbell model for the turncheon part built with t = 0.2mm.

As shown in Figure 2.13, the Byun model also underestimates surface roughness for most of the build angles. However, the underestimation error is larger at the range of build angles between 95 to 150 , while for the range of build angles between 20 to 90 the estimation error is smaller.

41

Figure 2.12: Estimation of surface roughness by the Pandey model for the turncheon part built with t = 0.2mm.

Figure 2.13: Estimation of surface roughness by the Byun model for the turncheon part built with t = 0.2mm. According to the equations (1.21) and (1.19), the Ahn model has a phase shift of  relative to the Mason model. Therefore, as seen in Figure 2.14, the Ahn model provides similar estimation like Mason model with a phase shift of  = 5 as compared to Figure 2.10. 42

Figure 2.14: Estimation of surface roughness by the Ahn model for the turncheon part built with t = 0.2mm.

2.3.2

Roughness Estimation Error for Different Models

In section 2.3.1, performance of different models for estimation of surface roughness was studied for different build angles for the turncheon part built with layer thickness of t = 0.2mm. In order to have a better understanding about the estimation performance of different models, all of the experimental results measured for the turncheon parts built with layer thicknesses t = 0.2mm and t = 0.4mm and also the reported results for the parts built with the layer thicknesses t = 0.253mm and t = 0.254mm are also considered. Since Mason only reported surface roughnesses for four build angles corresponding to four sides of a pyramid shaped part built with layer thickness t = 2.0mm, as given in fourth column of Table 2.1, these results are not considered in this study.

The average estimation error for all of the above mentioned parts in equally incremental range of build angles are given in Table 2.3 and visually compared in 43

Figures 2.15 to 2.18. As seen in these Figures, for the range of build angles between 0    135 , the Pandey model has the best performance, while for the range of build angles between 135 <   180, the Ahn model had slightly better performance. Moreover, as seen in Figures 2.15 to 2.18, in the full range of build angles, the average estimation errors for the Pandey and Byun models are robust as they varies slightly at each range of build angles. However, for other models, there is big variation for the average estimation error in different ranges of build angles. Therefore, other models are not as robust as the Pandey or Byun models.

Table 2.3: Estimation errors in equally incremental ranges of build angles for layer thicknesses t = 0.2mm, t = 0.253mm, t = 0.254mm and t = 0.4mm. ( ) Surface Roughness Model (µm) Mason Campbell Pandey Byun Ahn 50.66 1190.1 31.91 64.88 79.16 284.99 63.61 25.41 64.00 296.20 277.34 45.84 37.00 69.07 264.39 31.35 657.22 33.61 79.39 26.34

 0    45 45 <   90 90 <   135 135 <   180

Figure 2.15: Average estimation errors for different models for the range of build angles between 0 and 45 .

44

Figure 2.16: Average estimation errors for different models for the range of build angles between 45 and 90 .

Figure 2.17: Average estimation errors for different models for the range of build angles between 90 and 135 .

2.3.3

Hybrid Model for Surface Roughness Estimation

Based on the observation of the previous section, by comparison of the average estimation error for different models at each range of build angles, a hybrid model is proposed for estimation of arithmetic-mean-surface roughness for the FDM systems which is defined by equation (2.1).

45

Figure 2.18: Average estimation errors for different models for the range of build angles between 135 and 180 .

Ra =

  t   (69.28  72.36) cos  ,       1  20 90Ra70 - 70Ra90 +  Ra90 - Ra70     117.6 × t,        Ra(-90) (1 + w),         1000t cos ((90-)-) , 2 cos 

if 0    70 ; , if 70 <  < 90 ; if  = 90 ; if 90 <   135 ; if 135 <   180 , (2.1)

where t is the deposition layer thickness in mm,  the build angle in degree, w a dimensionless adjustment factor and chosen to be 0.2, and  a phase shift in the range of 5    15 depending on the layer thickness and chosen to be 5 .

The average estimation error for different models in the full build angle range between 0 to 180 is also given in Figure 2.19. As seen in this figure, the Campbell model has the worst estimation error, while the Pandey model has the best performance among all the other models. However, the hybrid model further improves estimation performance of the Pandey model by 3.48%.

46

Figure 2.19: Comparison of the average percentage errors for the proposed model and all other roughness models.

47

Chapter 3

Support Vector Machine
In Section 1.7, different models for analytical estimation of surface roughness for the FDM system were introduced. Their accuracy was studied extensively in Chapter 2. All of these models represent surface roughness as a function of layer thickness t and build angle . However, in some applications it might be desired to study relationships between surface roughness and other manufacturing parameters, such as build time, nozzle or build platform temperatures, nozzle speed, environmental vibration and noise, etc. Moreover, the accuracy of FDM machines are different and hence, the surface roughness of two parts built by different machines with exactly the same build angles, may have different surface roughnesses. In order to address these shortcomings, introduction of an intelligent model for prediction of the surface roughness rather than its analytical calculation is necessary.

Since dependency of surface roughness to parameters, such as the build angle and layer thickness is nonlinear, Neural Networks have been a good choice to relate these nonlinear parameters. However, a large data set is required for the training of the classical Neural Networks. In addition, classical Neural Networks, such as multi-layer perceptrons (MLP) and radial basis function (RBF) have the possibility of being trapped in local minimal in training and the risk of over-fitting [28]. Selection of the number of hidden layers [28] is also another challenge for this method. Therefore, application of an alternative method should be considered.

48

Support vector regression (SVR), which was introduced by Vapnik [29], is a relatively new type of learning machine based on the structural risk minimization (SRM) rule [28]. Although SVM was originally developed for the classification tasks, by introduction of a loss function that includes a distance measure [29], this method can also be applied for regression problems. In this case, the method called support vector regression (SVR). In this method, SVR constructs a linear model with the help of nonlinear kernels, a high capacity for generalization, which maps the input into a higher dimensional feature space [29]. Therefore, SVM is a kernel based approach, which allows the use of linear, polynomial and RBF kernels and others that satisfy Mercer's condition [30]. SVR is especially useful for classification and prediction with small sample sizes [31]. Due to the limited amount of training samples, it suggests a best trade off between complexity of model and learning ability to obtain best generalization, that often performs better than ANN methods [28].

In the following, a version of the SVM system, namely Least Square Support Vector Machine (LS-SVM ) will be introduced. The main advantage of the LS-SVM is that its training only requires the solution of a set of linear equations instead of the long and computationally difficult quadratic programming problem involved in the standard SVM [31].

3.1

LS-SVM for Estimation of Nonlinear Functions
xi , yi
N i=1

Considering N sets of training data

with n-dimensional input data

vector xi  Rn , representing manufacturing parameters, including but not limited to layer thickness t and build angle , and also scalar measured output data yi  R, representing the corresponding surface roughness, it is desired to formulate a nonlinear function y = f (x) to relate inputs to the outputs. By selecting squared error i as the loss function, an optimization problem in primal weight space [30] can be 49

formulated which is given by Equations (3.1) and (3.2).
N 2 i i=1

1 1 minJ (,  ) = min  T  + k 2 2 such that

(3.1)

yi =  T (xi ) + b + i , i = 1, ..., N

(3.2)

In Equation (3.1), the cost function J consists of an SSE (Sum of Squares Error) fitting error and a regularization term, which is also a standard procedure for the training of MLP's and is related to ridge regression [30]. The relative importance of these terms is determined by the positive real constant k , which is used to control the trade off between the training error and the model complexity [28]. In the case of noisy data over fitting can be avoided by taking a smaller k value [30]. However, smaller values for k will increase error of the regression model.

In Equation (3.2), (.) : Rn  Rnh is a function which maps the input space into a so-called higher dimensional (possibly infinite dimensional) feature space. By mapping the original input data onto a high-dimensional space, the nonlinear separable problem becomes linearly separable in space [31]. In addition,   Rnh in Equation (3.2), is the weight vector in the primal weight space, i  R are random error variables and b is bias term. The objective is now to find the optimal parameters  , b, that minimize the prediction error of the regression model in Equation (3.2). The optimal model will be chosen by minimizing the cost function (3.1), where the errors i are minimized [31].

In general, it is impossible to calculate the weight vector  from Equation (3.2) as  may have infinite dimension. Therefore, the model can be calculated in the dual

50

space instead of the primal space using the Lagrangian [30] as given by Equation (3.3).
N

L(, b,  ; a) = J (,  ) -
i=1

ai  T (xi ) + b + i - yi ,

(3.3)

in which ai  R are Lagrange multipliers and are called support values. The conditions for optimality are given by Karush-Kuhn-Tucke (KKT) conditions [30], which, give   L    = N  i=1 ai (xi ),  = 0 =      N   L  i=1 ai = 0, b = 0 =   L   ai = k i ,  i = 0 =        L = 0 =  T (xi ) + b + i - yi = 0, ai i=1,...,N; i=1,...,N;

(3.4)

After elimination of  and  the following solution is obtained,

0

1

T

b a

-1 1  + k I

=

0 y

(3.5)

in which,

yT = y1 , y2 , ..., yN

(3.6)

1

T

= 1, 1, ..., 1

1×N

(3.7)

aT = a1 , a2 , ..., aN and from the Mercer condition [32],

(3.8)

51

ij = K (xi , xj ) = T (xi )(xj ), i, j = 1, ..., N in which K (xi , xj ) is the kernel function and N ×N is the kernel matrix.

(3.9)

The estimated values of b and ai , i.e. ^ b and a ^i , can be obtained by solving the linear system (3.5), and the resulting LS-SVM model can be expressed [31] by Equation (3.10),
N

y = f (x) =
i=1

a ^i K (x, xi ) + ^ b

(3.10)

where K (x, xi ) is the kernel function with x as a vector of input variables. All kernel functions must satisfy Mercer's condition that corresponds to the inner product of some feature space [32].

There are several choices for the kernel function. One choice is the radial basis function (RBF), which is defined [28] by Equation (3.11). -(x - xi ).(x - xi )T
2 2k

K (x, xi ) = exp(

),

(3.11)

in which, k is the kernel parameter and should be optimized for the best estimation performance. RBF is a more compact supported kernel and able to shorten the computational training process and improve the generalization performance of LS-SVM [31].

Another choice is inhomogeneous polynomial kernel as defined by Equation (3.12).

K (x, xi ) = (x.xi + 1)d ,

(3.12)

in which d is the kernel parameter and should be optimized for the best estimation

52

performance.

Wang [28] used Least Square Support Vector Regression (LS-SVR), for predicting surface roughness of an end milled surface as a function of spindle speed, feed rate, depth of cut and vibrations. He found superiority of the method in terms of training speed and accuracy for the prediction. Using a similar idea, in the next chapter, the LS-SVM system will be applied for surface roughness estimation of the parts built with FDM systems and its performance will be compared to the analytical and Hybrid models.

53

Chapter 4

Application of LS-SVM for Estimation of the Surface Roughness
The Least Square Support Vector Machine was introduced in Chapter 3 as a powerful tool for classification and regression problems. The main advantage of this system is its ability for generalization with a relatively small amount of training data and its computational efficiency. In this chapter, a LS-SVM model will be developed for the estimation of the surface roughness as a function of build angle  and layer thickness t. At the end, the estimation results will be compared to the results for different analytical models presented in the Chapter 2.

4.1

Development of LS-SVM for the Surface Roughness Estimation

Salgado et. al. [31], showed that radial basis function (RBF), expressed by equation (3.11), is a more compact supported kernel which is able to shorten the computational training process and improve the generalization performance of the LS-SVM . This kernel was chosen for training of the LS-SVM for the estimation of the surface roughness for the FDM parts. A MATLAB program was developed in which, x is the two dimensional input vector representing layer thickness t and build angle  and y is the surface roughness.

54

In Sections 2.1 and 2.2.2, experimental results for surface roughness of the parts built with different FDM machines were presented. The accuracy of the FDM machines and also the scanners used for measurement of the surface roughness are different. In the other words, the experimental results given in the Figure 2.9 for the turncheon parts built with layer thickness t = 0.2mm and t = 0.4mm are independent of the results reported in the Table 2.1 for the parts built with layer thicknesses t = 0.253mm and t = 0.254mm. Therefore, LS-SVM is trained independently for each of the independent test parts. The training data are given in Figure 4.1.

Figure 4.1: Training data for LS-SVM chosen among the test parts built with different layer thicknesses. In order to obtain the best estimation results, optimal values for the parameters k and k must be chosen. This can be achieved by minimizing the error between the training and estimated value for y . For that reason, initially a random value is chosen for these parameters and the LS-SVM system is trained. Corresponding a ^ and ^ b are calculated by substituting the training data set in the equations (3.5) and (3.11). The surface roughness can then be estimated by the equation (3.10) and the 55

error between estimated values and the original y are calculated. By altering k and k and iterating with the same procedure, these errors are minimized. In this case, the choice of k = 40 and k = 100 gives better results. The MATLAB M-File is given in Appendix 5. In the following, the results of the LS-SVM for different test parts are compared.

4.2

LS-SVM Estimation Results

The LS-SVM is trained with 18.92% of the measured data for the estimation of the surface roughness for the turncheon test parts built with layer thicknesses t = 0.2mm and t = 0.4mm. The estimation performance of the trained LS-SVM for the turncheon test part built with layer thickness of t = 0.2mm is given in Figure 4.2. As seen in this figure, the LS-SVM has relatively good estimation performance for this test part.

Figure 4.2: Surface roughness with the LS-SVM for layer thickness t = 0.2mm. 18.92% of the data used for training. The estimation performance of the trained LS-SVM for the turncheon test part

56

built with layer thickness of t = 0.4mm is given in Figure 4.3. Similar to the previous case, the LS-SVM has good estimation performance.

Figure 4.3: Surface roughness with the LS-SVM for t = 0.4mm. 18.92% of the data used for training. The LS-SVM is trained with 36.84% of the measured data for estimation of the surface roughness for the test parts built with layer thicknesses t = 0.253mm. The same build angles similar to the previous experiments used for training of the LS-SVM. However, since the number of reported surface roughness for this part were less than experimental data, the ratio of the training data size to the test data size increases for this experiment. The estimation performance of the trained LS-SVM is given in Figure 4.4. This figure shows better estimation performance and implies that as the number of training data set increases, the estimation performance of the LS-SVM improves.

For the test part built with the layer thickness t = 0.254mm, surface roughness data were reported only for 13 build angles. Therefore, choosing the same build angles similar to the previous experiments, 53.85% of the measured data are used for training of the LS-SVM for estimation of the surface roughness for this test part. 57

Figure 4.4: Surface roughness with the LS-SVM for t = 0.253mm. 36.84% of the data used for training. The estimation performance of the trained LS-SVM is given in Figure 4.5. This figure shows very good estimation performance for the LS-SVM.

Figure 4.5: Surface roughness with the LS-SVM for t = 0.254mm. 53.85% of the data used for training. In Figure 4.6, the average estimation error of the LS-SVM is compared to other analytical models for all of the measured and reported data. As seen in this picture, 58

LS-SVM has superior performance and improves surface roughness estimation of the hybrid model by 33.91%.

Figure 4.6: Average estimation error for the LS-SVM and other analytical models.

4.3

Study on Robustness of the LS-SVM System

As shown in the previous section, the LS-SVM with RBF kernel and k = 40 and k = 100 had superior performance in comparison to other analytical models. In this section, robustness of the LS-SVM will be studied for reduced number of training data points. The reduced training data points are given in Figure 4.7.

As seen in Figure 4.7, for the turncheon parts built with layer thicknesses t = 0.2mm and t = 0.4mm, only 8.11% of the measured data points are used for training of the LS-SVM which shows 10.81% reduction in the number of training data in comparison to the previous experiment. The performance of the LS-SVM with reduced number of training data points for the turncheon test parts built with layer thickness of t = 0.2mm and t = 0.4mm are given respectively in Figures 4.8 and 4.9. According to these figures, although LS-SVM gives a good estimation, 59

Figure 4.7: Reduced training data points to study robustness of the LS-SVM. however, its estimation accuracy is reduced for reduced number of training data size.

Figure 4.8: LS-SVM model with reduced training data for t = 0.2mm. 8.11% of the data used for training. For the test part built with layer thicknesses t = 0.253mm, only 15.79% of the measured data points are used for training of the LS-SVM which shows 21.05% reduction in the number of training data in comparison to the previous experiment.

60

Figure 4.9: LS-SVM model with reduced training data for t = 0.4mm. 8.11% of the data used for training. The estimation performance of the new LS-SVM with reduced number of training data points is given in Figure 4.10. Similar to the previous experiment, although LS-SVM gives a good estimation, however, its estimation accuracy is reduced for reduced number of training data size.

Figure 4.10: LS-SVM model with reduced training data for t = 0.253mm. 15.79% of the data used for training.

61

For the test part built with layer thicknesses t = 0.254mm, 23.08% of the measured data points are used for training of the LS-SVM which shows 30.77% reduction in the number of training data in comparison to the previous experiment. The estimation performance of the new LS-SVM with reduced number of training data points is given in Figure 4.11. Similar to the previous experiments LS-SVM estimation accuracy is reduced for reduced number of training data size.

Figure 4.11: LS-SVM model with reduced training data for t = 0.254mm. 23.08% of the data used for training. In Figure 4.12, the average estimation error of the LS-SVM with reduced number of training points is compared to other analytical models. As seen in this picture, LS-SVM estimation error is doubled by reducing number of training data size to the half.

In order to further study the influence of number of training data size on robustness of the LS-SVM , independent experimental and reported test parts are considered separately. Since the turncheon parts with layer thickness t = 0.2mm and t = 0.4mm were built with the same FDM machine and their surface roughness was measured with same scanner, they were considered dependent and studied 62

Figure 4.12: Average estimation error for different analytical models and the LSSVM model with reduced number of training data points. together. The LS-SVM was trained with various number of training data for each independent case and the average estimation errors are calculated and presented in Figures 4.13 to 4.15.

Figure 4.13 shows the results for turncheon parts built with layer thickness t = 0.2mm and t = 0.4mm. For these parts, 74 data points were measured for surface roughness. Therefore, the minimum number of training data points is 2.7%, which corresponds to one training point for each part. As seen in this figure, except for the case of 100% training data, the general trend for the estimation error increases by decreasing the number of training data points. However, for the case of 2.7% training data, in which only one data point is used for each part, the estimation error is decreased slightly. This could be interpreted with the fact that LS-SVM tries to estimates surface roughnesses with its nonlinear kernel around the only training data point. In addition, as seen in this figure, the average estimation error for the LS-SVM stays below 29.3% which shows better performance in comparison to the hybrid model.

63

Figure 4.13: Robustness of the LS-SVM for surface roughness for the turncheon parts. 100% training corresponds to 74 data points. Figure 4.14 shows the results for the part built with layer thickness t = 0.253mm. 19 data points were reported for this part. Therefore, the minimum number of training data points is 5.26%, which corresponds to one training point. As seen in this figure, the general trend for the estimation error increases by decreasing the number of training data points. In addition, as seen in this figure, the average estimation error for the LS-SVM stays below 23.5% which shows better performance in comparison to the hybrid model.

Figure 4.15 shows the results for the part built with layer thickness t = 0.254mm. 13 data points were reported for this part. Therefore, the minimum number of training data points is 7.69%, which corresponds to one training point. As seen in this figure, the general trend for the estimation error increases by decreasing the number of training data points. In addition, except for the case of one training data size, the average estimation error for the LS-SVM stays below 22.1% which shows better performance in comparison to the hybrid model.

In conclusion, LS-SVM model shows better estimation performance in compar-

64

Figure 4.14: Robustness of the LS-SVM for surface roughness for layer thickness t = 0.253mm. 100% training corresponds to 19 data points.

Figure 4.15: Robustness of the LS-SVM for surface roughness for layer thickness t = 0.254mm. 100% training corresponds to 13 data points. ison to the hybrid and other analytical models. However, the accuracy of the estimation for the LS-SVM model decreases for the smaller number of training data points. The minimum number of training data points depends on the test data size. However, seven training data points seems to give a fair estimation for the surface roughness in most of the cases.

65

Chapter 5

Conclusion and Future Work
By selecting the optimal build angle and optimization of the other build parameters, the surface roughness can be minimized. For that reason, it is desired to study the influence of build angle and other build parameters on the surface roughness. The objective of this thesis was to study surface roughness of parts build by FDM machines and to develop a model to formulate surface roughness for FDM parts as a function of build parameters, including build angle  and layer thickness t. For that reason, the analytical models in the literature were reviewed and compared. In order to evaluate and compare the accuracy of these models, several test parts were designed and built by a FDM printer and their surface roughness measured with a 3D scanner. In addition, experimental results reported in the literature for different FDM machines were compared. By studying the accuracy of different models for these measured and reported data, it was concluded that the Pandey and Ahn models have better performance for some range of build angles. The average estimation error of the models was calculated for four equally incremental ranges of build angles, and a hybrid model was proposed based on the best estimation performance among different models in each range of build angles. The proposed hybrid model represents surface roughness as a function of build angle and layer thickness.

By comparison of the reported experimental results for different FDM machines, 66

it was observed that build accuracy of different FDM machines are slightly different and hence the surface roughness of two parts built by different FDM machines with exactly the same build angle and layer thickness are different. In addition, it might be desired to study the influence of other build parameters rather than only build angle or layer thickness on surface roughness. To address these shortcomings, application of a model based on an artificial intelligence algorithm was implemented. However, classical neural networks requires a large training data set. Therefore, considering the problem of surface roughness estimation as a regression problem, a variation of the support vector machine, namely the least square support vector machine, was proposed for surface roughness estimation of the parts built by the FDM machine. By the choice of the relevant radial bias function as the kernel, the LS-SVM method proved to have better estimation in comparison to the hybrid and other analytical models.

In order to study robustness and reliability of the LS-SVM system, it was trained with various numbers of training data points. By the choice of RBF kernel and optimization of the parameters, the estimation error of the LS-SVM model was calculated and compared to both the hybrid and other analytical models and it was observed that LS-SVM has better estimation performance. However, its estimation accuracy decreased for reduced number of training data points. It was observed that the choice of minimum seven data points gives reasonably good estimation.

In conclusion, the hybrid model provides a good initial estimation of the surface roughness for the parts built by any FDM machines. However, the LS-SVM method would provide more accurate estimation of the surface roughness for specific FDM machines. Therefore, separate LS-SVM system can be trained and used for each individual FDM machine. In addition, special attention should be given to the choice of the most efficient kernel and optimization of the LS-SVM and kernel parameters.

67

In summery, the contribution of this thesis were as follow:

· Analytical models for estimation of surface roughness were reviewed and expressed in a standard format for comparison reasons. · Different models were compared and a hybrid model was proposed based on the best estimation performance at each range of build angles. · Least square support vector machine was proposed for estimation of the surface roughness for the parts built with FDM machine. Suykens et. al. [30] proposed a weighted version of LS-SVM to improve its robustness. As a future work, this method can be extended and applied for estimation of surface roughness, especially for the case in which the training data set is gathered from different FDM machines.

68

Appendix A M-File for Surface Roughness Calculation
clear all; clc; %Measured data from 3D NextEngine scanner data=[0.9298 -22.9440 35.4198 ... ... ... -1.6587 -51.6249 35.5448]; %**************************************************** %**************************************************** %Shifting data to the origin ma=max(data); mi=min(data); x=data(:,1)-mi(1,1); y=data(:,2)-mi(1,2); z=data(:,3)-mi(1,3); data=[x,y,z]; %**************************************************** %**************************************************** % To choose extract range along x and y axis plot3(data(:,1),data(:,2),data(:,3),'.') xlabel('x') ylabel('y') zlabel('z') temp_Xmin=input('Xmin Range?'); temp_Xmax=input('Xmax Range?'); temp_Ymin=input('Ymin Range?'); temp_Ymax=input('Ymax Range?'); %**************************************************** %**************************************************** %Extracting sub surface 69

temp=find(data(:,2)>=temp_Ymin); ymax=max(temp); temp=find(data(:,2)<=temp_Ymax); ymin=min(temp); extractdatay=[data(ymin:ymax,1),data(ymin:ymax,2),... data(ymin:ymax,3)]; upx=find(extractdatay(:,1)>temp_Xmax); %to be eliminated downx=find(extractdatay(:,1)<temp_Xmin); %to be eliminated s=size(extractdatay,1); j=1; i=1; while(i<s+1) % if (i~=upy(:,1) || i~=downy(:,1)) if (i==upx(1,1)) i=i+1; if size(upx,1)<2 temp=upx(1,1); else temp=upx(2:size(upx,1)); upx=temp; end elseif (i==downx(1,1)) i=i+1; if size(downx,1)<2 temp=downx(1,1); else temp=downx(2:size(downx,1)); downx=temp; end else extractdata(j,:)=extractdatay(i,:); j=j+1; i=i+1; end end %**************************************************** %**************************************************** sftool(extractdata(:,1),extractdata(:,2),... extractdata(:,3)) %Now choose polynomial and select x=1 and y=1 %Then save output from sftool to the workspace in MATLAB %Then run the following commands t=size(output.residuals,1); r=(1:t);

70

plot(r,output.residuals); ct=(1/t)*sum(output.residuals) %Result in micron Ra=(1/t)*sum(abs(output.residuals-ct))*1000

71

Appendix B M-File for LS-SVM Model
%Training Data Set x_train=[0.2 0 ... ... 0.4 180]; y_train=[...]; N=size(y_train,1); bhat=0; ahat=zeros(N,1); %LSSVM and kernel parameters landa=100; sigma=40; %for RBF M=zeros(N+1,N+1); M(2:N+1,1)=1; M(1,2:N+1)=1; I=eye(N); for(i=1:N) for(j=1:N) M(i+1,j+1)=kernel(x_train(i,:),x_train(j,:)... ,sigma)+(1/landa)*I(i,j); end end hat=inv(M)*[0;y_train]; bhat=hat(1,1); ahat=hat(2:N+1,1); %***************************************************** %***************************************************** %Test data inputs x_test_fullrange=[x_exp;x_ref9;x_ref5;x_ref14]; N_test_fullrange=size(x_test_fullrange,1); 72

y_test_fullrange=zeros(N_test_fullrange,1); %Calculation of SVM estimation for x_test_fullrange %which includes all build angles for experimental, %ref9, 5 and 14 inputs for(j=1:N_test_fullrange) for(i=1:N) y_test_fullrange(j,1)=y_test_fullrange(j,1)+... ahat(i,1)*kernel(x_test_fullrange(j,:),... x_train(i,:),sigma); end y_test_fullrange(j,1)=y_test_fullrange(j,1)+bhat; end

73

References
[1] Pandey, P. M., "Rapid prototyping technologies, application and part deposition planning." Retrieved October 15, 2010 from http://web.iitd.ac.in/~pmpandey/MEL120_html/RP_document.pdf. [2] Pratt, M. J., A. D. Bhatt, D. Dutta, K. W. Lyons, L. Patil and R. D. Sriram, "Progress toward an international standard for data transfer in rapid prototyping and layered manufacturing," Computer-Aided Design, 2002, pp. 1111-1121 [3] Pandey P. M., N. V. Reddy and S. G. Dhande, "Virtual hybrid-FDM system to enhance surface finish," Virtual and Physical Prototyping, 2006, pp. 101-116 [4] Hur J., K. Lee, Zhu-hu and J. Kim, "Hybrid rapid prototyping system using machining and deposition," Computer-Aided Design, 2002, pp. 741-754 [5] Mason A., Multi-axis hybrid rapid prototyping using fusion deposition modeling, Master's Thesis, Ryerson University, 2006 [6] LI, A., Z. ZHANG, D. WANG and J. YANG, "Optimization Method to Fabrication Orientation of Parts in Fused Deposition Modeling Rapid Prototyping," IEEE, 2010 [7] Campblee, R.I., M. Martorelli and H. S. Lee, "Surface roughness visiualization for rapid prototyping models," Computer-Aided Design, 2002, pp. 717-725 [8] Strait S. G., N. E. Smith and T. Penkrot, "The Promise of Low Cost 3D Laser Scanners." Retrieved April 18, 2011 from http://paleoview3d.marshall.edu/laser2.php. [9] Yan X. and P. Gu, "Survey: A review of rapid prototyping technologies and systems," Computer-Aided Design, 1996, Vol. 26, No. 4, PP. 307-316 [10] Pham D. T. and R. S. Gault, "A comparison of rapid prototyping technologies," International Journal of Machine Tools and Manufacture, 1998, pp. 1257-1287 [11] Levy, G. N., R. Schindel and J. P. Kruth, "Rapid manufacturing and rapid tooling with layer manufacturing (LM) technologies, state of the art and future perspectives,"

74

[12] Reddy B. V., N. V. Reddy and A. Ghosh, "Fused deposition modelling using direct extrusion," Virtual and Physical Prototyping, 2007, pp. 51-60 [13] Thrimurthulu, K., P. M. Pandey and N. Venkata Reddy, "Optimum part deposition orientation in fused deposition modeling," International Journal of Machine Tools and Manufacture, 2004, pp. 585-594 [14] Alexander, P., S. Allen and D. Dutta, "Part orientation and build cost determination in layered manufacturing," Computer-Aided Design, Vol. 30, No. 5, 1998, pp. 343-358 [15] Pandey, P. M., N. V. Reddy and S. G. Dhande, "Slicing procedures in layered manufacturing: a review," Rapid Prototyping Journal, Volume 9, Number 5, 2003, pp. 274-288 [16] Williams, R. E., S. N. Komaragiri, V. L. Melton, R. R. Bishu, "Investigation of the Effect of Various Build Methods on the Performance of Rapid Prototyping (Stereolithography)," Journal of Materials Processing Technology, 1996, pp. 173-178 [17] Sabourin E., S. A. Houser and J. H. Bøhn, "Adaptive slicing using stepwise uniform refinement," Rapid Prototyping Journal, 1996, pp. 20-26 [18] Ahn D. K., S. M. Kwon and S. H. Lee, "Expression for surface roughness distribution of FDM processed parts," International Conference on Smart Manufacturing Application, 2008, Korea, pp. 490-493 [19] Thomas T.R., Rough Surfaces, Longman, 1982 [20] Byun, H. S. and K. H. Lee, "Determination of optimal build direction in rapid prototyping with variable slicing," International Journal of Advanced Manufacturing Technology, 2006, pp. 307-313 [21] Pandey, P. M., K. Thrimurthulu and N. V. Reddy, "Optimal part deposition orientation in FDM by using a multicriteria genetic algorithm," int. j. prod. res., 2004, pp. 4069-4089 [22] Pandey, P. M., N. V. Reddy and S. G. Dhande, "Improvement of surface finish by staircase machining in fused deposition modeling," Journal of Material Processing Technology, 2003, pp. 323-331 [23] Dolenc A. and I. M¨ akel¨ a, "Slicing procedures for layered manufacturing techniques," Computer-Aided Design, 1994, pp. 119-126 [24] Padhye N. and S. Kalia, "Rapid prototyping using evolutionary approaches: Part 1," GECCO'09, 2009, Canada, pp. 2725-2728 [25] Sabourin E., S. A. Houser and J. H. Bøhn, "Accurate exterior, fast interior layered manufacturing," Rapid Prototyping Journal, 1997, pp. 44-52 [26] Rattanawong, W., H. S. Masood and P. Lovenitti, "A volumetric approach to part-build orientations in rapid prototyping," Journal of Materials Procesing Technology, 2001, pp. 348-353 75

[27] Masood H. S., W. Rattanawong and P. Iovenitti, "Part build orientations based on volumetric error in fused deposition modelling," International Journal of Advances Manufacturing Technology, 2000, pp. 162-168 [28] Wang, X., "Intelligent modeling and predicting surface roughness in end milling," International Conference on Natural Computation, IEEE Computer Society, 2009 [29] Lela, B., D. Bajiæ and S. Jozi´ e, "Regression analysis, support vector machines, and Bayesian neural network approaches to modeling surface roughness in face milling," International Journal of Advanced Manufacturing Technologies, 2009, pp. 1082-1088 [30] Suykens J. A. K., J. De Brabanter, L. Lukas and J. Vandewalle, "Weighted least squares support vector machines: robustness and sparse approximation," Neurocomputing, 2002, pp. 85-105 [31] Salgado, D. R., F. J. Alonso, I. Cambero and A. Marcelo, "In-process surface roughness prediction system using cutting vibrations in turning," International Journal of Advanced Manufacturing Technologies, 2009, pp. 40-51 [32] Jiang Z., "Intelligent Prediction of Surface Roughness of Milling Aluminium Alloy Based on Least Square Support Vector Machine," IEEE Chinese Control and Decision Conference, 2010, pp. 2872-2876

76

