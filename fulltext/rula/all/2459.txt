NOTE TO USERS

This reproduction is the best copy available.

®

UMI

FUZZY LOGIC CONTROL OF COMPRESSCR SURGE IN A TURBOJET ENGINE MODEL

by

MARK LADERMAN, B. ENG. RYERSON UNIVERSITY

A thesis presented to Ryerson University in partial fulfillment of the requirement for the degree of Master of Applied Science in the Program of Mechanical Engineering

Toronto, Ontario, Canada, 2004 © Mark Laderman, 2004
PROPERTY OF RYERSON UNIVERSiU

UMI Number; EC52969

INFORMATION TO USERS

The quality of this reproduction Is dependent upon the quality of the copy submitted. Broken or Indistinct print, colored or poor quality Illustrations and photographs, print bleed-through, substandard margins, and Improper alignment can adversely affect reproduction. In the unlikely event that the author did not send a complete manuscript and there are missing pages, these will be noted. Also, If unauthorized copyright material had to be removed, a note will Indicate the deletion.

UMI
UMI Microform EC52969 Copyright 2008 by ProQuest LLC. All rights reserved. This microform edition Is protected against unauthorized copying under Title 17, United States Code. ProQuest LLC 789 E. Elsenhower Parkway PC Box 1346 AnnArbor, Ml 48106-1346

A u t h o r 's D e c l a r a t io n

1 hereby declare that I am the sole author o f this thesis. 1 authorize Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research.

I further authorize Ryerson University to reproduce this thesis by photocopying or by other means, in total or in part, at the request o f other institutions or individuals for the purpose o f scholarly research.

IV

B o r r o w e r 's P a g e Ryerson University requires the signatures o f all persons using or photocopying this thesis. Please sign below, and give address and date. Name Address Date Signature

A bstr a c t

Fuzzy Logic Control o f Compressor Surge in a Turbojet Engine Model

© Mark Laderman, 2004 Master o f Applied Science in the Program o f Mechanical Engineering Ryerson University
Stable operation of a gas turbine engine's axial compressor is constrained by compressor surge and rotating stall. In order to avoid these flow instabilities, an active fuzzy logic control approach is applied to a turbojet engine model. The actuator surfaces used in the controller are the inlet guide vanes, movable stator blades, and variable spool speed with regards to the compressor; in addition, consideration is given to varying the engine inlet and exit geometries. For design purposes, in the simulation, the rotor blade geometry is also allowed to be variable. This thesis also examines the stability and control o f the Moore-Greitzer model, and Gravdabl and Egeland's close coupled valve active controller. The Moore-Greitzer model is used as a black box to create a surge detection and avoidance fuzzy logic controller that does not require a stall line. The controller responds to the fluctuations in the axial mass flow coefficient and the pressure coefficient across the compressor system, and adjusts the throttle characteristic or the closed coupled valve characteristic.

VUl

A cknow ledgem ents

The author would like to express his gratitude to his supervisors. Dr. Guangjun Liu and Dr. David Greatrix for their unfailing support and guidance before and during the process of this work. Special thanks are given to the author's Aerospace Engineering colleagues at Ryerson University: Stephen Bomeman, Andrew Roach and Kyle Davidson for their beneficial discussions on modeling and control techniques. The author wishes to extend a thank you to Jerry Karpynczyk and other fellow members of the Ryerson Propulsion Research Facility. As well, the author wishes to thank Cliff Chan and fellow members o f the Ryerson University Systems and Control Laboratory.

IX

T able o f C ontents
Abstr a c t A cknow ledgem ents Ta b l e of Co nten ts L ist o f F ig u r e s L ist o f T a b l e s N om enclature

vii ix
X

xii xiv
XV

1. INTRODUCTION AND LITERATURE REVIEW
1.1 MOTIVATION L2 b a c k g r o u n d o n a x i a l c o m p re s s o rs 1.2.1 ROTATING STALL 1.2.2 SURGE 1.2.3 COMPRESSOR PERFORMANCE MAP 1.2.4 SURGE MARGIN 1.3 BACKGROUND ON COMPRESSOR MODELS 1.4 BACKGROUND ON ACTIVE CONTROL 1.5 BACKGROUND ON FUZZY LOGIC CONTROL 1.5 APPROACH 1.6 SUMMARY

1
2 2 3 4 4 5 6 8 9 11 13

2. TURBOJET ENGINE MODELING_________________ ^______ 2.1 TURBOJET ENGINE MODEL 2.1.1 INTAKES AND NOZZLES 2. L1.1 SUBSONIC DIFFUSER INTAKE 2.1.1.2 LOW SUPERSONIC PITOT INTAKE 2.1.1.3 HIGH SUPERSONIC MULTIPLE SHOCK INTAKE 2.1.1.4 CONVERGING NOZZLE 2.1.1.5 CONVERGING--DIVERGING NOZZLE 2.1.2 COMPRESSORS AND TURBINES 2.1.2.1 BLADE GEOMETRY 2.1.2.2 INLET GUIDE VANES 2.1.2.3 ROTOR STAGE 2.1.2.4 STATOR STAGE 2.1.2.5 STAGE PRESSURE RATIO 2.1.3 BURNER AND AFTERBURNER 2.2 GREITZER COMPRESSOR MODEL 2,24 STABILITY ANALYSIS OF GREITZER MODEL 2.3 MOORE - GREITZER MODEL 2.3.1 IMPLICATIONS OF MOORE-GREITZER MODEL 2.4 GRAVDAHL AND EGELAND CCV MOORE-GREITZER MODEL 2.4.1 STABILITY ANALYSIS OF MG MODEL WITH CCV CONTROL 2.5 FUZZY LOGIC COMPRESSOR MODEL 2.5.1 CREATING THE MEMBERSHIP FUNCTIONS 2.5.2 CONSTRUCTING THE RULE BASE

M 15 15 16 18 19 21 23 24 25 28 29 31 32 33 35 36 38 40 40 42 43 44 44

3. FUZZY LOGIC CONTROLLERS 3.1 FUZZY LOGIC CONTROL 3.1.1 FUZZY SETS 3.1.2 MEMBERSHIP FUNCTIONS 3.1.3 FUZZY INFERENCE AND DEFUZZIFICATION 3.2 SPOOL SPEED CONTROLLER 3.3 IGV AND STATOR BLADE ANGLE CONTROLLERS 3.3.1 ADJUSTABLE IGV TO OPERATE AT DESIGN INCIDENCE ANGLE 3.3.2 ADJUSTABLE IGV TO OPERATE AT DEFINED REACTION 3.3.3 STATOR CONTROL AT DESIGN INCIDENCE ANGLE 3.3.4 COMBINATION CONTROL 3.3.5 MULTIPLE STAGE CONTROL 3.4 IGV WITH ADJUSTABLE RPM 3.5 ACTIVE SURGE CONTROLLER 3.5.1 IGV SURGE CONTROL 3.5.2 IGV AND VARIABLE ROTOR GEOMETRY CONTROL 3.6 DETECTION/AVOIDANCE CONTROLLER 4. SIMULATION RESULTS 4.1 IGV AND STATOR BLADE ANGLE CONTROLLERS 4.1.1 AD.TUSTABLE IGV TO OPERATE AT DESIGN INCIDENCE ANGLE 4.1.2 ADJUSTABLE IGV TO OPERATE AT DEFINED REACTION 4.1.3 ADJUSTABLE STATOR TO OPERATE AT DESIGN INCIDENCE ANGLE 4.1.4 COMBINED CONTROL 4.2 SPOOL SPEED CONTROL 4.3 SURGE LINE CONTROLLER 4.3.1 IGV ONLY 4.3.2 IGV AND VARIABLE ROTOR GEOMETRY 4.3.3 IGV AND VARIABLE ROTOR GEOMETRY WITH DISTURBANCE 4.4 DETECTION/AVOIDANCE CONTROLLER 5. CONCLUSIONS 5.1 SUMMARY OF CONTRIBUTIONS 5.2 CONCLUSIONS 5.3 FUTURE WORK
R eferences A p p e n d i x A: A d d it io n a l S im u l a t io n D a t a A p p e n d i x B: S im u l a t io n C o d e

47 48 49 50 52 54 59 59 62 63 63 64 64 65
68

72 72 75 76 76 79 80 80 83 83 84 85
88

92 95 99 99 96
100

105 105

XI

L i s t q f F ig u r e s

1.1: Compressor performance map ..«-········-··-.5 Figure 1.2: MG model compared to gas turbine jet engine ,,..,..,..,,......,....,.,,...,..,.....,...,.....8 Figure 1.3 : (a) Crisp set for temperature (b) Fuzzy set for temperature..............................10 Figure 2.1: Turbcyet engine model Figure2,2: Inlet diffuser geometry.,............,,,,,,.,,.,.,,..,............,.,.....,..-- ...-- 17 Figure 2.3: Supersonic inlet with multiple shock waves variable geometry .....................19 Figure 2.4: Flow angles with sign conventions.....................................................................26 Figure 2,5; Rotor turn angle and blade angles relationship ,.,..,.,........... 27 Figure 2.6: Velocity triangle for inlet guide vane stage ..28 Figure 2.7; F.otor blade and hub dunensions .....................................................>................29 Figure 2.8: Velocity triangle for rotor stage.......................................................................... 30 Figure 2,9; elocity triangle for stator s t a g e , 32 p re 2.10: Stability o f the linearized Greitzer M o d e l , . . , . . ,.,,37 2.11: Compressor and throttle charaeteristies ........................................................42 Figure 2.12: MFs for blade speed........................................................................................... 44 Figure 2.13: MFs for the probability of a flow instability....................................................45 Figure 3.1; Fuzzy conffol logic f l o w c h a r t . . , . , ,, , , 4 8 Figure 3.2; Crisp set theory (a) A and notff (b) A u n io n # (e) A intersection#................50 Figure 3.3: Membership functions (a) Triangle MF (b) Trapezoidal MF (c) Gaussian MF (d) Open ended Gaussian M F .............. 51 Figure 3.4; Triangular membership functions o f o u t p u t . . . . . ,, . ,, 5 2 F igure 3,5 : hlax^niin m^^rence method .....53 Figure 3.6: (a) MaxMot inference method (b) Product-sum inference method..................53 Figure 3.7: Sirnple symmetric triangular membership functions for altitude in p u t 55 Figure 3.8: MF for spool speed scaling factor., Figure 3,9: Three-dimensional control surface for spool speed G o n tx o lle r....,,.....,......56 Figure 3.10: Acceptable values for the mass flow coefficient expressed as a M F 57 Figure 3.11: Two-dimensional control surface for spool speed control o f mass coéffîc'ent
.......... 58

Figure 3.12: MF for outputted spool speed sealing factor.................................................58 Figure 3.13: Three-dirnensional control surface for spool Speed control o f mass coefficient......................................................................................................................... 59 Figure 3.14; Two dimensional control surface for adjustable IGV to operate at design incidence angle ..... 61 Figure 3.15: Gombination control flow chart; (a) multiple error / single eontroller (b) multiple error/ multiple controller.................................................................................64 Figure 3,16; Multiple control surfaces flow chart,,,,,,,,,.,,,,,.,,,,,,,,,,.........,,,......,,,,,,,,.........,65 Figure 3,1?: Surge line and surge margin..........................................................................66 Figure 318: MF for incidence angle error for IGV surge controller,................·....-,.·.···.··69 Figure 3.19: Two-dimensional plot o f incidence error controller....................................... 70 Figure 3,20: Input MF o f work coefficient error forlG V surge controller, ,,,,,,,,,,,,,.,,,.,,70 Figure 3.21: Output MF for change in IGV for surge controller.......................................71 Figure 3,22: Two-dimensional control surface for IGV surge eontroller.,,.........-..........-7I Figure 3.23: Three-dimensional control surface for IGV surge control..............................72 Figure 3,24: Three-dimensional control surface for MG surge detection m odel...............74
xii

; : I I I I I I I I I § I I I I I I I I I I I

Figure 4.1: IGV and stator blade variable geom etry............................................................76 Figure 4.2: Change in rotor blade incidence angle............................................................... 78 Figure 4.3: Change in IGV angle............................................................................................78 Figure 4.4: Velocity triangles and blade geometry for adjustable IGV operating at design incidence angle: (a) time zero (b) simulation end.........................................................79 Figure 4.5: Velocity triangles for an optimized rate o f reaction (50%).............................. 79 Figure 4.6: Velocity triangles and blade geometry for adjustable stator operating at design incidence angle: (a) time zero (b) simulation end......................................................... 80 ............81 Figure 4.7: Incidence angles resulting from flow entering the rotor blades Figure 4.8: Incidence angles resulting from flow entering the stator blades......................81 Figure 4.9: Change in stator blade stagger angle.................................................................. 82 Figure 4.10: Incidence angles resulting from flow entering the rotor blades.....................82 Figure 4.11: Degree of reaction.............................................................................................. 83 Figure 4.12; Change in work coefficient ................................................................... 84 Figure 4.13: Incidence angles resulting from flow entering the rotor blades.....................85 Figure 4.14: Change in IGV angle..........................................................................................86 Figure 4.15: Compressor characteristic................................................................................. 86 Figure 4.16: Change in work coefficient error value............................................................87 Figure 4.17: Change in incidence angle o f flow entering rotor blade................................ 87 Figure 4.18 Change in deviation angle o f flow leaving rotor blade................. 88 Figure 4.19: Velocity triangles and blade geometry for adjustable IGV and variable rotor geometry: (a) time zero (b) simulation e n d ................................................................... 88 Figure 4.20: Change in work coefficient error for disturbed case.......................................89 Figure 4.21 : Compressor characteristic for disturbance case............................................ 90 Figure 4.22: Change in IGV blade angle for disturbed case...............................................90 Figure 4.23 : Change in rotor blade incidence angle for disturbed case.............................91 Figure 4.24: Change in rotor blade deviation angle for disturbed case.............................91 Figure 4.25: Response (controller turned on at ^ = 1000)................................................... 93 Figure 4.26: Compressor and throttle characteristics for Simulation 1 (no C C V )............ 94

L is t o f T a b l e s

Table 1.1: Overview o f compressor model properties............................................................ 7 Table 2.1: User-defined variables for subsonic diffuser intake........................................... 16 Table 2.2: User-defined variables for converging nozzle.................................................... 21 Table 2,3: User-defined variables for axial-flow compressor .,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,26 Table 2,4: User-defined variables for burner and a f t e r b u r n e r ,, 3 4 Tablé 2.5: Operating ranges o f drzzy inputs..........................................................................43 Table 2.6: Operating ranges of fuzzy output............................................ 43 Table 2.7: Rule base matrices for three-input / one-output system.....................................46 Table 3 .1: Crisp theory compared with fiizzy set theory......................................................50 Table 3.2: Rule base matrices for three-input / one-output system..................................... 56 Table 3.3: Operating ranges o f fuzzy inputs and output.......................................................73 74 Table 3.4: Rule base matrix for two-input / one-output system ................................... Table 4.1: Numerical values for simulations.........................................................................77 Table 4.2: Numerical values used in simulations................................................................. 94

XIV

N om enclature Roman
a

speed o f sound MG reciprocal time-lag of blade passage rotor hub diameter rotor blade tip-to-tip diameter deHaller number specific heat fuel-air ratio altitude compressor blade incidence angle ratio o f specific heats MG nondimensional compressor length MG nondimensional length of exit duct MG nondimensional length of inlet duct compressor duct flow parameter mass flow o f ah mass flow o f fuel incidence angle slope factor heat o f reaction in burner diffuser entrance radius. diffuser exit radius. thickness-to-chord ratio. rotor blade speed at mid-point radius axial velocity (compressor) w hhl velocity flow area Greitzer B-parameter axial velocity through MG model MG compressor characteristic semi height spool and rotor moment of inertia MG squared amplitude of rotating stall blade shape parameter
XV

î du

s
1 î

d, deH S /
h

1
î

i
k

le le h m < rhf
n

î î i i I 1 i i 1
»

Qr d,ent ^d,exil f/c
u

1 I 1 1 1 i

V W Ac

B
Q

H I J
Ku

i K .J. Lc Lj Le L[ M
0

design incidence angle thickness correct factor throttle coefficient length o f ducts and compressor diffuser length length of exit duct length o f inlet duct Mach number normal component o f Mach number spool speed number o f compressor stages pressure stagnation pressure power to drive the compressor mean compressor radius degree o f reaction for compressor stage gas constant for air (diffiiser) temperature stagnation temperature thrust velocity plenum volume mean rotor velocity MQ compressor characteristic semi width

N P P R R' R^ T 7 % T V Vp U W G reek a 0 01 0ioy 5

flow angle into blade compressor blade metal angle oblique shock angle (high supersonic intake) IGV angle compressor blade deviation angle CCV gain

Yt V P

throttle gain efficiency Mach angle

0 p a
T

compressor blade turn angle ramp angle (high supersonic intake) density compressor cascade solidity torque of the rotor MG time in terms o f radians o f wheel travel work coefficient MG shut-off value of compressor characteristic

b

¥

C
 1

compressor blade stagger angle mass flow coefficient divergence semi-angle o f the duct cross-section ' pressure coefficient compressor characteristic equivalent compressor characteristic CCV characteristic

o 0 T

r

inverse throttle characteristic Subscript ab
·i

afterburner burner compressor diffuser equivalent compressor blade inlet angle initial value blade outlet angle nozzle rotor stator turbine CCV inlet guide vane throttle atmospheric conditions
XVll

g

b c d

I 1 1 % j

e in o ont n

I I
1

r s t
V

1 i
:f 1
S

IGV T
00

Diacritic Symbol rate of change design value Acronyms CCV FLG ICV MG close coupled valve fuzzy logic controller inlet guide vane membership funetion Moore-Greitzer

3CV1U

I

i

C h apter 1

INTRODUCTION AND LITERATURE REVIEW
The main focus o f this chapter is to illustrate the differences between active and avoidance control with regards to surge in an axial compressor. This chapter provides background information on axial compressors and the flow instabilities, rotating stall and surge that can occur within the compressor. A literature review o f some o f the more predominant papers in the field o f compressor modeling and active control is also provided. Finally, fuzzy logic control is introduced as an alternative to classical control theory along with a brief literature review on current fuzzy logic applications.

1 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

1.1 MOTIVATION The work in this thesis is motivated by the fundamehtal mstabilily problems o f surge and rotating stall which limit the range o f operation o f the compressor stage in a gas turbine engine. The current industry solution for the instability problems is based on surge

avoidance, where the operating point of the eompressor is kept below the surge line using a surge margin. Aircraft engines are most effective when the compressor is operating at or near these aero-mechanical limits. Therefore, there is a potential for increasing the effieiency o f the compressor by narrowing the gap between the current margin line and the surge line. This approach raises the need for an active controller that can quickly stabilize a compressor that crosses into the surge region. Active surge control in

approach is fundamentally different to surge avoidance, In active surge control, feedback is used to stabilize the unstable regime Of the Compressor map. Another alternative to surge avoidance is surge detection and avoidance. Using a detection strategy, the

drawbacks o f the loosely defined surge margin can be avoided,

1.2 BACKGROUND ON AXIAL COMPRESSORS A compressor transfers kinetic energy from an aero-mechanically-driven rotor to a steady flow of air. The pressure o f the air is raised by converting the acceleration imparted by the rotating parts o f the compressor via diffusion. In an axM 'âow compressor the ah flows through in the dhection parallel to the axis o f rotation: The interest in this field largely involves axial compressors rather then centrifugal, mainly due to the fact that the majority o f ahcraft engines utilize axial compressors (Gravdahl and Egeland, 1997b).

The kinetic energy o f the rotor is converted into pressure energy o f the air through the alternate rows o f fixed stator blades and moving rotor blades. The moving blades are root^mounted to the turbine driven rotor; the fixed blades^ which fimction as the diffusers, are attached to the compressor casing. A h is drawn into the compressor intake and enters the first cascade o f moving rotor blades, where its absolute velocity is mcreased. The increase in velocity results from the action o f the rotor blades, which, because o f the applied torque, causes a whhl or rotational velocity to the a h in the dhection o f the rotor

2qfl3a

INTRODUCTION AND LITERATURE REVIEW

blade motion. In addition to the gain o f whirl velocity, the divergent shapes o f the passage between the blades results in a small pressure rise.

O n leaving the rotor blades, the air enters the fixed stator blades where the whirl velocity is reduced and a further pressure rise occurs. The air leaves the stator blades with

approximately the velocity it had before entering the moving blades, but at an increased pressure. A set of one ring of rotor blades and one ring o f stator blades is called a stage and a stage pressure ratio is normally about 1.1:1. Due to the practical limit o f the achievable pressure ratio - about 1.5 - o f each stage o f an axial compressor (Bathie, 1996), many stages are necessary to obtain a useful overall pressure ratio. The flow through a compressor will be examined in more detail in Section 2.1.2 o f this report.

1.2.1 ROTATING STALL A n aircraft wing is said to stall when its angle o f incidence is increased to the point where the air no longer flows smoothly over the wing but breaks away from the surface and becomes turbulent. When this happens the lift drops sharply and the drag increases. Rotating compressor blades are subject to stalling in a similar manner if the angle of incidence between the blade and the direction o f the airflow is varied beyond critical limits. A design incidence angle that results in the smallest pressure loss coefficient can be calculated for each compressor cascade. As a general rule during operation the actual incidence angle should only deviate by ± ten degrees from the design value, keeping the loss coefficient within an acceptable range of less then or equal to twice the minimum loss coefficient (Aungier, 2003).

Rotating stall is a two-dimensional, local instability phenomenon in which one or more local regions of stagnant flow rotate around the circumference o f the compressor. These cells have a constant rotational speed between 20% and 70% o f the rotor speed. Rotating stall induces large vibratory stresses in the blading, and depending on the stalled characteristics, can result in a large drop in performance and efficiency (Moore, 1984). The reduced flow rates can lead to undesirable thermal loads in the turbine.

3 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE EN A TURBOJET ENGINE MODEL

Should tho muss flow be reduced when the compressor is turning at low speed, because o f the back pressure from the combustion chamber, stalling will start at the first row o f moving blades and then progress aft. In the event o f a reduction o f mass flow when the compressor is turning at high speeds, a sudden change of aircraft attitude affecting the airflow at intake, a condition can arise in which stalling occurs in the high-pressure stages o f the compressor (Greitzer, 1976).

1.2.2 SURGE Aircraft wings not only have a stalling angle but also a stalling speed; the angle between the airflow and the wing chord line changes with speed, becoming greater as the speed drops. If the air mass flow through a compressor is reduced, the axial velocity o f the air passing through the compressor is reduced accordingly. As the air velocity falls, stalling occurs at some hlade stages and, if the condition is severe, other stages stall in unison and surging results. Surging signifies a complete breakdown o f flow through the compressor.

Surge is characterized by large amplitude fluctuations o f the nominal compressor pressure rise, and unsteady annulus-average mass flow through the compressor. Toward low mass flows, stable operation is constrained by surge. Surge can lead to failure in the system due to large mechanical and thermal loads in the blading and casing. Avoidance o f surge improves maintainability, life span, and the performance o f the compressor.

1.2.3 COMPRESSOR PERFORMANCE MAP In normal operation o f a compressor, the flow is nominally steady and axisymraetrie. The pressure rise is dependent on the speed o f rotation, but the efficient range is limited. As the flow through the compressor is throttled from the d sign point to the stall limits, the steady axisymmetriç flow pattern becomes unstable. This instability ean take on one o f two forms, either surge or rotating stall depending upon the engine speed.

The performance o f a compressor is plotted as pressure ratio versus mass flow for diflèrent rotational speeds as shown in Figure l.I. The plot is divided into two regions by the stall (or surge) line. This line defines the operation limits o f the engine. To the
4 of 136

INTRODUCTION AND LITERATURE REVIEW

left of the stall line the flow is no longer steady. In this region large oscillations o f the mass flow rate may occur (surge) or severe self-induced circumferential flow distortions may rotate around the annulus (rotating stall), or a combination of both may appear (Greitzer, 1980).

It is important to know which mode o f instability will occur since their consequences can be quite different. Rotating stall induces large vibratory stresses in the blading that is

unacceptable for structural reasons. In addition, there is a drop in performance and an increase in turbine operating temperature. Surge causes high blade and casing stress

levels as well as possible system failure (Willems et. al, 1998). For low flow regimes, the operating range is limited by surge and rotating stall. For higli mass flow the operating range is bounded by the limited capacity o f the compressor.

CONSTANT RPM LINES N ,< N j< N j

o H

MASS FLOW

Figure 1.1 : Compressor performance map As mass flow is reduced the pressure rise increases. A point is reached at which the pressure rise is a maximum and ftirther reduction in mass flow leads to an abrupt and definite change in the flow pattern in the compressor. Beyond this point the compressor enters into either a stall or a surge. Regardless o f the flow instability this point is called the surge point.

1.2.4 SURGE MARGIN Surge avoidance prevents the compressor ftrom operating in a region near and beyond the surge line by preventing the compressor firom crossing the surge margin.
5 of 136

Stable

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

operation can be guaranteed by operating the compressor at a safe distance from the unstable region (avoidance control). In this strategy, a surge margin is defined at some distance below the surge line. The safety margin is set by the sensors and actuator

limitations, and the uncertainty in the location of the surge line. I f the compressor's operating point crosses the surge margin, the controller must compensate quickly by adjusting the current flight settings. According to Cumpsty (1989), in a multistage axial

compressor in a turbojet it is normal to insist on a 25% surge margin,

1.3 BACKGROUND ON COMPRESSOR MODELS An essential step in controller design is to understand the physical phenomena in the system and to develop a mathematical model that describes the most important phenomena. Table 1 provides an overview o f various model properties; one-dimensional models describe axisymmetric flows, while two-dimensional models predict flow variations in both axial and circumferential directions.

The models described m Badmus, et al. (1994) and Botros (1995) start from a general description by applying principles o f conservation o f mass, energy, and momentum for a perfect gas. Both models can be applied to generic compressor systems to describe the dynamic behaviour o f axial and centriftigal compressors during surge. In comparison to the other models studied, these models are relatively complex.

The theoretical compressor model developed by Moore and Greitzer approximates fully developed surge and rotating stall observed in laboratory-scale gas turbines. For dynamic analysis and controller design in axial compressors, the low-dimensional Greitzer, Moore, and Moore^Greitzer models are frequently used. The Greitzer model (1976) can predict the onset o f stall and the Moore model (1984) can foresee the onset o f surge. Moore and Greitzer combined their models (1986) to predict both flow instabilities. The majority o f literature available on compressor modeling refers to this model as a starting point for new developments and variations. For instance Haynes, et al. (1994) introduces the effect o f blade row time-lags to the Moore-Greitzer model to describe the occurrence of higher order rotating stall modes at different mass flows. The Botros and Gravdahl6 of 136

INTRODUCTION AND LITERATURE REVIEW

Egeland (1997a) models incorporate rotor speed variations in order to include spool dynamics in the Moore-Greitzer model. Numerous other variations o f the Moore-

Greitzer model have been developed to contain variable throttle values, bleed valves and actuators.

Badmus, et al. Botros Greitzer Hansen, et al. Fink, et al. Moore Adomaitis Moore-Greitzer Haynes, et al. Gravdahl-Egeland

ID Compressible ID Incompressible ID Incompressible ID Incompressible ID Incompressible 2D Incompressible 2D Incompressible 2D Incompressible 2D Incompressible 2D Incompressible

AC AC
A C C A A .A A

S S

s s s
R R

SR
SR SR

A: Axial Compressor, C: Centrifugal Compressor, S: Surge, R: Rotating Stall Table 1.1: Overview of compressor model properties Haynes, at al. (1994) showed that rotating stall mainly occurs in low-speed axial compressors, whereas surge occurs at relatively high speeds in axial as well as radial compressors. Although not as common, Fink, et al. (1992) reported results o f rotating stall in radial compressors. The occurring type o f instability can be affected by the plenum volume; rotating stall may result from surge when the size of the plenum is progressively reduced. Also surge may propagate by tlrrottling the compressor to lower mass flows. Both flow phenomena are related and techniques that delay the onset o f one instability is seen to be effective in delaying the other. Instabilities in axial compressors generally are better understood then those in centrifugal compressors and the Moore-Greitzer model has emerged as the workhorse o f axial flow compressor modeling. For these reasons, this model is used later in this report as a black box representation of a jet engine compressor.
7 of 136

Fc

, LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

In the MG model, an incompressible fluid is pressurized m the compressor and is discharged into a closed tank that contains a compressible gas. This tank discharges via a throttle valve into another larger reservoir. The essential elements in the system are the compressor that realizes the pressurization, the inertness o f the incompressible fluid in the compressor and throttle ducts, the mass storage capacity of the system in the closed tank - the plenum - and the throttle, whieh represents the system pressure requirements. This system is analogous to a gas turbine engine, where the plenum is the eombustion chamber and the throttle represents the turbine. The idealized system is shown in Figure 1,2, The Moore-Greitzer model is a shnplifled model o f a single shaft gas tttrbine.

Compressor
T h ro ttle

Plenum

Turbine

Compressor

Combustion Chamber

Figure 1.2: MG model compared to gas turbine jet engine

1.4 BACKGROUND ON ACTIVE CONTROL An early publication on active stabilization o f surge is by Ffowcs Williams and Huang (1989), Ffowcs Williams and Huang use a modifled Greitzer model that contains a

movable wall in the plenum. The wall surface is part of a mass-spring system responding to the unsteady pressure fluctuations in the plenum. The surge controller is able to

stabilize the system both before and after surge had occurred. Similar results are also found in Epstein et a l (1989), where control is achieved by the use o f complex valued

8Qfl36

INTRODUCTION AND LITERATURE REVIEW

proportional feedback from plenum pressure perturbations to both a moveable plenum wall and the throttle.

Epstein et al. (1989) names several actuators that might also be used to implement their algorithm: unsteady jets or wiggling stators far upstream, wiggling inlet guide vanes and downstream pressure perturbation using loudspeakers or pulsing the combustor. In

Simon and Valavani (1991) and Simon (1993), a close coupled valve (CCV) is the actuator used for active surge control. The pressure drop over the valve downstream of the compressor reshapes the compressor characteristic creating a combined characteristic o f compressor and valve resulting in a stable operating point. The same CCV idea is utilized by Gravdahl (1998) and Gravdahl and Egeland (1997b) where an adaptive control law stabilises a system that undergoes pressure and flow disturbances. Fully automated active control strategies such as opening and closing o f bleed ports either lower the back-pressure, or increase the mass flow rate whenever rotating stall is imminent. Steady bleeding with preset amounts of bleed opening is effective, but can be wasteful. In modem engines with small cores the mass flow rate is already small. Liaw and Abed (1992) relate the amount of bleeding to the stall amplitude such that the loss o f highpressure air through bleeding is minimized. Badmus et al. (1995b) implemented the Liaw and Abed Controller at the Georgia Tech Axial Compressor Facility, and demonstrated that it works successfully.

1.5 BACKGROUND ON FUZZY LOGIC CONTROL A fuzzy logic controller (FLC) can be utilized to avoid flow instabilities. In very

simplistic terminology, fiizzy logic allows situations or problems to be described by linguistic variables rather then precise numeric values. Linguistic variables are adjectives that are used to describe the situation, such as "tall" or "cold". The use o f a linguistic variable frees a given element ffom the rigid traditional set theory. With traditional set theory the element is either completely within the set or completely out o f the set. W ith a fiizzy set, a given element can be partially in a set to a given degree. The degree to which an element is within a set is defined as the element's degree of membership. Elements
9 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

are no longer classified using the Boolean zero^oBone logic, with the use o f a membership function an element can have a degree o f membership o f any real number between zero and one (Tanaka,1997).

Using crisp logiCs the definition o f hot water might be water at temperatures above 80®F. By this definition wafer at 70°F would nof be considered to be hot, Using a fuzzy logic linguistie variable, water at 70°F might be said to be warm, or by the use o f a membership function the water inight be said to be hot to a degree o f 0.75. (a)
l.OQ

(b)

Î
5 È 0.50 Q.35

5 a
40 60 80. 100 110 120

I

6
40 60 80 100 110 120
T em p eratu re ("F)

Temperature ("F)

Figure 1,3: (a) Crisp set fur teiuperature (b) Fuzzy set fpr temperature If the degree of membership shown in Figure 1.3 were to be described mathematically, for the crisp set it would be;

Degree o f Hotness =

[1

fOrx->80`^F

10 for X < 80°F

LI

And the degree of membership for the fuzzy set would be;

1 Degree o f Hotness ( x - 6 0 ) /2 0

&»rx>8Q°F & r80°F > x> 60°F forx<60°F
1.2

10 of 136

INTRODUCTION AND LITERATURE REVIEW

The process o f calculating the degree of membership o f a variable relative to its membership function is called the fiizzification process. Clearly it can be seen that more information is contained in the fuzzy definition o f water temperature then the traditional definition. The ability o f fuzzy logic to capture and convey `grey' levels o f truth is one o f the main advantages over conventional Boolean logic. Fuzzy logic is an attractive technique for the control o f poorly understood, unmodeled, or complex systems where the experience of human operators is available to provide qualitative "rules o f thumb" (Lee, 1990). These rule-bases can also be developed from numerical simulations o f mathematical models. Swaminathan, et al. (1997) derived a

fuzzy rule-base from the Moore-Greitzer model and successfully tested it at the Georgia Tech axial compressor facility. The pressure fluctuations upstream o f the compressor w ere measured at three sensor locations and classified into three fuzzy sets: positive, approximately zero, and negative. The fuzzified measurements were then passed through the inference engine, to determine the value of the throttle opening (the opening and closing of a bleed valve). The Georgia Tech compressor quickly experiences rotating stall, when the main throttle opening is reduced to 50% o f the design value. A

combination of passive controller, that modifies the inlet, and the fuzzy controller allowed the system to operate at 40% o f the design throttle setting. When rotating stall did develop in the compressor, the amplitude of the stall with the fuzzy control was found to be much smaller than with other classical control methods.

A particular problem with engine control and nonlinear systems in general, is that the gains o f the controller have to be scheduled over the operating envelope. At each design point, the controller is required to meet a set of performance objectives. A mathematical model that describes the complete behaviour of a system does not exist, and since the control strategy depends strongly on the current operating point, linear PID control models are not suitable (Hindmon, 1998). A reduced order model or complex look-up tables, generated from the results o f extensive testing and an engineer's experience, are the basis for most engine control strategies. The automotive industries o f Japan, Korea, Sweden and France have found success in fuzzy logic engine control as a replacement for the limitations o f reduced order models or the look-up table method (von Altrock, 1997).
11 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

CMpperfield, et al. (2002) use fuzzy logic towards improving the performance and simultaneously enhancmg the flexibility o f the control strategy o f a gas turbine aero engine. FLC is used to regulate fuel flow, nozzle geometry and inlet guide vane (IGV) positioning. The resulting controllers where shown to offer improved thnist responses while still satisfying stability and structural design constraints. The fuzzy scheduling system was also able to marginally improve the turbine blade temperature and the surge mafgih while maintainiiig the thrust mapping.

Despite many successes FLC has not been regarded as a rigorous discipline due to the lack of formal techniques that guarantee stability, performance, and robusmess. This is particularly true for flight control applications where certification standards require à very stringent assessment o f the system qualities and performance (Chipperfield, et al., 2002). Blumel, et al. (1999) evaluated the robusmess o f their fuzzy trajectory controller for a non-linear missile model, showing that it achieved the desired tracking performance with no overshoot and almost no steady state error.

1.5 APPROACH The objective o f the present work is to utilize fuzzy logic control to allow the compressor o f a mrbojet model to operate at close proximity to the stall line, in order to increase compressor performance. A mrbojet engine model is created in MATLAB using velocity triangles to approximate the flow through the multiple stage compressor and mrbine. Various fiizzy logic controllers are implemented via the MATLAB Fuzzy Logic Engine. The fuzzy logic controllers tune variables such as the inlet guide vane positioning, the stator blade stagger angles, the spool speed, and the compressor inlet velocity. Static variables that are commonly not tuned during flight can be mned during these simulations for design purposes. A known surge line is utilized to mne the engine conditions in order to operate at a set surge margin.

Two gas turbine models for surge transients arC also implemented in MATLAB, the Moore-Greitzer model and the Gravdahl and Egeland modified Moore-Greitzer model. The fiizzy logic controller used for these models measures the flucmations in the axial
12 of 136

INTRODUCTION AND LITERATURE REVIEW

mass flow coefficient, 0 , and the pressure coefficient, T , across the compressor system. The magnitude o f the fluctuations is normalized and converted into a change in either throttle or CCV gain via a fuzzy membership function. The gains are directly

proportional to tlie throttle or valve opening. This method o f control does not require prior knowledge of the surge line as it reacts upon measurable fluctuations within the compressor.

Finally a fuzzy logic model of a gas turbine compressor that predicts the probability o f flow instability is designed. The compressor is represented by linguistic variables that are expressed as membership functions. The design o f the rule base is discussed and presented in a series of design matrices.

1.6 SUMMARY The outline o f this thesis is as follows: I Chapter 2: A detailed description is provided on the turbojet engine model, the Moore-Greitzer model, the Gravdahl and Egeland modified model, and the fuzzy logic compressor model. ® Chapter 3: Designs of the fuzzy logic controllers for the turbojet engine models are presented. These designs include spool speed control, compressor blade

incidence angle control, compressor reaction control, active surge control, and detection/avoidance control. I I Chapter 4: Various simulation results are presented. Chapter 5: Conclusions.

II References, additional simulation results, and examples o f the MATLAB code are provided at the end of this thesis.

13 of 136

C hapter 2

TURBOJET ENGINE MODELING
The first section o f this chapter outlines the six sections o f a turbojet en fin e modeh shown in Figure 2.1. It is assumed that the fiow-fieldproperties are uniform across any cross section and vary only in the flow direction, and thus this is a quasi-one-dimensional flow engine model. Special attention is placed on the engine compressor, as it is the dynamics o f the compressor which is the main study o f this thesis. The evolution o f the Greitzer, the Moore-Greitzer and finally the Gravdahl and Egeland modified MooreGreitzer compressor models are traced in the second portion o f this, chapter. The chapter is concluded with a look at fu zzy logic modeling o f a gas turbine compressor stage.

14 of 136

TURBOJET ENGINE MODELING

2.1 TURBOJET ENGINE MODEL Each section o f the turbojet model is contained in its own module. Each module is called from the main program, along with the desired controller algorithm (outlined in Chapter 3), which loops continuously as the engine is m flight. A module that calculates the atmospheric conditions is called at the beginning o f each program loop, if the altitude of the engine is adjusted during the simulation.

All of the user defined variables are defined within the main program. A summary of these user defined variables can be found in the tables at the beginning o f each subsection that focuses on the breakdown o f the engine stages.

Burner Compressor After Burner Nozzle

Figure 2.1: Turbojet engine model

2.1.1 INTAIGES AND NOZZLES The purpose of any aircraft gas turbine intake is to provide a sufficient air supply to the compressor at a low subsonic velocity without exhibiting large losses in total pressure for different flight speeds, altitudes, and attitudes. Though the outlined turbojet model would most commonly fly under subsonic conditions, for the sake o f completeness, three variable geometry inlets are modeled for both subsonic and supersonic flight.

15 o f 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

To aid the regulation o f the engine thrust, variable geometry nozzles are utilized for this turbojet model. Again, both the converging nozzle commonly found in subsonic flight and the converging-diverging nozzle used for supersonic flight is included.

2.1.1.1 SUBSONIC DIFFUSER INTAKE This simplified subsonic intake is a diffixser with a circular cross-sectional area. The area of the diffuser increases with a linear relation defined by the inlet and exit areas. The area expands in cross-section flom the mouth of the intake in order to difflise the subsonic flow. The model assumes that flow separation will not occur around the inlet lip of the intake. As well, it is assumed that this intake will be free of transonic flow zones associated with Shockwaves and boundary layer problems.

The diffuser intake increases the static pressure and reduces the kinetic energy o f the flow. The geometry o f the intake is shown in Figure 2.2 and the required user defined variables are summarized in Table 2.1.
\ unable

I nit m m m J/kg'K -

Î ' ;>>mboI
^ d ,é n l ^d ,exit

( n iistjiil

Diffuser entrance radius Diffuser exit radius Diffuser Length Ratio o f specific heats Gas constant for air Intake efficiency

NO NO YES

K Rd

YES YES YES

%

Table 2T: User-defined variables for subsonie diffuser intake During simulation, the user will be notified if the velocity entering this intake type approaches sonic velocity and the simulation will halt if sonic air speed is reached. In order to control the afr velocity entering the compressor^ the controller may adjust both the diffuser inlet and outlet cross-sectional area; either or both of these variables can also be left as constant values. Upper and lower bounds are set for each cross-section and the user is warned if the subsonic diffuser inlet area becomes larger than the outlet area. The

16 of 136

TURBOJET ENGINE MODELING

length o f the diffuser, though not commonly done in practiced may also be modified during shnulation.

^d,exit

r" d,ent

Figure 2.2: Inlet diffuser geometry To ensure separation does not occur within the diffuser a limit is placed on the divergence semi-angle of the duct cross-section. Thus the diffuser geometry must meet the following constraint (Archer, 1996); \ 5n: 180

0 = arctan

d,ex it

d ,a u

<

2.1

It is assumed that both the density and mass flow through the diffuser are constant. The air density within the diffuser can then be calculated using the Ideal Gas Law:

Pd

2.2

The mass flow can be calculated using the expression for conservation o f mass flow. 2.3

By rearranging Equation 2.3 the diffuser exit velocity can be calculated:

17 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

K=

f

2.4

The pressure rise at the diffuser exitis calculated using Bernoulli's Equation and the change in temperature at the diffuser exit isbased on theratio o f exit (White, 1999). and inlet pressure

+

2.5

2.6

Usitig the diffuser exit temperature, the simulation verifies that the diffiiser exit velocity is below the set subsonic Mach number (default value of 0.80 M).

The stagnation pressure and temperamre at the diffuser exit is calculated based on the inlet Mach number and a user defined diffiiser efficiency (Archer, 1996).

+

2.7

2.8

2.1.1.2 LOW SUPERSONIC PITOT INTAKE This type o f intake generates a strong shock wave (a normal shock) across the mouth of the intake. This intake is designed to fly at transonic Mach numbers not much higher than 1. The flow behind a standing normal shock is always subsonic and thus the intake duct is the same subsonic diffuser intake described in Section 2.1.1.1, I f the flow into

the pitot intake drops below Mach 1 then no shock will occur and the flow enters the diffuser unchanged; and if the flow rises above Mach 1.4, the simulation is halted. While the flow velocity remains within the intake's operation range, it is assumed that the inlet will always generate a strong normal shock wave across the mouth o f the intake that is governed by the following equations for a normal shock (Anderson, 1991):
18 of 136

TURBOJET ENGINE MODELING

2.9 'Oh 2 + [kj - 1) Mq {kj + 1 )M / Jy 1+ ^o« =

2.10

2.11

where the subscript On refers to the state after the normal shock where the now subsonic flow enters the diffuser. For simplicity, the ratio o f specific heats used in the calculations across the shock waves is assumed to be equal to the value used in the diffuser.

2.1.1.3 HIGH SUPERSONIC MULTIPLE SHOCK INTAKE This intake employs a spike center body ahead o f the intake mouth as shown in Figure 2.3. The spike is made up of a series o f adjustable ramps that cause an oblique shock at each ramp junction. The number o f ramp junctions as well as each ramp angle can be defined by the user. In order to guarantee that no separation occurs, the ramp angles must be less than 45.5° (Anderson, 1991). After the flow passes through the n number of oblique shocks a normal shock will occur at the mouth o f the diffuser and the model will revert to the intake described in Section 2.1.1.2 as the flow will now be subsonic beyond the normal shock. If the flow over the spike is subsonic then the model will revert to the model outlined in Section 2.1.1.1.

Figure 2.3: Supersonic inlet with multiple shock waves variable geometry
19 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

A step method is used for solving the following theta-beta-Mach solution for the oblique shock waves;

where 6, is the ramp angle in question and

is the resulting shock angle caused by the

flow at the Mach number, M and i is an integer value corresponding to the oblique shock along the inlet spike. The Mach angle defined as:

/i = sin"' -- M

2.13

is used as the initial guess for the shock angle and is substituted into the right-hand side o f Equation 2.12.I f the difference between the right-hand sideo f Equation 2.12 using

the Mach angle as an initialguess and the left-hand sideo f Equation 2.12 iswithin the defined tolerance then the shock angle has been found, If the angle has yet to be found the guess is increased by a defined step size and the equation is retested. Since the Mach angle must always he smaller then the shock angle this step method will always guarantee convergence.

The normal component o f the upstream Mach number, Mach number and the Mach angle, M,,o=MoSin/?.

q

is a function o f the upstream

2.14

The normal component of the Mach number behind the shock wave is expressed as:

2.15

The actual downstream Mach number can he found from the oblique shock geometry:

20 01136

TURBOJET ENGINE MODELING

K , = Sin -

2.16

The subscript 0.1 refers to the state after the first oblique shock where the supersonic flow will then pass through either another oblique shock (resulting in state 0.2, etc.) or the normal shock at the mouth o f the diffuser. The change in temperature and pressure across each oblique shock wave is calculated as follows;

Pq .2 -^OA
P
n

2.17

T

0 .2 --

--

02

2.18

With each ramp angle increase that the flow passes, the above method is repeated, and the flow temperature and pressure increases as the flow velocity decreases. After the oblique shocks are passed, the intake model becomes identical to that describe in Section
2 . 1. 1 . 2 .

2.1.1.4 CONVERGING NOZZLE The cross-sectional area at the nozzle inlet is assumed to be large so that the velocity is negligibly small, meaning that the pressure and temperature at the nozzle inlet are assumed to be the stagnation pressure and temperature and respectively (Bathie,

1996). The required user defined variables are summarized in Table 2.2.

Nozzle exit radius Ratio o f specific heats Gas constant for air

m J /k g K

rn,exit K K

NO YES YES

Table 2.2: User-defined variables for converging nozzle

21 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

The nozzle choke condition is defined as follows (Bathie, 1996):

2.19

The nozzle is choked if

> P^ and then the nozzle exit pressure^ temperature and

velocily is calculated as follows: 2.20

2.21
2.22 I f the nozzle is not choked then the nozzle exit pressure, temperature and velocity is calculated as follows: 2.23 k,,-\ p V y 2.24

2.2S

In order to calculate the thrust produced by the engine, two values defined in the burner module must be known: the fuel-air ratio, / , and the mass flow o f the fuel-air mixture entering the nozzle, 1996): 2.26 . Thrust is then calculated using the following expression (Bathie,

22 d f136

TURBOJET ENGINE MODELING

2.1.1.5 CONVERGING-DIVERGING NOZZLE The converging-diverging nozzle requires the user-defined variables as for the converging nozzle, along with the addition o f the nozzle inlet area defined as . The

temperature and pressure and the nozzle inlet is calculated firom the stagnation values (Anderson, 1991):

2c_ p,,
P

2.27

p
--

5--
k Ts j

i,
k ,, -\

2.28

The maximum possible mass flow occurs in a duct when its throat is at the sonic condition. The duct is then said to be choked and can carry no additional mass flow unless die throat is widened. It is assumed that for maximum thrust, the throat area o f the nozzle is variable and will automatically set itself to the critical throat area. A *, defined by the following expression (White, 1999): nr 2.29

The simulation will halt if the nozzle exit area is smaller then the critical throat area; assuming that this condition is met the program runs a step solver to find the nozzle exit Mach number using the following relationship, starting with an initial guess o f Mg = 1 (White, 1999):

2.30

The nozzle exit temperature and pressure is calculated using the following equations:

23 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

o5 2 6~ P,, o5 k ,, 2.32

UJ
Thrust is calculated using the same method as for the converging nozzle, as outlined in Section 2.1.1.4.

(T ·* ·0 5

2.1.2 COMPRESSORS AND TURBINES An axial compressor is made up o f many alternating rows o f rotating and stationary blades called rotors and stators, respectively. The first stationary row (which comes before the first rotor row) is comprised o f the inlet guide vanes or IGVs. Each successive rotor-stator pair is called a compressor stage. Hence compressors with many blade rows are termed multistage compressors.

The rotor adds swirl to the flow, thus increasing the total energy carried in the flow by increasing the angular momentum (adding tP the kinetic energy associated with the tangential or swirl velocity). The stator removes swirl from the flow, but it is not a moving blade row and thus cannot add any net energy to the flow. Rather, the stator converts the kinetic energy associated with swirl to internal energy (raising the static pressure o f the flow). The IGV also adds no energy to the flow. It is designed to add swirl in the direction o f rotor motion to lower the Mach number o f the flow relative to the rotor bladess and thus improve the aerodynamic performance o f the rotor.

The thermodynamics and fluid mechanics for a stage of compressor blades are basically the same for a stage o f turbine blades. For a turbine stage the stationary blade, commonly known as the nozzle, precedes the rotor blade. As well, the relative velocities in an axiah flow turbine are generally substantially higher than in an axial-flow compressor, with a greater change in enthalpy per stage (Dixion, 1998). In the turbine nozzle, the tangential velocity is increased in the direction o f rotation with a corresponding drop in the static
24 01136

TURBOJET ENGINE MODELING

pressure. In the rotor row, the tangential velocity is decreased. Fewer stages are needed for an axial-flow turbine than in an axial-flow compressor because in the compressor the flow is decelerating in the passageways with a corresponding rise in pressure, whereas in the turbine the gas is accelerating. The diffuser action o f a compressor allows for only moderate changes in the compressor passageways to avoid separation (Bathie, 1996).

Velocity triangles are used in the following sections to relate the flow properties through an axial flow compressor with the blade design parameters in the relative ftame (rotating with the moving blades), to the properties in the stationary or absolute frame. It is

assumed that the area of the annulus through which the flow passes is nearly constant and the density changes are small so that the axial velocity is approximately constant.

The same velocity triangles, shown in the following section for a compressor, can be applied to a turbine. If the tangential velocity increases across a blade row (where positive tangential velocity is defined in the same direction as the rotor motion) then work is added to the flow (a compressor). I f the tangential velocity decreases across a blade row (where positive tangential velocity is defined in the same direction as the rotor motion) then work is removed from the flow (a turbine).

2.1.2.1 BLADE GEOMETRY Table 2.3 outlines the user-defined variables required for one stage o f an axial-flow compressor. These same variables are used for one stage o f an axial-flow turbine. It should be noted that flow enters and exits the blades at the flow angles calculated by the velocity triangles outlined in the following subsections. The flow angles are not the same as the blade (or metal) angles which are the actual angles o f the physical structure. These angles must be kept very similar in order to avoid separation o f the flow. This will be dealt with in more detail in Chapter 3. Blade and flow angles are illustrated in Figure 2.4, along w ith the required sign conventions.

25 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

iGV initial position Rotor Speed Ratio of specific heats Gas constant for air Blade Angle at Inlet* Blade Angle at Outlet* Thickness-to-chord tatio* Location o f maximum eamher-to-ohord ratio* SolidityA GWrd-to-blade pitch ratio * Rotor blade tip-to-tip diameter Rotor hub diameter

rad rpm
--

wo N NO YES
............

K
..... K

J/kg K rad rad m m

YES NO NO YES

fisjn Ps^out

a le a 4 d,

YES YES YES YES

*These variables are defined for both the Rotor and Stator blade, differentiated by the subscripts R arid S.

Table 2.3: U ser defined variables for axiaUflow com pressor

Figure 2.4: Flow angles with sign conventions

26 of 136

TURBOJET ENGINE MODELING

From Triangle ABC in Figure 2.5, the blade turn angle 0 can be defined in terms of the leading and trailing blade angles /?., and :

2.33
0 = P m -P o u t

2.34

The blade stagger angle can be defined in terms o f the leading edge blade angle and the turn angle as; 9

2.35

The flow will enter and exit a stage at an angle very close to the actual blade angles. The difference between the flow entering the blade and the actual blade angle is referred to as the angle of incidence, defined as: 2.36

Jout

.

p,.

^

180

Figure 2.5: Rotor turn angle and blade angles relationship

27 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

The différence between the flow leaving the blade and the actual blade angle at the blade exit is called the deviation, and is defined as: 2,37

2.1.2.2 INLET GUIDE VANES The model contains the option o f adding hilet guide vaUes (IGVs) ahead o f the first compressor stage. The IGVs are a row of stator blades that direct the air flow into the first row o f rotor blades. The IGV blade angle can be set as a constant or can be adjusted. Limits are set on the IGV blade angle» 0 to 60 degrees (where 0 degrees represents a blade parallel to the flow, which would not affect the fluid as it passes over). assumed that there are no temperature losses over the IGV stage. Figure 2,6 shows the velocity triangles for the IGV stage. The simulation will halt if the incoming axial air flow velocity entering the compressor from the intake is sonic. It is It is

assumed the flow velocity at the trailing edge of the IGV, Vj, leaves the blade at the blade exit angle. The following trigonometric relationship relates the flows:

C O SyÔ j IG V

2.38

Jicv

Figure 2.6: Velocity triangle for inlet guide vane stage The whirl velocity is shown as frame as: ; it is the tangential velocity calculated m the stationary

28 of 136

TURBOJET ENGINE MODELING

W; =

V,

tan

IG V

2.39

2.1.2.3 R O TO R STAGE The rotor blade speed is subtracted from the IGV induced whirl velocity to determine the tangential velocity in the rotating frame; Wr2 - W ^ - U 2.40

The rotor blade speed u is the mid-point radius rnultiplied by the angular velocity which can be expressed as: (<i, +Û?,,) N tt 60

u=

2.41

where

and d,, are the rotor blade-tip-diameter and the diameter o f the hub respectively

as shown in Figure 2.7. The blade-tip-speed must not exceed the speed of sound in order to avoid shock wave formation; the rotor blade tip speed is limited to Mach 0.85. Speed o f sound is a function of temperature; temperature rises near the rear of a compressor, which permits a higher blade tip speed. Multiple spools can be added to the engine model and coupled with high speed turbines.

U h

m

Figure 2.7: R o to r blade and hub dimensions

29 of 136

FUZZY L O eie eôN T iôL m caM FR i§sôtt suRêË m a f (jk sô j e t iN e iN i M o b il la sM m the. asshmptieit that the axial velocity thtough the comptessot stage is cottstatit, the telative veioeity eatetkig the totor stage k the totatkg &ame eaa be ealeuiateh m k g the Pythagorean Thëofëm;
.-2 2

-^ 2

The eoftespohdihg âow ahgie is calculated as` W = arctafl -- ^

2.43

The relationship hetw e# the absolute veloe% relative velocity and blade velocity is Aôtm hi the rater smge veleeity triangle hi Figure

/K tàïil

u

F i g u r e I .S : V e lo c ity tr ia n g le f o r r o t o r s ta g e
The exit angle o f the rotor hlàdë can be êOhstàht or variable. Sîiêh à variable gêomêtry is not Gonunonly found in praetiee,' but for the purpose o f this design simulation program

the rotor blade tumkg angle, %, can be adgmted. The tamihg angle redireets the air
fltow over the rotor blade. The relationship bëtwëën the rotor inlet blade angle and the rotor exit blade ànglé is illustrated in Figuré 2.S, and the âhglé ât which thé flow leaves the rotor blade is calculated asi %. =% +% 2.44

The velocity exiting the rotor blade in dît rokting hame Can now be caleulattd ant

M ofiie

TURBOJET ENGINE MODELING

v,3 = ---- ! -- cos

V.

2.45

The tangential velocity component o f the rotor blade exit velocity in the rotating frame is given by: =V [ tan 2.46

2.1.2.4 STATOR STAGE The blade speed is added to the flow exiting the rotor, transforming the vectors back into the stationary frame of reference. The tangential component entering the stator stage becomes: W 3 = M + w^3 2.47

The flow angle into the stator blade uses the whirl velocity calculated above (once again, the assumption is made that the axial velocity through the compressor stage is constant): w, « 3 = arctan--

2.48

and the resulting velocity entering the stator stage in the stationary frame is calculated by:
V,

V 3 = ---- --- cos « 3 The velocity exiting the statorblade is first turned through like the rotor turning angle can calculated as: = « 3 --ûg the turning angle,

2.49

, which

be constant or variable. The flow exitangle is first

«4

2.50

and the exit velocity is calculated as:

31 of 136

FÜZE¥ tÔ ê îê éÔNTïîÔL ÔE eôMFKESSÔÎl StM ëE IN A T ïtlSÔ JEr ËNëlNE MÔDEL

H

66s %

2.51

with a taçigiflriai whirl v#ÎQë% Q# tg, =Vi§mS;, 2.52

The vêléei^ ffiangle &f the sfâtef mge k shown in Figtne

The increase in the

tangential component of the &tationa% velocity in the direction o f the rotor- indicates
compression^ While à dëCrëàsë o f fië tangëndal ëOmpOnëni WOüld rëpcësëM ffië expansion 6 f gàs fonnd in à turbiné stage.

U Figuré 2.9: Vélôêi% inànglé for sfâtôr sfâgé

21.2:5 STAGE PRESSIIHE RATIO The torque of the rotor at the mid-pot

gem

2.53

Where ste mass flow fltrongh %e rotor is Annd from:

à ^ ô A V s -- L_^ #

Pi

2.54

Now the required power to drive the eompressor ean be ealculated (Bathie* 1996):

îfo fîâ fi

TURBOJET ENGINE MODELING

P=

1.K N

t

60 m

2.55

The power will be negative, once again confirming compression.

The stagnation temperature at the compressor outlet is found by first calculating the stagnation temperature at the compressor inlet:

7 ;,= ? ;+

2.56

The rise o f stagnation temperature at the compressor outlet is found by using the required power (Bathie, 1996):

2.57
Pc

The stage pressure ratio is calculated using the adiabatic relationship o f the stagnation temperature and stagnation pressure:

Pratio

i,-i

2.58

2.1.3 BURNER AND AFTERBURNER A simplified model for calculation o f the stagnation temperature and pressure at the humer exit is used. Table 2.4 summarizes the user-defined variables needed for both the burner and the afterburner. The afterburner between the turbine and exit nozzle is

optional. Additional fuel is pumped into the afterburner and the stagnation temperature is increased and the stagnation pressure is decreased via the same method as the burner which is outlined as followed:

33 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

2.59 Poi ~
w h e r e t h e s p e e if iG h e a t f o r t h e b u r n e r i s G a lG u la te d a s :

2.60

2.61

the speeifie h e a t

a t th e b u r n e r e x it is e s tim a te d a s:

2.62 and thé fuéi tô ait ratio is oalcuiated by: m. / =-

niboL Ratio, o f specific heats for burner Ratio of specific heats for afterburner Gas constant for air Gas constant for fuel-air mixture Mass flow o f fuel into burner Mass flow o f fuel into afterburner Burner efficiency Afterburner efficiency Heat of reaction in burner J/fcg of fiiel j/kg-K f/kg-K kg/s kg/s % h Kb K Kb

( wHstanI ^ YES YES YES YES NO NO YES YES YES

Table 2.4: User-defined variables for burner and afterburner

34 of 136

TURBOJET ENGINE MODELING

2.2 G R EIT ZER COM PRESSOR M ODEL The main advantage of Greitzer's original model over other models at the time was that Greitzer developed a systematic rule for determining wliich instability would occur in the compressor, using Greitzer's B-parameter,

2 m 2 a where U is the mean rotor velocity, m^, is the Helmholtz resonator frequency, Vp is the plenum volume, A^. is the flow-through area, and is the effective compressor and duct

length. Surge tends to occur for high speeds and large plenum volumes where B > and rotating stall tends to occur for lower speeds and smaller plenum volumes when B< . The value for is compressor-dependent.

Referring to Figure 1.2, Greitzer modeled the compressor and mass-flow throttle as actuator discs, assuming low Mach numbers and low pressure ratios compared to ambient conditions. Small inertial forces in the throttle duct are assumed, and the compressor pressure rise is considered to be quasi-steady. The two states o f the model are the

nondimenisionalized mass flow referred to as the axial mass flow coefficient, O , and the nondimenisionalized pressure difference known as the pressure coefficient, T . The mass flow coefficient in this case is the axial velocity parameter, the axial velocity: l U , where is

The pressure coefficient is the pressure difference across the plenum normalized by the density and square o f the blade speed:

'

2.66

35 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

The Greitzer model is defined as;

2.67

2,68

where the compressor characteristic is defined as:

1+

o
-

1

-

-

If 0 -- -1

2.69

and the throttle characteristic is given by: 2.70 where y-j. is the throttle gain, which is proportional to the throttle valve opening. The inverse throttle characteristic is used for determining the stability of the model and is given by:

2.71

2.2.1 STABILITY ANALYSIS OF GREITZER MODEL Linearizing Equations 2.67 and 2.68 around the equilibrium point defined by the intersection charactefistic of the inverse throttle characteristic Yj. and the compressor

, the following model is found (Greitzer, 1980):

0 y

Bac l/B

-B

"0

-- 1/ Boj y

where

^

= ---- -- and a_ = ----am ao

2.72

From Equation 2.72 the eigenvalues,

, o f A are found to be:
36 flf136

TURBOJET ENGINE MODELING

2.73 À=

The stability properties o f the equilibrium state depend on the relative magnitude o f the terms B ,aj., and / and 7 % 1 -^
V
J

. Greitzer uses

=

1 -- Bci^ yBûj.

to determine dynamic stability,

'X to determine static stability. The term will be negative if the slope

of the compressor characteristic is greater than the slope o f the throttle characteristic at the point of intersection.

a)

b) X X T a> 0
\ < 0

1

Ta>0 \ > o Stabl node ^1 Stablf focus
i

Sa M e

c)

d)

X X Ta<0 Tb<0 Sa M e TJnstab le node TTnstat le focus Ta<0 Tfe>0

Figure 2.10: Stability of the linearized Greitzer Model If 7^ < 0 the system has one eigenvalue in the left half-plane and one eigenvalue in the right-half plane, and the equilibrium state is thus a saddle-point, which is unstable (shown in Figure 2.10a and 2.10c). This t>'pe o f instability is called static by Greitzer. If 7^ > 0 and 7^ < 0 (as seen in Figure 2.10d) the equilibrium state can be one o f two types, dependent on the numerical value of B. I f unstable focus (dynamic instability), and if < 47^ the equilibrium state will be an > 47^ the equilibrium state will be an

37 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

unstable node (static instability). If 7^ > 0 and 7^ > 0 (as seen in Figure 2.10b) the system is stable, and depending on B, will either be a stable focus or a stable node. Whether the instability is dynamic or static, the nonlinear system will go into surge oscillations.

As predicted by the value o f B, an engine is more likely to surge as the speed is increased. Increasing the blade speed leads to an increase in B for the same system parameters, so that a configuration is more likely to surge as the rotational speed is increased. A natural way to account for the number o f axial compressor stages is to use B' = NB where N is the number of compressor stages.

2,3 MOORE - GREITZER MODEL In Moore and Greitzer's later works, Grietzer's model is expanded to include the state J, the square of the amplitude o f angular disturbance o f the axial flow coefficient, 0 . Finite^amplitude rotating stall cannot evolve without producing a finite disturbance in 0 or the total-to-static pressure rise coefficient, T . In the case o f pure surge, when / = 0, the model shown in Equations 2.74, 2.75, and 2.76 reduces to that o f Greitzer's original model for surge. This three-state model is capable of describing the growth o f rotating

stall and surge during a compressor mass-flow transient. W !H ^ _ J _ W JV

/

2.74

/ f0 ) Î Jrl 1 - ---- 1 ' ---4 llE J (l+ m a^)W

2.75

2J6

All distances have be nondimensionalized by the mean compressot radius, R, such that L is defined as the total aerodynamic length o f the compressor and ducts in wheel radii. Time is denoted by radians o f wheel travel:
38 Ôf136

TURBOJET ENGINE MODELING

^ = U t/R

2.77

The fiinctional form between 0 and T is simply the compressor performance map determined by experimental data and approximated by the following:
1 0
-

\3

1+

W

2.78

where H is the semi-height, W is the semi-width, and

is the shut-off value o f the

cubic axisymmetric performance characteristic. The parameter a, is the reciprocal timelag of the blade passage defined by the following:

a ^ = R / N^t U where U is the wheel speed at mean diameter, and

2.79 is the number o f compressor

stages. The coefficient of pressure-rise lag, r , is a time constant associated with the internal lags in the compressor. A reasonable estimation for r is the inertia o f fluid in the passage. The compressor-duct flow parameter, m, reflects the length of the exit duct where m = 2 would refer to a long exit duct and m = \ would refer to a short exit duct. is the

inverse o f the throttle characteristic which is a function o f total-to-static pressure rise. A realistic throttle characteristic is o f parabolic form:

F ,= ~K r< S> /

2.80

where K t is the throttle coefficient. From Equation 2.80 0 ^ is simply the inverse o f Fj. and the inverse o f the throttle characteristic can be expressed as:
-- 0 y --Yj-

F.J.

2.81

39 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

2.3.1 IMPLICATIONS OF MOORE GREITZER MODEL For rotating stall, the time derivative vanishes. This occurs when J has the constant equilibrium value; f0 J = J \ = 4 I - ------ 1 iR/- ; 2 2.82

When Je from Equation 2.82 is substituted into the right-hand side of Equation 2.75, the result is the steady performance map arising from Equation 2.78, which may be used to infer the performance effect of rotating stall. In the case of pure surge, j = 0, and once J is zero it will remain zero forever unless the compressor is physically reset.

It appears impossible for rotating stall to evolve without producing some disturbance in 0 or Y . I f J changes then the model shows that 0 or must also change. The

àhgular-disturbance amplitude J grows at a rate which initially depends only on the disturbance itself, but then tries tO approach the equilibrium position in Equation 2.82. The model shows that pure modes o f surge (time variation) or rotating stall (angle vatiatioh) cati exist without the other. fluctuations are coupled. However, ih general the time and angular

The angular variation grows towards a time dependent

equilibrium, while the damping rate o f any time variation depends on the strength o f the angular variation.

2.4 GRAVDAHL AND EGELAND CCV MOORE GREITZER MODEL The approach of active surge/stall control is to use feedback to stabilize the unstable regime of the compressor map. It is common to use bleed valves as surge avoidance actuators, The compressed high energy in nominal bleed-off operation is not wasted in aircraft engines, as it is utilized by other aircraft systems. Unscheduled bleed-off may however result in some lost energy. By stabilizing an unstable area o f the compressor map using feedback, one allows for compression operation in the peak efficiency and pressure rise regions located in the

40 Of 136

TURBOJET ENGINE MODELING

neighbourhood o f the surge line. Active control broadens the operating range o f the compressor by effectively shifting the surge line and the surge avoidance line, thereby enabling the machine to now operate in regions that were previously unreliable (de Jager 1995). A close coupled valve (CCV) incorporated into the present engine model

represents this active bleed control capability.

The CCV has a characteristic given by;

ÏV

2.83

where /,, > 0 is CCV gain which is proportional to the valve opening. The pressure rise across the compressor is modified according to:

PE-P^ 2a.t
V

2.84

where ju, and

are the static pressure at the entrance and exit o f the equivalent

compressor, p is the constant inlet density, JJ is the compressor speed at mean diameter, is the number of compressor stages, F [(f) is the pressure rise coefficient in the blade passage, and 0 is the angular coordinate around the wheel. Following the derivation of Moore and Greitzer (1986), the following MG modified model is found (for the full derivation, see Gravdahl and Egeland, 1998):

W IH

H

2.85

H H

0
2 w'

n3
+

1+

-

2

^ -1

1

J

W "J ^ Tv K 2 H ^ H

2.86

41 of 136

füziYLôêîe cônïrôl m eôMPSisw
=411

ma türbojet mmmEmôml

1

In the ease o f gme surges J is set to zeto and Iqaations 2 J4> 2 Jt* m d 2,8# Wemnei

I

2.88

«âK D 1 éê L

2.89

w .#)
. W,0 #

rrrÿiftM

k : a 1=% T :& t
i t J

i

t

;

.

^

f

,.

a a* a 5 ^

.

.. fijc t® /

.......

I......... r r i

 -

"r ^

.

i

\

-- 1 t---T.-( / . 'f / Ix
!; !;

X

^

^

i

I ./ (
/ ' 1

I,
là ' ;:& i h

,

Î

\yX
|...A

i

\ y

Î

1

MârsFiüwcâè^eiêiîf, m

0 ,1 _ &3

0,3

o ,*

&&

0 .6

Figure 2 d i« CûitippêMôf fttid fhrntflë ëliâfâëtæpîâfiës

2*44 TW eompressor is in equilibrium when # = '? = J = 0 . I f 4 (0 ] = 0 then J = (y and the equtUMhih valuer ^ attd am gîvih % the m w m w im h f (# ]= W g ( # } (# }

Md thê thrôttlé châfâétêtMë (âêë Figutê 2.11). 42ofiS6

i f 4 (0 ) s-Q, and the throttle

TURBOJET ENGINE MODELING

characteristic crosses Y , to the left o f the local maximum, the compressor may enter rotating stall, and the equilibrium values ^ and y/g are given by the intersection o f the throttle characteristic and the stall characteristic (0 ). This is dependent on the

Greitzer 5-parameter; as discussed earlier, a small value for B results in rotating stall, and a large B gives surge.

2.5 FUZZY LOGIC COMPRESSOR MODEL The two states of the MG model, the axial mass flow coefficient, 0 , and the pressure coefficient, T , can be simplified down to the three variable and measurable quantities which they are based upon; blade speed [rpm]; axial velocity [m/s]; and pressure ratio across the stage. With these three values a three-input, one-output model can be created to predict the probability of flow instability (either compressor surge or rotating stall) using a fuzzy logic model. The operating ranges o f the inputs are summarized in Table 2.5, and the operating range of the ftizzy output, being the probability o f a flow instability, is summarized in Table 2.6. The basis o f selection for these values come from the operation of the above turbojet and compressor models.

Slow Average Fast

0 to 6.5k Ok to 13k 6.5k to 13k

Slow Average Fast

0 to 150 0 to 300 150 to 300

Low Average High

1 to 1.5 1 to 2 1.5 to 2

Table 2.5: Operating ranges o f fuzzy inputs In s i^ l;^ None Low Medium High Danger 0 to 0.3 0.1 to 0.4 0.3 to 0.7 0.5 to 1 0.7 to 1

Table 2.6: Operating ranges of fuzzy output
43 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN À TURBOJET ENGINE MODEL

This type o f modeling requires a working knowledge o f the system. The more empirical data availabie on the operation o f a particular compressor tire better, as the prograrnrner will have a better picture for comparison as the fuzzy model is adjusted during creation.

2.5.1 CREATING THE MEMBERSHIP FUNCTIONS A membership function is a curve that defines how each point in the input space is mapped to a membership value (or degree o f membership) between 0 and 1. The

function itself can be any arbitrary curve whose shape can be defined as a funetion that suits the problem. A more advanced discussion on membership functions can he fotmd in Chapter S. For this example model, triangular membership fiinctions are defined for each classified CategOi-y o f input and c .rput. The base o f each triangular membership function rests on the intervals o f each category, and the apex o f the triangle is located above the midpoint o f the interval. The membership functions for blade speed and the probability of a flow instability are plotted in Figure 2.12 and Figure 2T3, respectively.

3,250

6,500 Rotor Speed, N (rpm)

9,750

13,000

Figure 2T2: MFs for blade speed

2.5.2 CONSTRUCTING THE RULE BASE For the case of a three^input and one^output modef the rule base can be constructed by creating two matrices o f options and solutions, The first matrix is based on the mass flow

44 of 136

TURBOJET ENGINE MODELING

coefficient, where as a guide line 0 should be within the range o f 0.4 and 0.7 (Archer, 1996). The input variable axial flow velocity is along the top o f the matrix and the input variable blade speed along the side (see Table 2.7). The entries in the matrix are the desired response of the system, or in this case the probability o f surge or rotating stall. The second matrix utilizes the work coefficient as a guideline, predicting safe operation if the coefficient is kept within the range o f 0.35 and 0.5 (Archer, 1996). The pressure ratio is across the top of this matr ix and the blade speed is along the side, and once again, the entries in this two-by-two matrix are the probabilities o f either surge or rotatmg stall occuning.

-t

1 S
Cg

'/2-1

p

S'

0.00

0.25

0.50

1.00

Probability of Flow Instability

Figure 2.13: MFs for the probability of a flow instability From die two rule base matrices eighteen rules are created, one for each matrix entry and hence the combination of the membership functions and the rule base create the fuzzy logic model. Additional rules can be added to couple the values o f stage pressure and axial flow velocity to further adjust the model. The method used to develop a frizzy logic model is presented in more detail in Chapter 3.

45 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

Danger Médmm None Probâhihtÿ of Flow Instabihty

Medium None Medium Probability of Flow Instability Table 2.7: Rule base matrices for three-input / one output system Medium

46 of 136

Ch a pt e r s

FUZZY LOGIC CONTROLLERS
This chapter outlines the theory behind fuzey logic decision-making utilized in the fuzzy logic controllers. A fu ll description o f the fuzzy logic

controllers are presented within this chapter. First, the active controllers based on the turbojet engine model are given, and then the detection avoidance controllers based on the Moore-Greitzer models are presented.

47 o f 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

3.1 FUZZY LOGIC CONTROL The fiizzy logic controller is a rule-biased system that CoritrOls the operation Of the simulated engine system. The FLC receives cuiTent engine data fed back from the These crisp values èô m the èhgrnè simulation are

simulated system as it Operates.

fuzzified (converted into fuzzy values) that are then processed by the fuzzy knowledge base. The fuzzy output is defuzzified (converted back to a crisp value) in order to update the engine simulator's operating conditions. The FLC process is summarized in Figure 3.1. Inputs
Fuzzy Output

I, %
Crisp

Outputs

Output

Figure 3.1: Fuzzy control logic flowchart A fizzy rule is created by combining various fizzy statements to form the premise and the consequence of the rule. A fizzy rule appears no different than an ordinary rule; however, the difference arises when clauses take oh partial truths. These partial truths are evaluated based on the membership function. This value, referred to as the rule alpha^ is used to indicate the significaiice o f the rule and the significance o f the consequence. A rule that is not completely true will still be able to convey information toward the final outcome. A collection o f these fuzzy rules makes up the rule-base for the decision

makmg processor. Traditionally, these assembled rules are designed such that no two contradicting rules are true. However, m fizzy logic it is common for a multiple o f rules to take on non-zéro values (degrees of truth). A fe r the variables have been passed

through the rule base, the result is mterpreted as a numerical result.

48 of 136

FUZZY LOGIC CONTROLLERS

The standard method o f creating a fuzzy control system involves identifying and naming the fuzzy inputs and outputs, creating the fuzzy membership functions for each, constructing the rule base, and then deciding how the action will be carried out. A

collection o f these fuzzy rules makes up the knowledge base of the decision-making processor, shown earlier in Chapter 2.

3.1.1 FUZZY SETS The purpose o f a set is to single out its elements from those in its domain. The

relationship between two sets has two possibilities, either they are partners merged in a larger entity or the relationship consists o f the elements that they have in common. Sets that are partners are called disjunctions or unions. The union o f A and B, denoted

as vf u .B, is defined to be the set o f all elements within A and B. In the fuzzy world, this partnership expresses the maximum value for the two sets involved. The intersection o f A and B, denoted as A n B , is defined to only the set o f elements that are found in both A and B. In the fuzzy world a conjunction is expressed as the minimum value for the two fuzzy sets. Fuzzy rules are either `and' or `or' rules, where `and' rules set the rule alpha value to the maximum value o f the set while the `or' rule defines the rule alpha value as the minimum value o f the set. By using the `or' rules, the increase in step size o f the gain is smaller so that it will reduce overshoot that was more commonly found when using the `and' rules. In classic set theory (see Figure 3.2) A - > B is read as A implies B. Therefore i f A is true it is inferred that B is also true or vice versa. I f A is false, then A -> B implies B is false. Now, let A and B be sets of fuzzy numbers. In fuzzy logic A ^ B is interpreted as A is contained in B and B is true i î A > B . The statement ^ A (not A) or A^' (compliment o f A) in both crispy and fuzzy logic is defined as all elements in the domain that are not in the set of In crisp logic A ^ 'U A would contain the entire domain while A^ n A is

impossible since both sets are mutually exclusive. In fuzzy terms A^ u A = max(v4` ^, A ) , which would not contain the entire domain and A^ n A = rmn{A'^ ,A ) is possible and would not be equal to an empty set. The differences between fuzzy and classical set theory are summarized in Table 3.1.
49 of 136

FüZZY LÔÔlG CÔNTRÔL Ô t COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

A'^ oir ^ A

A n s

Flpre 3.21 epfep Sê« fhêtt^ (â) J àfiâ m t À (h) A ulitâll R (è) A tefM êtiüft R

A u S

The set o f all elements within A and S The set Of elements that are tound in both A and B All éléments in thé domain that are not in thé sét ofz( i f A is trUe it is implied that B is also trué

A u S A

= 'w m .{ A - ,B )

n

M

- min(A-, S } si-A is true if

m Â

m A ^ A ^ A = A B

À =A- S

l^ b te & lî Grfep ïhëQi^ cBffipafiëtf w # iv ^ sel ih ë ô ^

M â MiMllRSmP FÜNÇTiaNS
t h l simpiest mërabership &netiptîs (MFs) are &rmW ttsing straight Iffils, Th# triangle shUwK in Figure 3;3(a); is the tnëst praetieal and eomtûënLy used hmetien as it is easily represented, as seen in Chapter I. three numbers taking the f e r n {a, b, 0

represent the triangle MF where ê is the apex of the triangle and the base o f the triangle extends across ihé numerical rangé o f fu^iness that is in the possible rangé horn à to g. Thé tràpézôidàl MF is à Irunéàlêd triânglê ê'ürvê whiêh has à flat tops âs shown in Figuré

Another eornrnonly used MF is shown in Figure 3.3(6)-, whieh is built by the Gaussian disnibution eurve. These # e s of hinetidns have the advantage of being nonzero at all points. Although the Gâussiân MF âëhiêvê smoothness, they are unable to speci%
àsÿmméirîè MFs, Unîîkë thé iïîanglé and trapëzoid MFs that can be skéwéd. Hôwévër, an

Open ended Gaussian m f ^either open left or right ean be used where half of the Gaussian

so of 136

FUZZY LOGIC CONTROLLERS

function is utilized and the second half o f the function is replaced with a flat top as seen in Figure 3.3(d). Any polynomial-based curve can also be used as a membership function. However, the four types of membership functions outlined above more than adequately meet the thesis requirements without moving into more exotic membership flmctions. This chapter will present fuzzy logic controllers that were created using only triangular membership functions as well as controllers that use multiple membership functions.

(a)

1

-- ,

(b)

1

Figure 3,3: Membership functions (a) Triangle MF (b) Trapezoidal MF (c) Ganssian MF (d) Open ended Gaussian MF

51 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

3.1.3 FUZZY INFERENCE AND DEFUZZIFICATION Thè prOcèss of interpreting à fuzzy logic résuit involves first the fUzzy inference step followed by the process known as defuzzification. The two rnost cornmon inference methods are thé "max-min" inference method and the "max-dôt/prôdüct^suih" inference method, and the most common defuzzification method is the "centroid" defuzzification. For simple cases the two inference methods will produce the sarne results^ but in complex situations can produce drastically different results; (Tanaka, 1997)

To illustrate the differences in the above methods, the following simplistic Rule Base and membership functions Will be utilized: IF (x is hot) AND (y is large) THEN (z is fast) If
(x

is warm) AND (y is large) THEN (z is slow)

3.1

IF (y is medium) THEN (z is slow) The Rule Base has been evaluated with the following clauses: (x is hot) = 0.7 (y is large) = 0.6 (x is warm) = 0.5 (y is médium) = 0.4

3.2

The Output membership functions are triangular as illustrated in Figure 3.4, ànd defined by the following: slow = (25, 100, 175) 3.3 fast = (125,200,275)

100

200

re 3.4: Triangular membership functions of output
52 o f 136

FUZZY LOGIC CONTROLLERS

The max-min method truncates each output membership function appearing in the consequence o f that rule by the rule alpha value. All the rules in the rule base are Instead of

processed and the resultant shapes are combined as seen in Figure 3.5.

truncating the output membership functions, the max-dot product and product-sum methods scale the output membership functions by the rule alpha value in the vertical direction. The max-dot method combines the results through absorption, as shown in Figure 3.6(a), while the product-sum method combines the results through summation, as seen in Figure 3.6(b). The product-sum method is considered more accurate since no information is lost via absorption.

100

200

Figure 3.5: Max-min inference method The Centroid Method of defuzzification is analogous to finding the center o f mass o f the output composition. Every piece of information is accounted for in the final defuzzified value, which is determined at the location of the centroid. All the simulations in this thesis use the product-sum method o f inference and the centroid method of defuzzification.

100

200

100

200

Figure 3.6: (a) Max-dot Inference Method (b) Product-sum inference method
53 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

3.2 SPOOL SPEED CONTROLLER The first fuzzy controller was developed to adjust the spool speed with respect to the airspeed (the axial flow velocity entering the inlet) and altitude. A third input variable can be added to incorporate the desired thrust, and thus increase the spool speed to increase the thrust output. As the input values vary, the spool speed is varied accordingly by the fiizzy logic controller.

The fuzzy logic controller is provided with normalized input values for both the airspeed and the altitude. The simulated altitude is normalized over the specified maximum

aircraff ceiling which is inputted by the User. The aXial-flow velocity is normalized over the maximum allowable velocity that is based upon a user-selected Mach number. The controller outputs a scaling factor from 0 to 1 which is multiplied by the maximum allowable spool speed. 3.4 The maximum allowable spool speed is calculated by solving the compressor tip speed at a given maximum Mach number:

3.5

When modeling membership functions it is often easier to start with simple symmetric triangular functions for the controller inputs aS seen in FigUrC 3.7, along with the uSC o f a straightforward one-to-one rule base as shown in Table 3.2. The sensitivities o f the

controller can be adjusted by massaging the output membership functions to achieve the desired control surface (seC Figure 3.8).

54 6 f 136

FUZZY LOGIC CONTROLLERS

0.00

0.25

0.50 _ Normalized Altitude, h

0.75

1.00

Figure 3.7: Simple symmetric triangular membership functions for altitude input

0.00

0.25

0.50 Normalized Spool Speed, N

0.75

1.00

Figure 3.8: MF for spool speed scaling factor The resulting control surface, in Figure 3.9, shows three distinct operation zones: a rapid increase occurs in spool speed as the flight speed and altitude increase at low operating conditions; a gradual increase in spool speed occurs in the middle regions o f the surface; and the spool speed is increased slowly as the maximums in flight speed and altitude are reached.

55 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

Slow

Average Blade Speed

Fast

Slow

Average Blade Speed

Fast

Tabie 3.2l Rule base matrices for thTee-input / one-output system

& Q

0

Cl

Normalized velocity, v

Normalized Altitude, h

Figure 3.9: Three-dimensional control surface for spool speed controller As well, the controlier aiitomatically installs a safety factor that is determined by the shapes o f the membership functions (usually 10 to 20%), as the output o f the scaling factor can he adjusted to always be less then 80 tO 90%. Spool speed can also be variable with regards to active surge control. A variation on the above spOOl speed control was created to adjust the spOol speed with tespeCt to current conditions o f the mass flow coefficient as well as setting a limit on the maximum bladetip speed* Both spool speed controllers can be run simultaneouslyj combining to create a

56 of 136

FUZZY LOGIC CONTROLLERS

controller that will govern spool speed with respect to all o f the previously mentioned aspects.

Figure 3.10 expresses the acceptable range of the mass flow coefficient as membership functions. The use of the trapezoid membership functions keeps the controller idle until the set limits are breached, after which the outputted spool speed scaling factor will be altered according to the control surface shown in Figure 3.11. The maximum allowable value for the spool speed scaling factor o f ±0.5 results from the apex of the triangle membership functions `decrease' and `increase', which appeals in the output membership functions shown in Figure 3.12. The rule base for this FLC is summarized as follows: IF (O is SMALL) THEN (Nis DECREASED) I F ( 0 is OKAY) THEN ( N is OKAY) I F ( 0 is BIG) THEN (Nis INCREASED) IF ( N I is BIG) THEN (Ni s FAST DECREASE) 3.6

0.00

0.25

T 0.50
Mass Flow CoefEcient, 0

1.00

Figure 3.10: Acceptable values for the mass flow coeffrcient expressed as a MF

The `fast decrease' membership function shown in Figure 3.12 is called into play if the ratio o f spool speed over the maximum allowable spool speed approaches unity. This membership ftmction will ovemde the changes caused by the membership functions

57 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

dedicated to the màss flow coefficient, in order to guarantee that shock waves will not occur around the rotating blade tips, resulting in the cottibined thrêè-diihensional control surface shown in Figure 3 .13.
0.5 0.4

% -4

0.3
0.2

I I
.9

L I

0.0

6

-0.3 -0.4 -0.5 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.9 1.0

Mass coefficient, #

Figure 3.11: Two-dimensional control surface for spool speed control of mass coefficient

1 -1

I
0

IH CRI \SI ËCRF\NË,

OK\^

FAST CREASE

-LOO

=0:50

0.00
Spool Speed Sealing Faefori AY

0.50

1.00

Figure 3.12: MF for outputted spool speed scaling factor

58 of 136

FUZZY LOGIC CONTROLLERS

A Aw.

.Ax.A ,
Ï

O S
(If.

0.4

0

I
Normalizedspoolspeed,N

Mass flow coefficient, 0

Figure 3.13: Three-dimensional control surface for spool speed control of mass coefficient

3.3 IGV AND STATOR BLADE ANGLE CONTROLLERS The design angle o f attack o:,, defines the near-optimum inlet flow angle for the blade cascade. An empkical model by Aungier (2003) based on the design charts of Herrig et al. (1957) for NACA 65-series blades was developed to calculate this design value:

a

3.6j[^Æ ,^.+0.3532^(a/c)

, 0.65- 0.00261

3.7

The blade shape parameter,

assumes the value o f 1.0 for NACA profiles, 1.1 for the

C4-series profiles and 0.7 for the double-circular-arc profile (Aungier, 2003). The design incidence angle thickness correct factor,A,, provided in Johnsen and Bullock (1965) is expressed empirically as a function of the blade maximum tliickness-to-chord ratio, t^t c\
0.28 /[o.)+(/j/c)"

]

3.8

3.3.1 ADJUSTABLE IGV TO OPERATE AT DESIGN INCIDENCE ANGLE The IGV metal angle can be adjusted to control the airflow entering the first rotor stage of the compressor. In order to avoid flow separation the air flow should pass the blade at
59 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

an angle close to the physical metal angle of thé blade. The difference between the actual angle at which the flow passes the blade and the blade angle is defined as the incidence angle; 3.9
P in

^" %

The design incidence angle for each cascade is related to the design angle o f attack by the following relationship, whCrë Ç is the blade stagger angle (Horlock, 1982):

Using Lieblein's (1960) correlation, with all angles in degrees, an iterative solution can be used to compute the design incidence angle with the following:
i ^ K^,^K^.ig+nO

3 11

^0.914+0^/160

n = 0.025g - 0.06 -

^ 1.5 + 0.43(7

3.13

Separation is liable to occur if the incidence angle is more than ±10° different then the design incidence angle (Archer, 1996). The difference between the simulated actual

incidence angle and the design incidence angle becomes the input to the FLC:
e ,. =

.. . / -I

3.14

The output o f the FLC is the amount in radians that the IGV must be adjusted. The iterative nature of Lieblein's correlation works well within the loop o f the sirnulatioh model. With each simulation step, one iteration of Lieblein's correlation is calculated, and then the FLC is called to adjust the IGVs, which results in a new flow angle and a smaller difference between the design and actual incidence angle.

As before, a one-to-one rule base is used for this controller: if the error term is negative then a large positive adjustment occurs in the IGV; if the error term is about zero then a
60 Of 136

FUZZY LOGIC CONTROLLERS

small adjustment occurs in the IGV; and if the error term is positive then a negative adjustment occurs in the IGV. The same triangle membership functions shown in Figure 3.7 are utilized for both the input error term and the output term; the only difference being the domain has been changed to [- 1 , 1 ] ^ order to compensate for situations where the design incidence angle is smaller than the actual incidence angle. The resulting

symmetrical two-dimensional control surface is shown in Figure 3.14, resulting from the rule base given by; IF (e, is POSITVE) THEN IF (e, is ZERO) THEN is DECREASED) is OKAY) is INCREASED) 3.15

IF (e, is NEGATIVE) THEN (

0.6

0.4
0.2

§

£?

0.0

.3 ^
-

0.2

-0.4
0.6

-

-0.4

-

0.2

0.0

0.2

0.4

0.6

Incidence error, e. [4eg]

Figure 3.14: Two dimensional control surface for adjustable IGV to operate at design incidence angle The identical strategy can be applied to controlling separation over the flow exiting a blade. The difference between the actual angle at which the flow leaves the blade and

the blade angle is defined as the deviation angle:
61 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

3.16

Lieblein's (1960) iterative solution can be used to compute the design deviation angle as follows:
3.17

where the zero-camber design deviation angle is calculated from:
1.67+I.09O-

=a0.01cr + (0.74£j'"+3ff)

3.18

and the slope factor is calculated from: a 0.17-0.03331-- ^ + 0.3331 UOO IlOO m= (j
6 = 0.9625-0.17 3.19

UOO/

0.85

3.20

\

1 0 0

y

3.3.2 ADJUSTABLE IGV TO OPERATE AT DEFINED REACTION The degree of reaction for a compressor is defined as the ratio o f the static enthalpy increase across the rotor to the increase in static enthalpy for the stage. When the degree o f reaction is 0.5, the increase in static enthalpy is evenly divided between the rotor and stator. This configuration is optimal for the present application, as it will minimize the tendency o f the blade boundary layer to separate. Using the velocity triangles defined in Chapter 2, the degree o f reaction can be defined as (Horlock, 1982);

R' = 0 .5 - ^ [ t a n

+ tan /3,^y ]

3.21

The FLC outlined in Section 3.3.1 can be used to adjust the IGV in order to achieve a degree of reaction o f 0.5. Now the inputted error term will become:

62 df 136

FUZZY LOGIC CONTROLLERS

e = 0 .5 - R '

^

The deHaller number is a measurement o f the amount o f diffusion, noting that both the rotor and stator act as diffusers. I f the rate o f diffusion is very slow, the blade length becomes excessive, resulting in large friction losses, and if the rate o f diffusion is very large, boundary layer separation may occur (Harman, 1981). Based on the velocity

triangle compressor model outlined in Chapter 2, the deHaller number can be calculated as follows:

deH = ^

3.23

Many designers use 0.707 as a target deHaller number (Cumpsty, 1989). Once again, the same methodology described above can be used to tune the deHaller number o f a compressor stage.

3.3.3 STATOR CONTROL AT DESIGN INCIDENCE ANGLE
Stator blades can be treated the same as inlet guide vanes with respect to the two controller examples above. Either the stator blade turn angle, , can be adjusted, or the

entire stator blade can be rotated, hence adjusting the stagger angle, ^ , o f the blades. These controllers can be run simultaneously on the IGVs and the stator blades o f any stage.

3.3.4 COMBINATION CONTROL
The controller outlined in Section 3.3 can be run in parallel with any combination o f the abovementioned controllers. Now the IGVs are tuned to simultaneously meet more then one condition (shown in Figure 3.15a). A natural middle ground is found where all the conditions are partially met according to the condition weighting. A multiple-input FLC can be used in place o f running the controllers in parallel; as shown in Figure 3.15b, any number of error values can be passed to the fuzzy logic controller, which will output a change in the IGVs.
63 of 136

FUZZY LOGIC CONTROL OF COMFRÉSSOR SURGE IN A TURBOJET ENGINE MODEL

3.3.5 MULTIPLE STAGE CONTROL Any niittilDér ô f èôriiprêssôr stâgês éârl Be linked in séries to create a niulti-stàgè compressor within thé tüïBôj et modél. The stator cascade o f thé prévlôüs stàgé bëcômés thé IGV stage ô f thé êürrèhî stâgéj àhd thus thé flow prôpèrtiés àfé bàséd è ô m stàgé lô stage. Each stage can be controlled separately^ or the stage control can be linked to a stage either before or after i t The IGV and the stator blades o f the first few stages can be linked to tune variables throughout the rentarhihg stages^

  'IG V o

I

V/ \

lavji

3.iS: Combination control flow chart: (à) multiple error / single controller (b) multiple error / multiple controller

3.4 TGV WITH ADJUSTABLE RPM The spool speed eoutroller outlined in Section 3.2 can be run in parallel with any o f the above-tnentiotied controllers. N ow tivo control variables, spool speed and IGV angles, âré tutiéd sirhultânébnSly to achieve the desired results ftronx the engine siitiulâtion, as shown ic. Figure 3.16.
64 of 136

FUZZY LOGIC CONTROLLERS

AN Figure 3.16: Multiple control surfaces flow chart

3.5 ACTIVE SURGE CONTROLLER This controllei uses the same feedback-loop fuzzy decision-making method as the abovementioned controllers. The goal of this control is to show that engine operation can occur along the surge line, as any disturbance that pushes the operation point into the surge region will be quickly corrected.

This method of control requires knowledge o f the surge line, and for this example a generic quadratic surge Ime is defined as follows for the design work coefficient:
0 ^ Y = -- +0.35 3

3.24

By lowering the y-intercept in Equation 3.24 a surge margin can be placed on the abovementioned defined surge line, both the surge line and margin fine are plotted in Figure 3.17. An upper and lower bound is required for the mass flow coefficient, 0 . The

second controller outlined in Section 3.2 will be run for this example, to obtain the desired limitations on the mass flow coefficient.

65 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

1

---------.................. I..... - .1

1

----------I

0.9
0.8

--------- 1............. I... ' : y ______ i

y y

B^O.7 S D .g Ô U

» 1 '

1 1

·

i 1 \

%0.5 ..............! ............. i ............... I s ?

a

:

:

: .......
1

m0.4
^ Ô.3 --
0.2
0.1
0

t i
1 1

1 1

I i
1

: i 1
1 1 1

1

1

i ( I

! 1 t 1 I i
1

1 1 » 1 1

---0

· 1 i i ........- - i
0.2 0.4

i «

« I
1

-.

1 ` i , . 1-

i
1

t < « ....... i
1.2

------1.4

0.6

0.8

Ma.ss F Î Ü W Cdëfficiêiit, $
Figure 3.17: Surge line and surge margin The design work coêffléiêilf, \j/ , is solved fôr at the model's clirfeht mass flow eoefficieiit iisihg the quadtatic surge lihe ehârâëteiistic (Equation 3.24), and then the actual work coefficient ipr is solved from the compressor stage velocity triangles;

3.25

Now the FLC error term can be calculated Using the design work coefficient and the actual work coefficient: 3.26 If the error term is greater than zero, the compressor is Operating safely below the surge line and the work coefficient can be slowly raised till the error is zero and the compressor is operating on the surge line. I f the error term is less than zero the cornpressor is

operating above the surge line, which is undesired behavioup and the controller will very
66 of 136

FUZZY LOGIC CONTROLLERS

rapidly move the operating point back below the surge line by lowering the work coefficient.

In order to raise the work coefficient the whirl velocity across the IGV, lowered and the whirl velocity entering the stator cascade,

, must be

, must be raised. The IGV

whirl, Wj, will change proportionately to the IGV angle, and W 3 can be adjusted by changing the rotor turn angle (this can be tuned in the simulation, but is not commonly done in practice).

From Equation 2.39 the whirl velocity across the IGV can be expressed in terms o f the axial velocity and the IGV angle:
Wg = v , t a n y ^ c y 3 .2 7

Combining Equations 2.44, 2.46, and 2.47, the whirl velocity entering the stator cascade can be expressed in terms of the blade speed, the axial velocity, the flow angle entering the rotor stage and the rotor turn angle:
W 3 = w + V,

tan (

0 :^ 2

+

)

3 .2 8

where

the angle at which the flow enters the rotor, can be expressed in terms of

blade speed, axial velocity, and IGV angle as:

- arctan
V

'JGV

^12

= arctan tan f5jgy V

3.29

Substituting Equations 3.27 and 3.28 into Equation 3.25 yields the following relationship for the work coefficient:

¥

67 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

Equations 3.29 and 3.30 illustrate that the work coefficient is dependent on the rnass flow coefficient, the IGV blade angle, and the rotor turn angle. As previously mentioned, the mass flow coefficient will be governed by the controller outlined in Section 3.2, leaving the need for a FLC that will update the IGV angle and the rotor turn angle.

3.5.1 IGV SURGE C O N TR O L In this section, a FLC is created using only the IGVs as the actuators for active surge control. The need to oversee the rotor and stator blade incidence angles (in order to avoid stall as seen in Section 3.3T) is still a major concern. The avoidance of surge is given a heavier weigliting, and thus the FLC will settle at an operating point that best meets the surge conditions while staying within the larger allowable boundaries for the stall condition. The MF for the incidence angle error term^ e,, from Equation 3.14 is shown in Figure 3.18. The IGV is only altered if the flow entering the rotor blade is in danger o f separating or more specifically if \e\ > 6 °. Figure 3.19 shows the two-dimensional plot of the control surface created by the first two rules from the following rule base:

IF ( e, is NEGATIVE) THEN ( IF {e. is POSITIVE) THEN

is INCREASED) is DECREASED)
3 .3 1

IF ( gy is NEGATIVE) THEN ( Ayg^^r is LARGE INCREASE) IF (gy is ZERO) THEN (Ayg^or is ZERO) IF (gy is POSITVE) THEN ( Ayg.^^ is DECREASED)

The work coefficient error e thus has more weight in the settling position o f the IGV blades. If the work coefficient error is negative, then the system has crossed over into the surge region, and the IGV angle is quickly increased. If the work coefficient error is positive, then the system is working safely below the surge line, and the IGV angle can be slowly decreased. The lower limit of the IGV angle will be dictated by the incidence angle error.
68 61136

FUZZY LOGIC CONTROLLERS

8

I
NEGATIVE
-10

POSITIVE

 5

0

5

10

Incidence /uigle Error, e,-

Figure 3.18: MF for incidence angle error for IGV surge controller This non-symmetrical controller is created by combining non-symmetrical membership functions shown in Figures 3.20 and 3.21. The output MF contains one trapezoid MF which will slew the results quickly to the positive side if the work coefficient error becomes negative. The trapezoid MF in FLC input creates the step increase seen in the control surface (see Figure 3.22) as e becomes negative. In comparison, the gentler

slope, as e becomes positive, is created by using an open-ended Gaussian membership function. In both cases, if jg^j > 0.4, the maximum displacement for the IGV results; this range is set by the base of the triangular MF in the FLC input.

The triangular MF in the FLC input is required to settle the error term to zero. Any shift o f the triangle's apex will result in a shift o f the same magnitude of the controller's final settling point for the error value. The same relationship is found in shifting the apex of the central triangular MF in the FLC output with respect to the final settling point of the IGV displacement (both apexes are located above the zero, resulting in an equilibrium point of zero IGV displacement at a zero error).

69 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL 0.5 0.4

I
g2.
-

0.2

0.0

-04
0.2

-0.3
10

:8

 6

A

2

0

2

4

6

8

10

Incidence etror, s.-

[^eg] Figure 3.19: Two-dimcfisicr«al pilot of incidence error controller

ZIUO

-

1.00

-.0.50

0.00 Work Coefficient Erron e.

0.50

LO O

Figure 3,20: Input MF of work coefficient error for IGV surge controller

70 of 136

FUZZY LOGIC CONTROLLERS

-

2.00

-

1.00

0.00

2.00

Change in IGV,

Figure 3.21: Output MF for change in IGV for surge controller
2.0

1.5

I
I .8
(D Ô

1.0

0.5
0.0

-0.5

-

1.0

-1.0

-0.8

-0.6

-0.4

-0.2

0.0

0.2

0.4

0.6

0.8

1.0

Work coefficient error, e.

Figure 3.22: Two-dimensional control surface for IGV surge controller Both two-dimensional control surfaces shown in Figure 3.19 and Figure 3.22 are combined to create the three-dimensional control surface shown in Figure 3.23.

71 of 136

_f^OPERTYOF ·'/.-nGOlij UiüiyÊfvsnYLififiAHv

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

I
II

·1

10

Work coefficient error; e,

incidence angle error, e, [deg]

Figure 3.23: Tlirèè-dimèhsiohàl control surface for IGV surge control

3.5.2 IGV AND VARIABLE ROTOR GEOMETRY CONTROL Thé IGV positioriing is often restricted by stall that occurs over the rotor blade. By intfoducing variable gebmetry to the rotor blade, the blade can be turned into the flow, reducing the limitations caused by stall, while increasing the operation range o f the IGVs. A second FLC is created to run simultaneously with, yet independently oft the controller outlined in Section 3 A . L This second controller is only concerned with rotating the rotor blade into the air flow and thus setting the incident angle and the deviation angle to the design value as outlined in Section 3.3. Just like the stator blade shown in Figure 3.1, the rotor blade can be rotated as a whole by altering just the blade stagger angle and keeping the turn angle constant, or by altering both the inlet and outlet blade angle independently and thus altering the rotor turn angle. As seen in Equations 3.11 and 3.17, altering the rotor turn angle results in changing both the design incidence angle and the design deviation angle. The sarne design strategy used in Section 3-3 to manoeuvre the IGV is applied to the rotor blade.

3.6 DETECTION/AVOIDANCE CONTROLLER This control does not require any knowledge o f the compressor characteristic. Instead, the controller analyses the fluctuations of the axial mass flow coefficient, A O , and
72 of 136

FUZZY LOGIC CONTROLLERS

pressure coefficient, A'F . The response of the MG model is drawn upon for modeling the control system. Increasing the control gains will stabilize the system, however, at a penalty of pressure lost across the system.

The fluctuations of the axial mass flow coefficient, A O , and pressure coefficient AT are normalized before being sent to the FLC as the crisp input by the following:

AT, =

T ,- T
m a x (T ,, T .^ ^ )

3.32

m ax( 0 ,, 0 ,+^)

3.33

Samples of the coefficients are taken at regular time-step intervals. The crisp output from the FLC adjusts the tlirottle and/or the CCV gain by the following;

3.34

Triangular membership functions were defined for each classified category o f input and output as shown in Table 3.3. The base of each triangular membership function rests on the intervals of each category, and the apex df the triangle is located above the midpoint of the interval.

Small Medium Large

0 .0 0 -0 .2 5
0 0 0

Small Medium Large

0 .0 0 -0 .2 5 0 .2 5 -0 .5 0 0 .5 0 -1 .0 0

.

-

1 .0 0

0 .5 0 -1 .0 0

Table 3.3: Operating ranges of fuzzy inputs and output

For the case of two inputs and one output, the rule base was constructed by creating a matrix o f options and solutions. The matrix has the input variable along the top side (see Table 3.4). The entries in the matrix are the desired response of the system, the changes in either throttle or CCV gain.
73 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

Small
 M

Srnall/Medium Medium Medium/Large Ay^ and Ay,.

Small/Large Medium/Large Large

Srnall/Medium SmaU/Large

Table 3,4: Rule base matrix for two-input / one-outpUt system From Table 3.4 the following 3-rule base was created (one for each entry along the diagonal): IF ( A 'F is SMALL) OR (AO is SMALL) THEN ( A y , AND A fj is SMALL) IF ( AY is MEDIUM) OR ( AO is MEDIUM) THEN ( Ay, AND Ay^ is MEDIUM) IF (AY is LARGE) OR (AO is LARGE) THEN (Ay, AND Ay,, is LARGE) The iion-liiiear control surface created by this rule base is depicted in Figuré 3.24. 3.31

uy . o s. ÜI . <3

â a O M a o
.a H

06 . 05 ·

0.3 .

01.

0

0

'n;

Oi

Change in pressure coefficient, AT

Change in mass flow coefficient, AO

Figure 3.24: Three-dimensional control surface for MG surge detection model

74 of 136

C hapter 4

SIMULATION RESULTS
In this chapter, the proposed controllers from the previous chapter are simulated. Results fo r active stall and surge control are shown using the turbojet model. Detection and avoidance surge control is shown using the Moore-Greitzer model and the modified Moore-Greitzer CCV model.

75 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

4.1 IGV AND STATOR BLADE ANGLE CONTROLLERS Tile simulations iil this Séctioii àltêf thé IGV exit blade âiiglé âüd/ôr the stàtôr tUrti âriglé or the stator stagger angle. The compressor variable geometry is illustrated in Figure 4.1. The axial velocity entering the engine is subsonic, and thus à subsonic d ife sèf inlet is used. No afterburner is present. The numerical values used in the following simulations are summarized in Table 4.1.

IGV

ROTOR

STATOR

Figure 4.1: IGV and stator blade variable geometry

4.1.1 ADJUSTABLE IGV TO OPERATE AT DESIGN INCIDENCE ANGLE Figure 4.2 shows the convergence o f the actual rotor blade incidence angle with the design incidence angle, and Figure 4.3 shows the corresponding change in the iGV angle. When the error term is very large, the control will move the IGV the maximum amount per time step until the error is within approximately one degree, whereupon the control
76 of 136

SIMULATION RESULTS

will slow up and gently nudge the IGV into the final position. This method results in a smooth transition, with zero overshoot.

Altitude, h Axial velocity, v Diffuser entrance radius, Diffuser exit radius, Diffuser length, Ratio o f specific heats in diffuser, Gas constant for air in diffuser, Intake efficiency, tJj IGV initial position, Rotor speed, N Ratio o f specific heats in compressor, Gas constant for air in compressor, Rotor blade angle at inlet, Rotor blade angle at outlet, Stator blade angle at inlet, Stator blade angle at outlet, Thiclcness-to-chord ratio, t^l c Solidity, cr Rotor blade tip-to-tip diameter, Rotor hub diameter, Ratio o f specific heats for burner, Gas constant for air, Gas constant for fiiel-air mixture, Mass flow of fuel into burner, Burner efficiency, Heat o f reaction in burner,

0

m

180 m/s 0.62 m 0.64 m
0 .8

m

1.4 287 J/kg K 90%
0

°

8000 rpm 1.4 287 J/kg K -53° -38° 50° 35°
0 .1 1

0.660 m 0.457 m 1.4 287 J/kg K 293 J/kg K 0.0238 kg/s 95 % 44x10'^ J/kg fuel

Table 4.1: Numerical values for simulations

77 of 136

PtJZZY LO G lë CONTROL OF COMFRë SSOR SURGE IN A TURBOJET ENGINE MODEL

12

10

g
6

4

2

a
-2 0 20

40

60

80

100

Time Step

Figure 4.2: Change in rotor blade incidence angle

0.35

0.30

t

0.20

I

Ô.15

0.05
0.00
100

Time Step

Figuré 4.3: Changé in IGV ânglé

White ruffiiingj the simulation displays on screen the changes in the velocity triangles and blade angles. Figure 4.4(a) shows the velocity triangles at time zero and Figure 4.4(b) shows the velocity triangles at the simulation's end where the changé in the IGV angle is

7 8 o fiâ 6

SIMULATION RESULTS

apparent. A more detailed breakdown of the turbojet engine data at the final equilibrium position is presented in Appendix A.
(a)

IGV

ROTOR

STATOR

Figure 4.4: Velocity triangles and blade geometry for adjustable IGV operating at design incidence angle: (a) time zero (b) simulation end

4.1.2 ADJUSTABLE IGV TO OPERATE AT DEFINED REACTION Figure 4.5 shows the result o f a simulation run that optimizes the rate of reaction to 50% by adjusting the IGVs. The plotted velocity triangles are symmetrical, thus obtaining the defined rate o f reaction goal.

ROTOR

u

STATOR

u Figure 4.5: Velocity triangles for an optimized rate o f reaction (50%)

79 of 136

FÜZZY LOGIC c o n t r o l OF COMPRESSOR SURGE ÏN A TURBOJET ENGINE MODEL

4.1.3 ADJUSTABLE STATOR TO OPERATE AT DESIGN INCIDENCE ANGLE iti this example the same controller is Used concurrently to coiitrol the stator stagger âiiglè as well as the ÎGV angle. The resulting velocity triangles are shown in Figure 4.6.
(0 ROTOR W 2y I \. I > \ \

ft) \\

A
u

u

\ \

u //
STATOR

// /
I (
y

iW
11 \ i \ \ / /

//

\V â
r I

/ u

U

Figure 4.6: Velocity triangles and blade geometry for adjustable stator operating at design incidëneë angîël (ü) finie zero (b) simulation end Figures 4.7 and 4.8 show the changé in incidence angle as flow enters the rotor and stâtôr blade respectively. The effect of altering the IGV to correct the rotor incidence can be seen in the flow entefhig the stator stages thus creating a slight overshoot in the stator uieidenee error. This overshoot can he seeft In Figure 4.9, which plots the actual change of the stator angle.

4.1.4 COMBINED CONTROL In this example^ the two controllers run concurrently^ both the rotor .)lade incidence angle FLC and the defined rate o f reaction FLC. Since both controllers use the IGV as an actuator there is a very low probability that both conditions can be met. instead what results is a compromise as both conditions are partially met. Figure 4.1Q shows that the rotor incidence angle error is reduced to Within approximately one-third a degree and Figure 4.11 shows the degree o f reaction is reduced to Within 10% of the desired goal.

80 of 136

SIMULATION RESULTS

100

150

200

250

300

Time Step

Figure 4.7: Incidence angles resulting from flow entering the rotor blades

k

M D
i

ei

Î . 0)

I
10

-15

1
20 40 dO 80
100

120

Time Step

Figure 4.8: Incidence angles resulting from flow entering the stator blades

81 of 136

FUZZY Logic Cô n tr ô L ô f Co m p r e sso r Su r g e in a tijrbôjet e n g in e m o r e l

I

i 35

2DIt
100

120

Time Step

Figure 4#i Change in statar blade stagger angle

2.0

1:5

4 ^ Ô .Î

I

I..
-

1.0
0

50

100

150

200

Time Step

Figure 440: incidence angles resulting from flow entering the rntgr blades

SfoflM

s im u l a

n C N RESULTS

"

0.0

100

Time Step

Figure 4.11: Degree o f reaction

4.2 SPOOL SPEED CONTROL The following example shows a trial run o f the spool speed controller for an altitude of
1 0 ,0 0 0

m and a velocity of 2 0 0 m/s.
********************************************************

Maximum Rotor Speed = 9985.39 rpm Scale Factor = 0.697973 Rotor Speed = 6969.53 tpm Blade Tip Speed = 240.85 m/s Blade Mean Speed = 203.81 m/s Mach Number = 0.697973 Max Blade Tip Speed = 345.07 m/s
********************************************************

4.3 SURGE LINE CONTROLLER The following three simulations demonstrate the controller working to maximize the performance of the compressor stage by pushing the operation limits to the defined surge margin. The first simulation shows the attempts to raise the work coefficient by adjusting the IGV. The second and third simulations show the use of variable rotor geometry to reach the desired operation point. A disturbance in the mass flow coefficient is added in
83 of 136

FUZZY LÔGÏC Cô n t r ô L ô f g ô m p r ë ssô r su r g e ÏN a t ü r bô je t e n g in e m ô d e l

the third cGiitrollef la thë fbritL d f an increase in the axial flow velocity^ and the Côtrêspondirig âdjUsfüiênt to thé spool spéêd is mêâSüféd.

Thé Simülàtiôns in this Sèetion usé thé samè values âs dèSnèd in Tablé 4T,- With thé exception o f the rotor inlet blade angle, Prfiut ~ "38^ 5 and the spool speed jV = ëOQQfprüi =-43°^ the rotor outlet

4.3.1 IGV ONLY From thé rés'ülîs Of this simulation it Can be sèèn that àdjüsiihg thé IGV àlOnè is limitéd in its ability to increase the work coefficient; Figure 4; 12 shows that the opposite desired behaviour occurs and the work coefficient is lowered in order to avoid stalling across the rotor blade; This controller is still deemed a success because the IGV is adjusted to avoid stall Over the fotof blâdë while obtaining the highest available work coefficient. Figure 4.13 illustrates this point, sincé thé incidence érrOr Ovéf thë rOtor biâdê séttlés ât thé fiirthëst allowable ioëâtîon in order to maximize thé work èoëfficiént.

0.228 0.228 0.224

h
I 0.222
0.22

a 0.218

a

0.216

0 .2 1 4
0.212

15S

Figuré 4;12: Changé in Wôrk côéfficiénf

8 4 o fi3 é

SIMULATION RESULTS

-10
100

150

lim e Step

Figure 4.13: Incidence angles resulting from flow entering the rotor blades

4.3.2 IGV AND VARIABLE ROTOR GEOMETRY This simulation tunes the rotor blade angles in order to free up the limitations that stall places on the IGVs. The change in the IGV angle is plotted in Figure 4.14. Since the system is operating at a safe distance from the surge margin, the FLC first takes care of the threat o f blade stall by adjusting the rotoi blade geometry and the IGV. Since the mass coefficient was held constant, the resulting system behaviour plotted against the compressor characteristic is a straight line from the starting point to the surge margin, as shown hr Figure 4.15.

After the adjustment are made to avoid blade stall, the IGV finetunes the work coefficient enor to a zero value as seen in Figure 4.16. Convergence of the incidence and deviation angles begins to occur around the 60*'' time interval as seen m Figure 4.17 and Figure 4.18 respectively. The change in velocity triangles and blade geometry is illustrated in Figure 4.19, and more detailed results from this simulation are summarized in Appendix A.

85 of 136

B'tlZZY LOGIC CONTROL OF CÔMFRESSÔR §IJRGE IN A TURBOJET ENGINE MODEL

T i
0.06

] i [

! i

i i

; i i

! i I

r : i i i

I

.! Ô .Ô 2
0.01

I

i

!....... I...

" r" ' i

! ;

! !

! i

! i

! I

! !

i i

! i

0.00

20

40

60

80

100

120

140

160

180

200

Time Step

Figure 4.14': Change in IGV angle
...
1 0.9 0.8 0.7 .1 Ù.6 f # 1 Q .5 0.4 0.3 Ô .2 Ô .1 0
T ,-.-j-,T - : -Î-.-.* :|tT T -IT T -;T -i-îj;IT T T T % % T .T

I

-A

I .

i
-j

! ........... ' r --
· =  =  : IT -:

-i = " ïT 1

I 11- - T |-

L......

-.tttt-.-î-iT .-;.]-:-.t---:t

Z L Z Z Z Z Z Z Z Z J-.tttt-.-î-iT .-;.]-:-.t---:T t . .Z
0.8 i
1.2

0.2

0.4

0.6

1.4

Mî«.îs F lo w Coefficient, $

Figure 4.15; Compressor characteristic

86 of 136

SIMULATION RESULTS

0.25

----

- ....

.....

0.20

" S

0.15

\ \ \ \ \
.
0 20 40 60 80 100 120 140

I
0 U

I

0.10

0.05

1
0.00

-0.05

.

..
160 180


200

Time Step Figure 4.16: Change in work coefficient error value

-10
0 20

40

60

80

100

120

140

160

180

200

Time Step Figure 4.17: Change in incidence angle o f flow entering rotor blade
87 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR S u R G l is \ \
IQ

A TURBOJET ENGINE MODEL

! ! ' \ \ ' :

'

1 : » 1 1 1 ;

1 ! : ..........: Î i i !

1 : ! 1 ! 1 :

1 ! 1 1 1 i i :

1 i ; ! 1 i 1 :

1 i 1 1 ! i 1 :

1 ! 1 1 i 1 :

I
"a

I
-5
/f 1
-- 10 f

! ! i i i - - - - - -- i- - - - - - - - - 1- - - - - _ ! - - - - - - - - - 1- - - - - - - - - 1- - - - - - - - Î 1 / 1 1 1 Ii * i 40 .......... 1 ........... ! ........... 1 ........... 1.......... 1.......... 1............ 1 1 ! 1 1 1 i 1 1 I I I 1 1 i 1 1 i : 1 i ! ! 1 i > i ( 1 1 : ! .... - . i 50 80 1 Î i 100 i I i 120 : : i 140 : ; i 150 : ! i 180

/}

y K !: ` i
20

200

Time Step 4tl8i Change in deyintiQn angle af flow leaving fotof blade

0

» )

IGV

KOTOR

STATOR

Figure 4.19: Velocity triangles and blade geometry for adjustable IGV and variable fotof geometry: (a) time zero (b) simulation end

4âè ÏGV AND VARIABLE ROTOR GEOMETRY WITH DISTUrBANcE
Tiiê same simulation fiOm Section 4.3.2 is run but this time â disturbance Occurs at the S O * * * time interval. The disturbance is a decrease in axial velocity which Causes the
88 of 136

SIMULATION RESULTS

compressor to cross the surge line. The spool speed is automatically adjusted by the previously outlined controller. Figure 4.20 shows the change in the work coefficient error value, which turns negative at the 50**' time step. The system's behaviour is plotted against the compressor characteristic in Figure 4.21. First the controller is pushing the compressor slowly towards the surge margin line, then after the disturbance occurs, the FLC quickly brings the system back to a safe operating point along the surge margin line.

This simulation relies on the IGV to bring the system out o f the dangerous surge region. Figure 4.22 shows the plot of the IGV changing over time. Also included are the plots of the incidence and deviation angles o f the rotor blade in Figure 4.23 and Figure 4.24, respectively. More details from this simulation are summarized hr Appendix A.

0.30 r" 0.25

0.20

M

I
0

I
g

0.15

) o O

0.10

0.05

I
0.00

-0.05 0

L 20

J

L

40

60

80

100

120

140

160

180

200

Time Step Figure 4.20: Change in work coefficient error for disturbed case

89 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

0.50

0.45

--

I

0.25

·k- -1

^ i

i- . -1^

=4 ^ - i 44 4 4 - 4 4 -

0.20

0.50

0 .5 2

0.5.4

0.56

0.58

0.50

0.62

0.64

0.66

BÏàss îlôw Coefficient,'® Figuré 4,21: Compressor characteristic for disturbance case

0.20

0.18 0.16 = 444444^.44444 4.i444 44414 44^Ç4 0.14
=J4444444{44

4444444244

i ·' !
- - - - - -

Î

Q .ii
0.10

0.08 0.0)5 Q .Ô 4
0.O2

-

4-

- - - - -

4-

- - - - -

4-

,=. - - - - - -

4

4-

4-

--t

0.00

100

120

140

iëO

180

200

Time Stêp Figuré 4.22: Changé in IGV blâdé àhglé for disturbed casé

90 of l i é

SIMULATION RESULTS

u

-10
0 20

60

80

100

120

140

160

180

200

Time Step Figure 4.23: Change in rotor blade incidence angle for disturbed case

b D '·ë

Ï

I
ft
-1 0 0 20

g

40

60

80

100

120

140

160

180

200

Time Step Figure 4.24: Change in rotor blade deviation angle for disturbed case
91 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

4.4 DETECTION/AVOIDANCE CONTROLLER The results of two simulations are presented in this section. The first is the MG model without a CCV, and the second simulation is the MG ïnôdél with the CCV. For both simulations the value o f J, the squared amplitude o f rotating stall, has been set to zero. The Greitzer parameter E = 1.8, and the throttle gain has been set so that the intersection of the throttle line and the compressor characteristic is located on the part o f the characteristic that has à positivé slope, resulting in an unstable equilibrium (pure surge). The numerical values used in the simulations are listed in Table 4.2. Figure 4.25 shows the response o f the system before the controller was switched on and after the controller was switched oh at tiihé %= 1ÔÔÔ. Béfôré thé controller was switched on, thé ihàss flow and the pressure coefficients are fluctuating with a regular period and amplitude, and thus the system is surging.

Both simulations pushed the design point along the compressor characteristic until it reaches a stable operation point without overshooting a stable equilibrium point. An overshoot o f the equilibrium point Would result in a pressure loss across the throttle or CCV; The gains are tuned back down towards the initial stable operation point in the case o f overshoot. The optimal operating position is where the throttle characteristic intersects the compressor or equivalent compressor characteristic at a position just right of the maximum value o f the compressor characteristic (slope o f compressor characteristic is negative).

Figure 4:26 is a plot o f the compressor and throttle characteristics in the first simulation: Initially the throttle gain was set to 0.41 which causes the plot o f the throttle characteristic to cross into the unstable region o f the compressor characteristic. The FLC has tuned the throttle gain up to the value o f 0.63 which places the intersection point to the right o f the maximum value o f the compressor characteristic. The surge cycle is also plotted in Figure 4.26. The cycle begins at the intersection o f the initial throttle

characteristic and the compressor characteristic where the flow becomes unstable. It then jumps to the reverse flow characteristic on the negative side o f the flow axis causing the mass flow to flow in the reverse direction. The cycle then jumps back to the compressor

92 e i 136

SIMULATION RESULTS

characteristic until it reaches once again the unstable operation point. continues until the FLC pulls the operation point back to a stable position.

This cycle

Case 1: Without CCV
0.9 0.75 0.6

'0.3 0.5

-0.3 0 500 1000 1500 2000

0.25 0 500 1000 1500 2000

Case 2: With CCV
0.6

0.50 0.3

0.0

0.25 500
1000

1500

2000

500

1000

1500

2000

4

4

Figure 4.25: Response (controller turned on at ^ = 1000)

93 o f136

FUZZY LÔGIC CONTROL ÔF COMPRESSOR SURGE ÎN A TURBOJET ËNGÏNE MODEL

0.7

I
^

m 0 .4 e y
03

I
ïf = 0 .4
0.1

0.1

Ô .6
M a ss Flow CoèÈïciéri%#

0.7

Figure 4:26: Compressor and thPÔttië chàrâctêristîês fôr- Sitnuiûtiôil 1 (üô CCV)

Flow area-, Àë
Speed o f sound, % Compressor eharaeteristie semi height,- H Length Of duets and eOmprèssOr. L q Length o f exit duct, L e Length o f inlet duct, Li Cotnpfessof duct flow parameter^ m M ian iom prissor radius^ R Tangential rotor speedy U Plenum volume, F> Compressor characteristiC semi width, W ShUt=off value o f characteristic, ^eo Initial vâlüê àxiâl mâss flow côêfficiêiif, ®o initial value pfessufe coefficient %

0 :0 1

ttt^

340 m/s 0:18 3m ÔJ m
0 .2

tti

1.75
0 .1

m

173:5 rps 1:5 m^ 0.25 0.3
0 .6 0 .6

Tuble 4i2f Numerical values used in simulations

94 of 136

Ch a pt e r s

CONCLUSIONS
This chapter outlines the contributions, and offers concluding remarks on the success o f fuzzy logic towards surge detection and avoidance control, and active surge control. Future work that can be spring boarded by this thesis is outlined.

95 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

5.1 SUMMARY OF CONTRIBUTIONS A fuzzy logic controller was developed for active surge and stall control o f a compressor iri a turbojet engine model with the objective of allowing the compressor to operate at close proximity to the stall line, in order to increase compressor performance. A turbojet engine model was created in MATLAB using velocity triangles to approximate the flow through the compressor. The actuator surfaces Used in the controller are the inlet guide vanes, movable stator blades, and variable spool speed, and for design purposes, in thé simulation, the rotor blade geometry is also variable.

Also, the stability àiid côhtrOl o f the Mooré-Gréitzér inOdel, and Grâvdàhl and Ëgelâiid's close coupled valve active controller are examined. The MG model and the modified MG model are used as black boxes to create a surge detection and avoidance fuzzy logic controller that does hOt require a surge line. The controller responds tO the flUctUatiOiis hi the axial mass flow coefficient and the pressure coefficient across the compressor system, and adjusts the throttle characteristic or the close coupled valve characteristic in order to obtain a stable operation point.

The controllers make use o f nonsymmetrical membership functions in order to create nonlinear and continuous control surfaces for usage at all operating conditions. The ease with which fuzzy logic can be adapted to these problems is demonstrated through the ability to allow one or more control surfaces to be simultaneously controlled by one or multiple inputs is established.

5.2 CONCLUSIONS The main benefit of a fuzzy logic controller is the simple way in which a nonlinear and continuous control surface can be created. The instability problem o f surge and rotating stall is dependent on the simulated compressor's operation point, thus requiring a controller with the ability to reaOt differently to the various operating conditions. Most noteworthy are the following three situations: when the operation point crosses the surge margin into the surge region; when the operation point is well below the surge region; and when the operation point is just below the surge margin.
96 of 136

CONCLUSIONS

Section 4.3.2 illustrates a situation where the simulated compressor is working well below the surge margin. In this situation the IGV angle is primarily adjusted to ensure that stall will not occur over the stator blades with the secondary objective o f raising the operation pomt towards the surge line. Simultaneously the rotor blade inlet angle and turn angle is altered to assure the stall will not occur across the rotor cascade, with the secondary objective o f raising the operation point. Figure 4.15 shows the system's

operation point, plotted against the compressor characteristic, successfully reaching then stabilizing on the surge margin with zero overshoot. Figure 4.17 and Figure 4.18 are plots o f the incidence and deviation angles, respectively, across the rotor cascade. Clearly from these plots no separation will occur across the rotor blades as both error values are kept well within the ± 1 0 ° range.

The same FLC that was used successfully in Section 4.1.1, to avoid stall across the stator blades, was applied in Section 4.3.2 to keep the rotor blades from stalling. An additional benefit o f FLC is the ease with which controllers can be used for multiple applications, thus drastically cutting development time. Amother example o f controller capability is the three-dimensional control surface developed for the spool speed control in Section 3.2, which in turn was used for the detection/avoidance controller described in Section 3.6.

A decrease m axial velocity that pushes the operation point across the surge margin occurs in the simulation noted in Section 4.3.3. The plot o f the work coefficient error in Figure 4.20 shows the error beginning to level off as it approaches zero before the disturbance occurs at the 50* time interval. As shown in previous simulations such as presented in Section 4.1.1 and Section 4.1.3, the rate o f change o f the control surface is maximized when the inputted error variable is large but will gently decrease as the error value approaches zero (see Figure 4.3). The spool speed is continuously monitored,

before and after the disturbance occurs, by the control surface shown in Figure 3.13, to assure that the mass flow coefficient remains within the desired range. Figure 4.22 shows the immediate increase of the IGV angle as the simulation crosses the surge margin; again, the plot illustrates the nonlinear qualities o f the FLC as the rate o f change o f the IGV angle lowers to zero as the work coefficient error approaches zero, hence leading to
97 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

zero overshoot. Thé FLCs successfully bring the shnulatioü back to à stable operating point along the surge margin while avoiding stall over the rotor and stator blades. Therefore, this active surge control approach escalates the potential for increasing the efficiency of the compressor. Since the FLC can quickly recover from excursions into the surge region, the simulation can operate at a close proximity to the surge line.

The surge detectioti atid avdidaiice approach, avoids the drawbacks o f the loosely defined surge line. The MG models rely on a defined sUrge line; hOwévér, thé FLC treats the MG models as a black box compressor models. The FLC controller is based exclusively on the fluctuations o f the pressure arid mass flow coefficients. The first simulation, without the CCVi begins operation at (Oo^'P(,) = ( 0 .6 ,
0 6

. ) and by adjusting the throttle gain

shifts to a stable operation point o f ( 0 , 'P) = (Q.52, 0:65) : The addition o f the CCV shifts the stable operation point to the equivalent compressor characteristic. simulation (0
0

The

with

the

CCV

active

also

starts

with

the

initial

conditions

, T o) = (0.6, 0.6) but ends at a stable operation point ( 0 , T ) = (0.32, 0.38). For

this simulation the CCV gain and the throttle gain are adjusted to bring the system to a new operation point, at a much lower mass flow coefficient, that could not be reached in the first simulation. The addition o f the CCV successfully extends the operation range o f the compressor simulation. In both simulations the fuzzy logic controller successfully brings the system oUt of surge to a stable operation point.

Fuzzy logic control is concepmally easy to understand. The visual namre o f the MFs and rule base allows for à trial and error approach that allows the User to massage the MFs iri order to generate a desired control surface. The flexibility of such an approach allows for simple alterations in the controller in order to quickly adjust to the needs o f various situations, without starting again ftom scratch.

Complex control problems were broken down into combinations o f simple fuzzy logic controllers and these controllers were then layered; this approach was firequently adopted in this thesis. As welh this thesis demonstrates that fuzzy logic can model nonlinear functions o f arbitrary complexity by virtue o f MF adjustment. With respect to mrbojet
98 d f136

CONCLUSIONS

engine control, via fuzzy logic the gap between the surge margin and the surge line can be closed, since both the simple velocity triangle and Moore-Greitzer models were able to rapidly recover from disturbances that pushed the system beyond the surge line. Using this detection and recoven/ strategy, the drawbacks o f the loosely defined surge margin were avoided.

5.3 FUTURE W ORK The next step in this body o f work would be to implement these controllers on a real working model. The approach o f the active controllers is not limited to turbojet engines, and could be easily applied to other systems. With regards to the detection/avoidance controller, more research is required into the area o f modeling pressure and mass flow sensors. The main challenge is to create a fuzzy logic controller that can decipher sensor noise from subtle pressure and mass flow fluctuations associated with surge.

As a learning tool, it would be beneficial to organize these turbojet engine modules and FLCs with a user interface that would allow students to easily witness the controllers in action.

99 of 136

R eferences Adomaitis (1995). Spatially Resolved Compressor Characteristics for Modeling and Control of Blade-Scale Flow Instabilities, in Proc. 1995 SPIE Int, Symp. Sensing, Actuation and Control in Aeropropulsion, vol. 2492, pp. 36-36^ Orlando^ FL. A pril

Anderson, J.D. Jr. (1991). Fundamentals o f Aerodynamics, Second Edition, McGraw H ill United States o f America.

Archer, D. and Saarlas, M. (1996). A n Introduction to Aerospace Propulsion, PrenticeHall Inc., New Jersey.

Aungier, R.H. (2003). Axial-Fiow Compressors: A Strategy for Aerodynamic Design and Analysis, The American Society o f Mechanical Engineers, New York.

Badmus, O.O., Eveker, K.M. and Nett, C.N. (1995a). Control-Oriented High-Frequency Turbomachinery Modeling: General ID Modeling Development, ASME J.

Turbomachinery, vol. 117, no. 3. pp. 320^335, July.

Badmus, O.O., Chowdhury, S., Eveker, K.M., Nett, C.N., and Rivera, C.J. (1995b). Simplified Approach for Control of Rotating Stall Part 1: Theoretical Development, Part 2: Experimental Results, Journal of Propulsion and Power, 11(6), Nov.

Bathie, W.W. (1996). Fundamentals o f Gas Turbines, Second Edition, John Wiley & Sons, Inc., United States o f America.

Blumel, A.L., Hughes, E.J., and White, B.A. (1999). Design of robust fuzzy controllers for aerospace applications, 18* International Conference o f the North American Fuzzy Information Processing Society, pp. 438-442, June.

100 of 136

REFERENCES

Botros, K. (1994). Transient Phenomena in Compressor Stations During Surge, ASME J. Engine Gas Turbines and Power, vol. 116, no. 1, pp. 122-142, January.

Chipperfield, A.J., Bica, B., and Fleming, P. J. (2002). Fuzzy scheduling control o f a gas turbine aero-engine: A multiobjective approach, IEEE Transactions on Industrial Electronics, VOL. 49, NO. 3, pp. 536-548, June.

Cohen. H., Rogers, G.F.C., and Saravanamutto, H.I.FI. (1987). Gas Turbine Theory, 3 '^'* Edition, Longman Scientific & Technical, John Wiley & Sons, Inc., New York.

Cumpsty, N.A. (1989). Compressor Aerodynamics, Longman Scientific & Technical, Longman Group UK Limited, England.

Cumpsty. N.A. (1997). Jet Propulsion: A simple guide to the aerodynamic and thermodynamic design and performance of jet engines, Cambridge Engine Technology Series, Cambridge University Press, United Kingdom.

de Jager, B. (1995). Rotating stall and surge control: A survey. In Proceedings of the 34th IEEE Conference on Decision and Control, volume 2, pages 1857-1862, New Orleans.

Epstein, A.H.and Ffowcs Williams, J.E., and Greitzer, E.M. (1989). Active suppression of aerodynamic instabilities in turbomachines. Journal o f Propulsion and Power 5, 204211.

Ffowcs Williams, J.E. and Huang, X.Y. (1989). Active stabilization o f compressor surge. Journal o f Fluid Mechanics 204, 245-262.

Fmk,D.A, Cumpsty, N.A., and Greitzer, E.M. (1992). Surge Dynamics in a Free-Spool Centrifugal Compressor, ASME J. Turbomachinery , vol 114, no. 2, pp.321-332, April.

101 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

Fry, R.A. (1960). The Pfiiiciples and Construction o f Aircraft Gas Turbiiies, Sir Isaac Pitman & Sons , LTD., Great Britain.

Gravdahl, J.T. arid Egëlând, O. (1997a). A MoofC-Gfeitzer axial Compressor model with spool dynamics. Proceedings o f the 36th IËÉË Conference on Decision and Control, San Diego, CA, pp. 4714-4719.

Gravdahl, J.T. and Egeland, O. (1997b). Control of the thréé-stâfé Môore-Gfèitzéf compressor model using a close-coupled valve. Proceedings o f the 1997 European Control Conference, Brussels, Belgium.

Gravdahl, J.T. (1998). Modeling and control o f surge and rotating stall in compressors, PhD thesis, Norwegian University o f Science and Technology.

Greitzer, E.M. (1976). Surge and rotating stall in axial compressors Part I: Theoretical compression system model. Part II: Experimental results and comparison theory, ASME J. Engineering for Power, 98(2): 191-217, April.

Greitzer, E.M. (1980). Review --Axial compression stall phenomena, ASME J. Fluids Engineering, 102(2): 134-151, June.

Guoxiang G., Sparks, A.G., and Siva, S. (1999). An overview of rotating stall and surge control for axial flow compressors, IEEE, 639-647, November. Hansen, K.E., Jorgensen, P., and Larsen, P.S. (1981). Experimental and Theoretical Study o f Surge in a Small Cenftifugal Compressor^ ASME J. Fluids Eng., vol 103, no. 3, pp. 391-396, September.

Harman,

R.T.C.

(1981).

Gas

Turbine

Engineering:

Application,

cycles

and

characteristics. The MacMillian Press Ltd., New York.

102 df 136

REFERENCES

Haynes, J.M., Hendricks, G.J., and Epstein, A.H. (1994). Active Stabilization o f Rotating Stall in a Three-Stage Axial Compressor, ASME J. Turbomachinery, vol. 116, no. 2, pp. 226-239, April.

Hellendoom, H., and Driankov, D. (1997). Fuzzy Model Identification, Sprmger-Verlag Berlin Heidelberg, Germany.

Hindmon, J. (1998). Fuzzy Logic: A Clear Choice for System Control, RSES Journal August. Horloçk, J,H.. (1982), Axial Flow Turbines - Fluid Mechanics and Thermodynamics, Butterword and Company (Publishers) Limited, United States o f America.

Lee, C,C, (1990), Fuzzy logic in control systems; Fuzzy logic controller--Parts I & II, IEEE Trans. Syst, Man, Cybern., vol. 20, pp. 404-435, MarCh/April.

Liaw, D.C., and Abed, E.H. (1992). Stability Analysis and Control o f Rotating Stall, IFAC Nonlinear Control System Design, Bordeaux, France, June. Marks, R.J. II (1994). Fuzzy Logic Technology and Applications, IEEE Technical Activities Board, The Institute of Electrical and Electronics Engineers, INC, New York.

Mattson, Jr. H.F. (1993). Discrete Mathematics with Applications, John Wiley & Sons, Inc., United States of America.

Moore, F.K. (1984). A Theory o f rotating stall o f multistage axial compressors: Part I -- Small disturbances & Part II -- Finite Disturbances, ASME J. Engineering for Gas Turbines and Power, 106(2): 313-336, April.

Moore, F.K. and Greitzer, E.M. (1986). A theory o f post-stall transients: Part I Development o f equations, ASME J. Engineering for Gas Turbines and Power, 108(1): 68-78, January.

103 of 136

FUZZY LOGIC CONTROL OF COMPRESSOR SURGE IN A TURBOJET ENGINE MODEL

Moran, M J. and Shapiro, H.N. (1996). Fundamentals of Engineering Thermodynamics, Edition, John Wiley & Sons, Inc., United States o f America. Simon, J.S. and Valavanij L. (1991); A Lyapunov based nonlinear control scheme for stabilizing a basic compression system using a close-conpled control valve. In: Proceedings of the 1991 American Control Conference, pp. 2398-2406.

Simon, J.S. (1993). Feedback stabilization o f compression systems. PhD thesis. MIT. Spang, H.A. III and Brown, H. (1999). Control o f jet engines. Control Engineering Practice 7, pp. 1043-1059, March.

Swaminathan, R., Prasad, J. V. R., Neumeier, Y., and Lai, L. (1997). Combined rulebased model-based control o f compression system rotating stalf AJAA Paper 97-2659j July.

Tanaka, Y. (1997). An Overview o f Fuzzy Logic, Togai Infra Logic, Ihc, Irvine, CA. Treager, I.E. (1979). Aircraft Gas Turbine Engine Technology, 2"^ Edition, McGraw-Hill Inc., United States o f America. von Altrock, C. (1997). Fuzzy logic in automotive engineering. Circuit Cellar INK, Thé computer application journal. Issue
8 8

, November.

White, F.M. (1999). Fluid Mechanics, Forth Edition, McGraw-Hill, United States o f America. Willems, F, and de Jager, B. (1998). Modeling and control o f rotational stall and surge: Overview, In Proceedings 1998 IEEE Int. Conf. Control Applications; 331-3SJ, Trieste, Italy, September. Willems, F and de Jager, B. (1999) Modeling and control of compressor flow instabilities, IEEE Control Systems, 8^18, October.
104 81136

A p p e n d ix A : ADDITIONAL S im u l a t io n D a t a

105 of 136

SURGE CONTROL WITH IGV AND VARIABLE ROTOR GEOMETRY (§.4.1.1) ******************************************************** ********************************************************
Altitude = 0 m Tenipèratüre = 288 K Pressure = 101325 Pa Speed o f sound = 340,174 m/s International Standard Atmosphere Calculations

******************************************************** ********************************************************
Exit Temperature = 296.35 K Exit Pressure = 104263 Pa Inlet Much Number = 0.529141 Exit MacH Number = 0.481507 Subsonic Dif&ser

******************************************************** ********************************************************
Exit Temperature = 309.733 K Pressure Ratio = 1.25354 Inlet Maeh Number = 0.481507 Exit Mach Number = 0.504782 ******************************************************** Burner ******************************************************** Exit Stagnation Temperature = 1290.82 K Exit Stagnation Pressure = 143324 Compressor with IGV Control

********************************************************
Turbine ******************************************************** Exit Stagnation Temperature = 1161.07 K Exit Stagnation Pressure --92585.4 Exit Mach Number = 0.343684

******************************************************** ********************************************************
N o^ le is hot choked Exit Temperature = 1087.91 K Exit Pressure = 101325 Pa Exit Velocity = 342.161 m/s Exit Mach Number = 0.515472 Thrust = 5107.07 N
********************************************************

Converging Nozzle

106 Of 136

ADJUSTABLE IG V TO OPERATE A T DESIGN INCIDENCE ANGLE (§.4.3.2)

International Standard Atmosphere Calculations Altitude = 1000 m Temperature = 281.499 K Pressure = 89856.5 Pa Speed of sound = 336.313 m/s

*************************************4:***4:*****:k********
Subsonic Diffuser
********************************************************

Exit Temperature = 285.21 K Exit Pressure = 91041.1 Pa Inlet Mach Number = 0.356811 Exit Mach Number - 0.327214
********************************************************

Compressor with IGV Control
********************************************************

Exit Temperature = 308.327 K Pressure Ratio = 1.35672 Inlet Mach Number = 0.327214 Exit Mach Number = 0.338921
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

Burner
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

Exit Stagnation Temperature = 1278.2 K Exit Stagnation Pressure = 125373
********************************************************

Turbine
********************************************************

Exit Stagnation Temperature = 1220.16 K Exit Stagnation Pressure = 103504 Exit Mach Number --0.224061
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

Converging Nozzle
* * * * * * * * * * * * * * * * * * * * * * * * * 4: * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

Nozzle is not Choked Exit Temperature = 1155 K Exit Pressure = 89856.5 Pa Exit Velocity = 356.662 m/s Exit Mach Number = 0.52148 Thrust = 7352.37 N
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

107 of 136

SURGE CONTROL WITH IGV AND VARIABLE ROTOR GEOMETRY (§.4.3.3) ******************************************************** ********************************************************
Altitude = 1000 m Température = 281.499 K Pressure = 89856.5 Pa Speed o f sound = 336.313 m/s International Standard Atmosphere Calculations

********************************************************
Subsonic Diffiiser
********************************************************

Exit Temperature = 285.21 K Exit Pressure = 91041.1 Pa Inlet Mach Number = 0.356811 Exit Mach Number = 0.327214

******************************************************** ********************************************************
Exit Temperature = 309.095 K Pressure Ratio = 1.38482 Inlet Mach Number = 0.327214 Exit Mach Number = 0.324002
********************************************************

Compressor with IGV Control

******************************************$*************
Exit Stagnation Temperature = 1278.89 K Exit Stagnation Pressure = 127969
********************************************************

Burner

Turbine
********************************************************

Exit Stagnation Temperature = 1221.3 K Exit Stagnation Pressure = 105820 Exit Mach Niimbér = 0.1978
********************************************************

Converging Nozzle
********************************************************

Nozzle is riot choked Exit Temperature = 1158.02 K Exit Pressure = 89856.5 Pa Exit Velocity = 357.799 m/s Exit Mach Number = 0.52246 Thrust = 7387.29 N ********************************************************

108 of 136

APPENDIX B : A c t iv e C o n t r o l S im u l a t io n C o d e

109 of 136

Màin.ni ***4:4:*4:********************* 4 :****$***
% This file is what the user calls to run the simulation. The user-defined variables are defined in % this module, as well the user can select an inlet, an outlet and the option of an afterburner.
%

% Programmed by Mark Laderman, Ryerson University^ 2004
*****************************************************************************

ciear ail;
V = 120;

h = 1000; N = 6000;

% initial axial velocity thru the engine [m/s] % initial altitude of the aircraft [m] % initial rotor rotation speed [rpm]

O y ^* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

% INTAKE VARIABLES
(^ * * * * * * * * * * * * * * * * * * * * * * * * ^: * * ;|: * * * * * * * * * * * : | : * * * * * * * * * * ) | : * * * * * * * * * * * * * H : * : ( : * * * * * * * : ( : *

Obliqué 1 = 20*pi/l&0;

% initial deflection angle of inlet spike [rad]

% Diffuser variables Diff_Aïéa_in = 1.2;
DifL,Aréâ_ôüt = 1.3;

DiOLLehglb = 0.8;
k -i = 1.4^ R_i = 287; è ^ i - 0;9Q;

% initial diffuser intake area [nU2] % initial diffuser exit area [m'^2] % initial length of diffuser [m]
% ratio of specific heats

% gas constant for air [J/kg*K] % Intake efficiency

% subsonic flight - subsonic_flag = 0 süBsôÜiç_flâg = 0; % toggle for output formatting % super sonic flight - subsonic flag - 1 % subsonic_flag =1; % toggle for output formatting

^

* * * * * * * * :] : * * * * * * * * * * * * * 4 : * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 4 ::|: * * * * * * * * * * * * * * * * * * :|:* M : * *

% COMPRESSOR VARIABLES (for blade sign conventions see Figure 2.4)
^ * * * * * * * * * * * * * * * * * * * * * * * * * ^ :* * M : ^ : * * * * * * * * * * * * * * * * * * * * * * : ( : * * * * * * * * * * * * * * * * * * * * * * * *

k_G = 1.4;

% ratio of specific heat for air R_c = 287; % gas constant for air [J/kg*K] cp_G = fc_c/(k_G;i)*R_G; % specific heat for compressor % IGV initial value
* * * * * * * * * * * * * * * H î * H s * îk * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

Bigv(l) --0;
^ * * * * * * * * * * * *

% Rotor Blade - Stage 1 (NACA 65-series)

^ 4 c ^: { c ^

^ +î} t4 :************* **:|s*H " ******** ****4 :******************* 4 :********

% rotor blade angles and rotor spool speed to start simulation in surge % B_ril = -56.6686; % rotor inlet metal angle [deg] % B_roI = -39.9249; % rotor outlet metal angle [deg] %N = 6.2878e+003; B_nl = -45; B_fôi = -38; % rotor inlet metal angle [deg] % rotor outlet metal angle [deg] 110 Of 136

Main,m
thBta_ri = B_rol - B_rLi; tbe_rl = Ô.Î-; 3S_rl = QM sigma^rl = l ,0-i td^ri ~ O<0ëOi hd^rl = 0,457; Ksh_rl = 1; % rotor camber (turn) angle [deg] % rotor thiclcness-to-chord ratio, tb/c % rotor location of maximum camber-to-chord ratio, a/c % rotor solidity - chord-to-blade pitch ratio, c/s % rotor blade tip-to-tip diameter [mj % rotor hub diameter [m] % rotor blade shape parameter

% rotor design incidence angle thickness correction factor, Kt,i Kti_rl = (10»tbc_rl)/^(0,28/(0,l*tbe_rr0.3)); % rotor design deviation angle thickness correction factor, kt,d Ktd_rl = 6.25*(tbç_rl) + 37.5*(tbc_rl)^2;

***** **** :|t4 :* ïf î

*$***$**

d :* * *:K

$****$*:h***H :***:( :****4 :* * *

% Stator Blade - Stage 1 (NACA 65-series)

B_sil --50; B_sol = 35;

,

% stator inlet metal angle [deg] % stator outlet metal angle [deg] % Stator stagger angle (deg) % stator camber (turn) angle [deg] % stator thickness-to-chord ratio, tb/c % stator location of maximum camber-to-chord ratio, a/c % stator solidity - chord-to-biade pitch ratio, c/s % stator blade shape parameter

sta|_sl(l) = B_sil = (theta_sl/2); theta^sl = B,,sil - B^sol; tbc_si = Oil; m)_sl = 0.5; Sigma_si = i;i); Ksh_si = i;

% stator design incidence angle thickness correction factor, Kt,i =(io*tw,si)'^(D.2B/(p,i+tw_sro.3)); % stator design deviation angle thickness correction factor, kt,d Ktd__sl = g.25*(tbc_sl) + 37,5*(tbB_sl)'^2;

4 : *:K *$**:K **** **$:K *4 = ****** % :K 4 = 4 :**4 ^ ***'H $****:K **** :k********
%BURNER VARIABLES

R_b = 287; k_b = 1,4; cp_b = k_b/(k_b-l)*R_b; qr = 44E6; eff_b = 0,95; ma§s_flow_fuel = 1/42; f = m3S.s_flow_fUeEmaS;S_flow_air; cp_be = 2^Gp_b--çp_ç; Tmax = 1400;

% gas constant for air [J/lcg*K] % ratio of specific heat for air % specific heat for burner
% heat of reaction [J/kg o f fuel]

% burner efficiency % mass flow o f fuel [kg/s] % fuel/air ratio % maximum temperature of burner [K]

m of 136

Màiii.in
% TURBINE v a r ia b l e s

*K :|:H :*******$H :

+M :*****:(:*** *H :****4 :**:IM :*H :*:k*H :+** H :
% Gas constant for air [J/kgK]

H :**** *H :

R_t = i9 4 { ie.t ^ L32; _ ep_t -- kj*R_t/(k_J:-l)i

% Ratio of specific heat for air

%Nozzle (Stator) Blade - Stage 1 Bjnil = 0;B_noi = 72;

4:******$H :*******M :*****$********+

% Nozzle inlet metal angle [deg] % Nozzle outlet metal angle [deg]

(^ :](*************************:{:^:*****:{:***:|:****:;:*:|:**:[(*********:{:*^:****:|:**:j:******^:**
% Rotor Blade - Stage 1
^ * * * * * * * * * * * * * * * * * * * * * * * * * * ;j: ^ : * îl; * * * * * * ^: * * * * Ht * * * * * î|s * * * * :[t * * * * * * * * * * î»5 i|! * îls îj! * * * * *

B^ftil = 0; B_rtol = -64.3521; MêaH_Blâdé_d = 0.483;

% Rotor inlet metal angle [deg] % Rotor outlet metal angle [deg] % Mean blade diameter [m]

(^ **H :**********H :****H :i:************:|:******* ^ :*********:(:***:|t********* :|:*****H t***H t*'A ^ * * * * * * * * * * * * H : * * * * * * * * * * * * * * * * * * * * * * Ht * * * * * * * * * H t * * * Ht * * * * * * * Ht H t * * * * * * * * * * * * * * * * * *

% AFTERBURNER VARIABLES
(^ * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

k_ # = \ m Gp_ab = ^ a B / ( k _ a % - % specific heat for afterburner eff_âfc = Ô;^5; jm ass3dw^eLàb s i/42; % afterburner efficiency % mass flow of fuel [kg/s]

f_ab = tfiass_flow_fliëi_ab/tnass_flow_air; % fuel/air ratio Opabe = 2*ep_ab-ep_t;
( ^ * * * * * * * * * * * * * * * * t K * * * * * * * * * Ht * * * * * * * * * * tit * * * * * * * * * * * * * * * * :[t * tit * * * * * * * * * * * * * Ht * * * :}t * Ht

* * H; ;}j * * * * * Ht * * * * * * * * ;lt * * * * * * * * * * * * * *

tit * * * * * * * tit * * Ht * * * * * * * * * * * * * * :}t * * * * * * * * *

:lt * H: * * * * *

% EXIT NOZZLE VARIABLES
( ^ * * * * * * * * * * * * * * * * * * * * H: * * * * Ht Ht Ht t j: * Ht t}t * Ht * Ht * * * Ht * * * Hs t{t * * * * * * * l b : } : * * * t}: Ht Ht * Ht tit * * * * tit * * * * * * * * *

k_n = 1.4; R_d = 294; ep_n = k_n/(k_h-=l)*R_n; A5j - 0.05; A6J = 0.04;
( ^

% ratio of specific heat for air % gas constant for air [J/kg*K]

% Area of the nozzle at the inlet [m'^2] % Area of the nozzle at the exit [m^2]
Ht * t k H: * * * * * * * * Ht tit * * H: Ht * * * Ht * * Ht Ht * * * * * * * * . * tit * Ht * * Ht

* * * * * * * * * * * * * * * H: * * * * * * * * H: Ht * * * tt: :(t * * Ht * *

% Calculates the ambient conditions at the initial altitude

112 of m

Mâin.m
Àmbient_Gonditiens; % user selects the desired inlet intake^SubsDme^JDififijsBr-i % Low_Supersonic_Intake; % Supersonic_lntake_One_OS;

% subsonic diffliser
% low supersonic intake with normal shock

% supersonic intake with one oblique shock

% the use selects the desired compressor control strategy %Compressor_lGV_Only; % IGV are controlled to avoid stall while maximizing reaction, % deHallers number etc. %Compressor_IGV_Surge; % IGV only are used to actively control surge and stall Compresspr_IGV_Surge2; % IGV and variable rotor geometry are used % to actively control surge and stall %Compressor_IGV_Surge2_dis; % IGV and variable rotor geometry are used % to actively control surge and stall with disturbances Burner; Turbine; % user selects if simulation is run with or without an afterburner % Afterbumer_Yes; , AftérbürneOilb; % user selects exit nozzle type ConvergingJ^Ozzie; % Con Div Nozzle;

j

j

113 of 136

Ambiënt_Cônditions.in
% Calculates temperature [K], pressure [Pa] and speed of sound [m/s] at a user-defined altitude [m] % % Prograninred by Mark Laderman, Ryerson University, 2004

j|3fmt{|'\n')
^ t j j ^ ^ l 'l * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 1 ^

%rint^'\n') iÿrintf('* International Standard Atmosphere Calculations Qjtinti^'W) iprmif('\n')
% Properties of air at standard sea level conditions Po = 101325; % pressure [Pa] To = 288; % temperature [K] àô = 340; % speed of sound [iti/s]

*')

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * ¥ * * * * * * * * * * 1^

k = 1.4 ; R = 287;

% ratio of specific heats % Gas constant for air [J/kg*K]

% troposphere, which extends from sea level to 11,000 m if (h<= 11000) tempuiratio = 1 ^(h/44300); T = Td*tëihpJ;atiQ; % [K] P = Pd*(temp faOd''5\201); % [Pa] % lower stratosphere, which extends from 11,000 meters to 25,000 meters elseif (h > 11000) & (h «= 25000) T = 116,576; % [K] P = 22,65 ^ # p (1,73 - ,000157 * h); % [Pa] % upper stratosphere, which extends upwards Ifom 25,000 meters else T = 141,94 + M 2 9 9 * h; % [K] P = 2,488 * (T /216,6)'^-11,388; % [Pa] end % calculates the speed of sound at h [m/s] a = sqrt(k * R * T); % output results %rintf('\n') %rintf(' Altitude = %g m', h) ^rintf('\n') §)fihtf(' Temperature = %g K', T) l^prinifCVn') ^finif(' Pressure = %g Pa', P) ]^iShff('\n') fprintf(' Speed of sound = %g m/s', a) fj^tf('\n') ^fint^'W) $rmtf('\n')

^ 0 jj|^l**** ************************************************* ***`^

114 of 136

îiitâkè_Sübsonîc_Diffüser.m
^ îf« îH$ H: $ $ -t * H :* * :K* * $ * * * H: 4: * $ * * * * * * * * (H* * * :K* H î $ $ $ * * * :|: * s?: * $ * $ * $ * * * * * * * # :* *

% Subsonic diffuser inlel to be used with flow less than Mach 1
%

% Calculates the exit temperature [K], exit pressure [Pa] and exit Mach number for flow entering % a subsonic diffuser. If the flow entering the diffliser is > Mach 1 the simulation is halted. Flow % separation is monitored and if separation occurs the simulation is halted.
%

% Programmed by Mark Ladennan, Ryerson University, 2004
<y^ * * t:K sjs * * H :* H : * * * * * * * * * * :K* * * î |î * * îJs * * *  * * * * t|: 'A* * * * * * * * * * * * * * * * * * * * * * * *

% tliis module is called by both supersonic inlets and thus a toggle is used to format tire output; % the following heading is printed only if the subsonic_flag = 0 if (subsonic_flag = 0) %rintf('\n')

^jijj^^l****** ************************************************ **l^
^rintf('\n') %rintf('* :^rmtf('\n') %rinl3('\n') Subsonic Diffuser *')

 ^ j i j j ^ i ^ i * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * '^

% calculates inlet Mach number M = v/a; end % verifies the diffuser variables selected by the user are correct (see Figure 2.2 for diffuser geomelxy) if (Diff_Areà_m > Dif^Area_out) %rintf('Error: Subsonic diffuser inlet area is larger then outlet area.'); break; end % Checks for separation in the subsonic flow inlet duct. If separation occurs the simulation is halted. % The upper limit on the divergence semi-angle of the duct cross-section is [(1-M''2)*5deg] % See Equation 2.1 % the radius of the diffuser inlet and outlet are calculated assuming a circular cross-section ri = sqrt(Diff_Àrea_in )/pi; % diftuser inlet radius [m] re = sqrt(Diff_Area_out)/pi; % diffuser outlet radius [ra] % checks diffuser for flow separation if ((0.8*(atan ((re-=.ri)/Diff_Length))) > ((DM^2)*(5/180)*pi)) §)rintf('Error: Separation occurs in subsonic diffuser.'); break; % if separation occurs simulation is halted end % checks Mach number of diffliser inlet flow the user is warned if the Mach number approaches sonic flow if(MS>=l) %fih@('Error: Sonic flow occurs at the inlet of tire subsonic diffuser.ln') break; elseif(M >=0.9) :^'fmtf('Waming: Flow at subsonic diffuser inlet is approaching sonic speeds.W) end % air densjty at hilet - Ideal Gas Law [Pa] (see Equation 2.2) rho = P /(R _i*T ); % mass flow through diffuser (assumed constant) [kg/s] (see Equation 2.3) 115 of 136

întiâkë_Sübsonic_Diffüser.m
dîÉfmâss = Cs#CKJ * R j * t ) ) ) * DÎftAfèâJh-

% diffuser exit velocity [m/s] (see Equation 2.4) Vi = d if ^ a s s / (rho * piitAjeiyqut)! % Calculate pressure at diffuser exit [Pa] - Bernoulli's Equation (see Equation 2.5)
Pi - (V'^2_- v M ) * (riid/2) + Pi

Ti = (Pl/P)*Ti % exit Mach Number M i = v i / sqtt(k_i * R_i * Ti);

% [K] (see Equation 2.6)

% stagnation pressure and temperature
Toi = T*(i+((kJd)/2)*M ^2);

(see Equation 2.7 and 2.8)
% [K]

Pol = P*(i + effi*((Toi/T) = i))'^(k_i/(kj4));-

% [Pa]

% checks Mach number of diffuser exit flow and warns user if flow entering compressor is close to sonic if(M l> = l) lpfmif('Error: Sonic flow occurs at the exit of the subsonic diffuser.') break; elseif(Ml>=a.B5) ^rintf('Waming; Flow at subsonic diffuser exit is approaching sonic speeds.') end % output results 1^fihtf['\n') Exit Temperature = %g K', Ti) f p r i r i t f ( '\ n ') ^fiiiff(' Exit Pressure = %g Pa'j P i) Inlet Mach Number -% g'-, v/a)

#m % \n')
ÇfihïfC
^rintf('\n')

if (§u%80#^ag = 1 ) Diffuser Inlet Mach Number = %g M)
%rintf('\ii')

end ^rintfC ^filitÇ'Vn')
$nntf('\n')

Exit Mach Number = %g '; Ml)

************************* ************************')
fprintf('\n')

lié of 136

Low Supersonic Intake m
% Low supersonic pitot tube intake to be used with low supersonic flow (Mach < 1.4)
%

% Calculates the exit temperature [K], exit pressure [Pa] and exit Mach number for passing tlirough % a nomtal shock at the mouth of a subsonic diffuser. The values after the normal shock are passed % to Intake_Subsonic_Diffuser.m to calculate the flow at the intakes exit.
%

% Programmed by Mark Laderman, Ryerson University, 2004
*****************************************************************************

fprmtf('\n') Q)rintf('\n') %irintf('* i^rintf('\n') %rintf('\n') % inlet Mach number M = v/a; sübsôiàic_0âg = 1; Low Supersonic Pitot Intake *')

% output format toggle see Intake_Subsonic_Diffuser.m for details

% if the Mach number is less then 1 (subsonic) no shock wave occurs intake is a subsonic diffliser if M < l Mfàké_SiibsôhicJ])i&sër; elseifM <1.4 if M >= 1,3 ij)fihtf('Waming: Flow at Low Supersonic Intake is approacliing Mach Limit.') end % Normal shock occurs at inlet (See Equations 2.9, 2.10, and 2.11)

M ^ sqrt((I+((k_i-i)/2) * M^2) / ((k_i*M^2) - ((k_i-I)/2))); %Flow behind the normal shock is now subsonic and the subsonic diffuser module is called Subsonic_Diftuser; % if the flow entering the diffuser is > 1.4 Mach the simulation is halted else :^rintf('Error: Flow at Low Supersonic Intake has surpassed Mach Limit.') break; end

117 of 136

Supersonic Intake Qnë QS.m
% Supersonic intake with one oblique shock and one normal shock % to be used with supersonic flow (Mach > 1.4) % % Calculates the exit temperature [K], exit pressure [Pa] and exit Mach number for passing through % an oblique shock then a normal shock at the mouth of a subsonic diffuser. % The values after the normal shock are passed to Intake_Subsonic_Diffuser.m to calculate the % flow at the intakes exit (See Figure 2.3 for intake geometry).
%

% Programmed by Mark Laderman, Ryerson University, 2004
*****************************************************************************

iprmtfCW)

^^jjjij^'******* ************************************************ *'^
%rintf('\n'j l|)rintf('* Supersonic Intake with One Oblique Shock ^rintf('\n') l¥)nnlf('\n') % inlet Mach number M = v/a) süBsô&icJElag = 1; *')

% output format toggle see Intake_Subsonic_Diffuser.m for details

if M < l % Mach number is subsonic no shock wave occurs intake is a subsonic diffuser îhtake^SübsdiuëjQiffusèri
èiâè

% Oblique Shock % Step Method for theta-beta-mach solution for an oblique shock wave (see Section 2.1.1.3) % first test that the delfection angle is <= 45.5 deg
ifO B|itiuël>=(45,5*pi/l80}

Ô ?rifitÎB('Error; Delection angle of inlet spike is to large.'); break; end % the Mach Angle is uses as the initial guess [rad] (see Equation 2.13)
X = asin(i/M);

% solves theta-beta-mach relationship at 'x = Mach Angle' (see Equation 2.12)
A = ((M*sii^x))^a) = l; B = (^'^2) * (k_i + (cos(2^x))) + 2;

a = 2*cot(x); b = A /B ; fit = (a * b) =iah(Obliqüél); found = Q ; % finds the sign of fx at the Mach Angle if(fe>0.) sign = l; elseif(fs<Q) sigh = Ô ; else fôiihd=i;

118 hi 136

Supersonic Intake One OS.m
getai = x; end % increases the step size S tep = 0.0001; MaxX = pi/2; if (<vfound) while (x < MaxX)
X = X + step;

% Solves theta-beta-mach relationship at 'x4-step' A = ((M*sin(x))^2) % 1; B = (M^2) * ( k j H - (cos(2*x))) + 2; a = 2*cot(x); b = A /B ; Ê C= (à * b) - îàn(Obliquel); if(S = s o ) fôüha= 1; Bétal = x; break; end % value begins as positive - program searches for first negative if (sign) if& < 0 found =1; ieta i = ((x - step) x ) /2 ; break; end end % value begins as a negative - program searches for first positive number if (-sign) if f e > 0 found = 1; Betal --((x - step) + x)/2; break; end end end end if (-found) §)rint('Error: Wave Angie Solver failed'); break; end % calculates temperature and pressure behind the oblique shock (see Equations 2.14 to 2.18) Mnl = M*sin(Bétàl);

^

= sgm((i4{(W -%)*mi/'2)/((içi*Mnr2)-((iy-i)/2)));

M = lVBi2/(sin(Béfàl-Qbiiqnel)); rho_ratio = ((kJ + 1)* Mür2)/(2 + (k J -1) * Mnl ^2);

Pjatio = (1 ^ ((2 * k j)/(k j ^ D) * (Mni^l - i)); 119 of 136

Supèfsonic_Ihtakë_Onë_OS.m
in_rhô_faîiô = i/rhôjfâtiô; X s X + P_tati6 * in_rao_ratiô; p = p * p ja ti0 | % [K] % [Pa]

% flow now pass through a normal shock at diffuser inlet T ^ T * ((i+((2*kjy(k^i+l))* (M''2-l) * a+(2*k_i)/(1tJ+i)*(M'^24))i M - sqrt((i+((l£>i)/2) * / ((k_i*M^2) ((k>i)/2)))i % flow is now subsonic and the subsonic diffuser module is called subsonicfiag = 1 ;SubsoniG_Diffiiser; end

120 of 136

CompressorJ[GV_Sürçè.m
% One compressor stage with variable inlet guide vanes % Optional - variable rotor geomeby % - disturbances % - variable stator geometry % - spool speed control % - degree of reaction or deHaller number control
%

% Programmed by Mark Laderman, Ryerson University, 2004

]^rintf('\n') l^rintf('\n') J^rintfC* ^irintfCVn') ^rintf('\n') % check that axial velocity entering the compressor is subsonic if Ml >= I ^rintf('Error: Compressor inlet velocity is sonic') break; end % for variable rotor blade geometry - stores the values of the changing rotor blade % Rotor_ln_Angle( 1) = B_ri 1; % Rotor_Out_Angle(l) = B_rol; % theta(l) = B_rol - B_ril ;

Compressor with IGV Control

*')

i^ r iiit f i[ '* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * )

% constants used for scaling velocity triangle plotting

Xo = 1 0 0 =
Yo=150; Sc s vi/40; % loads fuzzy logic controller % IGV control for active surge avoidance and active stall avoidance Controller_À --readfis('igv_Surge2'); % spool speed control %Conholler_B = readRs('NSurgeControl'); % controls rotor inlet angle (also can be used for rotor outlet angle control) Controller_C - readfis('RotorlnAngle'); % adjust rotor turn angle %Controller_D = readfis('RotorTurnAngle'); % adjusts IGV to lower error value to zero (used for controlling incidence angles, reaction, deHaller, % deviation angle) %Controller_E = readfis('igv_r); % control loop (if control loop is in main program then comment out this control loop) for j = 1 ; 200 121 of 136

Côiîlpressôr_IGV_SUrge.m
% calculates rotor blade turn angle (if constant this can be removed from control loop)

% Rotor local blade speed @ mid-blade [m/s] u = (td_ri + ii4 f iJ*N*pi/l20; % VELOCITY TRIANGLES (see Sections 2.1.2.2, 2.1.2.3, and 2.1.2.4) % Flow leaving the IGV at the trailing edge (assume flow leaves at blade exit angle) v2 = vi/cos(Bigv(j))| % Stationary frame (absolute) tangential velocity w2 = vi*tan(Bigy(j))i % Subtract the speed of the blade to determine the tangential velocity in the moving frame

vru2 = w2 ^U j
vt2

% Calculate the relative velocity entering the rotor stage = sqrt(vM2 + vru2''2); % Flow angle into rotor blade [deg] Alpha2 = (àlan(vru2/vl))* 180/pi; % Turns air across rotor blade [deg] B_ftl = Alpha2 + îhèlâ_rl; % see Section 3.3 % zero-camber design incidence angle for Rotor Blade [deg] (see Equation 3.12) p_rl = 0.914 + sigma_rP3/16Q; io J l = (((=Alpha2)^p_fl)/(5+46*exp(-2.3*sigrriaJl))) - Q.l*sigina_rl''3*eXp((=Aipha2)-70)/4'; % zero-camber design deviation angle for Rotor Blade [deg] dbjrl = Q;01*sigrtra_rl*(-B_ftl) + (0,74*Csigtriâ_rl''L.9) + 3*si]^â_rl) ^ (B_fti/90)^(1 . e t 'h l ,09*sigma_fi); % slope factors for Rotor blade, n (see Equation 3.13) n i l = Q;OM*slgma_fi - OM - (((-AlpM2/90)^(ii^l J*sigm O l)) /(W $ 0 ,4 3 * sig m a il))i
f f l j i = (0 .1 7 - 0; 03a3*( - i Jt i / i oo) + o .i7 * ( - B j t i/io o ) -

0.8f(-BJti/lO0)^3)); % calculates design incidence angle developed from Lieblein's design incidence angle correlation [deg] % (see Equation 3.11) idesign_fi(j) =Ksh._ri * Kti_rl * io_rl + (il_rl * theta_ti); % calculates design deviation angle developed from Lieblein's design incidence angle correlation [deg] % (see Equation 3.17)
ddesignjrlQ) = E sh_rl * Ktd_ri * do r! f (m _ri * theta_rl);

% calculates incidence angle for Rotor blade [deg] i_rl(j) = B ril - Alpha2; % calculates the deviation angle for Rotor blade [deg] a _ rlQ ) s B _ f ô l - B _ rtl; vf3 =vl/c6s(B_rtl*pi/180); VTti3 = vl *tan(B^l *pi/l 80); w3 = u +Vfu3; W3(j) = w3; w3w2(i) = w3-w2; 122 of m

Compressor IGV Süfgc.m
%flow angle into stator blade [deg] Alphaâ = (atan(w3/vl))*i80/pi; v3 = v` l/eos(Alpha3*pi/180); % velocity exiting the stator blade [rad] Àlpha4 = (Alphas - theta_sl)*pi/l80; v4 = vl/cos(Alpha4); w4 = v l * sin(Alpha4); % calculates Reaction (see Equation 3.21) ReactionQ) = 0.5 - (vl/(2*u))*(tan(B_rtl*pi/180) + tan (Bigv(j))); % calculates DeHaller Number (see Equation 3.23) DeHallerQ) --vr3/vr2;
% calculates mass flow [kg/s] (see Equation 2.54)

massjflow(j) = ((PI *vl *pi)/(4*R_c*Tl))*(td_rl^2 - hd_rl^2); % calculates torque [Nm] (see Equation 2.53) TôiqüèÇ) = m àssjlow0)*((iajl+hd_f l)/2)*Cw2-w3); % power required [J/kg] (see Equation 2.55) pôweï(i) = (TôfqüeQ)*2*pî*N)/(60*mâss_flow(j)); % staticjemperature across stage [deg C] This = T1 + (vV2)/(2*cp_c)i T^o2 = %15 - power(3)/cp_Qi

T2 0 ) =

- (V3''2)/(2*0P_«);

%pressure ratio (see Equation 2.58)

W ) = (to#/roiS)''(k_'$/(k_0-i));
y2=v4i m = V#qA(L.G * * T2(i))i

% variable used for plotting graphs countQ)=j; % error term inputted into FLC - rotor incidence angle error error_rl(j) = (idesign_rl(]) - i_rl(j)); % the error is bounded to be with in the range of [-10 to 10] if error_rl(j) > 10 error_rl(j) =10; end if errorjrlij) < -10 èrrôr_rl(j) = -10; end % error term inputted into FLC - rotor deviation angle error effior^dQ) = (ddésign_rl(j) - < y i(j))'; %the error is bounded to be with in the range of [-10 to 10] ifën:Qr^d(i)> 10 error_â(j) =10; end If brrQr_d(j) < -10 123 of 136

Compressor IGV Sürge.m ërr6 r_a0 = -lO;
end % used for surge controller PMQ " vl/ii; PsiQ) = (w3-w2yu; PsL&tarQ) = ((J'hi(])'^2)/3) + 0.3; error_Psi(i) = Psi_Staf(j) - Psi(j); % error is bounded between [-1 to I] If error_PsiQ) > 1 errorPsiO) =1; end if errorPsiO) < si errorJPsiQ) = -1; end

% Mass Flow Coefficient % Work Coefficient % Surge Margin Line (compressor characteristic) % Work coefficient error used for FLC

%% Uncomment for spool speed control based on the ratio of the current spool speed to the maximum %% spool speed and the current value of the work coefficient error %% maximum allowable rotor speed [Mach] %Mmax_U = 0.95; %al =sqrt(Tl*k_c*R_c); %uu = Mmax_U*al; %Nmax --(uu*60)/(pi*td_rl); %R_NMax = N/Nmax; %% calls the FLC controller and updates the spool speed % N = N + 100*(evalfis([Phi(i) R_NMax en'or_PsiQ)], ControUer B));

% DISTRUBANCE (uncomment to add disturbance)
^ * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * H s * î|s* * * * * * * * * * * * * * * * * * H î * * * * * * * * * * * * * * * *

%% add disturbances at time step 50 (rotor speed is increased and axial velocity is decreased %if j = 50 % N = N + 500; % vl = vl - 10; %end %N_Holder(j) = N;
^ * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * :(:* * * * * * * *

% calls the FLC and updated inlet guide vane blade angle [rad] based on the rotor incidence error % and the work coefficient error Bigv(j + 1) = Bigv(j) + ((evalfis([error_rl(j) error_Psi(j)]j Controller_A))*pi/180); % the IGV is bounded ifBigv(j+l)<=Q.5 Bigv(j+l)==a.5; end % FLC - rotor angle is adjusted based on the rotor incidence error RdtorJfmAiigie(j+l) = Rôtôf_In_Aiiglé(j) + ((evàlfls(iertôfJ l(j)], Cdiitrollef_C)))/2; B ^ l = RdtofJi^yigie(j+1); % FLC - rotor outlet angle is adj usted based on the deviation error and the work coefficient error R ôîôtPlttA ngiê(j^i) = Rüfôf_Oüt_AiiglèQ) - ((evâlfis([éffôf_d(î) êffÔLPsiQ)], Côhffôllêf_A)))/2;

iMôfiâê

Compressor ÎGV Sürge.m
B_roi =R otor_Qut_Ajigle(j¥i); thetaü^ï) = B_rol - B jr il;

% the following code is used to plot the velocity triangles and blade geometry

***:J i*îjî

*:K'A ^

***$$ *

**

newplot axis([0Xo*2.5 OYo+Sc]) texti^o/4, Yowl/(4*Sc),'IGV, 'FontWeightVBold', 'HorizontalAIignment', 'center') textpCo/4,2*Yo/3wl/(4*Sc),'Rotor', 'FontWeight','Bold', 'HorizontalAIignment', 'center') text(Xo/4,(Yo/3)wl/(4*Sc),'Stator', 'FontWeight','Bold','HorizontalAlignment', 'center') %drawvl line(pCo Xo], [Yo Yo-vl/Sc],'Color','r', 'LineWidth',2) lexipCo, Yo-vl/(2*Sc),'v_l ','HorizontaIAlignment', 'right') linè(pCo Xo], [2*Yo/3 2*Yo/3-vl/Sc],'Color','m', 'LineWidth',2, 'LineStyle', ':') linêqXô X6], [Y6/3 (Yo/3)-vl/Se],'Col6r','m', 'LinèWidth',2, 'LinèSîylè', ':') % draw w3 linè(ÇK6 Xo + w3/Sc], [(2*Yo/3)-vl/Sc (2*Yô/3)-vl/Sc],'Color', 'b','LineWidth',l, 'LineStyle', '-.') % draw v2 rme([Xo Xo+w2/Sc], [Yb Yo-vl/Sc], 'Colôî','r','LinéWidth',2) text((2*XQ+w2/Sc)/2, Yq-v1/(2*Sc),' v_ 2 ','HbrizQhtalAlighmeiit', 'left') iineÇpÇo Xb+w2/Sc], g*Yo/3 2*Yb/3-vl/Sc], 'Cbior','r','LirieWidth',2) iihedXb Xb+w2/Sc]i [Yo/3 (Yq/3)-v 1/ScÎ, 'Colbr','b','LméWidth',l,'LmeWe', '-·') % draw w2 line([Xo Xo+w2/S6]i [Yo-vl/Sc Yc-vl/Sc]i 'Colbr';'r'i'LihéWtdth'i2) % draw u lke([X 0 ^w 2 /Sc Xo^wl/Sc-^Sc]; [2*Yo/3-yl/Sc 2*Yo/3-vl/Sc],'Color's 'r's'LineWidthSl) textX (Xb^w2/SG)-u/(2*Se)j 2*Yo/3 - (vl/Se) s'u'; 'HorizonWAlignment's 'center's'VorticalAiigmnent's iing([Xo+vv2/§e Xo+w2/Se-u/Se]i [(Y o /3 )-v 1 /S g (Yo/3)-vl/§G]s'Gpl0r'i 'b's'LineWidth's I s'Lin@$tyk\ '-·') % draw vr2 line([Xb-t-w2/Sc-u/Sc Xo], [2*Yo/3-vl/Sc 2*Yo/3],'Color', 'r','LineWidth',2) text( (Xo+w2/Sc-u/Sc+Xo)/2,2*Yo/3-vl/(2*Sc) ,'v_r_2 ', 'HorizontalAIignment', 'ri^t') line([Xo+w2/Sciu/Sc Xo], [(Yo/3)-vl/Sc Yo/3],'Color', 'b','LineWidth', 1,'LineStyle', '-.') % draw vr3 line([Xo Xo+vru3/Sc], [2*Yo/3 2*Yo/3wl/Sc],'Color', 'm','LmeWidth',2) line([Xo Xo+vru3/Sc], [(Yo/3) (Yo/3)wl/Sc],'Color', 'r','LineWidth',2) text((Xo+Xo+vru3/Sc)/2, (Yo/3)wl/(2*Sc) ,'v_r_3 ', 'HorizontalAIignment', 'right') % draw v3 line([Xo Xo + w3/Sc], [2*Yo/3 (2*Yo/3)wl/8c],'Color', 'b','LineWidth',l, 'LineStyle', '-..') line([Xo Xo + w3/Sc], [Yo/3 (Yo/3)wl/Sc],'Color', 'r','LineWidih',2) text((Xo+Xo + w3/Sc)/2, (Yo/3)-vl/(2*Sc) ,' v_3', 'HorizontalAIignment', 'left') % draw v4 line([X6 Xo + w4/Sc], [(2*Yo/3) (2*Y6/3)-vl/Sc],'C61or', 'b','LiheWidth',l, 'LineStyle', '-.') linè([Xô X6 + w4/Sc], [(Yô/3) (Yô/3)-vl/Sc],'Côl6r', 'm','LinèWidth',2) îèxt((Xô+Xô + w4/Sc)/2, (Yô/3)-Yl/(2*Sè),' v_4', 'HôHzôhtàlAftgnmèhl', 'left') % draw u iinë([Xb+vfu3/Sc X6+Vru3/S6+ü/Sc], [(Y0/3,)-vl/Sc (Y0/3)-Vl/Sé],'Cbloï', 'r','LinéWidth',2) text(CXb+vru3/Sc+ti/(2*Sc)), (Yb/3) - (vl/Sc) ,'ü', 'HorizOhtalAlignméht', 'centêf','Vériicàl/yigiiment',

I

| ! j i
j

! } | i

'Top')'
% plot blades %1GV lihë([2*Xo 2*Xo]s [Yo Yo-(vl/SG)/2]s'Color's'k's 'LineWidth's3)

:
I ! ^

125 of 136

Compressor ÏGV SUfge m
luiè([2*X6 2*Xô (w2/Sê)/â], [Yô-(vl/Sç)/2 Yô-(vi/8ê)],'ÇôlôrYk'; 'LinèWtdlji',3) % Rotor liiie([2*Xo - (u/(2*Sç)) 2*Xo ^ (u/(2*Sc))], [2*Yo/3-(vÎ/Sg)/2 2*Yp/3-(vi/SG)/2],*GôloïVr`i 'LaieWidtH'àJ

2*X8 + (u/C2*8ç)KSç4)].

a*YW;(yy;ç)/24^§W)],

'èolot'iYi 'LineWidtii'ji) iiiie([2*Xo + (u/(2*Sc)) 2*Xo + (u/(2*Sc))-(Sc/3)]i [2*¥o/3-(vl/âc)/2 2*Yo/3-(vî/lSc)/2-(Sc/3)î j'ËôiorVi'i 'LineWldtk'ii) Ime([2^Xo 4(vi/(2*SG))*tan(B_rii*pi/l80) 2*Xo]; [â'+Yo/S 2+Yo/3<vï/SG)/3]/GoiorYk\ 'LmeWidtli%3) lme([2*Xo 2*Xo + (v 1/(Ê*Sc))*tan(B_ro 1*pi/180)]; [2*Yo/3-(vi/ËG)/â 2*Yo/3'(vl/Se)]j'CoiorVk`5 *LmeWidth'iâ) % Stator
(ine([2*Xo - (vl/(2*SG ))*tan(B_sil*pi/l80) 2*X o], [Yo/3 Yo/3<vl/SG)/2]j'GolorVk`, 'LineWidth',3) lme([2*Xo 2*Xo + (vl/(2*SG))*tan(B_sol*pi/l80)j5 [Y o/3 < v 1/S g)/ 2 Y o/3< vl/S c)]/eolorV k `,

'LineWidth'J) % Captures image for future viewing Movie_TrianglesG) =getframe;

end % end of control Loop % output results ^riiitÇV) Exit Temperature = %g E', T2(j)) ^rintfl;'\n') #fintf(' #mtf('\n') i^iinffC ®fittff('\n') 0fhlt%' prifit#('\n') ë m tW ÿtifltf('\n') Pressure Ratio = %g\ Pf(j)) InletMach Number = %g M l) ExitMach Number = %g \ M2)

% graph plotting ftgure(2) plot(Bigv) grid on xlabei(*Time Step`/FontSize',-12i'FontWeightVbold'j'FontNameVTimes New Roman') ylabel('lGV Angle (rad)',*FontSize'j2,'FontWeight','boldVFontName'tTimes New Roman') title('Change in IGV Angle Change', 'FontWeight','bold','FontSize', 16,'FontName','Times New Roman') figure(3) plôRcôühl, idèsi^_rl, côüh^i_rl,c6üht,èrrôr_rl) gridôh 3cIàbèl('Timé Stép'/F6mSizè'G2/FohtWëightY'bold'/F6hmàihe'/Times New Roman') ylabël('Angle (dèg)'/FôntSize',12,'FôntWéight','bold','FontNiaïne','Times New Roman') titlé('Ihcidéhcé Angles', 'FontWéight'/bôld'/FbntNainê','TimêsNéw Rbïnâh','FontSize',16) h = iëgênd('i*_','i','Error', 1); Ggüré(4) plot(Rdtbr_ In_Ailgle) mbWCTitne Sfep'3FdnfSizë'àlYFonfWeight';'bbld','Fdn^ i2 è o fl3 fi

New RdihW)

Compressor IGV Surge m
ÿlàbèl('Rôt6r Inlet Angle (âèg)^TônlSizé',12;FontWeight',T36M','FôntNàmè','Timès New Roman') title('Change in Rotor Inlet Angle', 'FontWeight','bold','FonfName','Times New Roman') grid on figure(6) plot(Rotor_Out_Angle) xlabel('Time Step','FontSize',12,'FontWeight','bold','FontName','Times New Roman') yIabeI('Rotor Outlet Angle (deg)','FontSize',12,'FontWeight','bold','FontName','Times New Roman') title('Change in Rotor Out Angle', 'FontWeight','bold','FonlName','Times New Roman') grid on

fori = 1:1400 x = i/1000; y(i) = 0.33*x^2 + 0.35; z(i) = 0.33*x^2 + 0.30; ccount(i) = x; end figure(8) plot(ccount,y, ccount,z,Phi,Psi) grid on axis([0 1.4 0 1]) xIabel('Mass Flow CoefiScient, \Phi','FontSize',12,'FontWeight','bold','FontName','Times New Roman') ÿlàbel('W6rlt Côèfficiènt, \Psi','F6hlSizè',12,'FoiilWèighï,'bèld','F6ntNamê','Times New Roman') title('Compressor Characteristic', 'FontWeight','bold','FontName','Times New Roman','FontSize',16)
% figürê(9)

%plot(count,W2,count,W3,coimt,w3w2) % grid on % g = legend('w_2','w_3', 'w_3-w_2', 1);
figure(lO)

plot(Phi) xlàbelÇ'Tühé Step','F0ntSizê',12,'FontWéight','bôld','FohtNàine','Times New Roman') yiabel('Mass Flow Coefficient, \Phi','FontSize',i2,'ÎFontWeight','bold','FonlName','Times New Roman') title('Change in Mass Flow Coefficient' » 'FontWeight'/boW\TontNmne','Times New Rom_anA'FontSize',16) grid on
fig u re(ll)

plot(Psi) xlàbél{'Timé Stép','FontSizé',12,'FôntWeight','bôld','FônlNâmé','Timés NeW Roman') yiabel('Work Coefficient, \Psi','FontSize',12,'FontWeight','bold','FontName','Times New Roman') title('Change in Work Coefficient' ; 'FontWeight'i'bold'^'FontName'j'Times New Roman'i'FontSize',! 6) grid on figure(12) plot(error_Psi) grid on xlabel('Time Step','FontSize',12,'FontWeight','bold','FontName','Times New Roman') ylahel('Error in \Psi';,'Font$ize';12,'FontWeigbt'/bold';'FontName','Times New Roman') title('lrrOr Value', 'FOntWeight','bold','FonlName','Times New Roman','FontSize',16) figure(13) plot(count, ddesign_rl, count,d_rl,count,error_d) grid on xlabel('Time Step','FontSize',12,'FontWeight','bold','FontName','Times New Roman') 127 of 136

Compressor IGV Surge m
ÿlàbèlCAngle (dèg)VFôiitSizè',12,'F6nlWèigM','b61dVFôntNàmèVTimès New Roman') title('Deviation Angle', 'FontWeight','bold','FontName','Times New Roman','FontSize',16) h = legend('\delta*_'i'\delta'i 'Error_\delta', 1);
figiire(l4)

piot(N_Hoider) xlabel('Time Step','FontSize', 12,'FontWeight','bold','FontName','Times New Roman') ylabel('Rotor Speed (rpm)','FontSize',12,'FontWeiglit','bold','FontName','Times New Roman') tiüe('Change in Rotor Speed', 'FontWeight','boId','FontName','Times New Roman') grid on figure(15) pIot(Reaction) grid on xlabei('Time Step','FontSize',12,'FontWeight','bold','FontName','Times New Roman') yIabel('Reaction','FontSize',12,'FontWeight','boId','FontName','Times New Roman') titIe('Dégreë of Réaction', 'FontWeigM','bdId','FdntSize',16,'FôntNàmë','Times New Rôïnan') figure(16) plot(DeHaIIer) grid on xlabel('Time Step','FontSize',i2,'FontWeight','bold','FontName','Times New Roman') ylabel('DeHalier Number','FontSize', 12,'FontWeight','bold','FontNameVTimes New Roman') tillê{'Chàngè in DèHàllêf Number', 'FontWêigbt','bold','FôntNâme','Tunes New Rômân','F6ntSizè',16)

128 Of 136

Bürnèr.in
(y^ $ * îl*. $ *
* 4= 4= * 4:4= * 4= 4:4= * 4= 4= 4t iH 4= 4= 4= 4= 4= 4= 4= 4= 4=$ 4 * >= K4= * :!=:[=4= 4= 4= * 4* 4= 4= 4= 4= 4= 4^ 4^ 4:4; 4^ 4^ 4= 4i 4s 4^ 4:4= $ $ 4:4= 4= 4= 4= 4=4= * 4: * $ 4= 4=

% Burner - calculates the stagnation temperatnre [K] and pressure [Pa] at the burner exit
%

% Programmed by Mark Laderman, Ryerson University, 2004
(y^ * ')( 4 * * 4 :4 :4 (* :|(* 4 :* 4 :$ * :|( :|( :|( 4 c $ 4 :* 4 ::k 4 :* :K * * :k 4 ( :H :K * * :K 4 « 4 ( 4 ( :k 4 :4 f :H * * 4 :$ * 4 :* 4 ( 4 ( :K 4 « 4 :* 4 f :k * $ * 4 ( 4 :4 ::K * :K * 4 ::K * 4 (4 :4 (* 4 :$

% calculates the stagnation temperature [K] and ])tessui-e [Pa] at the burner exit %(see Equation 2.59 and 2.60) To3 = (eff_b*ï*qr + cp_c*To2)/((l+f)*cp_be); Po3=pi_b*Po2; % checks that the burner temperature is below the maximum specified value if To2 >= Tmax §)rmtf('Error; Engine overheating at compressor outlet'); break; end % output results %fihtP['\n')

********************************************* ***********)
^nntf('\n') ^rintf('* ' Burner *')

'^rint^*********************** ************************** ********')
%rmtf('\n') ^riiitfÇ Exit Stagnation Temperature = %g K'; To3) ^riht^'W) |[3rintf(' Exit Stagnation Pressure = %g'-, Po3) ^rbtfCW) :^rîntf('\n')

^rintfC********************* ************************* **********')
^rintf('\n')

m o f 136

Türbinë.m
% Turbine - One stage with nozzle (stator)
%

% Programmed by Mark Ladennan, Ryerson University, 2004

% velocity triangles (see Compressor) To3Û = To3| %[K] Po30=Po3j % [Fa] v30 --V2; alphaSO = 0; va30 = v3.0*cos(alpha30); va35 = va3,0; alpha35 = B_no 1*pi/l 80; v35 =và35/êos(âlpM35); VÜ3S = V35*sin(àlphà3S)'; WÜ3S = vu35 - U; B35 = atan(wu35/Va35); w35 = sqrt(wu35''2 + Va35''2); va4Q = va35; M o = B _ m i* p i/# ; w4Ô = va40 / Gos(B4Q); wu40 = w40^siit(B40)] vu40 = wvi40 4iy; aigha40 = atan(yu4Q/ya4Q)i v4Q = sqrt(vu40''2 + va40^2); % Assume axial velocity is constant [m/s] % gas entering nozzle row [m/s] % angle of entering gas % axial velocity of entering gas [nt/s] % axial velocity entering rotor [m/s] % air turn by nozzle [rad]

% exit angle [rad] % exit velocity [m/s]

% maximum velocity in the stage is the absolute velocity at the nozzle exit (stage 35) % calculate Mach number at nozzle exit ho30 = op t * To30; ho35 = ho30; li35=ho35--v35^2/2; T35 = h35/cp_t; a35 = sqrt(k_t*R_t*T35); M35 = v35/a35; % monitors turbine flow speeods if M3 5 >= I ^riiitf('Error: Turbine flow speeds are sonic.'); break; elseif M35 > .90 %)fihtf('Waming: Turbine flow speeds approaching sonic velocities.'); end % work done by turbine (must be greater then work required by the compressor) w = y*(vu35' - yu40); %(Kj/kg) 130 of 136

Türbihè.ni
ho4Q = hp30 - w; tp4Q = ho4Q/epJPo40 = Pp3Q / ((Tp30/rp40)^(k_iy(kJ-î)));

Pro a Po3Ô/Po40; Reaction_t a 0.5 - (va3D/(2*U))*(tan(B40)+tan(alpha35)); h40 = ho40 =v40''2/2; T40 = h40/cp_t; To4 = To40; Po4 = Po40; V4 = v40; % output results 3^rintf('\n') ]^jnnff('\n') :^rmtf('* :^natf('\n')

Turbine

*')

********************* *********************"*'****') lÿiiQtÇ'W)
1$mltf('\n') Q)rmt^' Exit Stagnation Temperature = %g K.\ Tq4Ô) ^rintÇ'Va') :^riûtf(' Exit Stagnation Pressure = %g', Pp4Q) fprintf('\u') ^rintf(' Exit Mach Number = %g\ v40/sqrt(k_t * R_t * t40))^rmtf('\n') ^rintf('\n') i^rintf('************** ************************** ****************') ^rmtf('\n')

131 oï 136

Aftèrbürnër_Nô.m
% Afterburner - NO % The stagnation pressure and temperature at the turbine exit is equal to that at the nozzle entrance
%

% Programmed by Mark Laderman, Ryerson University, 2004 To5 = To4; Po5=Pc4; V5=V4;

132 of 136

Aftèrbürnèf_Yës.m %****#*******************************»**********************+**************»**
% Afterburner - YES % Engine contains an afterburner (see Section 2.1.3 same as burner calculations) % % Programmed by Mark Laderman, Ryerson University, 2004

To5 = (eif_ab*f_ab*qr + cp_t*To4)/((l+f_ab)*cp_abe); Po5 = pi ab * Po4; % output results i^rintf{'\n')

% [K] % [Pa]

^ j ^ ^ ^ '* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 1 )

fprmtf('\n') fprintf('* %rintf('\n')

After Burner

*')

^j^jj^^t**^** *:ic^:*4;*4:**;l:******^*:ic*:{:********************************)
:Çiiinlf('\n')

$rmy('\n')
Exit Stagnation Temperature = %g K', Tô5) ^rmtf(' Exit Stagnation Pressure = %g', P65) ^ri&tf('\n') f^rmtf('\n')
^ niitf('\n ')

^jpijj^j^*********************************************************»^

133 0Ï136

C onverging Nozzle m
% Converging Nozzle
%

% Programmed by Mark Laderman, Ryerson University, 2004
0^

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

^rmtf('\n')

^j^^^I*************** ************************************ *****')
Converging Nozzle *')

# W ('\n ') ^rintff* SrifttftV) %rintf('\n')

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * >^

P5 s 1.2*P; %(Pa) T5 = To5 (V5^2)/(2*cp_n);% stagnation pressure Po5 = P5*{Ta5/TS)'^(k/(k=l));. % nozzle choke condition (see Equation 2.19) F5_star = P'o5*(2/(k_n+I))''(k_n/(fc_n-I)); % if nozzle is choked ifP5_slàr>P l^rin{f('\n') %fihff(' Nozzle is choked') P6 = P5_staf; T6 = To5*(2/(fc_n4-l)); V6 = sqrf(l^ * R j * T6);else % if nozzle is not choked Jÿrmtf(' Nozzle is not choked')

N=Pi
T6 = Tô5*(F6/Po5)''((X_n4)/k_n)i V6 ^ Sqrt(|*(tt-T6)*CpJI); end M6 = V'6/sqid(k_ii*R_ri*T6)j % Calculate Thrust Thrust = (F6-P)* A 6 ji + mass_fldW-air*((l + Q*V6 - v);
^rmtf('\n') fprmtf(' ^rintf('\n') ^rintf(' %rmtf('\n') fiihtR ' %nntR"\n') 4)rintf(' $rlntf('\n') fprifltfC ft>rifitf('\n') %riatf('\n') Exit Température = %g K', T6) Exit Pressure = %g Pa', P6.) Exit Veidoity = %g m/s', V6) Exit Maeh Number Vog\

M6)

Thrust = ?/og N', Thrust)

134 of 136

Con Div Nozzlê m
0/^ $ * * $ * * * * * » H: * *

A - Hf H: 4 :

$

* # : H: H« *

: ! = : ! : * : { : * * * * :(: * :K * * :K

4 : :K * *

A'*

H« : K * * * * * $ 4 : * * * * * * * * : ! : * *

% Convergijig-Diverging NozzJe % Thnist is calculated assuming throat is always at critical sonic area % and that no shock occurs in nozzle % % Programmed by Mark Laderman, Ryerson University, 2004

1ÿrmtf('\n') ïprintf('\n') ^rintfC* Converging-Diverging Nozzle *') ^rintf('\n') ]^rintf('** ******************************************** **********') %rmtf('\n') % calculates temperature [K], pressure [Pa] and Mach number and nozzle enterance % (see Equations 2.27 and 2.28) V 5=V 4; %(m/s) IS s Tg5 - (V5''2)/(2*ep_h); P5 = P65/((T65/T5)'Xk_h/(k_h-l))); MS = V5/sqrt(R_h * k_h * T5); % Critical tliroat area [m^2] (see Equation 2.29) A_star = A5jy((l/M5)*((l+0.5*(TyaU)*M5^2)/(0.5*(Ts^h+l)))^(0.5*(kya+l)/(iyi-l)))i % step solver is run to find the nozzle exit Mach number using an initial guess of M = 1 % (see Equation 2.30) M_éKit=i-; Error = ((i/M _0xiO *((W :S% jh-l)*M _W rW ^#*(kjf;i)))'xo,g*(K _n4)/(kji]-i)));
A ratiq = A8jn/Ajstar;

if(A j_n > A_star) while (A ratio - Error) > 0,001 Mjexit = M_exit + O.OOi; Errors ((i/M_exit)*((l+0.5*(k_n-l)*M_exit''2)/(0.5*(k_n+l)))^(0.5*(k_n+l)/(k_n-l))); end % simulation will halt if the nozzle exit area is smaller then the critical throat area elseif (A6_n <= A_star) lprmtf('ETTor; Nozzle exit area is smaller then thr oat area.'); break; end M5 = M_exit; % exit temperature and pressure (see Equation 2.31 and 2.32) T6 = To5/(l+((k_n-l)/2)*M6''2); P6 = P65/(T65/T6)''(k_n/(k_ii-l)); V6 = M6*sqS(k_h*R_h*T6); % calculates engine thrust (see Equation 2.26) Thrust = (P6-P)*A6ji + niass,jlOw_air*((l + Q*V6 - v);

E)rtntf('\n') IpriiitfC

Exit Temperature = %g K', T6) 135 of 136

C oh_D lv_N ôstzle.m . iÿrintf('\n') lÿrîütfC Exit Pressure = %g Pa\ P6) Exit Velocity = %gm/stV6) %Àrtf('\u') %rintf(' j$rmtf('\n') iprmtil' i$rintf('\n') iprintfC fprintf('\n') ^rintf('\n') %irintf('\n') Entrance Mach Number = % g\ M5) Exit Mach Number = %g\ M5) Thrust = %g N'j Thrust)

fprttttfCV)

136 of 136

