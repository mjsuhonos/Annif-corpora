"B.\ ~s-~ 2. i't2_
\\"'-.

AN INTEGER-N FREQUENCY
SYNTHESIZER FOR MEDICAL IMPLANTABLE DEVICES
by

, Fl~

7};72.

~J

Nima Haghighi
( B. Eng, Ryerson University, 2005 )

A thesis presented to Ryerson University in partial fulfillment of the requirements for the degree of Master of Applied Science in the program of Electrical and Computer Engineering

Toronto, Ontario, Canada, 2009

© Nima Haghighi 2009

PROPIMV OF

RYm&9N UtttvmstTY LIB"AAV

An Integer-N Frequency Synthesizer for Medical Implantable Devices
Master of Applied Science, 2009

Electrical and Computer Engineering, Ryerson University

Abstract

This thesis proposes an Integer-N frequency synthesizer in TSMC 0.18 J.lm technology. The design is aimed for MICS(Medical Implantable Communication Services)devices operating at 402406 MHz. A low phase noise, wide frequency range Quadrature Voltage Controlled Oscillator (QVCO)has been designed and simulated. The simulated phase noise
@

160KHz offset is -100.3

dBc/Hz with the power consumption of 0.9 mW. This design addresses the small size, low phase noise and low power requirements for the Implantable devices. A wide frequency range Source Coupled Logic (SCL)32/33 prescaler divider has been designed. The Program counter and Swallow counter have been implemented in Verilog-A which allow a division ratio of 2690 from the output of the QVCO. A phase frequency detector based on a modified TSPC D-Flip Flop is designed, which leads to a faster response time. The phase frequency detector, the charge pump, and the loop filter would consume 0.5 mW power. The total power consumption of the synthesizer is at 4.6 mW with 2% steady state settlement time of 160 J.lS.

111

Acknowledgements
I wish to express my profound and sincere gratitude to my supervisor, Dr. Kaarnran Raahernifar, for giving me the opportunity to work with him and under his supervision. I am deeply indebted to him for his invaluable guidance, insightful discussions on literature survey, and generous advice on research and non-research matters, for providing me the assistance and resources throughout my entire Master's program. I am much indebted to his kind sharing of his expertise and his wise advice that have been all invaluable. His continuous encouragement and belief in me were vital in the advancement of my graduate career. For all this and more, I gratefully thank him.

I would also like to thank my thesis committee members, Dr. Lev Krichian, Dr. Vadim Gurkov, and Dr. Farah Moharnrnadi, for reading the thesis, and providing helpful comments. Their help and support transformed this thesis in value and quality in a short period of time.

Finally, I am deeply thankful to my family for all the things they have done for my sake. I am grateful to my parents for their unconditional support, constant encouragement, and unflinching faith in me throughout my whole life. Without their constant support and encouragement this thesis would not have been possible.

I dedicate this thesis to all who went through several difficult and challenging steps in their lives, but never quit. They are the achievers.

lV

Table of Contents
AUTHOR'S DECLARATION ............................................................................................................. ii Abstract. ................................................................................................................................................iii Acknowledgements .............................................................................................................................. iv Table of Contents .................................................................................................................................. v List of Tables ...................................................................................................................................... vii List of Figures .................................................................................................................................... viii List of Abbreviations ........................................................................................................................... xi Chapter 1 Introduction .......................................................................................................................... 1 1.1 Motivation ................................................................................................................................... I 1.2 Objective ..................................................................................................................................... 3 1.3 Contributions .............................................................................................................................. 3 1.4 Organization ............................................................................................................................... 5 Chapter 2 Literature Review ................................................................................................................. 6 2.1 A Brief over look of Different synthesizers ................................................................................ 6 2.1.1 Direct Analog Synthesizer (DAS) ....................................................................................... 6 2.1.2 Direct Digital Frequency Synthesizer. ................................................................................. 7 2.1.3 Phase Locked Loop Frequency Synthesizers ....................................................................... 8 2.1.4 DLL- based Frequency Synthesizer.. ................................................................................. ll 2.1.5 Multi Loop PLL Frequency Synthesizer. ........................................................................... 13 2.1.6 Comparison of different Synthesizers ................................................................................ 13 2.2 Different modulation and synthesizer schemes for MICS devices ........................................... 14 2.2.1 Pseudo-open loop direct modulation ................................................................................. 14 2.2.2 Surface Acoustic Wave Synthesizer .................................................................................. 16 2.2.3 Four Stage differential ring QVCO .................................................................................... 17 2.3 The proposed design of Integer-N Synthesizer. ........................................................................ 19 Chapter 3 Design of a QVCO for the Integer- N, PLL Synthesizer. ................................................. 21 3.1 Analysis of the proposed QVCO .............................................................................................. 21 3.2 The small signal analysis of the QVCO .................................................................................... 27 3.3 Summary ............................................................................................................. :..................... 37 Chapter 4 Frequency Divider for the Synthesizer............................................................................... 39 4.1 Prescaler and the Positive Edge Counters ................................................................................. 39 v

4.2 Synchronous Counter divide by 4/5 ......................................................................................... 41 4.3 Synchronous and Asynchronous Counter divide by 32/33 ....................................................... 45 4.4 Summary ................................................................................................................................... 49 Chapter 5 Phase and Frequency Detector ( PFD ), Charge pump ( CP ), and Loop Filter ( LF ) ....... 50 5.1 Phase Frequency Detector ( PFD) ........................................................................................... 50 5.2 Charge Pump and Loop Filter ( LF) ........................................................................................ 53 5.2.1 Charge Pump ..................................................................................................................... 53 5.2.2 Loop Filter ( Low Pass Filter) .......................................................................................... 59 5.3 Open Loop and Closed Loop transfer functions ....................................................................... 61 5.4 Summary ................................................................................................................................... 64 Chapter 6 Comparison and Conclusion .............................................................................................. 65 6.1 Comparison ............................................................................................................................... 65 6.2 Conclusion ................................................................................................................................ 68 6.3 Future Work .............................................................................................................................. 69

Vl

List of Tables
Table 2.1 : Comparison of frequency synthesizers ................ . ................. ... .................... 14 Table 6.1 : The power consumption for each component. ........................ . .. ... . ................ 65 Table 6.2 : Comparison of QVCOs . .................. ....... ............. . .... .. . ..... ...................... 66 Table 6.3 : Comparison of the proposed QVCO with another VCO .......................................... 67

Vll

List of Figures
Figure 1.1 Picture of an Implantable Pulse Generator (lPG), lead and electrodes for nerve stimulation ............................................................................................... 1 Figure 2.1 Example of a Direct Analog Synthesizer (ADS) . . ........ ........... ........................ 7

Figure 2.2 : Block diagram of ADS ........................................... . ..... . ........................ 8 Figure 2.3 Figure 2.4 Figure 2.5 Figure 2.6 Figure 2.7 Figure 2.8 Figure 2.9 Figure 2.10 Figure 2.11 Figure 2.12 Figure 2.13 Figure 2.14 Figure 3.1 Figure 3.2 The block diagram of Integer-N PLL synthesizer. ............................................8 Crystal Reference Frequency divider. .................................................................... 9 Second order loop filter ........................................................................................... 9 Fractional-N frequency synthesizer. ...................................................................... tO· Noise shaping with
I-~

modulator. ....................................................................... 11

Block Diagram of DLL-FS ................................................................................... 12 Dual Loop PLL- Frequency Synthesizers............................................................ l3 Pseudo-open loop direct modulation transmitter. ................................................. 15 Block diagram of the transmitter.......................................................................... 16 Proposed oscillators for SAW synthesizer.. ........................................................ .17 Design of a QVCO for MICS ............................................................................... 18 Block diagram of Integer-N , Phase Locked Loop synthesizer.. .........................19 Proposed QVC0 ................................................................................................... 21 The block representation of the components of the QVC0 ................................. 22

Figure 3.3 : (A) A Common Gate (CG)stage, (B) A Common Source Degenerated (CSD) stage ...........................................................................................................23 Figure 3.4 Figure 3.5 Figure 3.6 Representation of the current stacking .................................................................. 24 The schematic dissection of a half-delay cell ...................................................... 25 (A) The schematics depiction of the Capacitors, (B) The Block diagram of the delay components .......................................................................................25 Figure 3.7 Figure 3.8 Figure 3.9 The operation of the delay cell for Vctrl under 0.5 volt... .................................... 26 CSD1 and CSD2 are shown in fully operational mode .........................................26 Impedance of the Common Gate stage.( by applying a Vtest) ............................. 27

Figure 3.10: The small signal of CSD1 with considering the resistances ................................. 28
Vlll

Figure 3.11 : Small signal analysis of Figure 3.8. (CSDl & CSD2 are operational) ............. .31 Figure 3.12 Figure 3.13 Transient response of the quadrature VCO at 404.7 MHz ................................... 34 Phase noise of -100.3 dBc/Hz@ 160KHz for oscillation frequency of 404.7MHz ............................................................................................................. 34 Figure 3.14 : The tuning characteristics of the QVC0 .............................................................. 35 Figure 3.15 Figure 3.16 Figure 3.17 Figure 3.18 Figure 4.1 Figure 4.2 Figure 4.3 Figure 4.4 Figure 4.5 The eye diagram of the output signal... ................................................................ 36 The schematics of the QVCO synthesizer output differential buffer. .................. 36 Buffer output signal (DQ)at 403.5 MHz.............................................................. 37 Buffer output signal (Q)at 403.5 MHz................................................................. 37 The general overview of the .dual modulus presecaler (32/ 33), swallow and program Counter and in the frequency synthesizer. ........................................... 39 Divide by 32 /33 dual modulus prescaler.............................................................40 Schematics of the SCL D-Flip Flop ..................................................................... .40 The Synchronous counter divider circuit, divider b~ 4/5 ................................... .41 Comparison of the outputs of the QVCO Buffer (403.5MHz), Divided by 4 at the output of the first "OR" stage ........................................................... .41 Figure 4.6 Comparison of the outputs of the QVCO Buffer (403.5MHz), Divided by 5 at output of the first "OR" stage ....................................................................... .42 Figure 4.7 Figure 4.8 Figure 4.9 Figure 4.10 Figure 4.11 Figure 4.12 Figure 4.13 Figure 4.14 Figure 4.15 Figure 4.16 Figure 4.17 Figure 4.18 Schematics of the Divide by 2 circuit... ............................................................... .43 The schematic diagram of the divide by 2 half cell Circuit... ............................ .43 The schematic of a half circuit of Figure 4.8 ....................................................... .44 The QVCO output signal (403.5 MHz)divided by 32 (12.61 MHz) .....................45 The QVCO output signal (403.5 MHz )divided by 33 (12.22 MHz) ................... .45 The output signal of QVCO (827 MHz) divided by 4 ......................................... .46 The output signal of QVCO (827 MHz) divided by 5 ......................................... .46 827 MHz frequency divided by 32 (25.84 MHz) ................................................ .46 827 MHz frequency divided by 33 (25.06 MHz) ................................................ .47 The complete system level blocks of the synthesizer divider............................. .47 The output of the frequency divider, "Final_output_signal" at 150.0 KHz....... .48 Enlarged section for the "Divide by 33"section . Two continues divide by 5 are being used at the Mode_Control Section to obtain the divide by 33 .... .49
IX

Figure 5.1 Figure 5.2 Figure 5.3

System level design of the Phase and Frequency Detector (PFD) ........................... 51 The Schematic design of the D-Flip Flop (TSPC low Frequency) .......................... 52 The Open Loop system level design of the PFD + Charge Pump (C.P) + Loop Filter (Low Pass Filter) ................................................................................... 54

Figure 5.4 Figure 5.5 Figure 5.6

The schematics of the Charge pump (CP) ................................................................ 55 Zero Phase difference between the Reference frequency and the divider output frequency. (open loop signal for the PFD, CP, and LF) .......................................... 55 90 degrees phase difference between the Reference frequency and the divider output frequency. (open loop signal for the PFD, C P, and LF) ............................. 56

Figure 5.7

180 degrees phase difference between the Reference freq\lency and the divider output frequency. (open loop signal for the PFD, CP, and LF) .............................. 56

Figure 5.8 : 270 degrees phase difference between the Reference frequency and the divider output frequency. (open loop response signal for the PFD, CP, and LF) ............... 57 Figure 5.9: The frequency difference of 120KHz from the divider output and the 150KHz reference frequency .................................................................................................. 57 Figure 5.10: The frequency difference of 160KHz from the divider output and the 150KHz reference frequency .................................................................................................. 59 Figure 5.11: The Closed loop Control Voltage transient response.(Vctrl) ................................... 61 Figure 5.12: The charge pump current.. ........................................................................................ 61

X

List of Abbreviations

CP

Charge Pump

DAS

Direct Analog Synthesizer

DDS

Direct Digital Synthesizer

DLL-FS

Delay Lpcked Loop Frequency Synthesizer

IPG

Implantable Pulse Generator

Kvco

Voltage Controlled Constant

LF

Loop Filter

MICS

Medical Implantable Communication Services

PFD

Phase Frequency Detector

PLL-FS QVCO SAW SCL TSPC TSMC

Phase Locked Loop Frequency Synthesizer Quadrature Voltage Controlled Oscillator Surface Acoustic Wave Source Coupled Logic True Single Phase Clock Taiwan Semiconductor Manufacturing Company

Xl

Chapter 1 Introduction

1.1 Motivation

Since the initial development of implantable cardiac pace makers over thirty years ago, the field of Biomedical Engineering has developed different implantable devices [1]. One of the recent applications of implantable neurostimulation involves the treatment of epilepsy [1] . Intelligent implantable epilepsy devices will likely process multiple channels of data and they may need to transmit these data. These devices not only detect but also predict the seizures [2]. The Vagal Nerve Stimulators (VNS)are the first implantable medical device approved by the FDA for the treatment of epilepsy [2]. These devices decrease the frequency of seizures by an average of 20-30% and with an approximately 10% chance of making the patients seizure free [2]. Figure 1.1 depicts the picture of an Implantable Pulse Generator (lPG).

Figure 1.1: Picture of an Implantable Pulse Generator (lPG), lead and electrodes for nerve stimulation [3].

I

Beside the transceiver and the power source, there are other interfaces such as media access controller for controlling the signals and measurements from the sensors are also operational within the implantable devices. The application of implantable devices can be extended to the cardiac pacemakers, and implantable defibrillators (ICDs) too. By integrating a small low power transmitter into a pacemaker, larger data records could be downloaded about a patient's heart performance [4].
It is estimated that two-third of the overall mortality form Coronary artery disease comes from

sudden cardiac death due to malignant ventricular arrhythmias [1]. Ventricular fibrillation results when the heart rate becomes so fast that the heart simply stops pumping or pumps uncontrollably. It is long been known that a sever electrical shock can stop the fibrillation and allow the heart to resume a normal operation [ 1]. The implication of tiny, stand alone sensor I transceivers for patient care vary from the profound to the merely convenient [4]. The implanted sensors allow the medical professionals to obtain data from inside a patient's body without having to deal with wires or tubes which penetrate under the skin. This in tum reduces the possibility of infection [4]. Some of the implantable devices work based on inductive coupled link topology. However these systems are rugged and the short range of the magnetic coupling action, combined with the limited data rates and relatively large size of the coils have prompted a wider range of research [5]. These recent devices work at higher frequencies such as MICS 402-405 MHz by utilizing small battery cells. The size, power consumption, and quality of the produced signals have special importance in the implantable ICs. The improvement of frequency synthesizers for wireless MICS applications is a crucial area of research which has come to focus only in recent years. A frequency synthesizer is one of the most critical building blocks in any integrated wireless transceiver system
2

[6]. Decreasing the size of the synthesizer would be achieved by differential ring oscillators rather than spiral inductors. However obtaining a lower phase noise, lower reference frequency, lower power consumption, and lower price would be the challenges that are being addressed in this thesis.

1.2 Objective

One of the objectives of this thesis is to address the issue of achieving a low phase noise for the QVCO by means of ring oscillators. Ring oscillators would be a good design alternative Since the LC tanks are not going to be used in this topology due to their larger chip area. However the phase noise of the ring oscillator has to be brought down to the acceptable level for the MICS purposes. Having not utilized the LC tanks the size of the designed Integer-N PLL synthesizer decreases dramatically. The biasing of the QVCO should not rely on external circuitry except the feedback control voltage. This constraint is being considered due to the maximum optimization effort in obtaining a smaller size ring oscillator. Also from the power point of view the design should address a low power consumption for the implantable device for the sake of longevity of the implanted battery's life cycle. These objectives can be achieved at the QVCO level by using the current reuse topology offered in this thesis. One of the other objectives of this thesis is providing a larger tuning range for the QVCO and other components of the design which allows them to be suitable for different medical implantable devices. This capability would allow the inter-modularity of the components of the Integer-N synthesizer, such as Prescaler divider, Charge Pump, and Phase Frequency Detector.

1.3 Contributions

The work on this thesis has made the following contributions: 3

·

A small size, low phase noise, and wide frequency range quadrature VCO topology for Medical Implantable Devices(MICS)by utilization of the current reuse technique has been introduced. The smaller size of QVCO also decreases the dimensions of the implantable devices.

·

The proposed QVCO has been implemented in an Integer-N frequency synthesizer, which has a small size, low power consumption, and also offers inter-modularity for other Biomedical applications.

·

A prescaler divider 32/33 is simulated which is capable of dividing at wider frequency range (from 200 - 827 MHz) that also provides the alternative of utilization for other implantable devices at different frequencies.

A modified design of a True Single Phase Clock (TSPC)D-Flip Flop with a reset signal has been offered in this thesis. This design provides a quick response time, due to not having any feedback circuits, and also benefiting from a low level of power consumption. A modified circuit design of a charge pump (CP) is also introduced which has an impact on decreasing the amount of power consumption of the whole synthesizer. The Proposed Integer-N synthesizer's simulation is offering promising results for industrial implementation. The design has been compared to Zarlink Corporations' Medical Implantable RF transceiver (ZL70101)aspects. The power consumption of the Integer-N synthesizer, inter-modularity of the design, and the small size (by comparing to LC spirals) are some of the advantages of this design. Having a smaller reference frequency also injects a lower level of noise into the synthesizer overall performance. A lower reference crystal oscillator is also inexpensive than the high frequency crystals, and that in tum causes the decrease in the price of the final product.

4

1.4 Organization

In Chapter 2 review of different synthesizer's architectures are introduced. Direct Analog Synthesizer (DAS), Direct Digital Synthesizer (DDS), Phase-Locked loop Frequency Synthesizer (PLL-FS), Delay -Locked Loop Frequency Synthesizer (DLL-FS), and Multiple Loop PLL Frequency Synthesizer are briefly explained. Also different approaches for creating MICS signals either in the form of direct modulation or synthesizer design are reviewed and compared with the proposed topology of this thesis. Pseudo open loop modulation design, and Surface Acoustic Wave (SAW) resonator synthesizer are also investigated. A topology of an Integer-N synthesizer which is designed to be used for MICS devices has been introduced in this Chapter. In Chapter 3 a new wide range, low phase noise, and low power quadrature Voltage Controlled Oscillator (QVCO)has been proposed. In Chapter 4 the design of a wide range SCL based 32/33 prescaler divider is presented. Chapter 5 consists of three components (a Phase Frequency Detector, a Charge Pump, and a Loop filter). Due to the close operational relations between all of the components (PFD, CP, LF) they all have been presented in one Chapter. A modification of a True Single Phase Clock (TSPC) D-Flip Flop with a reset signal has been introduced in this Chapter along with a slight modification of a charge pump circuit. Close loop and open loop behavior of the full Integer-N synthesizer have been calculated. The thesis is concluded and the future work is addressed in Chapter 6.

5

Chapter 2 Literature Review

2.1 A Brief over look of Different synthesizers

A frequency synthesizer generates one or many frequencies from one or a few frequency sources [7). In order to generate a high frequency and stable clock signal, frequency synthesis is necessary [8]. Among many choices, frequency synthesizers using a Phase Locked Loop (PLL)are the most popular in particular for high frequency and low power signal generation [8]. Basically a PLL based synthesizer is a feedback system used to generate a stable clock signal based on a reference frequency [8]. Ideally synthesizer's output is a pure sinusoidal waveforms [7]. Synthesizers can be grouped into five classes: Direct Analog Synthesizer (DAS) Direct Digital Synthesizer (DDS) Phase-Locked loop Frequency Synthesizer (PLL-FS) Delay -Locked Loop Frequency Synthesizer (DLL-FS) Multiple Loop PLL Frequency Synthesizer
2.1.1 Direct Analog Synthesizer (DAS)

Direct Analog Synthesizer is designed by cascading stages of different components such as multipliers, dividers, mixers and band-pass filters. Variety of frequencies can be generated from a single reference. Figure 2.1 represents a DAS. In this example the output frequency can be measured as following: (2.1.1)

6

Based on the above formula it can be concluded that the Fout can be varied with the accuracy of 0.01F; 0 · This type of synthesizer has higher power consumption [7].

9F m
F

Snap Multiplier

Band Pass Filter

__,.

Bank

· ·
F

Select Switch

F2
~

...

Array F3

______.

..
BPF F out

/10 F3

BPF

F2

F1

Figure 2.1: Example of a Direct Analog Synthesizer (DAS) [7].

2.1.2 Direct Digital Frequency Synthesizer

This frequency synthesizer is made of two major components, a Numerically Controlled Oscillator and a Digital to Analog Converter. Figure 2.2 depicts this topology. The Numerically Controlled Oscillator consists of an adder register pair (Phase Accumulator)and a ramp to sine wave look up ROM. The output frequency of the DDS is related to the phase accumulator input with the following

equation [7],[9]:

fout

~fctock

K

(2.1.2)

N: Bit length of the accumulator K: Accumulator's input The frequency switching speed is faster in this type synthesizer. 7

Phase
Accumulator

Sine wave
Look-up

DAC

LPF

Analog output

Digital input
Clock

Figure 2.2: Block diagram of DDS [7].

DDS can only generate frequencies up to half of the clock rate of the digital circuitry [7]. The disadvantage of the Direct Digital Synthesizers is the high spurious content caused by quantization and linearity limitation of the DAC [7],[9]."

2.1.3 Phase Locked Loop Frequency Synthesizers 2.1.3.1 Integer - N Frequency Synthesizer

This is the most common type of frequency synthesizer. A PLL is a negative feedback system [7],[9]. It consists of a Voltage Control Oscillator (VCO), a Phase and Frequency Detector (PFD), a Charge Pump (CP), and a loop filter (LF). In fact a PLL will lock both the phase and frequency of the oscillator. Figure 2.3 depicts the PLL' s block diagram.

REF

PFD

Charge
Pump

Loop
Filter

IN
Divider

Figure 2.3 : The block diagram of Integer-N PLL synthesizer [7].

8

In some cases the reference frequency can be divided by a certain factor to a lower clock frequency. Figure 2.4 shows the dividing ratio of Crystal Reference Frequency. _ PLL Reference Input _________.... Clock

I Crystal Reference Frequency

I

I

/M Divider

Figure 2.4 : Crystal Reference Frequency divider.

Divider M which is mentioned above is optional. If both dividers N and M are being used the following formula would provide the basic concept for the output frequency [7].

N Fvco = FREFM

(2.1.3)

The phase frequency detector compares the divided output frequency of the VCO by the reference input Clock frequency and also tries to adjust the phases of the two signals by implementing the difference into the charge pump. The charge pump will deliver a current ( L:p) to the loop filter. The output of the loop filter would be the control voltage. In fact the PFD produces up and down signals to drive the charge pump to drive up or drive down the loop filter. These two signals are generated by the phase and frequency error of the PFD inputs. Figure 2.5 depicts the second order loop filter.

Icp-1>

Vctrl

C1 J

n~

Figure 2.5 : Second order loop filter.

9

-2.1.3.2 Fractionai-N Frequency Synthesizer

This frequency synthesizer would allow fractional division ratios and therefore the reference frequency can be much larger than the frequency steps of the channel spacing. The output frequency can be represented as following [7]:

Fourpur = NF x (N + 1)F
N, N+ 1 : Integer division ratios F: A fraction number between 0 and 1 Figure 2.6 depicts the block diagram of the Fractionai-N frequency synthesizer.

(2.1.4)

Fref

Phase
Detector

Pump

Filter

Output

Divider N N+l
Carry

Modulus Selection
K

Figure 2.6: Fractionai-N frequency synthesizer [7].

The two division ratios (N, N+ 1)would be altered from one to another to create a decimal average ratio. This phenomena helps to lower the division ratio and results in an increase in the reference frequency. In return the PLL loop bandwidth also increases. The implication of this method generates a faster response time and also an improvement on the PLL phase noise since the total division ratio decreases. However the main disadvantage of fractional-N synthesizer is the 10

introduction of the spurs [7]. The spurs are generated due to instantaneous switching of the feed back division ratios. Another disadvantage of the Fractionai-N synthesizers is that since the reference frequency is larger therefore the complexity and the power consumption of the accumulator will increase [7].

2.1.3.3 Sigma - Delta Fractional - N Synthesizer

As it has been indicated in the above section the issue of spurs can be resolved by using I- L1 modulator. The modulator generates a binary stream representing a defined average value [10] . Figure 2.7 depicts the I-1'1 modulator.

Toward PFD

(N, N+l) Divider

From

vco

Binary Modulus Control signal. b(t)
I-1'1

Modulator

Figure 2.7: Noise shaping with I-1'1 modulator [10].

The Binary Modulus Control Signal (BMCS)is also indicated as b(t). Therefore the instantaneous division ratio would be indicated as N + b(t). Where b(t) is a value between 0 or 1.

2.1.4 DLL- based Frequency Synthesizer

Figure 2.8 represents the Block diagram of DLL-FS. However DLL-FS isn't programmable and also suffers from high power consumption [7]. Other problems such as limited multiplication factor also 11

limit the applications of DLL-FS. In Figure 2.8 the Voltage Controlled Delay Line is made up of cascade of identical gain stages with variable delays. This design utilizes multiple input frequencies which is performed by an edge combiner. The reference signal determines the next transition point signal. These types of systems have a superior jitter performance [ 11].

Vcontrol Voltage Controlled Delay Line

r----------------------------------- ------Stage I Fref (Vin) Stage II Stage III

///

Edge Combiner

I---_,··

Fout

.___ Fout

Figure 2.8 : Block Diagram of DLL-FS.

12

2.1.5 Multi Loop PLL Frequency Synthesizer

In an Integer-N PLL synthesizer to reduce the division ratio utilization of multiple loops would be an improvement to the design . There are different types of Multi loop PLL frequency synthesizers. Figure 2.9 represents two different types of Dual loop synthesizers. In Figure 2.9(a)output of PLLl is being used as input to a mixer that up converts the PLL2 and PLLl ' s signals. PLL 1 generates tunable IF frequencies while PLL2 generates a fixed RF frequency. In Figure 2.8(b)the output of PLLl is considered the reference frequency for PLL2.

F refl

PLL 1

1---·· @-------.

F out

F ref2
(a)

----+~

I

Fref ____.

EJ __. ~----+

Fout

(b)

Figure 2.9 : Dual Loop PLL - Frequency synthesizers[?].

2.1.6 Comparison of different Synthesizers

In industry the widely used frequency synthesizer architecture is based on PLL design. Since PLL design can be integrated easily and it consumes a reasonable lower power consumption [7] . Direct Analog Synthesizers may find some applications at microwave frequencies, where very high 13

frequencies needed to be generated. Direct Digital synthesis is used where frequency switching time is very short; such as frequency Hopping Spread Spectrum systems [7] . Table 2.1 shows a comparison amongst the frequency synthesizer architectures. Table 2.1 :Comparison of frequency synthesizers [7] . Architecture Direct Analog Synthesizer Direct Digital Synthesizer Integer-N Synthesizer Fractional-N Synthesizer Delay Locked Loop Pros Fast Switching, low noise spurs Fast switching, fine resolution Low power, low noise Relatively faster Switching Very low phase noise Cons Huge size and Power consumption Huge size and Power consumption Slow switching Huge fractional spurs Non-programmable, huge power consumption

2.2 Different modulation and synthesizer schemes for MICS devices
2.2.1 Pseudo-open loop direct modulation

There are two major types of direct modulation transmitters. 1) Open loop topology 2) Closed loop topology In the open loop topology the modulation data is injected to control the VCO directly [12]. However, the VCO frequency drift is a major design concern since the modulation is performed while the PLL is opened and the VCO is unlocked. For the Closed loop topology modulation is done while the PLL's loop is closed. In this type of design the frequency drift is avoided but the signal bandwidth is constrained by the PLL bandwidth [12].

14

In [13] a new open-loop direct modulation transmitter has been proposed for Medical implantable devices. Figure 2.10 depicts the block diagram of a Pseudo-open loop architecture.

1GHz VCO

Transmitter Data

1t

Figure 2.10 : Pseudo-open loop direct modulation transmitter[ 13].

The PLL remains locked to produce stable four phase signals. These multi-phase signals are utilized to generate modulated output through edge combining operation. The edge combining is performed through a proposed phase selector circuit, which is essentially a fractional divider with the divide ratio of 1+K/4 and K

=0

or 1. As the transmission data is applied to the Sigma-Delta

modulator (SD-MOD1) a randomized bit stream is generated to dither the phase selector [13]. If the selection index K is 1 the phase selector selects the 4 phases sequentially to the output and equivalently divides the input frequency by 1.25. For K

=0 the selected phase is fixed and the output

and input frequencies are the same. The Clock for the SD-MOD1 is being produced by dividing one of the four phase signals by 2. Total implantable transceiver runs on 12.75 mW power consumption
[13]. However as it was indicated earlier due to presence of SD-MOD I the noise spurs contribute to

a lower phase noise in this design. The LC spiral 1GHz VCO takes a larger space than ring oscillators. The complexity of the design is also another issue that should be addressed. The proposed design in this thesis would address the phase noise problem of the entire PLL Integer-N on bases of producing low phase noise and having a lower reference frequency. By 15

utilizing a ring oscillator also the size of the total design would decrease dramatically. The complexity of the design will also decrease as the Integer-N PLL has less complex circuitry.

2.2.2 Surface Acoustic Wave Synthesizer

The design of a Surface Acoustic Wave (SAW) synthesizer is depicted in conjunction with the Medical implantable transmitter in Figure 2.11. This approach has been proposed in [ 14].

Matching NetwOik

Figure 2.11 : Block diagram of the transmitter[ 14].

The advantage of using a resonator (SAW Resonator) is to avoid frequency division, thus reducing the power consumption. SAW ceramic resonators allow for frequency divisions of tens of kilo Hertz [ 14]. As shown in Figure 2.12 the frequency modulation is performed with the tune signal that switches the capacitances (C4,C5) and (C4' ,C5')of the SAW resonator that are added in parallel to C1 and C2 (depicted in Figure 2.11) by shifting the reactance of the loop and thus causing the resonance frequency to change.

16

Figure 2.12: Proposed oscillators for SAW synthesizer[14].

The phase noise of oscillator is very low due to high signal swings which avoid loading the resonator. However this design is tunable from 403.15MHz to 403.494 MHz. The power consumption of this design has been low while it only produces a differential signal rather than quadrature signals. The proposed topology of this thesis QVCO allows a wider frequency range with a reasonable power consumption while trying to keep the phase noise at a low level.

2.2.3 Four Stage differential ring QVCO

As an alternative to the LC spiral, a ring oscillator topology is be·ng offered in [15] which produces quadrature signals. Figure 2.13 shows the topology for MICS application. Since the phase noise of the MICS devices is relatively relaxed therefore a ring oscillator would be a good choice to be used in this devices. There are no extra steps required to generate quadrature outputs by this method.

17

Figure 2.13: Design of a QVCO for MICS [15].

In this design a four stage differential VCO was optimized to obtain a lqw phase noise quadrature

signal [15]. Every delay cell has a three bit calibration control and a two bit FSK control signals. These two bit FSK data tum long channel devices M11 and M12 on and off [15]. This causes a slight amount of change in the sink current. To compensate this change the calibration control bits are introduced to keep the current at a constant level. This topology produces the MICS frequency range signal with the measured phase noise of -82 dBc/Hz @160KHz offset and the power consumption of 1 mW. The proposed topology of the QVCO in this thesis meets the challenges of the power consumption, size and phase noise requirements which have been addressed by the design in [15]. The QVCO in this thesis produces a lower phase noise and slightly lower power consumption.

18

2.3 The proposed design of lnteger-N Synthesizer

The design of the proposed Integer-N frequency synthesizer has been depicted in Figure 2.14.

Reference oscillators

PFD (Phase & Frequency

Charge Pump

Loop Filter

Integer-N divider

Osc.
A

I

+N

DI Q

Osc. B QVCO is made of two first order oscillators A & B DQ

Figure 2.14: Block diagram of an Integer-N, Phase Locked Loop synthesizer.

In this topology the QVCO is made of two first order oscillators(A & B). Two of the outputs (D , DQ)are going to be buffered and converted to the clock signals which will be fed to the Integer-N divider. This topology has a lower complexity, smaller size, wide tuning range, and the offered QVCO' s phase noise is at a low level which is far beyond the MICS acceptable standard. Phase Frequency Detector compares the result of the divider circuit with a reference clock. The phase and frequency difference will be converted to pulse width and it gets converted to current by the Charge Pump. The loop filter produces control voltage from the charge pump current and tunes the QVCO's output frequency. In this topology since the QVCO is based on ring oscillator therefore there should 19

be a special consideration regarding lowering the phase noise of the QVCO. The divider is the Mixed-mode part of the topology. Generally speaking the divider is programmable for integer division ratios. The output signal from the divider is operating at a lower frequency and it will be compared to a reference(Crystal oscillator) of 150 KHz. The Phase Frequency Detector behaves as an error detector to sense the phase and frequency error between the reference clock signal and the divider output signal. Four output signals are being generated from the PFD and they can be the controlling signals in determining whether the current from the charge pump is being on or off at the time of 9peration. The control voltage of the QVCO is dynamically adjusted by the charge pump and the loop filter until the system is locked. The loop filter is also acting as a low pass filter in converting the output current of the charge pump to the control voltage of the QVCO. The loop filter is also a contributing factor in taking some of the noise from the control voltage in generating a more accurate signal. The output signal can be varied by Integer-N divider. As it has been shown in the previous sections different architectures can fulfill different requirements and thus can be more suitable for different applications. However in this case since the chip area, power consumption, and operational range have been some of the design constraints therefore Integer-N topology can be more suitable to meet the desired constraints. This topology also offers a less complexity and therefore a better power consumption.

20

Chapter 3 Design of a QVCO for the Integer- N, PLL Synthesizer

3.1 Analysis of the proposed QVCO
This design is based on In-phase coupling method for quadrature signal generation. In-Phase coupling design has been proposed by [16]. In fact the proposed topology is made of two first order oscillators. The mutual coupling mechanism has been used when the desired specifications can only be reached by a good cooperation between the two timing references. In this approach a coupled system of two equal oscillators yields a better noise performance than each of the two free-running oscillators individually [ 16]. Figure 3.1 depicts the design of the QVCO.

Oscillator
B

Oscillator
A

800 ohm

I

l----------------------------

Figure 3.1 : Proposed QVCO.

A first order oscillator can be used to create large tuning range. In Figure 3.1 the output of the oscillator is fed to a frequency divider which in turn divides the output frequency. This signal is then 21

being passed into the Phase Frequency Detector(PFD)where the phase and frequency is being compared to a reference signal. The output of PFD is led to the tuning input of the oscillator via a charge pump and a low pass loop filter. The QVCO' s coupled system consists of two oscillators A and B running at the same frequency.
In Figure 3.1 transistors M25 and M28 are the coupling transistors in parallel to the switching

transistors M26 and M27. On the second oscillator transistors M21 and M24 are the coupling transistors while transistors M22 and M23 are the switching transistors. In this setting when one of the oscillators crosses a predefined reference level its output voltage initiates a transition in the other oscillator. Figure 3.2 depicts the different parts of the QVCO.

Voltage to Current Converter

.t\ Half
-+
Delay Cell

~

800 ohm

Cross coupled transistors
Figure 3.2 : The block representation of the components of the QVCO.

A technique that can be used to improve the phase noise behavior of first order oscillators is called In-Phase Coupling [16]. The coupling transistors contribute to the quadrature phase operations of the 22

oscillator. The operation of QVCO is divided into four phases in one oscillation period. In phase 1 transistors M22, and M24 are on. In phase 2 transistors M23, and M24 are operational. In phase three and four transistor sets of M21, M23 and transistors M21,M22 are operational, respectively.
In Figure 3.2 the voltage to current converter provides a slightly adjustable current for each delay

cells. The converter utilizes the current mirror transistors M32, and M34 to generate the output current from transistor M30 and the diode connected transistor M31. At the top of each delay cells the presence of the second current mirrors (transistors M29 - Ml , transistors M29-M2, transistor M29-Mll, transistors M29-M12)contribute to creation of the driving currents of each delay cell. This design gives the advantage of having slight control over the changes of the reference current of each delay cell at low and high frequencies. In this approach due to the current mirrors the circuit would be less susceptible to noise. The basic component of each half delay cell has been made of a Common Gate (CG) stage on top of a Common Source Degenerated (CSD). Figures 3.3 depict these ideas.

V out To the input of the CS with eource degenerator

Vin
(A)

/

(B)

Figure 3.3 : (A) A Common Gate(CG)stage, (B) A Common Source Degenerated(CSD)stage.

Figure 3.4 represents how the Common Gate(CG)current is being reused by the Common Source Degenerated(CSD)circuits. Utilization of the current reuse topology also contributes to a lower phase noise for the QVCO. Figure 3.5 represents the schematics of a half delay cell. In fact the 23

output of the CG circuit would be the input to the CSD circuits. By "Stacking" the two types of circuits (CG on top of CSDs circuits) the current would be shared amongst the two components of CG and CSDs. Figure 3.6 (A) & (B)also shows the intrinsic capacitances of each components of a delay cell. The Common Gate transistor (Ml)is acting like resistive load and indicated as RD. The symmetry of the oscillation outputs of each half circuit which are achieved by linear resistive loads also contribute to a lower phase noise [16]. Transistor M5 acts as a diode connection to provide a constant current (indicated by "b" in Figure 3.6 (B)). The introduction of the bias voltage of "Va" that is equal to -1.8V to the bulk of the transistor M5 would create the "body effect" which causes the increase in the channel length modulation. This voltage is also optional in the design which can otherwise be grounded. This phenomenon provides a slight improvement in the phase noise of the QVCO. The bias voltage of "Vb" has been set to be at the constant volta&e of 1.8 Volts. In fact in this design by feeding the output voltage of the CG to the input of the CSDl the need for another bias voltage has been diminished.
Current from the Common Gate stage

Out put voltage from the Common Gate stage

Rs

Figure 3.4: Representation of the current stacking.

24

Va

Vout

CSDl 14--- CSD2

Figure 3.5 : The schematic dissection of a half-delay cell.
CG

C3

CSD2
VCIFI

i

For Vctlr less than 0 . 5 volt CSD2 is turned off

(A)

(B)

Figure 3.6 :

(A) The schematics depiction of the Capacitors. (B) The Block diagram of the delay components.

For V ctrl of less than 0.5 Volt the CSD2 is turned off and only CSD 1 is operational. The conception of such a circuit is shown in Figure 3.7. In Figure 3.6(B)For ease of mathematical expressions; transistors M3, M5, M7, and M9 are named as transistors "a", "b", "c", and "d" respectively. 25

CG

Figure 3.7 :The operation of the delay cell for Vctrl under 0.5 volt.
In Figure 3.8 the delay cell is being represented while the Vctrl is above 0.5 volt. In this case

transistor "d" is being turned on and the topology of the circuit chan·ges and CSD2 becomes operational. However since the value of the Rs is extremely huge most of the current would pass through transistor "c" and it will go to the ground via transistor "d" and the resistor "Ra". Resistor "Ra" is relatively small.

............................................... .
!
' I

CG

CSD2

!
:
................................ .........J

I

I

'

Figure 3.8: CSDl and CSD2 are shown in fully operational mode.
26

3.2 The small signal analysis of the QVCO

The impedance looking at the Common Gate from transistor "b" is being measured in Figure 3.9.

Vout
roa
RD

Figure 3.9: Impedance of the Common Gate stage.( by applying a Vtest)

Based on the current signal analysis the impedance would be calculated as following:

I tes t

-V = gm a Vgs a + (Vout -Vtest ) + ~ 1

(3 .2.1)

roa

(- -)

c,s

I
test

= - gmav test +

(/test .RD

- ~est ) roa

v test "cl

s

(3 .2.2)

(3.2.3)

(3.2.4)

Since: 1 - - 1s approximately equal to - -

RD .

.

RD

roa

roa

(3.2.5)

27

The small signal analysis of the CSD 1 is depicted in the Figure 3.1 0.

The out put of the Common Gate is the input to the Common Source Degenerated ( CSD1 ) Vin ~ gmcVgsc

C3l

L------.--

[ fl
-It
RS

ZCG+ 1/gmb

Vout

Figure 3.10: The small signal of CSDI with considering the resistances.

Considering Figure 3.10 the open loop transfer function can be calculated as following:

. Assunung

r= Z cs +1 gm
(3.2.6)

(3.2.7)

r

(3.2.8)

(3.2.9)

Since Rs = 52 KQ it can be considered : y < < Rs

28

(3.2.10)

Since y < < Rs therefore

r - Rs

"" - Rs

(3.2.11)

By considering: J

Since - - is smaller than _ _ _ _I..::..__ _ therefore

I

roa

r can be indicated as following:

gmb

- gma - - -C,S roa

r""

-gma - - - CS I roa

I

(3.212)

(3.2.13)

Substituting

J

into Equation 3.2.13 :

(3.2.14)

29

By considering: :

f3 = gma + roa

1

(3.2.15)

The obtained poles and zeros from equation 15 are for the case when the "Vctrl" is less than 0.5 Volt. At this condition the CSD2 is turned off. A half delay cell is depicted in Figure3.7.

Pole 1:

Pole 2: ______ ro-'c :. .

gm Zero 1: __ c

c3

Polel and Zero 1 are located at the left hand side of the S-Plane. Pole2 is at the right hand side of the S-Plane and it can be ignored. Since "giDc" is larger than "gma" therefore zero1 is far away from the origin and it can also be ignored. However at the time that "Vctrl" passes the Threshold voltage of 0.5 volt the small signal analysis schematics of the circuit for Figure 3.8 is being depicted in Figure 3.11.

30

+---I

Vout
roc
1/gllb + 2f:.G

I~

Ra

Figure 3.11: Small signal analysis of Figure 3.8. (CSD1 & CSD2 are operational)

(3.2.16)

By considering V12 = I X Ra = VOU/ R

r

a

(3.2.17)

-Vr,(C3S+gmc +-)=Vo ur(-- - ) roc roc

1

1

1

r

(3.2.18)

-1 -

roc

is negligible and can be ignored in Equation 3.2.18.

Also from Equation 3.2.12 and considering

f3 = gma + roa

1

the following results would be

obtained:

31

(3.2.19)

(3.2.20)

(3.2.21)

From Equation 3.2.16 the following can be resulted :

In Equation 3.2.22 the amount of - 1 -

rod
~ 1 -,

is negligible since rod is comparable to ro a the result of

1 . . (fJ + C,S) constdenng 3.2.21, becomes Vout therefore: rod R0 (C3S + gmJ

From Equations 3.2.24 and 3.2.12 it can be concluded:

1 (C4S+gmd)Vin =Vour {- Ra(C4S+gmd) +

r

(fJ + C,S) roa(fJ + C,S) + } Rv(C3S + gmc) RD
32

(3.2.26)

(3.2.27)

By looking at Equation 3.2.27 it can be deduced that Ragmd might be ignored due to the

small value of gmd. Also RaC4 S might be neglected without any effect on the total result.

Value of

fJ = gma +-.
roa

I

(3.2.28)

From Equation 3.2.28 the Transfer Function would be obtained as following:

(3.2.29)

The above Transfer Function results in two left hand zeros and a left hand pole. Left hand zero I :
-gmd

c4
-gmc

Left hand zero 2 :

c3

Left hand pole 1 :

For the Left hand zero 2 since gmc >> gmatherefore it is apparent that the zero which is pushed further away on the S-plane can be discarded. For the left hand Zero 1 since gmd is larger than gma 33

this zero is located also further away than gmaon the S-plane and it can be ignored. As the result only left hand Pole 1, can be the main contributor to the first order quadrature coupled oscillator.
Transient Response

1.8

Time ( s)

x

to··

3.8

Figure 3.12: Transient response of the quadrature VCO at 404.7 MHz.

The phase noise obtained for the quadrature oscillator for 404.7 MHz oscillation @160KHz offset is -100.3 dBc/Hz.
Phase nols at404.7 MHz

-50

··--· -- -· ----- -----

..

. . . .. . . .- .·.... . ,_. ·'.' ,, ....
~-

.._.. ..,..;,;;too.s

. -

·... .:.. . - . . . .:. ; -. .. . - . . . . .. . . -.
~--;-; - ;

.... ·- - .. .... . - .. :.. ...; .. .;.. ; - ; -; .;. ; . ...... . . . ~. -~ . ... . . - . . ... . .. . . . . . . . - . . . .iklli.~ i60~.-uio.,.O..:;, . .
·· ··· ·· ······--···

-.

. ..... ..·.... . ; ... ;

.; .. ;.;:-;-:

- Jl~O~.--~~~wu~~~--~~~~JO~.--~~~wu~~~--~~~Ju0~7--~~~~~JO'
~ncy (Hz)

Figure 3.13 :Phase noise of -100.3 dBc/Hz@ 160KHz for oscillation frequency of 404.7MHz

34

0.2

0 .4

0.8

Control Volt·ae ( v J

Figure 3.14 : The tuning characteristics of the QVCO

The QVCOs gain is also referred to as Kvco [Hz/V]. By looking at the Figure 3.14 it can be deduced that the slope of the linear line parallel to the Voltage Vs. Tuning Frequency curve would be approximately calculated as Kvco

= (827 MHz- 200MHz) = 482
(1.8V - 0.5V)

MHzV

Yv

When the oscillator's Control Voltage is at zero volt the output frequency is at 200MHz. This frequency is called the Center Frequency (Fcenter). The frequency of the QVCO is dependent on the voltage at its tuning input which is called (V tune). The relationship between the output frequency PouT, the Control Voltage (V ctr1), and the tuning voltage (V tune)can be approximately written as PouT ""' Fcenter + KVCO (V tune) [9]. The eye diagram of the output signal that is depicted in Figure 3.15 is an indicator measurement of the timing accuracy of the output signal. Phase noise is another measure of variations in signal timing, but the results are displayed in the frequency domain [17] . In fact jitter and phase noise characterize the same phenomenon [ 17] This Figure is also an indicator of the total amount of timing noise in the frequency range of interest.

35

Figure 3.15: The eye diagram of the output signal.

Figure 3.16 depicts the schematics of the differential buffers for the output stage of the QVCO. The design of the output buffer should be in a fashion that it can generate the proper output signal at frequencies from 200 MHz to 827 MHz while providing the proper duty cycle. For this reason the power consumption of this module has been slightly higher to make this. part reliable at both high and low frequencies.

Q(input)

3.16 : The schematics of the QVCO synthesizer output differential buffer

Figures 3.17 and 3.18 represent the output signals of the QVCO buffer. These signals will be used as the clock inputs (CLK+, CLK-) for the next stage. These signals converted by the Buffers to the clock signals to provide a better performance for the divider circuit.

36

Buffer Oulput Signal( DQ )

1.5

0.5

3
Time (s)

4

Figure 3.17: Buffer output signal (DQ) at 403.5 MHz
~r Oulput Sip( Q)

1.5

0.5

0 Time (s)

4

6
X

7
10'1

Figure 3.18: Buffer output signal (Q) at 403.5 MHz.

Due to the gate source capacitances of transistor pairs of M41, M42 and M38, M37 at the output of the buffers, a slight amount of current drop at zero voltage level occurs. This issue can be eliminated in the next stage (the Divider clock input) by a slight increase in the length of the clock transistors.

3.3 Summary

We have proposed a QVCO in this chapter based on current reuse technique. Ring oscillators occupy a smaller chip area than the LC tanks and by bringing down the phase noise level of the 37

QVCO to -100 dBc/Hz both the phase noise and the size constraints of the design have been addressed. The entire QVCO is not dependent on any other external circuitry for biasing and it also contributes to a small size for the QVCO. Switching and coupling transistors are also causing the generated signal to be more of the symmetrical shape therefore helping to bring down the phase noise of the overall design. A wide frequency range operation (from 200-827 MHz)would allow the design to be more inter-modular for other Biomedical applications. The proposed QVCO also utilizes the notion of adjusting the current at each half delay cell to have a better control over the current
consump~ion

of the whole entire quadrature oscillator. This process is done by voltage to

current converter. The QVCO power consumption is at 0.9 mW.

38

Chapter 4 Frequency Divider for the Synthesizer

4.1 Prescaler and the Positive Edge Counters

The output of the previous section (buffer output signals DQ and Q) would be used as the input clocks (CLK + , CLK - ) to the first stage of the 32 I 33 divider prescaler. In this topology the first stage is referred to as synchronous c::ounter, divider 4/5 . The second module of the divider can also be called the asynchronous part as they have been depicted in Figure 4.2. Since the input to the second stage has been at least divided by 4 the rest of the divisions shall be done at lower frequencies . The first two stages are also called Prescaler(32/33). As depicted in Figure 4.1 the third stage consists of a "Program Counter" and a " Swallow Counter" in turn each of which would count the number of the positive edges of the divided signals and generate the signal which would be matched to the reference frequency . The frequency divider can easily be the most power hungry digital circuit in the radio portion of the receiver [18].

32/33
Prescaler

Program Counter

F In

- -----+i

f-----.-·

F out

Mode

Reset Swallow Counter

Figure 4.1 : The general overview of the dual modulus presecaler(32/ 33), swallow and program Counter in the frequency synthesizer [19].

39

Synchronous
~-----1
1

Asynchronous
~------------------------------------------------ - ------------

Fin

+1

I

I
j

I I
I

I I

L ___
Mode Control

Divide 8/9

Divide 16/17

Divide 32 I 33

(MC)

L--------------c

Mode

Figure 4.2 : Divide by 32 /33 dual modulus prescaler.

In Figure 4.3 the schematics of the SCL D- Flip Flop has been shown. Since this part of the design

works at higher frequency therefore it has been decided to be operational at synchronous level (due to presence of the clock signal from the QVCO buffers). SCL circuits also exhibit improved noise performance due to their differential nature as compared to single ended circuits [20] . SCL D-Flip Flops can be used at high speed digital circuits. These Flip Flops are non-saturation, constant current, reduced swing logic devices which can perform at high frequency with relatively lower power consumption [20]. Due to the reduced swing output signal of SCL D-Flip Flop a differential buffer is being placed after two consecutive D-Flip Flops.

--1
Data Input+

fData Input -

Clock+

------i

Figure 4.3: Schematics of the SCL D-Flip Flop.

40
-....(''

PRO~'tY Of .___ f\'{;p&Qt\ 'J\t\~SH'f' L\BAA~

4.2 Synchronous Counter divide by 4/5

Figure 4.4 depicts the synchronous counter divider 4/5 .

OFF 1

OFF 2

OFF 3

Q
DQ

D
DQ

Q

DTtrerenflal

surrer

f-------\

>-------1 D

Q

Divider 4/5

CLK·

CLK+

Mode Control (MC)

Figure 4.4: The Synchronous counter divider circuit, divider by 4/5.

The fist stage of the Divider circuit sets the division ratio of 4 or 5. If the Control signal "Mode Control"(MC) has been assigned the value of "1 "then the divider input frequency( at the output of the fist "OR") would be divided by 4. The comparison has been depicted in Figure 4.5.

i:0 0

OUt put of tbe Buffer

0.2

0 .4

t t .2 t .4 tim· ( S·conds) Outputoftbe ftnt "Oil" st·tl"' ( Sl-ldlvldedby4)

0.6

0.8

t .6

t .8

2

x

to·'

tim< ( Soconds ) Out put oftbe secood "Oil" sta.,.

i::t "" · · · i . · ·. . 1. · · · i· · · . 1· .·
0.2 0 .4 0.6 0.8

t tim· ( Soconds)

!· i
m · m

m

I ,. ' ·
1.4

i· ··· ~ ·' · ~
t.6 1.8 2

t.2

x

to·'

Figure 4.5 : Comparison of the outputs of the QVCO Buffer (403.5MHz), Divided by 4 at the output of the first "OR" stage.

41

In Figure 4.5 the output of the first "OR" is 100.8MHz. Since the MC(Mode Control)signal is set

to be at l(as depicted in the third graph of Figure 4.5)the output of the second "OR" stage is at 1.8 V. Figure 4.6 shows the output of the signal for QVCO Buffer which is being divided by 5 at 80.7 MHz.

j:0

Out put of 1be

s.-.

j

Jn B Hdffi1TD-O'DMh~DTO.n HB 0
ttme ( S.Cond1 ) X ]

0.:.1

0 .4

0.6

0.8

1

1.:.1

1.4

1.6

1 .8

2

0 "7

0

0.:.1

0 .4

0.6

0.8

1

1.:.1

1.4

1.6

1 .8

2

time ( Second·)

x

to·"

~nnnmnnrrumMnrnmnnno~
0 0.:.1 0.4 0 .6 0 .8 1 1.:.1 1.4 1.6 1.8
time (Seconds) x

:.1

to·"

Figure 4.6 : Comparison of the outputs of the QVCO Buffer (403.5MHz), Divided by 5 at output of the first "OR" stage. The output of the second "OR" stage would change due to the fact that one of the second "OR" inputs is set to be "zero." Therefore the output values of the second "OR" also vary as it is depicted in Figure 4.6. Figure 4.7 depicts the schematics of divide by 2 circuit. The loading transistors of M92, M93, M98, and M99 are operating in the linear region. This would cause a lower RC constants associated with the output nodes of the D-Flip Flops [21]. The full voltage swing of the output signal, generates the turn on and turn off voltages for the next divide by 2 stage. In design of each transistor the width and length are considered in a fashion to reduce the capacitance of internal and external nodes. This in turn would lead to propagation delay and the desired output signal.

42

INPUT+----1

Figure 4.7 : Schematics of the Divide by 2 circuit. A cross coupled transistor pair exhibit a negative resistance of

-2 and this value of resistance gm

can be controlled by the bias current. In fact a negative resistance can be placed in parallel to a positive resistance. In reality the SCL design is a Differential stage with variable negative resistance load. Figure 4.8 represents the idea of the negative resistance in the SCL circuit. Figure 4.9 also depicts the half circuit for the SCL D-Flip Flop.

R 93

Data Input + (From the other half circuit)

-1

M91

1--

Data Input (From the other half circuit)

-2/ gm &9, 90

12

11

Figure 4.8 :The schematic diagram of the divide by 2 half cell circuit.

43

R 92

Data Input+

---jf 88

r-1/gm

Figure 4.9: The schematic of a half circuit of Figure 4.8.

The load of the differential pair in Figure 4.8 consists of resistors R92, R93 and the cross coupled transistors M89 and M90. With an increase in current I1 the amount of negative resistance

( - 2 )decreases [22]. By considering the circuit at Figure 4.9 the equivalent resistance can be
g m89,90

shown as following :

In this case by a decrease in the amount of g m the equivalent resistance increases and therefore
lowering the frequency of oscillation. By considering the right transistor sizes the output signal would be divided by two. By looking at Figure 4.2 the selection of the division ratio(32 /33)is performed by "Mode" signal. When "Mode" signal is equal to 1 the prescaler is dividing the input frequency by 32 and when the"Mode"signal is at 0 the division ratio is being set to 33. These changes have been depicted at Figure 4.11 and Figure 4 .15. In Figure 4.2 after each divide by 2 section an inverter buffer is placed to provide the driving capability of the next divider. 44

4.3 Synchronous and Asynchronous Counter divide by 32/33

By considering Figures 4.10 and Figure 4.11 the signals of the 403.5 MHz input to the prescaler is being divided by 32 and 33 respectively.

[JJ [JJ [] [ ] [ J [] [] [] I 3 ~ 11 , JJ JJ , ~u H JJ H,H11H . .J , .u .u H, JJ . . . i
~ ~ID l]
C>'-&00. ,.....__
~~

., . ., ., . ( _ ~.,.....,., ) d _ _ .., __ ._ . c:S&'V"focl.e

by 2

-

Jl

o-"'

~ ....... ( _ o Q.....,., .. ,

e> .....,

P""''"' _.,..,.._, ..,.,... ..... dt-ct.... by ::a c

s·..,.-·

~-..._d

by

-.ao·'

312 )

Figure 4.10: The QVCO output signal (403.5 MHz) divided by 32 (12.61 MHz).

i ~WJ rn m ·m m o rrJ ·
o o.2 o.4 o.6 o.e 1 1 .2

Out: put oE the ft.rat divide by 2

H

ro ··o · · o
t.-4
1 .6 1 .e
1.4

i

2

i ~ffl · . 1 1
0 0.2

..--.. 2

·:
0.4

1

0 .6

++
·u··.

th'tle ( Seeond· )
~ond.

OU.t:: put oEthe

divide by 2

I

r
0.8

1 ....

JH 1
1

I1
1 .2

1 ...

+,. ·+
i I
H

1

1
1.8

1.6

n
0
I

i ;E · · ·· +f ··· · i · ····· ·I]
0 0.2 0.4 0.6

tll'ne ( SeC'ondt )

Out put oE the thtnl cll:vtdc by 2 ( out put

·· I ··
0.8

+~
1
l

2 X 1 0 ""'

d~al

dl:vtded by 33 )

i · ·· ·······
1.2

~
1 .6

u··

i
1.8
1.8

1 .4

2
X 1 0" 7

tlnu!! ( Seeond t )

i ~[] I i
0 0.2

Out:pur:of'tbe

' or«ife~y 4 ~ f
0.4 0.6

Hr
0.8

IH J+OjVIdobyt
tiTne ( Seconds )

~c=ontroldsnal

(MC)

I . . ...... + I .. ·l
1 .4 1.6

3
2

J.:;;J

Figure 4.11: The QVCO output signal (403.5 MHz) divided by 33 (12.22 MHz). 45

One of the considerations of the divider circuit is the inter-modularity of the design. The circuit would perform from 200MHz range till 827 MHz oscillation frequency.

~ ::l--=:-T·= i~::·--:7·~~~-·t=-~:==ri
o o .
1

:~~M~~~~~~~~~~~@~~~~~~~[~~~~~~~~~~f~~~~]lMfi~~~M~~~~M~~~~~~~M~~~~~~~~~~~M~~ j :r· ·n· D···n·D · n·nTrnf·n~Rnrns·n1n~n~n · n · : n·n· n·ni
j
o o . :a o .:a o.:»
0 .4

o .a

o .6

o .7

o .e

0 .9

d :rn. ·

( fi·o:: o nd · )

a

:a so· ·

o

o . :a

o .:;r

o .3

0.1-

o .s

o .6

o .7

o ..e

0 .9

:a

o.::;a

o .3

0 .1-

o .a

o.6

0 .7

o .a

0.9

.1

·

l:l rn ·

( S "'eond · )

x

.ao· ·

Figure 4.12 : The output signal of QVCO (827 MHz) divided by 4.

i =~lill~MM~~~m~~M~M~Mlilll~milllilliiii~~llilM[~~rmiJlililll/WW~IllillM
o o . :a o .2 o .a 0 .4 o .a o .6
0 .7

o .a

0 .9

~R·DiD · D · Do[rOfo~R~a~ITJ~fFD· · O · D·· R·· Ri j ~[1··0 · 0 · [l··D l D 7iff}'ff[ii'E l·· fTI··D· ·D··Dlo-'f~
j
o o.:a o .:a o .3 o .4 o.a o.6 o .?' o.e o .9
o o . :a

:a

:a

o .:a

o .a

0.1

o .a

o .6

0 .7

o .e

0.9

:a

a ...... ( s.c-c..n ch )

x

:ao· "'

Figure 4.13: The output signal of QVCO (827 MHz) divided by 5.

~ :w~~/1!1~ ~~.~~/fir~·~@~~~~ ~~~]~~t~~~~~~~@f~~~·f[~.M~i~o~j~~~~~~ID~~ ff~~~·m~~~~ ~[~]~~·~~~~! ~ ] D0D0~ nO~TfoCn~~fjfffti1JJ-fiJb DolO D O D noi
3

o~

..
!

Ua::n· c · · c o Pct · 3 ~-'--·-.--oa····-

·

ao· ..

E · -·
;t!
:a . 6
o

~--+---+-'
o .a

:
!

'
o-.::11 o . :.

~
o .&

+----+---+-----1
o . .,. o_a o .·
-

o .4
n~e C

o .· S e con d · :;J

a s o· ·

i i i

= [J·· · ·El····· OJ·· ···[[l·· ·OD)~·rn·~n~ . .
J·· !·· ···'·!··· l·· · ····i··· l····· '··i···l·· o~rr~~Tf~
o
0 . :1 0 .2
o ...:J

o

o.s

0 .2

o ...:J

o .4

o .a

o.4

o .e

~t .. · · ·I·· ·r····· · · l · O~p~rT--~-..-by 2!<FP~ .
0

.,....,. < ~· )

. lT · '·· l·l···· · ···· IFl···· -·g~
o .6 o.7 o .e o.o
3

rn. . EJ···R·· ··R
·
o . '7 o .e o .o s
xao·"'

o .&

o.s

0.:2

0 ...3

0 .4

.,....,. ( --=-""""· )

0.15

0.6

r·-. ~rr ,··i··· · ··· · · ·lr··········j
22
0 . '7 0.8 0 .9

-

.1.

:1.0""'

Figure 4.14: 827 MHz frequency divided by 32(25.84 MHz)

46

i;m
-2
0

Out put o~ the ft.r·t divide by 2:

n
0.:11

H rn HH m
0.2 0.3 0.2 0.3

r n · · ro
0.4 0.5
o~thc

H m HH m
0 .6 0.7

H m ··
0 .8

r:n n
0.9 1 0 .9

j

~ tn HH H iHI
0

' l I H f H+H IH i IH H 'T
I
0 .40.2

O.ll

+
1

tt rn·(S.CO~)

Out put

·econd divide by 2

\

i ~t . . .
0
0

1
O.ll

r HHH

1

Out put o~t:be

0.5 0 .6 0 .7 0 .8 ttrn· ( .5oecc>nd.· ) third divide by 2: (out put ··....-· divided by 33 )

1

+ ... HHHHi
0.4 0.5 0.4

r

i
0 .6

0 .3

+ I H. H H i F1 H HHI Hl ........ +I HHH3
II
I
ll

1

0.7

0.8

0.9

1

ttrn· ( Seeoncb )

:.:: 10"7

Ou.t: put o~ the ~ control ·I~

( MC )

i~Hl H ······· r~~~-~ -b~··L;;z···J ··· l··· ·Jf~vlde-+··S
0.1.

i
0.7

........

:H I H H 3
I .....

0.2

0 .3

o.s.

0.6

0 .8

0 .9

1
:.:: 10""

ttrn· ( Sec'ondoo)

Figure 4.15 : 827 MHz frequency divided by33(25.06 MHz)
Synchronous
~----l

FIn From the

I

I
I I

QVCU
Buffer out

put

I I
I

L---- --- - -- --------- ------ --------- ---- ------ --------- - --- _I

Mode Control (MC)

Mode

Fout Prescale

Swallow Counter

Figure 4.16 : The complete system level blocks of the synthesizer divider.

In Figure 4.16 the output of the 32 /33 divider is fed to the program counter and the swallow

counter. First the prescaler begins the operation by dividing N+ 1(/33) until the swallow counter "A" 47

is full. The prescaler is then set to divide by N(/32 )through issuing the "Mode = 1"signal and counter "A" is disabled. The division continues until the programmable counter B is also full and it triggers the "Reset" signal which in turn resets both counters "A" and "B." The following formula represents the above procedure. (B-A)N+A(N+1) = NB+A A= 2, B = 84 (84-2) (32) + 2 (33) = 2690 (number of total division ratio) 403.5 MHz + 2690 =150KHz As it has been depicted in Figure 4.17 "Final_Output_Signal"of the divider is 150 KHz. The "Mode" signal is being changed twice to zero. This signal implies division. by 33. For the rest of the period the "Mode" signal is equal to"1"(divide by 32). In Figure 4.18 a segment of the "Mode" signal is equal to zero (divide by 33) has been enlarged. The code for the Digital component (Swallow Counter and the Program Counter) has been written in Verilog-A.

5~0

I

I

10
time('--)

15

20

Figure 4.17 : The output of the frequency divider, "Final_output_signal" at 150.0 KHz.

48

!.fr !Fml output signal 2

1.fr

0 2 ·:o~

>

~1 .0
Divide by 3~
0 2.: 0 IMO<Je_U>ntrol '

l

.,
....
6.7

·=

..
6.5
6.6
tme(us)

6.4

6.8

6.9

.

Figure 4.18 : Enlarged section for the "Divide by 33"section . Two continues divide by 5 are being used at the Mode_Control Section to obtain the divide by 33.

4.4 Summary

In this chapter an integer divider(divide by 2690)has been simulated. This divider has been implemented in Mixed-mode design. It consists of a 32/33 divider, a swallow counter, and a program counter. By the proper combinations of the 32/33 divisions the desired Integer-N division can be obtained. The SCL topology used in this design would allow a wider frequency range(200-827MHz) for the divider. That in turn would allow the inter-modularity of the design. The dual modulus prescaler 32/33 is made of a 4/5 divider and three divide by two components. Slight modifications have been done to the SCL D-Flip Flops and SCL divide by 2 schematics by removing the bias transistors at the bottom of the differential pairs. This in turn would also help in decreasing the topology's dependence on external bias sources. The divider consumes approximately 2.3 mW of power.

49

Chapter 5 Phase and Frequency Detector (PFD), Charge Pump(CP), and Loop Filter(LF)
Since the Phase Frequency Detector (PFD), Charge Pump, and Loop Filter operate in a close interconnected manner all three components should be investigated together at the system and schematics level. The PFD relates the phase and the frequency differences between the reference frequency (150 KHz) and the output signal of the divider. These signals are being converted to 2 output signals "Down Positive," and "UP Negative" which in tum would be converted to current by the Charge Pump. This current can be turned into a voltage by means of the Loop Filter(Low Pass Filter). The interrelations of these components have been shown in Figure 5.3.

5.1 Phase Frequency Detector (PFD)

The basic Phase Frequency Detector(PFD)has been depicted in Figure 5.1. This topology consists of two D-Flip Flops and an AND gate. However in this design due to the fact that the Crystal Oscillator's output signal is sinusoidal; the inverter buffer converts this signal to a rectangular wave form which makes the PFD more accurate. The buffer also provides the Crystal Oscillator the driving capabilities for the next D-Flip Flop stage. Figure 5.2 represents the True Single Phase Clocking (TSPC) circuit for low frequency operations. This type of circuit has been chosen for their superior power savings and their speed at the desired frequency range [23]. The Data input of each D-Flip Flops has been set to high (VDD). Therefore using a low power design circuit for the D-Flip Flop would be crucial. A clock transition of the right polarity turns on the associated D-Flip Flop. If "Input A" is high then signal "A" would go to high and if "Input B" is high consequently signal "B" would go to high. Signal "A" and signal "B" are considered as "Down Positive" and "UP Positive" 50

signals, respectively. However if either "A" or "B" are high simultaneously as detected by the AND gate, the feedback topology resets both D-Flip Flops. The wave forms of the Figures 5.5 - 5.8 indicate such a transition for the Reset signal as a spike. An active "B" signal tells the synthesizer to raise the frequency of the QVCO since the QVCO is lagging behind the input signal. An Active "A" signal provides the opposite behavior [24]. Therefore "Up Positive" and "Down Positive" outputs provide directions of phase and frequency error.

In fact the magnitude of the phase error is indicated in the width of the "A"or "B" pulse signals.
This notion has been shown (in red)in Figures 5.6 , 5.8 at Signal " B". The pulse widths are at 90 degrees and 270 degrees respectively. The change in the frequency has been shown in Figure 5.9 at signal "B" for the time that frequency has to increase and in Figure 5.10 at signal "A" as to reverse should be implemented by the synthesizer due to an increase in the output frequency of the QVCO. From operational point of view signal "A"(DownPostive)in this Figure is issuing the order to decrease the frequency of the QVCO in the synthesizer.
Signal From Frequency 01Via8r Input A TSPC Low Frequency 0- FLIP FLOP

A

Oifi
RESET

BUffii'
Crystal Oscillator Input B TSPC Low Frequency 0-FLIP FLOP

B

Oifi

Figure 5.1: System level design of the Phase and Frequency Detector (PFD)

Each D Flip Flop has been designed by utilizing TSPC low frequency circuit. Due to the nature of TSPC circuit since there is no feedback in the D-Flip Flop the speed of these circuits can go up to a few GHz. However this design has been modified from [24] by introducing a "Reset"signal and a

51

I

NMOS transistor (M66). Considering the "Reset" signal is equal to 1, the behavior of the TSPC DFlip Flop is as following: This design works based on the Gate Source (GS), Gate Drain (GD), and Drain Source (DS) capacitances of the transistors. When Clock is high as the result transistors M58, M63 are OFF and transistors M59, M65, M70 are turned on. As Data signal goes high (VDD) it causes transistor M59 to be turned on and transistors M57 to be turned off. Therefore it forces the input to the inverter which is made of M60 and M61 to go to zero and the output of the inverter becomes high. This phenomena turns transistor M62 to ON position. At this time transistor M64 is turned off. Since M63 is off and the "Reset" signal is high therefore M66 is operational and the input to the transistors M67 and M68 (another inverter circuit)would be set to zero. Transistor M69 is ON due to the facts that the output of the first inverter circuit (M60, M61)is high. As it was statecl before transistor M70 is also turned ON .Therefore the input to the third inverter circuit (M72 and M73) is high and the output of the third inverter is low. To accelerate this transfer a feedback transistor M71 is being used as pull up transistor. The introduction of the transistor M66 as the reset transistor causes the output to go to zero rapidly.

Data

Figure 5.2 : The Schematic design of the D-Flip Flop (TSPC low Frequency) 52

If the positive edges of the "Input A" and "Input B" are exactly aligned then the two D- Flip Flops, turn on together, very quickly (signals "A" and "B" in Figure 5.5). The net output of this condition creates glitches resulting from imbalances between "A" and "B"signals. These glitches constitute the phase detector ripple waveform when the synthesizer is in equilibrium [25] . The ripple energy is very small and its spectral content is widely spread [25]. It is also important to design aDFlip Flop and AND gate that is quick to response to the changes of the outputs of the D-Flip Flops.

5.2 Charge Pump and Loop Filter ( LF )
5.2.1 Charge Pump

Design of the charge pump has been depicted in Figure 5.4. The implemented circuit has been modified from [5]. This topology is also called differential charge pump single ended output. Transistors M 74, M 76 and M 84, M 85 are used to switch the current in the differential pattern. There are three sets of current mirrors used in this design. Pair of M75, M 78 , the pair transistors of M79, M 80, and the pair transistors of M81, M 83. Additional transistors M77 and M82 would

improve the transient performances of the charge pump by bringing M78 and M81 gate voltages back to VDD when "UpPositive" and "DownPositive" signals are disabled [24]. In Figure 5.5 when there is no difference between the phases of the "Input A "and "Input B" signals, therefore signals "A" and "B" don't show any phase differences. As the result output voltage of the loop filter doesn't make any changes. The Charge Pump thus remains idle and capacitor C2 sustains a constant voltage.

53

PFD

Charge Pump

~
Down

i
Positive

Loop Filter

+

Down
Negative

Out put ofthe Loop Filter (Vctrl)

RESET
Crystal Oscillator

Buffer

UP Negative

Charge Pump

:: ; ±T=r;c: ·
,,c1 T
: ~o Pf '7

UP Positive
L

Figure 5.3 : The Open Loop system level design of the PFD + Charge Pump (C.P) + Loop Filter (Low Pass Filter)

In fact a charge pump converts the widths modulated output signals of the PFD (which consists of

"UpPositive," "UpNegative," "DownPositive," "DownNegative") into a current whose amplitude is constant and its direction is controlled mainly by the "UpPositive" (signal B), or "DownPositive" (signal A). A charge pump can be considered as digital to analog converter. The higher the output amount of the charge pump current the higher the amount of the contributed noise to the PLL synthesizer. Therefore in the design of the charge pump special care should be given to the amount of the current which is being used by this device. One of the design constrains would be the fact that the higher charge pump current the higher the overall power consumption of the synthesizer. By looking at Figure 5.9 the height of the charge pump current can be considered as IcP· As it has been depicted from Figures 5.5 to 5.8 when the phase of the input signal (to the PFD) changes with respect to the reference signal, the duty cycle of the output signal of the PFD grows linearly with change of phase ( L\8 ). Therefore the average current of the charge pump is: I our

L\8 = I cp -

2I1

54

Based on the above assumption a constant for the PFD/CP can be defined (as the average charge pump output current) for phase differences.

K
PDF

=lout
~e

= l cp
2IJ

[A I rad]

(5. 2.1 )

Figure 5.4: The schematics of the Charge pump (CP).

~:n
0

1

n ·r:rr~~t:~fT-nC ~PttJ
:11 . 8 2 2. 8 3 3. 8

f~
...

,n
... . . ...

~= r:s:tzs=Ell42ts=zsr;?:§
~ J l o!~
f.. [··
H

r~o~~-lc4-~r··~r=T·<~Fjj ·u· l u··· JJ r -·o~
., ..., ... ( - e n d · l -

ao · "

i :.!-t----:· .:::-f · .J_ I _ ·-7f _ · ·-+ "--:7,l.

--:i--+. .1.--L f_ · .---!1-·· __.I ~ J.=-··. - ·--, ···!I _ ···
~-rn·

·1 ...... -.t:-A·

· ----:.:7-f.

H -'1 ----!i

( :S...Ccnd.· )

ttrn e ( Second· )

l
4 '5

j ..

3
S
S

i ·~f

J. .. . . J...... J. ...... J........ .!.
tt nt · ( S.Co n cb
)

······ I
3.115

4

!········ ·· +······ 3
4 .S

Figure 5.5 : Zero Phase difference between the Reference frequency and the divider output frequency. (open loop signal for the PFD, CP, and LF)

55

In Figures 5.6, 5.7, and 5.8 the phase difference of 90, 180, and 270 degrees have been introduced
to the PFD, CP, and the Loop Filter. Each phase difference has been detected at the open loop test and translated as pulse widths.

;p - - J . c1 ··t . PhR:";.~~;.v .... ~L o 1 . rJ.. . . P ·· ~L o . i i O :t I j., l t . J.... . i t . J.. . I 1.. . . J.. . . . . 1 1. .. ~L ......1 i
~
to~ .... .

· ·..-.·l

· It ~

B -

C s.co.--1 · )

x

2

o ··

-

.I

.,. ...., ,.(-OT'Od· )
~

x:I.O""

j"

o .;f
00

..

o L

i .

o ....t

..,.._.._~'d.- L ~ p

.,..._._..

...

~-~.~ ~;:~:-

. ..

j_
'
- . o nd.· )

u- ·

"

l

3 1.

4

I

l .. -i
:.o· ·

Figure 5.6: 90 degrees phase difference between the Reference frequency and the divider output frequency. (open loop signal for the PFD, C P, and LF)

;1
i

___TI-· r-3--drj~ r--r-·ph~-~cr -1 ~ rJ. 1 3 ~t::s:tZi: zrs:~:es:TLS:-:zts: x=s:tL §
k:t~-~:t
> ..,.._ .., < ___,_. > ·
o · ..
~~

...... _ , _ c;.,...._.

~---··----

- . . -.... c:

~""'

.. -

~

"'""·C-c: o...S· l

.,.. .. i. . .... 3 .,.
:lO""

.t . . . ·l·t

- o-

i ;OE ········ i ········. f.
0 .·

.L . · · . i .

.. j ....
2 ..
"'""* ( - e o.....S· l

j
3

- :ao·"

Figure 5.7: 180 degrees phase difference between the Reference frequency and the divider output frequency. (open loop signal for the PFD, CP, and LF) 56

j

>

:t
00 0

.... ...

o.a

j

. .....
0-:t

0 .5

i::
j

}
0

......... ..

0 .5

I·. p~~~ Dl+e~~~ . ..... I I I l I 1++1 IR" II .. ..... "·" ...,_. l ! I ! I .j ............. I· I J ! t ..l + j" . . . . . . . I . . . . . . . . . . . . I . ,P.... .............I· . I + I I .. ..... j
... .. ..... .. .
1

t'lrn· ( Second· ) ·· _.._., · t - - -

:.:

:~.o· ·

2

2.S

3

t'lrn·(Soec:and· )

:.: J.o··

..

..

.... ..

..

...

..

1

1 .5

2

2 .5

3

3.5

-4. 5

time ( S.c:ond· )

:~.o··

Out put: oE the Loop Allier

f"D<"'~...,.,
1

...........

1.5

2

2.5

3

3.5

5

t'lrne ( Second8)

:.: J.o··

Figure 5.8 : 270 degrees phase difference between the Reference frequency and the divider output frequency. (open loop response signal for the PFD, CP, and LF)

i:Oo!. LJ···cir·rs-TT1. -ffi. · O i+··-~
..,...,. ( see.ond· ) :ao· ·

~:rs:.tazs·NJS'&:zs:A
··~ ·t ·

B · (Input to ·Up

Poddve · olthe Chrawae

·unap >
f ..

i} . . . . I . .O f.
0 0.5

m;~J}oiwe~Jf
1 .5 2 2 .5
time ( Second· )
Do~

J
3

~

1 · · · · · · . 0 · · -. R
3 .5 4 4.5
X

:1

5
J. 0
" 11

i

1..
0 0

!.. ..
0 .5

I . f ·· ... · ... l + . . , .
·tp1al
.t

-A · ( tnpul: to ..

..

I . . . I··· + . J .. .. .. I I . . . ,.······....i
Po·ldve · of" the Chrarwc Pun.p )
3 3.5 4 4.5
x

:1

:I . S

~

2.5
time ( ~· )

S 10"11

i][OA .1 . 9 1 ~~; 0'7b~T II
O .S l l .S 2 2 .5
t:lrne ( Seeond· )

bl . J ~
4 4 .5
X

3

3 .5

S
J. 0
"11

il
o

·. . . . ·I·.. .... +.
o.s
1.

Out put: of" the Loop Fllt.er

j~~~~tt«e~~
:1.s
~ ~.s

, ............ ! ..
3 3.5

..j
4

!
4 .5

1
IS

time ( Seeond· )

Figure 5.9 : The frequency difference of 120KHz from the divider output and the 150KHz reference frequency. 57

Figure 5.9 represents the condition when the input frequency of the PFD is lower than the reference frequency. At this stage the PFD after detecting the frequency difference(shown at signal "B")increases the "UpPositiove" input to the charge pump which in turn increases the output voltage of the loop filter(Vctrl). That is why this signal is called the "UpPositive" signal. The current of the charge pump has been shown in Figure 5.9.

In Figure 5.10 by an increase in the input frequency to 160KHz, the PFD detects the frequency
difference and signal "A"(_ "DownPositive") causes the change in output current of the charge pump which in turn it decreases the output voltage of the loop filter (Vctrl).

In Figure 5.4 when the "UpPositive"(signal "B") pulse width is high, the transistor M84 is on and
the current mirror transistors M83 and M81 are also on. The current that passes through transistor M81 will be conducted to the output of the charge pump. The dimension ratio(Width/Length)of transistors M83 and M81 would be kept as unity. Since one of the main objectives of the design is a decrease in the power consumption the length of the transistors M85 and M84 has been increased by 17 times the minimum length. When the "DownPosivite"(Signal "A") is high, transistor M76 is operational and the current mirror transistor M75 and M78 are also in use. The ratio of the transistor lengths of M79 is 1.5 times more than the transistor M80. This design precaution has been implemented merely due to the fact that when the QVCO's control voltage has reached its peak voltage(maximum control voltage percent overshoot). The synthesizer circuit would have a faster decrease in voltage, to allow the closed loop response to reach to the steady state voltage level. The dead zone phenomenon happens when there is no output from the charge pump in response to the phase error at the input of the PFD [26]. The usual cause of the dead zone is the sluggish response of the charge pump current switches reaction to the "UpPositve"(signal B)and

58

"DownPositive"(Signal A) coming from the PFD. Therefore great caution must be given in the design of the charge pump to make PFD/CP combination robust.

il

0 o~------~ o~.5--~----~ ~----~--71 .~ 5 ------~2~------~ 2~ . 5~~--~ 3
th"n e ( s.conda )

--i p + - -i -

· lp:aal at - B -

-f

l

------ 1 ----- ----------- 1

I

j

:.: J. o · ·

· lp:a.al at - A -

-F---------::1

2 . 15

I--l
]II[
oP ···

t:l..., · (
Out put
o~

S.CO MCU )

i O-OlF ·-- --- ··
0

0 . 02

··· ···

i ' . ... I ........ ~?&Ydi<Fe~nce ~ I
I.

l:be Loop Hitler

+. . . . .
2 .5

J.o··

3

j
3

o

0. 5

t.,..,...

1 .5 c s.eond·

>

:z

:.: J. o·'"

Figure 5.10: The frequency difference of 160KHz from the divider output and the 150KHz reference frequency
5.2.2 Loop Filter (Low Pass Filter)

The loop Filter (Low Pass Filter) which has been used in this design is shown in Figure 5.3. The disadvantage of using an active loop filter in the proposed synthesizer would be the increase in the complexity of the circuit, increase in the power consumption, and creation of more noise sources . This loop filter introduces a Pole and a zero to the overall design of the Synthesizer. Previously in Chapter 3 it was indicated that the QVCO also contributes a pole to the overall design of the circuit. Therefore the synthesizer order is of 3rd order, type II PLL. The pole in the loop filter is created by capacitor "Cl"(if considered by itself). It should be noted that introduction of another perfect integrator in the PLL loop leads to instability. To remedy this 59

scenario often a resistor is placed in series with the integrator capacitor (Cl). This adds a zero to the trans-impedance of the loop filer. The "RC" combination causes a phase advance in the PLL open loop transfer response therefore solving the stability problem [9]. This synthesizer is considered type
II due to the presence of the two perfect integrators in the topology. At the time that the charge pump

is operational, the charge pump drives the series combination of Rl and Cl. At each time that the current is being injected into the loop filter, the control voltage (Vctrl) experiences a large jump [22]. The resulting ripple severely disturbs the QVCO and corrupting the output phase [22]. That is why c:apacitor C2 has been introduced in parallel to R1, and Cl. Capacitor C2 takes the ripple noise off the Vctrl signal. It should be considered that the value of the C1 > C2. Capacitor Cl should be one tenth to one fifth of the Capacitor C2 [22]. The overall role of the loop filter in the synthesizer is to convert the current pulses generated by the charge pump (as depicted in Figure 5.12) to a filtered voltage. This filtered voltage would control the QVCO output frequency. The loop filter frequency response has huge impact on the dynamic behavior of the Integer-N synthesizer. Figure 5.11 represents the Closed loop Control Voltage (Vctrl) at the output of the loop filter. Very often the PLL has to cope with DC leakage currents in the tuning line of the QVCO. The loop reacts to the leakage current by increasing the duty cycle of the charge pump output signal [9]. The amplitude of the spectral components of the charge pump current grows in direct proportion to the duty cycle [9]. Therefore some of the undesired signal components of the output current which are represented in Figure 5.12 as spikes in current are also converted to the voltage by the loop filter. The Voltage ripples that are created on the QVCO's Control Voltage would have the contribution to the output signal of the oscillator. Due to the high accuracy of the Figures 5.11 & 5.12 the 2% settling time can be found to be at 160j..ts and the charge pump current for 100 J..lS is also shown.

60

1.1121

2 % of Steady State Value obtained at 160 flS

1.0"
90C!'Jrn 8021rn

"'"

700rn 61i!JC!'Jrn
!>00m

\A
.._. ' - ' ~'

40C!'Jrn
300m 2 00m

'""'m
" · ""

£1. £1121

'~ I - ' , '

1021u

· ' , , ~-' -1 --'- · ,

,

'

,

,

2 £10u

.300u

~ I -' L , , .._,-'-' ~ 1 ~' ,
~0u

o

o

'o

I .._ · ·-'-'

,

,

500u

~ · 1-'--'--'

,

o

,

_.

602Ju

7 021u

I-'~ , ,

,

-'_...._ I

800u

tin-te (

s

)

Figure 5.11 : The Closed loop Control Voltage transient response. (Vctrl)

I
o-

Ch""'QG Pump Ct.ln'ont

I '
I

I
I
I

I u_ " tit:::
1
~

I

,... ~ -rr
I I

I
I
I

~-·
-

J I r r
I

I I I
I

II

l
I ----1-

I
I

--

I
I
(lM,

-

I I
I
75

I

-

0

25

so
tlmo

Figure 5.12: The charge pump current

5.3 Open Loop and Closed Loop transfer functions

The loop considered in this design consists of a QVCO of gain Kvco [Hz/V], a programmable divider of the ratio of N, a Phase Frequency Detector and a Charge Pump (PFD/CP), with the gain of KprutcP = lcp/2I1 . (Icp is the nominal charge pump current). Since there is a zero located at the loop filter therefore this zero can be expressed as Sz

= - - . For
RIC)

-1

simplicity the LF transfer

function can also be shown as

4 (S) at Laplace domain [9]. However with the help of the similar

analogy for the QVCO's Laplace domain (as the QVCO acts as an integrator in the PLL synthesizer

Kvco Loop) the transfer function could be obtained as 2I1-- . At the time when the loop is locked

s

61

the phase of the divided output signal accurately tracks the phase of the reference signal (Crystal Oscillator). The open loop transfer function of the design can be shown at Equation 5.2.2.

G(S)

= K PDF /CP Z f

(S)

2I1Kvco 1

s

N

(5.2.2)

G(S) =I CP

z
1

2I1

(S) 2I1Kvco 1 S N

(5.2.3)

The Close Loop transfer function shall be obtained as Equation 5.2.5.
H(S)

=

G(S) 1+G(S)

(5.2.4)

H(S)=--------~--~--~

2I1KPDFICPZ f (S)(Kvco l N)

S + 2I1K PDFtCPZ J (S)(Kvco IN)

(5.2.5)

The above closed loop transfer function H(S) shows that PLL synthesizer has a low pass transfer characteristic [9]. By looking at the loop filter, two time constants can be obtained as Tl =

R 1C 1 , and

T2

=

R1

cc
1

2

·

C1 +C 2

The first time constant Tl is also called "time constant of stabilizing Zero" and

the second time constant T2 is called the "time constant of the pole" which is used to attenuate the reference frequency and its harmonics [25]. The ratio of C 1I C 2 Figure 5.3 the Loop Filters Tl=R 1C 1 = (40KQ)(50 pF) = 2f.lS. is called "b". Therefore in the

The obtained value for "b" is equal to 8.33. For the purpose of the fast settling time, the close loop natural frequency
OJ,

of the synthesizer should be maximized but it can be close to about 1/lOth of

the reference frequency for the stability reasons [24]. Therefore Zf(S) can be expressed as:
62

(5 .2.6)

The Phase Margin <I> m of the synthesizer can be calculated as indicated in [9] :

<I> =arctan(
m

b-1 7.33 ") =arctan( ro;-;;\) = 52° 2...;b 2-v8.33)

(5.2.7)

Since <I> m

= Cos-t; , (;

the damping ratio )[27]. Therefore the obtained ;

= 0.6. From the Control

Voltage (V ctrl) of the synthesizer (Figure 5.11) the 2% settling time is observed to be at 160 11s. The settling time is defined as the time the PLL takes to settle with in the lock range and is primarily dependent on ; [28]. Substituting this data in Equation 5.2.8 would result in the approximate value

of OJn (the open loop band width frequency).

Tsettlement2o/o

4 := ---;=-':IOJn

(5.2.8)

OJn

:= 41.6 KHz

The Close loop resonant frequency (OJ,) of the PLL synthesizer can be approximated obtained by Equation 5.2.9 to be equal to 21 KHz. [29].

(5.2.9)
OJ, ::: ( 41.6K)~1-

2(0.6) 2

(5.2.10)

OJ,=

21 KHz

63

The approximate value for mr is close to one tenth of the reference frequency. The overall current usage of the Analog components of the Integer-N PLL synthesizer is at 2.6mA. This in tum would result in 4.68 mW power consumption.

5.4 Summary

The Phase Frequency Detector (PFD) has been designed based on TSPC low frequency topology. In this design a reset transistor has been introduced to the TSPC circuit and this topology is capable of producing a faster response time. The output of the PFD is the representation of the phase and frequency error between the divided signal and the reference clock signal. The charge pump converts the pulse width generated by the PFD to current. The charge pump designed has been a simplified to decrease the power consumption mean while maintaining a faster response time. The loop filter also introduces a zero and a pole to the overall circuit topology. The loop filter also takes away the noise ripple of the control voltage. The total power consumption of the PFD, CP, and LF is about 500 flW.

64

Chapter 6 Comparison and Conclusion

6.1 Comparison

This thesis presents a low phase noise, wide frequency range, QVCO topology with current reuse technique. Also slight modifications of TSPC D-Flip Flop and a differential charge pump are proposed. The power consumption of the different modules of the Integer -N PLL synthesizer has been indicated in Table 6.1. Table 6.1 : The power consumption for each component. Module QVCO ( without Buffer) QVCO (with Buffer) Prescaler 32/33 (divider) PFD+CP+LF Power consumption 0.9mW 1.8mW 2.3mW 0.5mW

The total power consumption of the synthesizer is approximately at 4.6 mW by considering the leakage currents and total power consumption of all components. The comparison of the measured values of QVCO results from the authors at [15] and the simulated results of this thesis have been depicted in Table 6.2. The authors at [15] have produced two different types of QVCOs. One by utilizing LC tanks (spirals) and another one with the use of ring oscillators. This thesis proposed design is capable of producing frequencies from 200MHz to 827 MHz. However the proposed design has been targeted mainly for the MICS(Medical Implantable Communication Services) at frequencies 402-406 MHz. As indicated in [15] the acceptable phase noise level for the MICS band devices is at -83 dBc/Hz. One of the improvements that has been 65

observed in this thesis is achieving a low level of phase noise without utilizing any spiral (LC tank). The amount of power dissipation of the QVCO has been kept at a reasonable level with respect to the total power consumption of the Integer-N synthesizer. Table 6.2: Comparison of QVCOs Proposed Method
A. Tekin, 2006 A. Tekin, 2006

First method [15] Output type Type of oscillator Technology Frequency Range QVCO Ring oscillator TSMC 0.18 Jlm 402-406 MHz (200 - 827 MHz) Power supply Power consumption Phase noise for 400MHz oscillation
@

Second method [15] QVCO LC tank (Spiral) TSMC 0.18 11m 402-406 MHz (350 - 460 MHz) 1.5 v 1.2mW

QVCO Ring oscillator TSMC 0.18 Jlm 402-406 MHz (370 - 440 MHz) 1.5

1.8V 0.9mW

v

1mW

-100.3 dBc/Hz

-83 dBc/Hz

-98 dBc/Hz

160 KHz offset 2 37° 4

#of stages Temperature

c

Table 6.3 indicates the comparison between the design of the proposed QVCO and a VCO by authors at [30] . The obtained results would indicate that this thesis QVCO's power consumption is almost comparable to the power consumption of VCO circuit at higher technology level which makes this design more desirable for low power devices. This phenomena is achieved without relative loss of phase noise.

66

Table 6.3 : Comparison of the proposed QVCO with another VCO Proposed Method Technology Oscillator type Output type Frequency Range Voltage swing Power supply Power consumption Phase noise for 433 MHz TSMC 0.18 f.!m Ring oscillator QVCO 433 MHz 1.6 v 1.8 v 0.9mW
@

A. Ayed, 2007 [30] CMOS AMS 0.35 f.!m Ring oscillator

vco
433 MHz 0.3 v 1.5 v 0.8mW
@

160 KHz offset

500 KHz offset

-99.5 dBc/Hz

-100 dBc I Hz

The Integer-N PLL synthesizer that is offered by the author shall also find some practical usage in industry. At the time of writing this thesis there are products available in the industry by Zarlink Semiconductor for Implantable devices at MICS and 2 channels (433-434 MHz).This transceiver is also designed in 0.18 f.!m technology. Based on the Medical Implantable RF Transceiver ( ZL70101) data sheet the power supply on this device runs at 2.1 V - 3.5 V. The total chip has the power consumption of(@ 5mA current) 10.5 mW-17.5 mW [31]. With respect to the total amount of the power which is being dissipated by the entire transceiver the amount of the power usage of the Integer-N synthesizer offered by this thesis is at a reasonable level. There are also other aspects such as usage of a lower reference frequency (Crystals)of 150KHz, which would lead to a lower price for the final product. However one of the trade offs such a consideration would be a slightly bigger size for crystal oscillator. At this time (based on Digikey Corporation's catalog) a 24 MHz crystal oscillator's (ABM10 Series 2.5-2.0 SMD) size is 2mmx 2.5mmx 0.55mm and a 150KHz crystal oscillator's size (ECS-31-Series) after modification approximately is 6.2mm x 2.1mmx 1mm. 67

As it is shown above the size of the external components of the device might increase slightly however it should be considered that the proposed Integer-N synthesizer has the power supply of 1.8 V which in turn utilizes a smaller size battery. A 150 KHz crystal oscillator also has a lower price and a lower phase noise by comparison to a 24 MHz crystal oscillator. This in turn contributes to the lower overall phase noise of the PLL synthesizer. ZL70 I 01 uses LC spirals for the oscillators combined with divide by 4 circuits which make the implantable device larger [32] . However since the required phase noise of the MICS devices are at -83 dBc/Hz therefore the presence of the large spirals could be replaced by a ring oscillator [15].

6.2 Conclusion

The proposed Mixed-mode Integer-N PLL based synthesizer has been simulated in TSMC 0.18 J.Lm technology with 1.8V power supply. A QVCO with a wide operational range, low power dissipation, and a low phase noise based on current reuse method has been designed. With respect to the spiral inductors this design also has a smaller size. A 32/33 prescaler with frequency operation of up to 827 MHz was designed. This inter-modularity of the prescaler makes the schematics also more promising for other industrial applications. The phase frequency detector of the synthesizer was created by introducing a reset signal to a TSPC D-flip flop which makes the design faster. The overall result of the simulation achieved the expected 2% steady stage settling time for the closed loop control voltage at around 160 J.LS with a reasonable power consumption of 4.6 mW with respect to the overall power dissipation of the total transceiver chip ( 10.5mW-17.5mW).

68

6.3 Future Work

The chip can be fabricated in TSMC 0.18

~m

technology. Due to the limitations of the software at

Ryerson university programming of the Digital part of the counters could be done in a fashion that the user can adjust the frequency channels. There is also the issue of bringing the power consumption of the divider component to a lower level. In fact decreasing the power dissipation in the prescaler has the highest priority in the overall improvement of the design. This can be done by sacrificing the inter-modularity of the design and providing a divider which only operates at 200MHz- 540MHz. Also performing the phase noise analysis of the whole entire synthesizer based on specifications of each module can be addressed in the future.

69

References
[1] W. Greatbatch , C. Holmes., "History of Implantable devices,"

IEEE Engineering

Medicine and Biology, vol. 10, issue 3, pp. 38-49, Sept. 1991.
[2] B. Litt , "Implantable devices for Epilepsy: A clinical perspective," Proc. of the Second

joint EMBS I BMES Conf, vol. 3, pp. 2035-2036, Oct. 2002.
[3] L.M Li, H. W. Hao, B. Z. Ma, X. W. Wen, F. J. Liu, C.H. Hu, "Development of implantable neuro-stimulator used for Brain and nerve stimulation," Proc. IFMBE, vol. 19, pp. 430-433, 2008. [4]

F. G. Weiss, "Implications of Silicon monolithic RFICs for Medical instrumentation and
telemetry," IEEE Digest of papers on Silicon Monolithic Integrated circuits in RF Syst, pp.195-204. Sept. 1998.

[5]

M. Sawan, H. Yamu, and J. Coulombe, " Wireless smart implants dedicated to multi channel monitoring and micro stimulation," IEEE Circuits and Syst. Magazine, vol. 5, issue 1, pp. 21-39, 2005.

[6]

D. Mandai, T. Bhattacharyya, "7.95 mW 2.4 GHz fully -integrated CMOS integer- N frequency synthesizer," 2(/h Int.. Conf. on VLSI Design held jointly with 61h Int. Conf. on

embedded Syst., pp. 156-164 Jan. 2007.
[7]
K. Shu, E. Sanchez-Sinencio, CMOS PLL Synthesizers: Analysis and Design, New York:

Springer, pp. 14-22, 2005. [8] H. C. Luong, and G. C. Leung, Low voltage CMOS RF frequency synthesizers, Cambridge: Cambridge University Press, 2004. [9] C. Vaucher, Architectures for RF frequency synthesizers, Boston: Kluwer Academic Publisers, 2002. [10] B. Razavi, RF Microelectronics, Upper Saddle River: Prentice Hall. 1998. [11] J. Craninckx, M . Steyaert, Wireless CMOS frequency synthesizer design, Boston: Kluwer Academic Publishers, 1998.

70

[12] M. H. Perrott, et al., "A 27-mW CMOS Fractional-N synthesizer using digital compensation for 2.5-Mb/s GFSK modulation," IEEE J. Solid-State circuits, vol. 32, pp 2048-2059, Dec. 1997. [13] Y. Liu, C. J. Tung, and T. H. Lin, "A low power asymmetrical MICS wireless interface and transceiver design for Medical imaging," Conf. on BioCAS, pp. 162-165, Nov. 2006. [14] T. Dupire, L. F. Tanguay, and M. Sawan, "Low power CMOS transmitter for biomedical sensing devices," 13th Int. Conf. on Electronics, Circuits and syst., pp. 339- 342, Dec. 2006. [15] A. Tekin, M. R. Yuce, and W. Liu, " Integrated VCO design for MICS transceivers," IEEE CICC, pp. 765-768, Sept. 2006. [16] J. R. Westra, C. J. M. Verhoeven, and A. H. M. Van Roermund, Oscillators and oscillator systems, Classification, Analysis and synthesis, Boston: Kluwer Academic publishers, 1999. [17] N. Roberts, "Phase noise and jitter- A primer for Digital Designers," Zarlink Semiconductor Inc., Ottawa, Canada, Tech Rep., July. 2003. [18] A. A. Abidi, G. j. Pottie, and W. J. Kaiser, "Power-conscious design of wireless circuits and systems," Proc of the IEEE, vol. 88, No. 10, Oct. 2000. [19] W. R. Yang, J. L. Cao, F. Ran, T. G. Qing, "A high-speed divide by 32/33
freq~ency

divider

in 0.25J.!m CMOS technology," Proc. IEEE 4th International Conf. on Microwave Technology, pp. 554-557, 2004. [20] S. K. Singh, T. K. Bhattacharyya, and A. Dutta, "Fully integrated CMOS frequency Synthesizer for ZigBee applications," Proc. IEEE Inti conf. on VLSI design and conf. on Embedded Syst. Design, pp. 780-783, Jan. 2005. [21] C. M. Hung, B. A. Floyd, N. Park, and K. K. 0," Fully integrated 5.35-GHz CMOS VCOs and prescaler," IEEE Trans. Microwave theory Tech, vol.49, pp. 17-22, Jan. 2001. [22] B. Razavi, Design of analog CMOS Integrated circuits, New York: McGraw-Hill, 2004. [23] J. Yuan, and C. Svensson, "New single clock CMOS latches and flip flops with improved speed and power savings," IEEE J. of Solid State circuits, vol. 32, no. 1, pp. 62-69, Jan. 1997.

71

[24] L. F. Tanguay, M. Sawan, "An ultra-low power ISM band Integer-N frequency synthesizer dedicated to implantable Medical Microsystems," Analog Integrated Circuit and signal

processing, Springer, vol. 58, no. 3, pp. 205-214, March 2009.
[25] F. M. Gardner, Phase lock Techniques, 3rd edition, NewJersey: JohnWiley & Sons, Inc. pp. 249, 2005. [26] E. J. Hernandez, A. Diaz-Sanchez, and E. Tlelo-Cuautle, "A 1.35 GHz CMOS wide band frequency synthesizer for mobile communications," Proc. Int. Symp on circuits and syst., vol. 2, pp. 292-295 , May 2003. [27] R. C. Dorf, Modern control systems, Toronto: Addison Wesley, 3rd edition, p. 115, 1980. [28] S. Ahmed, R. D. Mason, "Improving the acquisition time of a PLL based, Integer-N frequency synthesizer," Proc. on ISCAS, vol. 4, pp. 365-368, May 2004. [29] W. F. Egan, Frequency Synthesis by Phase Lock, New York: John Wiley, 1981. [30] A. Ayed, M Lahiani, and H. Ghariani, "Automatic Design of micro power CMOS voltage controlled oscillator (433MHz) for PLL application," IEEE J. of Applied Sciences, vol. 7, no. 8, pp. 2568-2575, 2007. [31] Zarlink Semiconductor, ZL70101 Data sheet- Medical Implantable RF Transceiver, 2007. [32] P. D. Bradley, "An ultra low power, high performance Medical Implant Communication System ( MICS )transceiver for Implantable Devices," conf on BioCAS, pp. 158-161, Nov. 2006.

72

