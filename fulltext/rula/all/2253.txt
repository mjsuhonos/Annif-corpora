A NEW SHAPE ADAFATIVE MOTION CONTROL SYSTEM
by

ZHIW EI YANG (Bachelor o f Engineering, University of Xi'an University, P.R.China 1994)

A thesis presented to the Ryerson University in partial fulfillment o f the requirements for the degree of M aster of Applied Science In the Program o f Electrical and Computer Engineering.

Toronto, Ontario, Canada, 2004

©ZHIW EI YANG, 2004

PROPERTY OF R V m S W UNIVERSITY UBRARY

UMI N u m b e r: E C 5 2 9 9 3

All rig h ts r e s e r v e d INFORMATION TO U SE R S

T he quality of this reproduction is d e p e n d e n t upon th e quality of th e copy subm itted. Broken or indistinct print, colored or poor quality illustrations and photographs, print bleed-through, su b sta n d a rd m argins, an d im proper alignm ent can ad v ersely affect reproduction. In the unlikely e v en t th a t th e au th o r did not se n d a com plete m anuscript an d th e re a re m issing p a g e s, th e s e will be noted. Also, if unauthorized copyright m aterial had to be rem oved, a note will indicate th e deletion.

UMI
UMI Microform E C 52993 Copyright 2008 by P ro Q u e st LLC All rights reserv ed . This microform edition is protected ag ain st unauthorized copying u n d er Title 17, United S ta te s C ode.

P ro Q u e st LLC 789 E a st E isen h o w er Parkw ay P.O . Box 1346 Ann Arbor, Ml 48106-1346

Author's Declaration
I hereby declare that I am the sole author of this thesis. I authorize the Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research. --

Signature

I further authorize the Ryerson University to reproduce this thesis by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research.

Signature

n

Instructions on Borrowers
yerson University requires the signatures o f all persons using or photocopying this thesis, lease sign below, and give address and date.

Name

Signature

Address

D ate

g

m

Abstract
A New Adpative Motion Control System, M asc., Electrical and Computer Engineering, Ryerson University, Toronto, 2004

In recent years, there is a growing trend on integrating Computer Aid Design (CAD] Computer Aid Manufacturing (CAM) and Computer Aided Inspection (CAI). This thesi presents a new shape adaptive motion control system that integrates part measurement wit! motion control. The proposed system consists of five blocks: surface measurement; surfao reconstruction; tool trajectory planning; axis motion control and part alignment.

In this thesis, the key technology used in surface measurement and surface reconstruction i spatial spectral analysis. In the surface measurement block, a new spectral spectrun comparison method is proposed to find out an optimal digitizing frequency. In the surfac( reconstruction block, different interpolation methods are compared in the spatial spectra domain. A spatial spectral B-Spline method is presented. In the tool trajectory planning blocl a method is developed to select the motion profile first and then determine the tool location according to the reconstructed surface in order to improve the accuracy of the planned path In the part alignment, a three-point alignment method is presented to align the par coordinates with the machine coordinates.

Based on the proposed methods, a software package is developed and implemented on th( polishing robot constructed at Ryerson University. The effectiveness of the proposed systen has been demonstrated by the experiment on edge polishing. In this experiment, the shape o the part edges is measured first, and then constructed as a wire-frame CAD model, based oi which tool trajectory is planned to control the tool to polish the edges.

IV

Acknowledgements
wish to offer my gratitude to my co-advisors. Dr. Jeff Xi and Dr. Bin Wu for their ongoing apport and encouragement throughout my research. During the whole thesis research, Dr. Xi irected me in all the detailed aspects of the system development and thesis writing. Dr. Wu ave me a lot o f precious advices every time when I was lost. Dr. Wu is not only my upervisor, but also my mentor. Some comments Dr. Wu gave me will be the guidelines for ly whole life.

am also grateful to my family and friends for their support and often much needed ivolvem ent. Special thanks to my wife, Li Feng, who has given me not only her love, but Iso her time in all the house chores in my final stage of thesis writing to support me to finish ly research and thesis.

Table of Contents
Author's Declaration......................................................................................................................... [ Instructions on Borrowers.................................................................................................................i . Abstract............................................................................................................................................. i Acknowledgements........................................................................................................................... Table of Contents.............................................................................................................................. ) List of Figures....................................................................................................................................i Chapter 1 Introduction..................................................................................................................... 1.1 Motivation of the Study......................................................................................................... 1.2 Research Objectives............................................................................................................... : 1.3 Method of Approaches.............................................................................................. :

1.4 Thesis Organization................................................................................................................ : Chapter 2 Overview and Background..............................................................................................: 2.1 Literature Review....................................................................................................................! 2.2 Basic Theorems Related to Each B lock...............................................................................! 2.3 Summary................................................................................................................................ 1 Chapter 3 Surface Measurement and Reconstruction.................................................................. L 3.1 Surface Measurement........................................................................................................... L 3.1.1 Surface Digitization Systems....................................................................................... L 3.1.2 Existing Spatial Spectral Analysis Method................................................................. It 3.1.3 New Method for Sampling Frequency Determination..............................................11 3.1.4 Further Discussion on the Controller Design of the Iterative M ethod....................2( 3.1.4.1 PI Controller........................................................................................................... 2'. 3.1.4.2 Adaptive Controller.............................................................................................. 3.2 Surface Reconstruction........................................................................................................ 2^ 3.2.1 Typical Interpolation Methods in Spatial Dom ain.................................................. 2t 3.2.1.1 Polynomial Curve Interpolation...........................................................................2t 3.2.1.2 B-Spline Curve Interpolation............................................................................... 21

VI

3.2.1.3 Surfaces Interpolation................................................................................................. 31 3.2.2 Evaluation o f the Interpolation M e th o d s........................................................................ 33 3.2.3 Derivation o f the B-Spline Curve Coefficients in Spatial Spectral A nalysis.......... 38 3.3 Sum m ary........................................................................................................................................42 Chapter 4 M otion Planning and C o n tro l............................................................................................ 43 4.1 Tool Trajectory P lan n in g ........................................................................................................... 43 4.1.1 Task Space Trajectory Planning....................................................................................... 44 4.1.1.1 Traditional Task Space Trajectory Planning M ethods......................................... 44 4.1.1.2 A New Trajectory Planning M ethod........................................................................ 46 4.1.2 Joint Space Trajectory Planning....................................................................................... 51 4.1.2.1 General CNC M achines...............................................................................................51 4.1.2.2 T rip o d ............................................................................................................................. 52 4.2 Axis M otion Control....................................................................................................................55 4.3 Alignm ent S y stem ....................................................................................................................... 56 4.3.1 N ancoo's Three Point Alignment M ethod......................................................................56 4.3.1.1 Alignment W ithout Considering N oise....................................................................56 4.3.1.2 Alignment Considering M easurement N o is e ......................................................... 57 4.3.2 Extension o f the Three Point Alignm ent......................................................................... 58 4.3.2.1 Extended Three Points Alignment System ..............................................................58 4.3.2.1 One Point Alignment S y stem .................................................................................... 60 4.4 S um m ary........................................................................................................................................ 61 'hapter 5 Implementation and Software D evelopm ent.................................................................. 62 5.1 Structure o f the Existing Tripod Control S oftw are...............................................................62 5.2 New Software Structure..............................................................................................................64 5.2.1 Surface M easurem ent.......................................................................................................... 67 5.2.2 Surface R econstruction.......................................................................................................68 5.2.3 Tool Trajectory P lan n in g................................................................................................... 69 5.2.4 Axis M otion C ontrol............................................................................................................71 5.2.5 Part A lignm ent...................................................................................................................... 72 5.3 Sum m ary....................................... 75

chapter 6 Simulations and Experim ents.............................................................................................76

vu

6.1 Experiment 6.2 Simulation 6.3 Summary Chapter 7 Conclusions Appendix A Introduction to Spatial Spectral Analysis References

't '5 !5 1î I1 `4

vm

List of Figures
igure 1-1 The Proposed Adaptive M otion Control System .............................................................3 igure 3-1 TTP Developed for This Thesis......................................................................... 13

igure 3-2 Laser Scanner........................................................................................................................13 igure 3-3 Principle of Laser Scanner................................................................................................. 13 igure 3-4 Delta Train and Sam pling...................................................................................................16 igure 3-5 Spatial Spectral Analysis of M easurement and Reconstruction.................................16 igure 3-6 Close Loop Diagram o f the Iterative M ethod................................................................20 igure 3-7 Part Digitizing System of PI Controller.......................................................................... 21 igure 3-8 Part Digitizing System of Adaptive Controller............................................................. 22 igure 3-9 Transfer Function of the Part Digitizing System of Adaptive Controller................22 igure 3-10 The Impulse & Frequency Response o f Ideal Low-Pass Filter..............................36 igure 3-11 The Impulse & Frequency Response of W indowed Sine........................................ 36 Igure 3-12 The Impulse & Frequency Response o f Cubic Interpolation..................................37 Igure 3-13 The Impulse & Frequency Response o f Cubic B-Spline.........................................38 Igure 4-1 Trapezoidal Velocity Profile............................................................................................. 45 'igure 4-2 3-4-5 M otion Profile........................................................................................................... 45 'igure 4-3 R oss' Trajectory Planning M ethod................................................................................. 46 'igure 4-4 Intra-Path and Inter-P ath................................................................................................... 47 'igure 4-5 3-4-5 Motion Profile o f Accurate Motion Planning..................................................... 49 'igure 4-6 Flow Chart of Iterative Next Point Determination....................................................... 50 'igure 4-7 Tripod Developed by Ryerson University......................................................................52 'igure 4-8 Vector Loop for Slider Leg............................................................................................... 53 'igure 4-9 System Diagram o f PID Close loop of CN C..................................................................55 'igure 4-10 Transform Between Two Coordinate System s............................................................61 ugure 5-1 M ethod o f Approach o f Old Softw are.............................................................................62 ugure 5-2 Software Structure o f Old Softw are.................................................................................63 'igure 5-3 GUI o f Old Software to Load Set Points........................................................................ 64

IX

Figure 5-4 GUI of Old Software of Motion Control Figure 5-5 GUI of Old Software of Tripod Feedback Figure 5-6 New Software Structure (1) Figure 5-7 New Software Structure (2) - Alignment

<I ( I ( ) ( ^

Figure 5-8 GUI of Edge Probe..................................................................................................... ( 5 Figure 5-9 GUI of Area Probe...................................................................................................... ( Figure 5-10 OpenGL Visualization of Interpolated Curve Figure 5-11 Main Interface of Trajectory Planning ! ( * 1

Figure 5-12 Offline Simulation of the Tool Trajectory Planning............................................. ; Figure 5-13 Main Interface of Axis Motion Control i .

Figure 5-14 Before One-Point Alignment................................................................................... / Figure 5-15 After One-Point Alignment...................................................................................... / Figure 5-16 After Three-Point Alignment................................................................................... 1 Figure 6-1 Experiment Setup......................................................................................................... 1 Figure 6-2 Doorstop Used in the Experiment................................................................................ 1 Figure 6-3 Main interface of the Edge Probing............................................................................. 1 Figure 6-4 Interpolated Edge........................................................................................................... 7 Figure 6-5 The comparison of Planned Path (bottom), Actual Path (upper) and the State Monitoring of Tripod............................................................................................................. ^ Figure 6-6 Surface Model of the Original Part........................................................................... Figure 6-7 Surface Model of the Damaged Part......................................................................... Figure 6-8 Power Spectrum of the First Segment...................................................................... Figure 6-9 Digitized Data.............................................................................................................. Figure 6-10 Resampled data......................................................................................................... Figure 6-11 Reconstructed Surface.............................................................................................. Figure 6-12 Top View of the Planned Trajectory....................................................................... Figure 6-13 Side View of planned Trajectory............................................................ ............... Figure 6-14 Three-axis Tracks and Tracking Errors..................................................................

Chapter 1 Introduction
1.1 M otivation o f the Study In NC (Num erical Controlled) machining, the main trend is to integrate the CAM /CAD/CAI (Com puter-Aided M anufacturing/ Computer-Aided Design/ Computer-Aided Inspection) techniques. In sculptured surface machining, it requires to cutting a stock to the desired shape according to the CAD model [1], After the stock is mounted on the NC machine, there will be a series o f operations including rough cutting, finish cutting and polishing. The tool trajectory is determ ined by the CAM system. After machining, it is necessary to inspect the m anufactured part. The general approach of CAI is off-line by using Coordinate measuring m achine (CMM). M ultiple ahgnm ents are required. The efficiency is low. To overcome this problem, on-line surface measurement and inspection are required. It is especially important for the polishing process, as it may require checking or reconstructing the part.

OMM (On-M achine M easurement) technique is one approach that integrates the CAM and CAI on the same machine. For surface measurement and inspection, a contact/non-contact m easurem ent tool, such as a touch trigger probe or a laser scanner, is used. After a cloud o f point data is captured, a CAD model can be constructed using the surface reconstruction techniques. W ith the CAD model, tool trajectory can be generated by CAM. For machining, a cutting tool will be installed on the same machine.

A great deal o f research has been done in OMM [2-6]. However, the efficiency o f the system has not been fully studied. For example, in surface measurement, the reported research has not answered how to efficiently scan the part. The current approaches assume that the larger the sampled set, the more accurate the constructed CAD model.

The method proposed in this thesis is to provide an integrated system which integrates surface measurem ent and tool motion contorl. It can also be used for surface reconstruction o f the part and generation o f the tool trajectory for the polishing process. The term shape

adaptive motion control system is introduced in this thesis to differentiate the OMM systei reported in the literature. The shape adaptive motion control system goes beyond the OMf that it not only can measure the part, but also can control the cutter to follow the contour c the surface to do certain machine operations, such as polishing. More details about th system structure will be found in chapter 3 and chapter 4.

1.2 Research Objectives The main objective of this thesis is to develop a new shape adaptive motion control systei that integrates tool motion planning and control with surface measurement. The propose system consists of five blocks: surface measurement; surface reconstruction; tool trajector planning; axis motion control and three-point alignment. discussed in detail. In this thesis, each block i

The secondary objective of this thesis is to implement the proposed methods on the polishin robot, called Tripod, developed at Ryerson University.

1.3 Method of Approaches This thesis presents a new shape adaptive motion control system. The goal of the system is t perform the contour following task on a part with or without a CAD model. Différer approaches are applied when dealing with different conditions as shown in Figure 1-1.

· When the tool trajectory is given, the tool trajectory is aligned to the machin coordinate system so that the planned tool trajectory can be sent directly to the axi motion controllers. · When only the CAD model is given, the tool trajectory needs to be generated by th tool path planner and then sent the axis motion controllers after alignment. · When the CAD model is not given, the part will have to be scanned, and the CAI model of the part will be reconstructed. Then tool trajectory can be generated and th axis motion control can be executed. There are two types of surface measuremer methods supported by the system, edge probe and surface probe. Edge probe is t

probe the two-dim ensional curves. Surface probe is to probe the three-dimensional surfaces.

Without CAD Model and withoutTrajectory

With Trajectory

Surface Measurement With CAD Model Digitized Data

Alignment

Surface Reconstruction Alignment Reconstructed Surface Aligned CAD

Aligned Trajectory

Tool Trajectory Planning Discrete Command Points Axis Motion Control

Figure 1-1 The Proposed Adaptive M otion Control System.

1.4 Thesis Organization The thesis consists o f seven chapters.

Chapter 1 introduces the motivation and the research objective o f this thesis. The goal o f this thesis is to develop a new shape adaptive motion control system consisting of five blocks: surface measurement; surface reconstruction; tool trajectory planning; axis motion control, and alignment.

Chapter 2 presents a literature survey for each block, followed by a list o f the main background technique used in the thesis.

Chapter 3 covers the first two blocks: surface measurement and surface reconstruction. In the surface measurem ent block, a new spectral spectrum comparison m ethod is proposed to

determine an optimal digitizing frequency. In the surface reconstruction block, B-Spli î interpolation is adopted after comparing with other interpolations.

Chapter 4 presents the last three blocks: tool trajectory planning, axis motion control ai 1 alignment. In the tool trajectory planning block, a method is developed to select the moti( i profile first and then determine the tool locations according to the reconstructed surface ) improve the accuracy of the planned path. In the axis motion control block, discrete PI ) control is discussed. In the part alignment block, a three-point ahgnment method introduced which aligns the part coordinate system to machine coordinate system. ;

Chapter 5 describes the software structure and the software implementation.

Chapter 6 presents the simulation and experiment of the system. Simulation and experime t results are provided to validate the effectiveness of the proposed system.

Chapter 7 provides conclusions and suggests future work for the thesis research.

Chapter 2 Overview and Background
2.1 Literature Review This thesis is based on spatial spectral analysis techniques. Spatial spectral analysis is a branch o f signal processing. Different from traditional signal processing techniques, the spatial spectral analysis deals with the spectra of spatial signals, such as two-dim ensional curves, three-dim ensional surface and images. After Fourier Transform or other transforms such as wavelet transform, Fourier Descriptors, which are Fourier coefficients can be used to represent the spatial signal. Compared with the original signal representation in spatial domain, the Fourier D escriptor is a more compact form while carrying the same information. Based on this approach, spatial spectral analysis techniques can be used in a variety o f fields such as spatial signal compression and feature extraction.

In surface reconstruction, Wu and Sheu used Fourier descriptors, i.e. the Fourier coefficients o f spatial signals, to reconstruct the contours of an object from stereo images [7]. Li

presented a spectral method for surface reconstruction and 3D active contours by solving elliptic equations [8]. In [9], Wu and Sheu used the Fourier variables to represent 3D surfaces. In the pattern recognition field, Kunttu applied Fourier descriptor for classifying shapes [10]. In the image processing field, G. Bonmassar used a wiener filter based on the restoration technique to decrease motion image blurs [11]. Lucchese designed a new class o f Chromatic filters for various color image processing applications, such as elimination of color smearing effects along the edges between bright and dark areas [12]. Cox applied the fast Fourier transform to implement image rotations [13]. Since calculations are performed in the spectral domain, where Fourier coefficients are used to represent spatial domain signals, com putation com plexity is decreased compared with the methods directly rotating spatial signals in the spatial domain. In [14] W ebb presented an adaptive controller for sheet metal forming by com paring the spectra o f sheet metals under the forming process. To be mentioned next in the surface measurement and reconstruction blocks, spatial spectral analysis methods are applied and comparisons wiU be made with traditional spatial domain methods.

The proposed system developed in this thesis consists of five components: surfao measurement; surface reconstruction; tool trajectory planning; axis motion control; and pai alignment. A great deal of studies has been carried out on each of these individual areas [15 65].

Surface measurement and surface reconstruction are two closely linked blocks. Surfac( measurement involves how to choose an appropriate sampling frequency for surfao digitization without prior knowledge [15] or only limited prior knowledge [16 - 18] However, till now, especially in practice, generally accepted rules in surface measuremen are that the larger the point set, the higher the reconstruction accuracy. The problems with th( surface measurement are usually very time-consuming. The larger sampling point set, th< longer time needed. Larger point sets also cause problem in surface reconstruction. Th< computation complexity and computation time increase correspondingly. A great deal o research has been done in finding out an optimal sampling frequency. These methods can b< classified as two types: pure spatial domain analysis and spatial spectral analysis. In the firs category, Tsukada [17] treated this problem from the point of view of statistics. Woo [18 applied the Hammersley sequence to reduce digitized points for dimensional measurement o: geometric features. In [19] Wieczorowski designed a new sampling strategy. Different fron all other researches, in which the sampling path is a rectangular grid, Wieczorowski drovt the measurement tool-bit to follow a spiral path. Lee tried to solve the problem in anothei way [20]. He presented a method to reduce the sampling point set after the surface measurement. Similar research work can be found in [21 - 22]. These approaches are suboptimal methods since they do not reduce the sampling time.

Generally speaking, all these analyses are performed in the spatial domain, and th( relationship between geometry and sampling frequencies cannot be revealed. To overcome this problem, spectral analysis would have to be applied. From the Shannon Theorem [23], ii is known that the bandwidth of spatial signals is the key to choosing an appropriate sampling frequency for digitization. If there is no or only partial information available, the bandwidth of the spatial signals cannot be determined before digitizing. There is only little research proposed to overcome this problem. Huang [16] used the computer vision technique tc

calculate the bandwidth before digitizing. In this thesis, an iterative method is proposed for surface digitization through analyzing the spectrum change for undersampling or

oversampling [24]. The comparison of the two methods will be made in Chapter 3.

Surface reconstruction is to calculate the mathematical model from partial known information. The partial known information can be multiple images from multiple different views [25-27], or fro m contours and curves [28][29], or fro m discrete points [30]. In this thesis, the surface reconstruction falls into the third category, from discrete points. In the past research, Payne performed surface reconstruction by using multiaxial triangulation [31]. Jong applied the alpha shape for surface reconstruction [32]. The above two methods can be classified as linear interpolation schemas. In [33], Kang presented a polynomial surface reconstruction method. Johnstone presented a Bezier surface interpolation method in [34]. In [26], Boyer proposed a method for curve and surface reconstruction by introducing regular interpolants, which are polygonal approximations. The quadratic surfaces are then converted to bi-cubic surfaces or B-Spline surfaces. Qin applied triangular B-Splines to do interpolation in [35]. G ' continuous splines are used in Stoddart's paper where he presented a m ultiresolution scheme for surface optimization [36]. B-Spline patches are also used by

D ouros in [37] to reconstruct the surface of the human body. The above methods are all pure spatial analysis methods and can be roughly classified as linear interpolation, polynomial interpolation, and B Spline interpolation. Usually, in pure spatial analysis, research only focus on how to implement an interpolation schema.

There is not much research in comparing different interpolation methods, like interpolation error and computation complexity. To answer this question, the best way is still through spatial spectral analysis. From this point of view, surface reconstruction can be considered as processing the digitized points through a reconstruction filter. The performance o f this filter can be analyzed from its impulse and frequency responses. Lehmann [38] compared various interpolation methods for image processing in terms of accuracy, computational pow er and visual effect. He found that B-Spline provides the best performance in terms of impulse and frequency responses. Therefore, in this thesis B-Spline is used for surface reconstruction.

Furthermore, B-Spline interpolation schema in spatial spectral analysis is also discussed : . Chapter 3. Tool trajectory and axis motion control are two closely related. Tool trajectory planning is 1  plan the trajectory (include location and motion) for the tool-bit of the machine to perfori . certain tasks. The tasks can be to cut a stock [39 - 40], or to perform contour following lit spray painting [41], or polishing [42 - 43]. In this thesis, tool trajectory planning belongs 1 the second type, i.e. contour following. With the development of the CNC machining, ax motion control becomes more and more accurate. Therefore, more and more researches ai focused on tool trajectory planning. Since the most existing CNC machines only accept lir or arc command [1], traditional trajectory planning involves two steps: tool locatio determination and motion profile specification. Altintas had in-depth discussion aboi traditional path planning methods in [1]. A similar method is presented in Ross' thesis in [4A , where he also introduced a point-to-point based trajectory planning. Generally speaking, th conventional way is to plan the tool locations first and then add a tool motion profile [4f [46]. In this thesis, a motion profile is selected first and then tool locations are determine according to the reconstructed surface. The revised method improves the tracking accurac since more set points are directly captured on the CAD model. Axis motion control is to drive the tool to follow the planned path. In practice, a machine ca be a serial robot or parallel robot as described in the standard textbooks, such as by Shaban in [47]. A parallel robot has more advantages over serial robot from the point of view of loa and accuracy. The main disadvantage of parallel robot is its model complexity. A great dee of research has been done on parallel robots. A high speed four DOF (Degree of Freedom parallel robot was presented in [48]. Almonacid presented a six DOF (Degree of Freedom climbing robot in [49]. Yang presented a parallel robotic system consisting of a collection o individual standard units, which can be assembled to perform various tasks [50]. For mote control, PID control is still the most widely used method. The proposed system i implemented on the parallel robot. Tripod developed by Ryerson University [51]. Tw important issues, mobility analysis and inverse kinematics of Tripod are described in thi thesis.

Alignm ent system is an im portant sub-system in CNC machining. W hen the part is mounted on a machine, it is required to align the part coordinates from path planning to the machine coordinates under which the planned path will be executed. There are new technologies adopted in this research. Lee presented an ultra-precision alignment system in [52]. The main problem to solve is to use as less points as possible and how to deal with the noise [53]. In this thesis, an alignment system based on three-point alignment system is presented. The system extends the method presented by Nancoo in [54] for aligning the part and tool trajectory in laser scanning to aligning the part in machining. Further discussion can be found in chapter 4.

A nother topic covered in this thesis is three-dimensional visualization techniques, which is the foundation o f the CAD/CAM. With the fast development of the com puter technologies, CA D/CAM software has made significant improvement. Computer is not only a com puting tool, it also shows great potential in three-dimensional graphics. Recently, more and more researches are put on three-dimensional visualization techniques. In virtual reality field, M aletic discussed software development issues in virtual reality in [55]. Cross discussed perform ance issues in three dimensional visualization in [56]. Similar researches can be found in [57 -6 0 ]. In CAD/CAM field, Berta discussed the techniques to integrating virtual reality and CAD in [61]. Kim presented a method to visualize and simulate the assembly process to find out collisions in [62]. M ore researches in this field can be found in [63 - 65].

2.2 Basic Theorems Related to Each Block In this section, the basic theorems related to each block are listed. Further discussions will be given from the next chapter.

The following techniques are used in the surface measurement block:

·

Spatial spectral analysis techniques, including concepts o f Spectrum, Bandwidth, and Nyquist Theorems, Parseval's Theorem;

·

Close loop controller design.

The following techniques are used in the surface reconstruction block:

· · · ·

Surface reconstruction from views of point of geometry; Surface reconstruction from views of point of signal processing; Two typical reconstruction schemas including polynomial, B-Spline are studied; Tensor and tensor surface.

The following techniques are used in the tool trajectory planning block:

· · ·

Location planning and velocity planning; Motion profile chosen; Inverse kinematics of Tripod.

The following techniques are used in the axis motion driving block:

·

PID control loop of CNC machine.

The following techniques are used in the alignment block:

· ·

Coordinates transform between two coordinate system; Rotation matrix.

Also, the following OpenGL techniques are used in developing a control simulation systei for the Tripod with visualization and simulation;

· Basic OpenGL techniques; · Advanced OpenGL techniques including point picking, object picking, view rotation and translation, accurate object dragging.

10

2.3 Summ ary In this chapter, the hterature review was performed covering spatial spectral analysis techniques, surface measurement, surface reconstruction, tool trajectory planning, axis motion control and part alignment. The existing problems and challenges o f each block have been introduced. Techniques related to each blocks were listed.

11

Chapter 3 Surface Measurement and Reconstruction
Surface measurement and surface reconstruction are two closely linked blocks. Surfa ï measurement is to digitize the part to create a digitized point set, and surface reconstructk i is to reconstruct the CAD model from the digitized point set. The sampling frequency of tl ; surface measurement is the key factor for these two blocks. It determines the time of tl ; surface measurement and interpolation accuracy of the surface reconstruction. In this chaptt , surface measurement and surface reconstruction are studied from the point of view of spati 1 spectral analysis. In surface measurement, a new iterative spectra comparison method ;

proposed to determine the optimal sampling frequency. In surface reconstruction, two typic I interpolation methods are compared. B-Spline interpolation is implemented by a spati I spectral analysis method.

3.1 Surface Measurement Surface measurement is the base of surface reconstruction. The task of surface measureme is to drive a digitizer to collect sampled points on the surface. The most important paramet in surface measurement is the sampling frequency. When the surface is digitized at a low sampling frequency, the accuracy of the surface reconstruction cannot be guaranteed. On tl other hand, if the surface is digitized at a higher frequency, it will take longer time i i measure the surface. Therefore, an optimized sampling frequency is desired. In this chapter, i new method is proposed to determine the optimal sampling frequency for surfac ; measurement. This method has two steps: surface digitization at an initial samplir ; frequency and sampling frequency adjustment at later stage. 3.1.1 Surface Digitization Systems There are two types of surface digitizing system: contact measurement system and noi contact measurement system.

The most widely used contact measurement system is the Touch Trigger Probe (TTP). . . TTP implemented for this thesis is shown in Figure 3-1. A probe with a contact sensor

12

installed on a CMM. The stylus is driven to approach the part. When in contact, the CM M stops and records the current motion system coordinates. From the forward kinematics, the position o f the toolhead is calculated and recorded. To provide a good coverage o f the part features, the key issue is the digitizing step size in the x and y direction.

Figure 3-1 TTP Developed for This Thesis.

Figure 3-2 Laser Scanner.

Lens

Scanning Mirror

Source

Figure 3-3 Principle of Laser Scanner.

13

Laser scanner is a common non-contact measurement system. Figure 3-2 presents a las scanner driven by Tripod. Figure 3-3 shows the basic principle of the laser scanner. In tl laser measurement, a laser light emitted from the laser source is projected on to the part. Tl reflected light is collected by a linear CCD, from which the position of the part can I calculated. For the laser scanner, the key issue is the sampling speed.

The relation between the geometry and the digitization is most important for a good coveraj ; of the part. The contact measurement is non-continuous, in which the probe moves fro i point to point at the digitizing step size Ds. At each point, the probe will stop to perform tl : measurement. The relationship between Ds (mm) and the spatial sampling frequency (1/mm) is given as ,

( 3 - 1)

The non-contact measurement is continuous, in which the scanner moves along the contoi · of the part without stopping to perform the measurement. In this case, the relationsh; ; between the scanning velocity and the spatial sampling f r e q u e n c y i s given as

( 3 - 2)

where / l (Hertz) is the scanning (time) sampling frequency of the laser scanner, i,e. tl number of points scanned per second.

As it can be seen that eqs. (3-1) and (3-2), the key issue in surfacemeasurement

is 1

determine/^. I f / , is known, then the digitizing step size can be determined for theconta case, or the scanning speed can be determined for the non-contact case.

14

Determ ination o f an optim al

is the most important factor in order to provide a set o f

sufficient digitized points for a good coverage of the part. However, this problem is not well addressed in the conventional scanning process. In the current approaches, the sampling frequency fs is manually chosen. These approaches depend heavily on operator's experience to guarantee that the point set is sufficient for a good coverage. 3.1.2 Existing Sam pling Frequency Determination M ethod As mentioned in last section, usually the sampling frequency is determined by "trial and error" by the operator and the efficiency is low. In the automatic sampling frequency determ ination [16], the spatial spectral analysis is used. In this section, the existing spatial spectral analysis based surface measurement method is reviewed.

The basic concepts and theorems in the spatial spectral analysis include Fourier Transform, delta train, spectrum, bandwidth of the signal, convolution theorem. Shannon theorem, Parseval theorem, filter, impulse response and frequency response o f the filter. The introduction o f these concepts and theorems can be found in Appendix A.

From the point of view o f signal processing, the surface measurement and surface reconstruction can be considered as processing a signal through a filter. The result of the processing can be obtained by multiplication or convolution in either spatial domain or spectral domain. The relationship between the spatial domain and spectral domain is revealed by convolution theorem. From the convolution theorem, multiplication in spatial domain is the convolution in spectral domain and vice versa. In spatial domain, the digitized data (Figure 3-4(c)) o f surface measurement is the result of the multiplication of the original spatial signal (Figure 3-4(a)) by a delta train (Figure 3-4(b)). The reconstructed CAD model is the result o f the convolution of the digitized data with the Impulse Response of the reconstruction filter. In spectral domain, the spectrum of the digitized data is the convolution o f the spectrum o f the original signal with the Frequency Response o f the delta function. The spectrum o f the reconstructed CAD model is the result of the multiplication of the spectrum o f the digitized data with the Frequency Response of the reconstruction filter.

15

Curve

(a). Curve

11

^

^ Della Train

^

(b). Delta train

Di^Uzed Sam ples

(c)

Digitized Samples

Figure 3-4 Delta Train and Sampling

Digitization

Interpolation

r\
(a)
(Ü)

zx
c)

w

Figure 3-5 Spatial Spectral Analysis of Measurement and Reconstruction.

The above figure explains the surface digitization and surface interpolation in spectral domain. Figure 3-5 (a) shows the spectrum of the original signal, and Figure 3-5 (b) shows the spectrum of the digitized data. The spectrum of the digitized data is the convolution of

16

the spectrum o f the original signal with the spectrum of the delta function. In Figure 3-5 (b), the dot-line represents an ideal low pass filter. Figure 3-5 (c) shows the reconstruction result.

A ccording to the Shannon theorem, the reconstructed signal equals to the original signal only if the surface measurement is performed at the sampling frequency not lower than two times o f the bandw idth o f the signal. In this thesis, geometry frequency is defined as two times o f the signal bandwidth. If the geometry frequency can be determined prior to surface m easurem ent, an optimal digitized data set can be obtained by sampling the surface at the geom etry frequency. However, the dilemma is when the CAD model is not given, the geom etry frequency is not known. The only found method to solve this dilemma is proposed by Huang. In [16], Huang use digital image processing method to determine the geometry frequency. In H uang's method, several digital images of the part are taken and analyzed. A rough CAD model is reconstructed. Fourier Transform is performed on the reconstructed CAD model. The geometry is determined and then the surface is sampled at this frequency.

H uang's m ethod is based on the assumption that although the reconstructed surface is not accurate in spatial domain, it contains approximately same information in spectral domain. However, this assumption is wrong. From Parseval Theorem as shown in the following eqn.

dx= £ j Z M \ dx

(3-3)

W here the left-hand side o f the eqn. (3-3) is the signal energy expressed in the spatial domain. The right-hand side o f the equation is the signal energy expressed in the spectral domain. It shows that the signal energy is fully conserved in the frequency domain after the Fourier Transformation. Therefore, for the same signal, the spatial form and spectral form contain the same information. If the reconstructed signal from digital image is not accurate in spatial domain, the spectrum is not accurate as well. At this time, Huang's method lacks the ability to further adjust the sampling frequency.

In next section, an iterative method based on the spatial spectral analysis is proposed to solve the problem for the part without a CAD model. This method is based on the concept o f the

17

spectra characteristics comparison under oversampling and undersampling. The iterative method is introduced to compare the spatial spectrums of two adjacent measurements. The final/ç is obtained when the difference of the two spectrums falls within a given tolerance. 3.1.3 New Method for Sampling Frequency Determination The approach proposed here is based on examination of the spectrum under oversampling and undersampling. The sampling performed at the frequency higher than or equal to the geometry frequency is defined as oversampling. Correspondingly, undersampling is defined as the sampling performed at the frequency lower than the geometry frequency.

As mentioned in the last section, sampling is to multiply the original signal by a delta train observed from spatial domain. From the convolution theorem, multiplication in the spatial domain equals to the convolution in the spectral domain. Observed from spectral domain, the spectrum of the digitized data is the convolution of the spectrum of the original signal with the Frequency Response of the delta function. When the spatial signal is over sampled, the spectrum of the original signal can be fully recovered from de-convolution. However, in the case of undersampling, the spectrum of the digitized data will have distortion due to the folding effect of the convolution.

If the surface is sampled twice at two different sampling frequencies with at least one undersampling, the two power spectra will be different due to the alias effect of the undersampling. The two spectra will match only when two sampling frequencies are oversampling. Based on that, an iterative digitizing schema is put forward as follows:

1. If only partial information is known, the Fast Fourier Transform (FFT) analysis is performed and an initial sampling frequency is decided using the concept of 99% BW. If there is no prior information, the initial sampling frequency can be set manually and the surface is digitized at this initial sampling frequency.

2. The surface is digitized again at the sampling frequency twice of the initial sampling frequency. FFT is performed on two sets of the digitized points. Since the length covered by

18

digitization is always the same, the frequency resolution should be identical for the two spectra. The difference is that the spectrum of the second digitizing would contain more frequency components.

3. The two power spectra are compared, the relative Mean Square Error (MSB) of the power spectra are calculated by comparing the power spectrum at corresponding frequency related to the energy o f the second spectrum. If the MSB is larger than the preset value, it is considered that at least one sampling is undersampling. The iterative method continues.

4. The procedure repeats until the MSB error of the power spectra of the last two digitizing becom es sm aller than a preset value. The digitized points are considered complete and sent to the next block. W hen dealing with two-dimensional signal, by applying two-dimensional FFT on the surface, a two-dimensional power spectrum is obtained. The geometry frequency can be found in the X direction and y direction separately from the accumulation spectrum as defmed in [16]. The spectra comparison method is readily applied to two-dimensional signals. Furtherm ore, two aspects are considered to improve the efficiency o f the proposed method. First, a shuffling method can be adopted to reduce the whole sampling time. After sampling the data set o f /f n j at f r e q u e n c y t h e next digitization is done at the sampling frequency twice o f / / "^. In fact, for the second digitization, it does not need to digitize the surface at the sampling frequency o f since the odd series o f f(n+ l) is f(n). Therefore, if shifting again to get

the digitizer half of the sampling distance and then sampling the surface at

f l ( n + l ) . f( n + l ) is the combination of f(n) and fl ( n + l ) . If the digitizing process ends at N times, the total data sampled is where L is the length covered by digitized. Since the

digitizing process takes more time than computation, the iteration lime is almost negligible. This method is defined as "shuffling" in this thesis. Second, the short time Fourier

Transform can be adopted to further decrease the size of the digitized point set. The disadvantage o f the Fourier transform is that the spectrum does not contain location inform ation due to fixed sampling rate. High frequency component in local area can cause to increase the geometry frequency o f the whole surface. To solve this problem, the two-

19

dimensional Short Time Fourier Transform (STFT) is applied [16]. STFT is to divide the whole surface to small segments and the spectral analysis method is performed separately on these small segments. STFT isolates the local high frequency component to a small area, which improves the efficiency of the method. Corresponding modifications need to be applied to the surface reconstruction block as well.

Compared to Huang's method [16], the iterative method is more robust, since this method searches for a final sampling frequency through iteration. On the contrary, Huang' method cannot adjust the BW if the initial value is not correct. From the control point of view, the above iteration is a close loop proportional control. The close loop diagram is shown in the following figure. In this loop, the proportional gain is set as 2. The close loop control further adjusts the initial sampling frequency until the digitizing reaches the oversampling.

Sampled Data o f Last Time FFT P Controller

S am p lin g

Sampled Data Path Planning D igization

FFT

Figure 3-6 Close Loop Diagram of the Iterative Method.

3.1.4 Further Discussion on the Controller Design of the Iterative Method From the control point of view, Huang's method is an open loop control and the iterative method is a close loop control. Close loop is inherently robust than the open loop control for it has further adjustment mechanism when the conditions are not satisfied. From the analysis of the last section, the controller is simply the proportional (P) control. The proportional gain of the close loop is fixed. The problem arises naturally whether adaptive controller can be presented in this loop. That is, whether the proportional gain can be replaced by an adaptive gain.

20

Sampled Data o f Last Time FFT

Sampled Data

Controller

Path Planning

Digization

FFT

Figure 3-7 Part Digitizing System o f PI Controller.

In the system shown in Figure 3-7, sampling starts at the Nyquist rate o f the desired CAD m odel and it will increase in a gradual way. At each cycle, two spectrums o f two data sets sam pled at two adjacent times are compared. Only when spectrums are identical, we have reached oversam pling state or at least Nyquist rate o f the signal. Otherwise, the sampling frequency will increase depending on the output of the controller. Therefore, the controller design is the m ost important factor in this loop. 3.1.4.1 PI Controller

The first simple extension is to replace the P controller by PI controller. The function o f the PI controller follows

(3-4)

The com m and signal comes form the sum of the proportion control and integration control. There are two param eters in the PI controller, Kp and which are corresponding to the

coefficient o f proportion control and integral control. PI control can elim inate the static error and is widely used in process control and motion control. However, PI controller is not a suitable controller in this case. First, the gain Kp and K, are still fixed. For different parts, to achieve best performance, Kp and K, need to be tuned to deal with different parts. This is not practical. Second, the "shuffling" method is only applicable when Kp is 2. Since the "shuffling" m ethod improves 100 percent efficiency, even well tuned PI controller cannot exceed the performance o f this method.

21

3.1.4.2 Adaptive Controller Another trial of the controller design comes from linearzation. The following control loop is formed to iteratively unveil the bandwidth of the signal and sample the surface of the manufactured part. The transfer function of the system is shown in Figure 3-9.

Sampled Data of Last Time

FFT

A daptive C ontroller

Sampled Data

Path Planning

Digization

FFT

Figure 3-8 Part Digitizing System of Adaptive Controller.

P(n-l) FFT

Adaptive Controller

P(n)

FFT

Figure 3-9 Transfer Function of the Part Digitizing System of Adaptive Controller.

In this system, / is the sampling frequency, P(n) is the spectrum of the sampled data at Trial. P(n-l) is the spectrum of the sampled data at n-1 time trial. E is the error of two spectrums. / is the sampling frequency at n time trial. H(z) is the transfer function from sampling frequency f to sampled data P(n).

In this section, an adaptive controller is brought about by the linearization technique. Given a chosen rate/, there is a corresponding resultant sampled data P and resultant E. If there is a small change i n / the corresponding change in P is AE = E - H ^ i f + Af)
(3-5)

22

D e fin e

A/

A/

(3-6)

Eqn. (3-16) can be approximated to the first order as

H =

(3-7)

// - //-I

If the controller is set as
//-» = A
z

./h

(3-8)

then A/,,, = /, +l = // + A/; +,

C

O

(3-9)
(3-10)

Eqs. (3-9) and (3-10) represent the controller used in the close loop. From analysis, the control frequency will change at the optimal speed of each time.

H owever, this controller is still not a successful design, for there is no way to guarantee that the total o f the digitizing process is better than the fixed rate iterative method, especially com pared with the shuffling method. The second reason is that this method needs three initial conditions to start with. For the cases when the fixed rate converges at the second digitizing, the adaptive controller is a poor design.

23

PROPEfTTYOF R/ER86R UNIVERSITY LIBRARY

In this section, two more controller designs are discussed. Considering various effects, the fixed spatial spectral iterative method is still the best controller among them.

3.2 Surface Reconstruction Signal reconstruction is to construct a signal from the digitized points. There are different reconstruction schemas, such as polynomial interpolation, and B-Spline interpolation.

Signal interpolation is to represent the existing object as a combination of a set of base functions and corresponding coefficients. There are two basic problems in signal interpolation, 1) how to choose a base function set and 2) how to determine the coefficients from the digitized points. There are two approaches to this problem, from the point of view of geometry and from the point of view of signal processing.

From the viewpoint of geometry, the determination of the coefficients involves solving the set equations of

/fiW = / U , )

(3-11)

w h e r e i s the linear combination of the base functions and/fjc,) is the digitized point set.

Typically used reconstruction methods include Polynomials and B-Splines. There are two steps in surface reconstruction, to choose an interpolation method and to implement the selected method.

Generally speaking, there are two approaches for surface reconstruction. The first one is to perform analysis in the spatial domain only. The second is to perform analysis in the spatial spectral domain. There are a lot of researches in the first approach as shown in chapter 2. However, in this approach, it is difficult to compare the performance of each reconstruction method, such as computation complexity, interpolation speed and interpolation accuracy.

24

For the second approach, in what follows, the definition and interpolation schema of these tw o typical interpolation methods are introduced from the two approaches, followed by the com parison o f the methods in the spatial spectral domain. Finally, B-Spline interpolation schema is selected and implemented in spatial spectral domain.

3.2.1 Typical Interpolation M ethods in Spatial Domain The first approach in surface reconstruction is pure spatial analysis. In this approach, surface reconstruction is observed from pure geometry perspective. In [56 - 57], thorough discussions on the typical surface reconstruction methods were given. To compare with the interpolation methods observed from spatial spectral perspective, two typical interpolation m ethods, including polynomial and B-Spline interpolations are reviewed in the following sections.

3.2.1.1 Polynom ial Curve Interpolation

For two dim ensional point series, {xq,

zo),

(x ],

Z

i

(x,,,

Zn),

the base function of the n'* order

polynomial interpolation o f is \,x ,x ^ ,x^

. The reconstructed function is

Z j{x) = a^ + a^x + a^x^ +... + a ^ x ''

(3-12)

The task o f surface reconstruction is to find out the coefficients o f

uq,

ai, ... a,, so that the

curve passes through all the points. By substituting the two dimensional point series into eqn. (3-12), the n+ 7 equations are constructed as

25

Û q "I"û

|

J

k

o

^0 (3-13)

aQ+a^x^ +a2X^^ + ...+a ^x" = z, Û Q+0,^2 +...+a,,X2" = Zi

ao+a^x,,+a 2 X,, +...+a,,x,, =z,,

The above equations can be written as the matrix format

1 Xq Xq ..JTg 1 X| ., JT ]


ao` a. «2
. ..

4 '

Zi Zi
...

(3-14)

1

xl ..jc"
.Z".

Therefore, ao, ai, ... a,, can be solved as

a, Ü 2

"l ^0 A q ...A Jc"' q 1 x\ ..jc"

4 z, Z 2
(3-15)

1

x'

jc"

The polynomial interpolation has the following disadvantages:

·

It is not natural for the interactive shape design. The coefficients convey very little geometric information about the shape of the curve or surface;

·

Numerically speaking, it is rather poor form. Large round off error is introduced when the order goes high;

·

The measurement error of one point affects the whole curve or surface.

26

A better choice is to use splines, which is one of many continuous piecewise polynom ials functions. In the design o f splines, the modification o f one m easurem ent point will only affect a small local area, which is called local support property o f spline functions.

3.2.1.2 B-Spline Curve Interpolation

B-Spline was brought about by Schoenberg in 1946 and developed by Gordon, Rissenfeld, Forrest and de Boor etc. during 1971 to 1974 [66] [67]. The base function o f B-Spline is defined as follows. Given a series o f points at axis t

T = { t ,] l _ { t .< t . ^ ,, i = 0 ,± l,± 2 ,K )

where t-, is a node, T is called the node vector and k-1 is the degree o f the B-Spline. The function defm ed by the following recursive relation is defined as the k^-order B-Spline base function:

B ,, ( 0 = ----- ( 0 + 7 ^ ^ "

(0 (3-16)

The most useful property o f B-Spline Base function is the local supporting property:

(3-17) '·* =0, else

That is, Bi^k(t) only has a positive value between

and

and it is zero anywhere else.

Based the definition o f the B-Spline base function, we have the definition o f the B-Spline curve:

27

Given n+1 control points in three dimensional space Po, Pi, T={to, tl, tn+k] which is the non-decrease series

Pn (n>k-l), and node vector

tl <

(i = 0,1,2,K , n + ^ -1)

The following three-dimensional curve is defined as the kth-order B-Spline curve on T.

m

=
1=0

(3-18)

The lines of Po, Pi, P2 ,---,Pn is defined as the control polygon of P(t).

Considering the local supporting property of the B-Spline, the above equation can be rewritten as:

Pi-M(t)= T^PjPj,k(.0,

ti<t<ti^i;i = k - l , k , K , n .

(3-19)

From this equation, the calculation can be simplified greatly when the number of the control points is huge.

A special case in B-Spline curve is the Uniform B-Spline curve, which happens when

t,-^, - r, = const,i = 0,1,K ,n + k - \

The Uniform B-Spline is widely used for its simplicity.

B-Spline curve can be expressed in the matrix form. Take a fourth-order B-Spline curve as example, it is defined as follows.

28

Given the n+1 control points in three dimensional space P q , P j, vector T={to, tj, tn+k} which is the non-decrease series

P,, ( n > k-l ), and node

h ^ h+i

(( = 0

,n + k - I )

Four neighboring points can construct a segment o f the fourth-order B-Spline curve. The matrix form o f (=i-3) segment o f four order B-Spline P, is
` t-3

^-3.4 (M) = [1

u

Pi-2 f-1 P

,i = 3,4,K ,n; (3-20)

O S u = - ^ < l h+i ~ h where (fi+i (^i+i M \i) = 3m,0,0 -m ,0,0 " 3mo_o - m2 2
"*0,0 - " * 3 , 2 - " * 3 , 3

A-i )(^+i

h-2 )

1 - "ÏQ .O - "*0,2
3 " * 0 ,0 - "*1,2

(h ~ h-i ) (4+2 - 4-1 )(4+i - 4-1 ) 3(4+1 " 4)(4  " 4-1 ) (4+2 - 4-1 )(4+i " 4-i) 3(4+1 " 40 (^+2 4-|)(^i+l
"*3,2

0 0 0
(frU ~A-)^ (A+3 -^,)(4+2 - f / ) . (3-21)

^-l)

and m 2,2
"* 3 .2 = -" * 3 ,3 -

(^ +2 (4+2 4 )(4+2 4-1 )

(3-22)

where m^j is the element at row r and column y.

As a special case, the matrix form o f the fourth-order uniform B-Spline curve is

29

' 1
1 ^-3.4(0= 7 n O

4 0 -6 3

1 3 3 -3

-3 t 3 -1

o' 'Pi-i 0 P > -2 0 Pi-^ 1 p^.

,i --3,4,K , n'.

(3-23)

0 < r <1

For B-Spline, the control points and knots determine the shape of curve. Therefore, the key task in B-Spline interpolation is to calculate the control points and knot sequence based on the given point series. For the Uniform B-Spline curve, the task is simplified to calculate the control points.

Take the fourth-order uniform B-Spline curve as an example, the equation of the curve is given in the matrix form as shown in eqn. (3-23). By Substituting t by 0, we can have n equation: ^(P.+4P^^,+P.^,) = V.,i = 0 X K , n - \ o (3-24)

by substituting t by 1 and i by n+2, there is one more equation:

^ ( P . + 4 P ,, + P ,, ) = V,

(3-25)

Since there are n+3 unknowns and we have only n+1 equations now, two more equations are needed. These two equations come from the boundary conditions, such as if the derivative of the curve at the boundary is known as To and T,,, we have:

| ( A - P . ) = Po (3-26)

30

Therefore, from the equations above, we have a set o f linear equations as shown in eqn. (327). The equation set is non-singular and have one solution.

-3 1

0 4 1

4 1 4 0 1

>0 P^ A M



X

0
1
-3

o 4
0

M

(3-27)

1
3

For other kind o f boundary conditions, such as, if the second order derivatives at the boundary are known, similar operations can be performed. For example, for the periodic boundary conditions, that is, the curve is a smoothly closed curve, the following equations can be obtained:

"4 1

1
4

r >0 1 4 o 1 o 1 o
4
P2



>0



1

M

M

(3-28)

1 4

P n-^ fn

K -. . .K
.

1

1

B -Spline is more and more widely used due to its unique characteristics. Take the local supporting property as an example, the change of one digitized point only affects several coefficients. This means that the measurement error only affects a small portion o f the curve. 3.2.1.3 Surfaces Interpolation For three-dim ensional surface, tensor product is applied to extending two-dim ensional curves to three-dim ensional surfaces. Surfaces are constructed by calculating the tensor product o f

31

the curve base functions as shown in eqn. (3-16). Therefore, the control points of the curves control the surface. The definition of tensor productsurface is shown as follows.

Let Ao(u),

A,n(u)

and Bo(v),

B n(v)

be twoindependent sequences of functions and let (3-29)

p{u) = ^ a iA ;{ u )
1=0

where the control points a,- satisfy

(3-30)
j= o

Combining the above two equations, the surface P(u,v) can be written as
m n

P(».V) = £ £ ( > , jA («)B j(v)
1=0 j= 0

(3-31)

P(u,v) is called tensor product surface, bij is the control points of the P(u,v). bij determines the surface P(u,v).

The main benefit of using the tensor product surfaces is that the tensor product surfaces share similar properties to the underlying curve representations and can be analyzed in the similar way.

From the definition of the tensor product surface, the tensor product of the B-Spline surface can be derived as following; let the knot vector

f/ = {wo,w,,...,w,,+J and V = {vo,VpK

(m, < m,^i ,/ = 0,1,2,K ,n -l-/:-l) (v,. <v,.^,, f = 0,1,2,K ,m + A-1)

The following surface definition is called the B-Spline surface with rank kxh '.

32

S (u .y ) = ' Z , t , P , B , A - ` ')B ,j.M .
1=0 J=Q

« .-,£ k < k ,, ,, v ,, S v S v ^ ,

(3-32)

W hen k - h - 4 ,

- w , = c,

{i = 0,1, K , n + ^ -1 ),

- Vj =

( j = 0,1, K , m + A -1 ),

forth order uniform B-Spline Surface is obtained as:

^ i.j+ 2

^ ij+ i p

1 {My
V 7 V



^·+i,;+i
^ i+ 2 .j ^i+ 2 J+ \ ^i+ 3,j+ l

^ i+ \J + \ ^i+ 2.j+ 2 P ^i+ 3J+ 2

^i+ 2.j+ 3 p ^i+3.J+3

y.
(3-33)

0,1,2 K

,171 --3.

where

1 4 M* = -3 3 -1 0 - 6 3

1 0 3 0 1 0 (3-34)

3 - 3

In eqn. (3-33), Pij is the control points of the surface.

3.2.2 E v a lu a tio n o f th e In te rp o la tio n M ethods In the last section, two typical curve interpolation methods are introduced. The next issue is how to evaluate the performance o f the surface interpolation methods, such as interpolation accuracy and com putational intensity. In the spatial domain, it is hard to do so. Therefore, spatial spectral analysis is adopted to address this issue.

33

As mentioned in the last section, the interpolation can be analyzed from the point of view of the spatial domain or from the point of view of the spatial spectral domain. From the signal processing theory, in spatial domain, the reconstructed spatial signal fr can be obtained by performing the spatial domain convolution of the sampled data with the impulse response of the reconstruction filter. Alternatively in the frequency domain, the Fourier Transform (FT)
oifr

equals the result of the multiplication of the FT of the digitized points and the frequency

response of the reconstruction filter as given in eqn. (3-35) and shown in Figure 3-5.

f^ = f , * h = IFT

(3-35)

where F* is FT oi f k \ h and H are the impulse response and the frequency response of the filter, respectively. IFT stands for the Inverse Fourier Transformation.

Take the B-Spline filter as an example, from the point of view of signal processing, BSplines of order n are piecewise polynomial functions of degree n. In case of uniform spacing between knot points, B-Splines can be represented as in [65]:

A (^ ) =

Zc^{k)-b^{x-k)
k = -o o

(3-36)

The uniform B-Spline functions of order n with n+2 equally spaced knots {0,l,2,...,(n+l}} are defined as:

t-- 1V n +1 (3-37)
j= 0 J

where ju{x) is the step function

34

Il 0

x>0 efa.

(3-38)

(

n +1 ) are the binomial coefficients: J

A more commonly used form o f B-Spline base function is the convolution form, in which

From spatial spectral analysis, it is known that the impulse response and frequency response unveil the properties o f the filter and is used when comparing the performance o f the different filters. Therefore, the problem o f comparing different interpolation methods turns out to be com paring the impulse response and frequency response o f the reconstruction filters. The impulse response and frequency response are called the kernel o f interpolation methods In [38].

The sim plest filter found in the spectral domain is the ideal low pass filter. The corresponding interpolation is called ideal interpolation [24]. The frequency response and impulse response o f ideal low pass filter are shown in eqn. (3-41) and Figure 3-10.

35

H{w)^ h(x) =

- K <W<7U

else Ttx = sin c{x)

(3-41)

Of Ideal u M P a M FUter u rte rp au lo

....

Figure 3-10 The Impulse & Frequency Response of Ideal Low-Pass Filter.

Since the impulse response of the ideal low pass filter is the sine function, which is an Infinite Impulse Response (HR), it is not suitable for local interpolation. A revised version is the truncated sine or windowed sine, which is the function obtained by truncating the sine function in spatial domain by a rectangular window. The impulse response and frequency response are shown in Figure 3-11.

IP of Truncated Sine Interpolator 0.9

FP of Truncated Sine Interpolator

: 0 .0 ............r........ j-M0 .8 ............i ....... T 't 'i : 0 4 ............t .......
0.6
-- 0,5

[

0.8
0.7

......... ....... I
i . . J ......

&

; h . 0,2 ............ r---- /---r--


-

....... f " ... 1.....
0.4

!

i

li..
I

0 -3 %02
,

I t

1

0.1

....... I ....i.... .... : .....


V

Figure 3-11 The Impulse & Frequency Response of Windowed Sine.

36

Truncation in the spatial domain causes a window effect in the spectral domain. There are oscillations at the edge areas, which cause spectrum deformation at these areas. Truncation also introduces large truncating errors. Therefore, the ideal low pass filter or its revised version is not a good practical interpolator.

For Cubic Splines, the impulse response can be written as

(a + 2 } x \ ' - (a + 3)\x\^ + I h { x ) -- a\x\ 0
I |3

0 < |jc| < 1
1 < IjcI < 2 (3^2)

--5 a |x |

_

I

|2

+ 8 a | j c | --4 a elsewhere

.

I

I

.

The impulse response and frequency response is shown in Figure 3-12:

IR of Cubic Spline

. FR of Cubic Spline :

1.2

0.8
0.6 0.6 0.6
0.4 0.4

0.2

02
·

0.2

·10
w:

Figure 3-12 The Impulse & Frequency Response of Cubic Interpolation. The im pulse response and frequency response o f cubic B-Splines filters are shown in Figure 3-13.

37

\ 4' - '\ 4 2' ' + 3 h(x) = - --UP + u p - 2 UI + -- 6' ' ' ' ' ' 3 elsewhere 0

0<| ; c | <l 1 < Ul< 2

3 sin c''(-- ) In H{ w ) = 2 + cos(w)

(3-43)

IR of Cubic B'SpIina

i Fprfcubrc^lioe

oa

Figure 3-13 The Impulse & Frequency Response of Cubic B-Spline.

Among the interpolation filters, the Cubic B-Spline filter has best performance compared with other filters. The comparison of B-Splines with other interpolators including truncated and windowed sine, nearest neighbor, linear, quadratic, cubic B-Splines, cubic polynomial Splines, Lagrange and Gaussian interpolation found in [38]. Based on the above reason, the cubic B-Spline filter is used in this thesis.

3.2.3 Derivation of the B-Spline Curve Coefficients in Spatial Spectral Analysis

Since coefficients c,,(/c) uniquely determine the B-Splines surface, it is the key to the BSplines interpolation. There are several proposed methods to determine the coefficients of BSpline in spatial spectral analysis [67][68j. In this section, a method proposed by Unser in

38

[67] is used. Since the points are given in discrete domain. Z domain is preferred in the analysis. Discrete B-Splines are defined by sampling continuous spline functions.

=

jY ju ik - j)

(3-44)

j=o

J

W hen characterized in z domain, the z-transform o f the above equation can be derived as

«!

1 -z

(3-15)

where A n(z) is some polynomial in z '. Take fourth order B-Spline as example, A ^ ( z ) = z~' + 4 z~^ +z~^ Z+ 4 + z"`
(3-46)

An equivalent but more useful form is given by

1 _ -O T n + 1 B . ( z ) = - r - ^ = Z * . w ^ '*
l -- Z k=o

<3-17)

Eqn. (3-47) is the z-transform o f the discrete signal obtained by sampling the continuous BSpline at its knots.

H aving the z-transform o f the discrete B-Spline, we can derive the coefficients in z-domain. Considering a discrete signal {f(k)J defined on k = ^ , K , o o , The procedure o f finding coefficients c(i) is to find out the series c(i) which satisfy

/( & ) =

^

- 0

39

Applying the definition of the convolution, the above equation can be written as

f { k ) = b,,*c{ k)

(3-49)

where bn is a FIR(Finite Impulse Filter).

Taking Z-transform, the above equation can be written as

F{z) = b^{z)- c{z)

(3-50)

Therefore, the spline coefficients {c(k)f can be determined by reverse filtering

c{z)=

\

-Fiz)

(3-51)

If define

Take Forth order B-Spline as example, by substituting eqn. (3-52) by eqn. (3-46), we have

in which a{= V3 - 2 ) is the smallest root of the polynomial of the denominator of the Ss(z).

From the above equation, the filter can be implemented as

40

c^ik) = f { k ) + b ic^(k-l) <c'(k) = f { k) + b^c~(k + \)
c ,, ( ^ ) = 60 (c'^C^) + c"(A:) - / ( / : ) )

(Jt = 2 (jt = ^ - l

K) K)
(3-54)

oc = -^3 -- 2
*=i

where

60

c~{K) = c \ K )

= - 6 a l{ \- a ^ ) b^=a

The boundary condition c'^(l) and c'(K) is obtained for practical convenience and discontinuities avoidance.

F or B-Spline surface, the problem is to derive the coefficients for the B-Spline surface equation from a set o f points f(i, j). From the eqn. (3-32), spline coefficients can be

calculated by successive one-dimensional filtering along the coordinates [67]. Based on the m ethod presented in last section, the coefficients for the B-Spline surface can be obtained by the following procedure:

1. For each row, calculate the coefficients from eqn. (3-66) and put it to fi( ij ) , 2. F ro m //f/, j), calculate the coefficients for each column and o b ta in / 2fjt:,y).

w h e re / 2fx,y) is the coefficients o f the B-Spline surface.

Fourier Transform does not contain location information. The size o f the digitized point set is not optim ized. STFT is applied to reduce the size of the digitized point set. The new problem introduced by STFT is that the un-evenly distributed point set is obtained when divided the surface into segments. To address this problem, B-Spline surface is reconstructed on each segm ent first. Then the evenly distributed digitized point set is created by re-sampling on the B-Spline surfaces at the same re-sampling frequency. The re sampling frequency is chosen at the highest digitizing frequency o f the segments to ensure the full feature coverage. After calculating the coefficients, the B-Splines reconstruction filter is determined and the param eters o f the reconstruction filter are known. The interpolated surface is sent to the tool trajectory planning block.

41

3.3 Summary In this chapter, surface measurement and surface reconstruction blocks were discussed. TTP and laser scanner were introduced as measurement devices. Sampling frequency is the most important parameter, which determines the accuracy of the digitization. In order to determine an optimal sampling frequency, an iterative spatial spectral analysis method was proposed. For surface reconstruction, two typical interpolation methods were introduced in the spatial domain. After that, these interpolation methods are compared in the spatial spectral domain. Since B-Spline interpolation demonstrates the better performance, this interpolation method was adopted. Finally, B-spine interpolation coefficients were derived.

42

Chapter 4 Motion Planning and Control
Three blocks are introduced in this chapter. They are tool trajectory planning, axis motion control and part alignment. These three bloeks are related to tool motion eontrol. The task o f this chapter is how to drive the tool to follow the eontour of the reeonstructed CAD model. In tool trajectory planning, a new aeeurate method is proposed. In axis motion eontrol, PID controller is introdueed. In alignment, two alignment methods, one point alignment method and three-point alignment method, are presented. 4.1 Tool Trajectory Planning For the shape adaptive motion eontrol system, the goal of the tool trajectory planning is to plan the trajectory for a machine to follow the eontour of a part. After the surface reconstruction block, the CAD model is reconstructed. The problem is to plan the trajectory to follow the contour o f the reconstructed CAD model. There are two steps in tool trajectory planning, task space trajectory planning and joint space trajectory planning. In the multi-body system , jo in t space denotes the space in which the joint variable is defined. Task space is the space in which the location (position and orientation) of the toolhead is defined. The machine controls the motion o f the toolhead by controlling the motion o f the motors mounted on the joints. These joints are referred as active joints. Correspondingly, the passive joints referred as the joints without motor mounting on. Passive joints provide the constraints on the motion o f the tool. The transform o f the location and motion from the joint space coordinates to task space coordinates is called forw ard kinematics. The reverse transform is called inverse kinematics.

In this thesis, the task space trajectory planning is to generate a set of location points for the toolhead. The joint space trajectory planning is to transform the location points from task space to joint space by inverse kinematics. Therefore, task space trajectory is machine independent and joint space trajectory planning is machine dependent.

43

In the following section, task space trajectory planning is introduced first followed by joint space trajectory planning. In the task space trajectory planning, traditional trajectory planning and new trajectory planning are compared. In the joint space trajectory planning, the focus is mainly put on a parallel robot. Tripod. Mobility analysis and inverse kinematics are performed in this section. 4.1.1 Task Space Trajectory Planning There are two steps in task space trajectory planning, location planning and motion profile planning. The general approaches apply location planning first followed by adding a motion profile to it [1] [44 - 46]. In these approaches, the accuracy is low because there is only part of the location points selected on the CAD model. In this thesis, a new trajectory planning method is proposed. In this method, the motion profile is selected first followed by the iteratively determination of the next path point. Therefore, all the points are selected from the CAD model and the accuracy is improved.

Task space trajectory planning is in fact a complicated task, which includes collision detection, optimal trajectory planning based on task space volume and dynamic and kinematic response of the machine. These facets are beyond the scope of this research. 4.1.1.1 Traditional Task Space Trajectory Planning Methods

For traditional task space trajectory planning, the first step is to choose the desired points from the CAD model of the part. The chosen points are called the control point set. The line segment linking the neighboring points in the control point set is the actual path of the end effector to follow. This step is achieved by using straight lines or arcs to approximate the surface [69].

The second step is to generate the location points (set points) from the velocity profile. The commonly used velocity profiles are the trapezoidal velocity profile and the 3 -4 -5 polynomial velocity profile. In the trapezoidal velocity profile as shown in Figure 4 - 1 , the toolhead speeds up at a constant acceleration and maintains a constant velocity after reach

44

certain velocity. Finally the toolhead de-accelerates at the constant acceleration to zero. In the 3-4-5 polynomial velocity profile as shown in Figure 4-2, the displacement traveled at time t follows the following equation;

d (t) = ao + a , -t +a^ -t^ +a^

+a^ -t* +a^ -t^

(4-1)

Since the acceleration profile is guaranteed to be the third order, the motion o f the toolhead is much smoother. Therefore, the 3-4-5 polynomial velocity profile is more preferable.

T r a p M o d M V ilo c iiif P r o f l» ^

Î

0.3

0.4

0.5

0.6

0.7

HB

09

Time

Figure 4-1 Trapezoidal Velocity Profile.
3. 4.5 M otion Profile
A c c d c raiio n V d o c ily

D isp la c e m a it

7

Figure 4-2 3-4-5 M otion Profile.

45

A typical example of traditional task space trajectory planning can be found in [44], where Ross manually chose the control point set from CAD model followed by point by point trajectory planning based on the 3-4-5 velocity profile.

4.1.1.2 A New Trajectory Planning Method The main problem of the traditional method including Ross' method is the limited accuracy due to the error introduced by straight line or arc approximation as shown in Figure 4-3. In the traditional method, only the points from the control point set are on the surface of the part, whereas most planned command points are only on the approximated straight lines. The improvement of accuracy is achieved by increasing the number of the control points. The optimal control point set cannot be easily found. If the size of the control point set is too big, re-sampling is required [ 1 ], which decreases the accuracy of the trajectory and increases the complexity of the method. In this thesis, a method is presented to solve this problem by selecting the motion profile first followed by the location planning.

PI anned TVajectory surface C ontrol P oint set

-----

Figure 4-3 Ross' Trajectory Planning Method The new task space trajectory planning method consists of three steps: (a) determination of a sweeping direction, (b) decomposition of the trajectory interval, and (c) determination of intra-path and inter-path(as shown in Figure 4-4) in the task space.

46

Discrete Set Points from Top View

- P a th

X A x is

I n tr a - P a th

Figure 4-4 Intra-Path and Inter-Path (a) Determination of a sweeping direction To ensure the full coverage of the surface, the tool follows a zig-zag path. The tool is driven along the surface line by line in the x or y direction. The choice of x or y direction is usually arbitrary, and the following strategy is to choose the one with the least curvature. By applying this strategy, it is easier for the robot to achieve smooth motion with less energy consumption.

(b)

Decom position o f the trajectory interval The step size between two lines is chosen as 75 percent diam eter of the tool-bit to ensure the full coverage o f the surface.

(c)

Determination o f intra-path and inter-path in task space At each line, the tool speeds up from zero to a given speed and then remains at a constant speed. At the end of the line, the toolhead slows down and the final speed reaches zero at the last point. After each line, the toolhead moves to another line. The procedure repeats until the full coverage of the surface is achieved.

For the intra-path and inter-path, the motion profile can be divided into three stages: acceleration stage, even speed stage and de-acceleration stage. In the acceleration and de acceleration stage, the 3 -4 - 5 motion profile is adopted to ensure the sm ooth motion, as shown

47

in eqn. (4-1). Six independent equations are needed to determine the six parameters uq, aj,...,a 5 . Since the total time traveled in the acceleration is not known, one more equation is needed. Regarding the acceleration, since at the start point, the distance traveled ds, the velocity and acceleration are 0 , three equations can be written as

d{0) = 0 v(0 ) = 0
(4-2)

a(0) = 0

Similarly, at the end point of the acceleration, the velocity of the tool reaches the given value. Two more equation can be written as

[v(D = 0 [a(T) = 0

(4-3)

Furthermore, at the mid-point of the acceleration, to provide smooth motion, the acceleration reaches the maximum value and starts to decrease to zero at the end point. The velocity reaches half of the final speed at the half point. From these two conditions, two more equations can be written as

T V v(--) =
2 2

(4-4)

a (-) = 0
2

At this time, we have seven equations eqs. (4-2) ~ (4-4). By solving these equations, ao, aj,...,as and T can be solved. Figure 4-5 shows an example of motion profile calculated when Veven ÎS lOmm/s and a,,,ax is 10 mm/s^. It is shown that the transition of the velocity and acceleration is smooth. The same derivation happens in the stage of the de-acceleration.

48

Distance

101

Vrtlèei^ " ri 1 . , , ^ 10

A cceleration

Figure 4-5 3-4-5 M otion Profile o f Accurate Motion Planning.

In the even speed stage, the tool-bit moves at a constant speed. The motion profile can be expressed as

(4-5)

A fter the motion profile is determined, the next step is to determine the command points. For a specific machine, since the control interval is known, the step size that the tool travels at each interval can be obtained by sampling on the motion profile. Starting from the initial point, the next point can be iteratively calculated from the reconstructed CAD model o f the part. The distance d o f two points ,(-> ^now , ynow , Znow) and {Xnexi , ynext , Znexi) ,in threedimensional space can be written as

= (^nexr ~

+ (^nex, ~

(4-6)

For this case, since the motion is along the x axis only, the equation can be simplified as

^

~ i^next

^now)

(^next

^now^

(4-7)

49

Also, we expect the two points are all on the reconstructed CAD model, the (Xnexi> y next, Znext) satisfy the known CAD model

f

^^nexl '

y next )

(4-8)

Now we have enough equations to determine the next point. However, the explicit solution is not easily written. The numeric method is adopted in this thesis. The following steps show a bi-section method for equation solving.

Suppose now the tool reaches {xnow, ynow, Znow) and the next interval the tool is expected to travel by distance d^tep- The given tolerance of the numeric method is e. By iterating the following procedure as shown in Figure 4-6, the position of next command point can be determined.

initialize th e ste p size

^step --

calculate n e x t point

^nexl -- ^now ^step Z n ext -- f(^nejï)
change step size
calculate distance d,,,,^. between current point and next point from eqn. (4-7)

^slep~^-^*^slep

check feasiblity

n o t feasible

feasible accept point position

Figure 4-6 Flow Chart of Iterative Next Point Determination.

50

First, Xsiep is initialized at dstep and the next point is calculated. The distance o f the current point and the next point is calculated from eqn. (4-7). After that, the difference o f dstep and dnow is calculated. If the difference is higher than given tolerance e, the Xstep is divided by 2. The next point is re-calculated and the process continues until the difference o f dstep and d,,ow is below the given tolerance. Assume that the tool-bit is always perpendicular to the surface o f the part, the orientation planning can be conducted by calculating the normal vector o f each position.

4.1.2 J o in t S pace T ra je c to ry P lan n in g A fter the task space trajectory planning, the command points o f joint space are calculated by inverse kinem atics. For the tripod used in this thesis, the inverse kinematics equations can be found in section 4.1.2.2.

4.1.2.1 G e n e ra l C N C M achines CNC is the abbreviation o f Computer Numeric Control system. CNC machine is a multi body with the motion under computer control. The common CNC machines are three-axis

machine and five-axis machine [9]. The three-axis CNC machine provides motion along x, y and z axis, and the five axis CNC machine provides two more degree o f freedom, pitch and roll rotation around the x and y axis respectively. The most basic task is to move the end effector to reach certain position at certain orientation. To reach this goal, multiple motors need to act coordinately. For each motor, there is a close loop control system. Discrete PID is the m ost widely used controller in CNC. The goal of CNC machine is to control the motion o f the end effector by controlling the motion of the motors.

Tool trajectory planning for CNC machine is to generate discrete set points for the tool. The tim e interval between two commands is the control period o f CNC. Axis motion control is a trajectory following system. The set point to the system is the discrete command points generated from the tool trajectory planning block. The goal o f the axis motion control is to provide a smooth and accurate motion.

51

4.1.2.2 Tripod
As mentioned in the first chapter, the presented system has been implemented on the Tripod developed by Ryerson University.

Figure 4-7 Tripod Developed by Ryerson University.

For a robot, the first thing to examine is mobility. That is, how many freedom of the robot has. The mobility requirement of this device can be examined by M = d ( n - g - l ) +^ f i
1 = 1

(4-9)

In eqn. (4-9), M denotes the mobility of the system DOF (Degree of freedom), d is the order of the system, (d=3 for planar motion and d=6 for spatial motion), n is the number of the links includes the frames, g is the number of joints and fi is the number of the degree of freedom for ith joint.

52

F or the Tripod presented in this thesis,

is 6 , n is 8 including three legs, three guide ways,

and two platforms, and g=9 including three sphere joints, three revolute joints and three lead screw joints. Also, the number o f the degree o f freedom for sphere joint is 3, D O F for a revolute joint is 1 and D O F for a lead screw is 1. Replacing the above parameters into the equation, the D O F o f the system is calculated as 3 which means the tripod has three degree o f freedom and three dependent movements.

The inverse kinem atics problem for Tripod is to calculate the active joint variables si, S2 and S3 given the position and orientation o f the position o f the tool head or center o f the platform.

B1

zC

(C) xC Figure 4-8 V ector Loop for Slider Leg.

The vector loop for each sliding leg is shown above. Now, the algebraic vector sum becomes:

(4 - 10)

53

In eqn. (4-10), h is the translation vector from {0} to {C}. is the leg vector with respect to {0}. U J respect to {0}, And b > is the base point with respect to {0}. respect to {C}.

is the platform point with is the guideway vector with

The vector

may also be expressed as:

(4-11)

where 5, is the magnitude of vector The unit direction vector

^u f is the unit direction vector of vector

remains constant since it represents the direction of the i* '' fixed

guide way. Also, the platform points may be expressed with respect to {0} by noting that:

^p.=h+R^^.

(4-12)

Therefore, the vector loop sum becomes:

^p-^ï^-s.^u-^b.= 0

(4-13)

Rearranging this equation and taking the magnitude of both sides:

I® ®

=

(4-14)

or +(^Pi,-Si^ul~^biJ (4-15)
UJ

If the pose of the platform is known, that is h and R are defined, then the components of the platform points, ^pu, ^Piy and ^pi^, are also known. The joint variable 5 ,. can then be readily

54

obtained, which has tw o solutions due to the 2"^ order polynomial,

and

Choosing

the correct solution is based on motion continuity, where the previous value o f f . is known:

S: = 1 j/* \m in

t = l ,2

(4-16)

In which j is the time step.

During operation, the initial value o f

is provided by the encoders.

4.2 Axis M o tio n C o n tro l A fter the trajectory is planned. The discrete command point is sent to the CNC m achine controller. The motion control task is perform ed in this block. As mentioned in the last

section, the goal o f the CNC is to control the motion of the tool in the task space by driving the m otors mounted on the active joints.

For each joint, there is a discrete PID close loop as shown in the Figure 4-9. The main task of the close loop is trajectory following. In this system, the close loop system receives the discrete command from a host computer. The controller compares the desired position com m and with the current position of the motor and generates a controlled signal through the controller. Often the generated signal is a low power signal, after amplification, the signal is sent to m otor and the position o f the next step is sensored and fed back to the controller to generate the next control command. The frequency at which the host com puter sends command to the controller is called control frequency.

H ost Computer

PID Controller

Amplifier

Motor

Position

Position Sensor (Encoder)

Figure 4-9 System Diagram o f PID Close loop o f CNC.

55

4.3 Alignment System In CNC machining, part alignment is often required. Alignment block is considered as the preprocess block o f tool trajectory planning. For example, in laser scanning, when the digitized data comes from two views, alignment is needed to align the digitized data from different views. Another example is polishing, even the accurate CAD model is known, the part alignment is required to align the CAD coordinate system to the machine coordinate system. In this section, a three-point alignment method proposed by Nancoo is reviewed [54].

4.3.1 Nancoo's Three Point Alignment Method

The alignment is to align the point coordinates in one coordinate system with another coordinate system. Nancoo presented and compared three methods to align the digitized data from two views (two coordinate systems) for laser scanning. The most accurate method is reviewed in this section.

4.3.1.1 Alignment Without Considering Noise It is simple to align the points from two different coordinate systems without considering noise. When there is a transformation between two different coordinate systems, a known linear relation exists between them, which can be expressed as

aR, =b

(4-17)

where a and b are the coordinate vectors of the same point in two different coordinate systems. Rx is the rotation matrix of the transformation. To determine R^, three points are required as shown in the matrix format,

(4-18)

56

where

and Mb are the coordinates o f the three points in two coordinate system w ritten in

matrix format.

The rotation matrix can be directly calculated from

(4-19)

4.3.1.2 A lignm ent Considering M easurement Noise

W hen considering the measurement noise, the eqn. (4-18) has to be rewritten as

(4-20)

At this tim e, estim ation has to be made to find an X to minimize the alignm ent error. In [54], Nancoo proposed and compared three methods to estim ate the rotation matrix X. They are Least Squares param eter estimation (LS), Total Least Squares param eter estimation (TLS) and Constrained Total Least squares param eter estimation (CTLS). Nancoo found that the CTLS has the least estimation error. The procedure o f CTLS is shown below:

S tep l. M ultiply the matrix o f 3-D points in the second coordinate system by the transpose o f the 3-D points in the first coordinate system.

(4-21)

Step2. Do the singular value decomposition (SVD) on

57

s v d { M j M ^ ) = u Y ,V ^

(4-22)

Step3. Calculate the X = UV^

(4-23)

4.3.2 Extension of the Three Point Alignment

Nancoo's methods solved the problem of aligning digitized points. To apply the method in CNC machining, there are still two questions need to be figured out. The first question is how to align the CAD model. The second question is how to align the trajectory containing tool location and orientation. For the first question, since the point alignment method has been developed by Nancoo, the question turns out to be how to select points from the CAD model, which depends on the detail format of the CAD file. In this thesis, the method is based on the STL format. The data format of STL can be found in [6 6 ]. For the second question, the point alignment method is applied to find out the transformation matrix. After that, further derivations are carried out to align position and orientation of the tool based on this transformation matrix.

Two methods are proposed to deal with different cases. In the first case, a method is proposed to align the CAD file based on the STL format and tool trajectory based on NC code. The detailed description of the NC code format can be found in [67]. After that, a special case is discussed. When the rotation matrix is known, only one point is required to be measured.

4.3.2.1 Extended Three Points Alignment System

The transform equation of the point from one coordinate (CAD coordinate) to another coordinate (machine coordinate) is

58

f^ n .= R .'P c + P r

(4-24)

or
Xj . = Px-

4-

yr -^T _

(4-25)

Rx is the rotation matrix from the CAD coordinate system to the machine coordinate system, which can be calculated by N ancoo's method. P d x c , y c , Zc) is the coordinate from the CAD coordinate system and P,n(xm , ym , Zm ) is the coordinate from the machine coordinate system.
P t (x t , y r , Zt)

is the translation between two coordinate system.

R

represents the rotation

matrix between two coordinate systems.

W hen the CAD and the command points are given, the alignment should be capable of aligning the CAD model, position and orientation of the command points. From the N ancoo's system, the rotation matrix
R

and translation vector

P j R

can be calculated. The and
P t

positions o f the command points can be directly transformed by

from eqn. (4-24).

F or aligning the orientation o f the command points, further derivation is needed. The format o f the com m and point is given as (x,y,z,A,B,C)- (x,y,z) is the position vector and (A,B,C) is the rotation vector corresponding to the angle o f pitch, row, yaw. The transformation matrix Rx is calculated from eqn. (4-23) . The rotation matrix Rc, from the tool coordinate system to the CAD coordinate system can be calculated by the following equation.

cos B cos C R ^= sin A sin B co sC + cosA sinC -c o s A s in B c o s C + sin A sinC

- c o s B s in C - s in A sin B sin C + cosA cosC co sA sin B sin C + sin A cosC

sinB -s in A c o s B cosA cosB (4-26)

A fter that, Rfinai, which is the rotation matrix from the tool coordinate system to the machine coordinate system, can be calculated from

59

Rfinai = K - f ^

(4-27)

Rfinaicm be written in the following format,

Hi h\

^ 12 ^22

^ 1 3

^ 3 1 ^32 ^ 1 3

and Am, Bm. Cm, which is the rotation vector from the tool coordinate system to the machine coordinate system, can be derived as

A,, = arctan(--
'33

Em = arcsin(r,3) C,, = arctan(--

(4-28)

4.3.2.1 One Point Alignment System

When the rotation matrix
(xt

is known, there are only three independent unknown variables,

, yr,

Zt)-

Since one point measurement can provides three independent functions, one

point alignment is capable to provide enough equations for solving the unknowns.

Take the following transformation as an example, in which the transformation is between the OpenGL default coordinate system to the Tripod coordinate system as shown in Figure 4-10. The transformation can be written as shown in eqn. 4-29.

60

OpenGL Default Coordinate System

Trqjod Coordinate System

01

02

Figure 4-10 Transform Between Tw o Coordinate Systems.

-10
ym

0
1 · 0

Xj. + yr J-T _ (4-29)

0 0

0 1

Pt (xr, yr,

Z t)

can be derived as

X j -- --

- 1 0
ym Zm

0 1 1 0

x,, + x^ ym+Zc Zm + yc (4-30)

y j Zj

0 0

0

4.4 Sum m ary In this chapter, tool trajectory planning, axis motion control and alignm ent blocks were discussed. Task pace trajectory planning and joint space trajectory planning were studied. For task space trajectory planning, a new method was proposed and compared with the conventional methods. In joint space trajectory planning, the inverse kinematics o f the Tripod was investigated to transform the trajectory from the task space to the joint space. For axis motion control, PID controller was introduced. Part alignment block was the pre-process block for tool trajectory planning. Two alignment methods, one-point alignment and threepoint alignment, were introduced to deal with different cases.

61

Chapter 5 Implementation and Software Development
Computer Aided Design (CAD) is the technology to use computer to design products. Computer Aided Manufacturing (CAM) is the technology to use computer systems to manufacture products. One of the key issues in CAD/CAM is three-dimensional visualization. OpenGL is one of the enabling technologies for three-dimensional graphics. In this chapter, a CAD / CAM software is developed to implemented the methods presented in the previous chapters. In this chapter, first, the existing Tripod software is introduced briefly. Second, the new software is discussed in details.

5.1 Structure of the Existing Tripod Control Software The existing tripod software only covers two blocks, tool trajectory planning and tool motion control. The software structure is shown below.
Control Point Set

Point to Point Based Tool rajectory Planning Planned Trajectory Motion Control

Figure 5-1 Method of Approach of Old Software.

62

T o o l T rajecto ry Planning U se r C o n tro l Point to P oint B ased T ool rajectory Planning

C o n tro l P oint S et

Planned T rajecto ry Axis M otion C ontrol

U se r C o n tro l GUI

D ow nloading T rajecto ry to PM C I M otion C ontrol C ard

M otion C ontrol E n c o d er F eedback

Figure 5-2 Software Structure o f Old Software.

The input o f the system is a text file containing control point set. The trajectory planning is perform ed on the control point set. After that, the planned trajectory is sent to the Tripod motion controller, which performs the motion control tasks. Figure 5-3 shows the GUI that loads control point sets. Figure 5-4 shows the motion control interface. Figure 5-5 shows the feedback information o f the tripod.

63

Bu
50 0 0 0 0 0 0 0 4 9.330 0 .970 43.370 1 .7 4 0 4 9 9 3 0 ;:2 G 2 0 49880 9490 4 9 8 1 0 4 .360 49730 9 230 49330 8 0 9 0 43.910 9 9 6 0 4 9 .3 8 0 7 .8 2 0 49240 9680 49080 954 0 49310 10400 4 9 7 2 0 11.250 48510 12100 48300 13940 jo o o o |ÔÔÔÔ" 0 .000 OOOO aooo OOOO 9000` OOOO, 0 .0 0 0 OOOO OOOO OOOO OOOO

Bz

Ci

LVel

A.Vd
g g c '

0 .0 0 0

OOOO OOOO OOOO itn m ; jo o o o

OOOO OOOO OOOO OOOO OOOO OOOO OOOO' OOOO OOOO OOOO 0 .000 OOOO OOOO OOOO OOOO ;IOOOO OOOO OOOO OOOO OOOO OOOO ` OOOO OOOO 0009 0 ,000 OOOO OOOO OOOO OOOO OOOO nnm noon jo o o o jo o o o

0 .0 0 1 0 0 0 0 10.000 10.000 0 .0 0 1 0 0 0 0 0 .0 0 1 0 .0 0 0 10 .0 0 0 0 0 0 1 0 .0 0 0 10.000 0 0 0 1 0 .0 0 0 : 1 0 0 0 8 0 .0 0 1 0 0 0 0 10.000 0 .0 0 1 0 0 0 0 1 0.000 0 .0 0 1 0 0 0 0 10.000 0 .0 0 1 0 0 0 0 10 .0 0 0 0 .0 0 1 0 .0 0 0 1 0.000 0 .0 0 1 0 .0 0 0 0 0 0 1 0 .0 0 0 1 0 0 0 0 0 0 0 1 0 .0 0 0 . l o o m 0.0010ÜOO l o o m 0 .0 0 1 0 0 0 0 l o o m n n n in n n n in o m jo o o o jo o o o

J j-,

.4

1 0 .0 0 0
o 9

«Vs
   u t : # # ':

XMma

jOCDO

cw
H ume
2 ] |L » lP < w < 3 |S âÜ ôim 3

Figure 5-3 GUI of Old Software to Load Set Points.
/ · Move Robol
E onliol» C « i» » ilM C h In lo m e t Lo«l Save

SKdm Lagt-- -- L eg!

LagZaCd L eg3

- P itc h -

-R o ll-

'C ^ C d ^

Del. H

-r
, r D a ta L o ffle i A c ti C S ^ ^ H ^ Iô ô ô ô A d2 |ü .o o o

r~

C o n lru o u s Motion

A c l3 |o.oDD

X {o.ooo

Y |o .o o o

____

Figure 5-4 GUI of Old Software of Motion Control.

è ü l

6 e L2

A ««3

a -UUÜJ oom

Ï .j-ij.i.11.6 |o o m jo o o o g U ^ 0 # I

: P o s i t i o i i ; < ||J i " j 5 ij-0 0 0 2 ju .ü iu ... .. ' ---------------- , -- =--------- ------------------j T a r g e t jiiiim ) :ji.i.a i) -ji.i.doi '" i n i ü 'p m a r - " ; ; ; ? ; ? p ô r r - -

0.000

O p e n n g S o c k e t IP :206.248.115.192 P ofl;l 0003 Q osing S o c k e t IP :206.248.115.192 P o»t1 OOOO Closing S o c k e t IP ;206.248.115.192Po»t100D 3 AfiAmpifiets d s a b b d

Figure 5-5 GUI of Old Software of Tripod Feedback.

5.2 New Software Structure

64

The existing software provides basic functions for a motion control system including pointto-point based tool trajectory planning and axis motion control. There are some

disadvantages including:

· · ·

It is incomplete as a CAM software, as there is no three dimensional visualization; The input o f the control point set is in its own format, not standardized; The tool trajectory planning is a based on point-to-point approach which is not accurate.

These three problems are addressed in the new software. Furthermore, three blocks are added to the system, including surface measurement, surface reconstruction and part alignment. The new software structure is shown in Figure 5-6 and Figure 5-7. In order to make the figure readable, the part alignment block is listed separately. Compared with Figure 5-2, more functions are introduced. There are two modules in surface measurement block, edge probe and surface probe. Edge probe is to probe the edge of the part and surface probe is to probe a rectangle area. Surface reconstruction block includes three modules, B-Spline edge reconstructor, B-Spline surface reconstructor and OpenGL visualization. Tool trajectory block includes four modules, G-Code editor/parser, STL file parser, point-to-point tool trajectory planning, accurate trajectory planning and OpenGL visualization. In axis motion control, there are three modules, trajectory downloading, motion control and OpenGL visualization. In alignm ent block, there are two modules, alignment and O penGL

visualization. In what follows, the blocks o f the new software are presented.

65

y_ Part. S urface M e a su re m e n t
User Control!. GUI GUI User Control! Digitized Points Edge Probe Surface Probe

S urface R e c o n stru c tio n
B Spline Surce Interpolator B-Spline Curve Interpolator

OpenGL Visualization

Reconstructed Surface

Tool T ra je c to ry P la n n in g
G-Code Editor/ Parser STL file Parser Point to Point Based Tool rajectory Planning

G-Code GAD Model

OpenGI Visualization (Trajectory Simulation)

Accurate Trajectory Planning

Planned Trajectory

Axis M o tio n C o n tro l
Downloading Trajectory to PMCl Motion Control Card User Control

r

:>

GUI

Encoder Feedback Motion Control OpenGL Visualization (Online Monitoring)

Encoder

Figure 5-6 New Software Structure (1).

66

C om m and'P oint Sel CAD File

Trajectory

A lignm ent

O pen G L Visualization

Three-Pointy O ne Point A lignm ent

Aligned CAD File Aligned T rajecto ry Aligned C om m and Point Set

Figure 5-7 New Software Structure (2) - Alignment.

5.2.1 Surface M easurem ent Surface m easurem ent has two functions, edge probe and area probe. Edge probe can probe m ultiple plane curves and area probe can probe an area. Both measurements are implemented using the iterative spectra comparison method presented in chapter 3. Figure 5-8 shows the main interface o f the edge probe block. In the figure, the Area A shows the configuration o f the edge probing, such as probe direction, starting and ending points and the parameters o f iterative probing. Area B shows the digitized data set o f one curve. Area C shows all the digitized data set o f the edge. The spectra comparison result o f a curve probe is shown in the A rea D. Figure 5-9 shows the GUI o f the Area Probe.

67

PrataMlno

rfW 'fW fc iaC w tc)» !
r AkmgX A I
r AlonaV

fT AJonjZ

C o O T S M u rC o o d h y q ZC c o K M tf
; É il^ l S

S fM d m fiio r I Z 1 ? ,2 I.5 1 ,.2 2 W ) I 1 . 3 « , 1 4 î l, : : A ? S ) I 1 7 2 ,U ,1 1 ,-2 Q 0 2 ) I l . « , B 3 e ,.t? ,2 « )

XSWjô F
¥5l*t(ÏÔÔ"
Z îta t -2 0

X E n u Iâ û
ïE t«)|150

2E m-20

I

l . a , 2 ? a ,- t& 0 0 ) ·16.( 0 )

O ep*i 1-250

I ! l. 7 i.- E e S .- 1 Â U ) I a 5 tl.- I V 6 2 - - ia E 0 | I a 2 6 ,- 1 7 .B l,- ï1 .* 7 |

f S»,affcigf»om

I C ti» r4 P W û o ^F ro c ttsrî rP h > b e lle rjlM < y
! T«*M m c(^Q i)

I00 -2 7 2 9 .·3 3 2 3 1
C

X

Sc9»erAs

Area A

A rea B

Area C

A reaD

Figure 5-8 GUI of Edge Probe.

"P ro b e Setting-----------------------------------------------------------x sw 1-100 X Er% l|lO.O Y E n d |2 0 .0 Z E n d |0 .0 PointMx) jo PoinlrfO jO à

l IdO O O . 0 .0 0 0 , - a 252) B probc3

^

i - ( 0 7 0 0 0 ,-20 000,-3

s p e c tr e & ro r 1 6 .7 8 5 t

Y S la t |-20.0 Z S t o t |0 0 D epth

(-10.000, 10.000.-19.æ4) ( 5.000, modo, -a823)
I OOOO, ( ;

: (10.000,-20.000,-:
[£ prabel m probe2 É piobeS à · probe4

; ( 5 .0 0 0 .-2 0 .0 0 0 ,-3

laooo,

·5245)

j-10.0

I 5000, laOOO, -a262)

mooo, 1 0 .0 0 0 ,- i a 2 6 5 )

loolUlB. |5 ,0 P ', O R h e Sinulation

piobe4

(-taooo. 2 0 .0 0 0 ,-1 1 .6 1 3 )
i
0 ,0 0 0 . 2 0 .0 0 0 . 1 4 3 7 )

1 - ( - 5 . 0 0 ) , 2 0 .0 0 0 ,- 1 .7 7 2 )
r

Probe itnativebrT oleranee [ ï a o S egnentJ|X ] |7

^ ( 5.000 , 20.000, -1.730) - I laOOO, 20.000,-11.160)

|. [ 'i a o o o , 20.000,-1 ! ( -5.000. zaooo, -1 !'·( 0.000 , 20.000, c ! -( 5,000 . 2 0 .0 0 0 . -1 L 1 m o o o . 20.000,-1

_j

S e g m e n k M lï" Figure 5-9 GUI of Area Probe.

5.2.2 Surface Reconstruction Figure 5-10 shows the surface reconstruction window. After the surface measurement, the digitized points are interpolated by B-Spline as show in this window.

68

R e v e r s e E ngin eerin g

-Joiil

Figure 5-10 OpenGL Visualization of Interpolated Curve.

5.2.3 Tool Trajectory Planning The tool trajectory planning block has the following functions;

· · · ·

Tool trajectory planning using G-codes; Tool trajectory planning using the interpolated B-Spline surface; Offline Simulation o f the planned trajectory; Load and show STL CAD file.

The main interface is shown in the Figure 5-11. It mainly consists o f three windows. The left window shows the G-Code editor. The middle window shows the state of the Tripod. The visualization o f the command point set and the CAD model is shown in the right window. Figure 5-12 shows the simulation o f the planned trajectory in progress. In the mid-window, the state o f Tripod is visualized. In the right window, the command point set and planned trajectory are com pared in different colors.

69

C3 PoWimg Control - [OffiUne Window]

j o -l T ad g

fie E d t C e r n é e W f e i d o w
- Jd

H dp

1R e v e r s e E n g i n e e r i n g
-- ....  

2F o r m O r é n e W h d o w | 3 O f f l i n e V / i n d o w
I %j f "

S 1 ; 0 .D 0

0

m. Figure 5-11 Main Interface of Trajectory Planning.

% 11 = 3 ,%

70

I^P irfisiim g C onlrot » ( C ^ i n e W indow]

Ia J

w m d MH * 1F o n n O

rth eW n d o w , 2

o fF u ioW

W ow

riM iiirt. I I I ^g|A ( 3 ^

^X j

a

4 '7 : 5 5 ^

Figure 5-12 Offline Simulation of the Tool Trajectory Planning.

5.2.4 Axis M o tio n C o ntrol Figure 5-13 shows the main interface of the axis motion control. It mainly consists o f two windows. The left window shows the current state o f the tripod. The right window shows the online m onitoring o f the actual tool path. At the current state, the tripod is at the home position, (0,0,0, 0,0,0). In the motion, the two areas o f the window will be synchronized with the motion o f the Tripod as shown in Figure 6-5.

71

O P o lish in g C o n tro l · [F o rm O n lin e W n d o iv ] I j c J Tm I» Fte Ebt C o r** WHdon Hdp 1 RevefM Enpheeting | 2 FormOiikisWindow 3 O fflte Window

Figure 5-13 Main Interface of Axis Motion Control.

5.2.5 Part Alignment Figure 5-14 to Figure 5-16 show the interface for the part alignment. In this case, the G-Code and CAD model have the coordinate systems based on OpenGL. Since the coordinate system of the OpenGL is not aligned with the coordinate system of the Tripod as explained in section 4.2.3.1, the CAD model and command point set cannot be loaded correctly as shown in Figure 5-14. One point alignment has to be performed. Figure 5-15 shows the result of one point alignment. After that, the CAD model and the command point set are aligned to the Tripod coordinate system.

When the part is installed not aligned to the Tripod coordinate system, three-point alignment is required to align the CAD model and the command point set. The interface and aligned result are shown in Figure 5-16. Window A shows the coordinates of the three points from

72

the default O penGL coordinate system and from the Tripod coordinate system. The main window shows the aligned CAD and command point set.

^ P o lis h in g Control - [OffLtne Window] I Taste Fte Edk Corrpfe ¥flndow Help 1 f=oroOrintfiWndow 2 Offl r e Wnttaw

.U A ll

a
%

Figure 5-14 Before One-Point Alignment.

73

021'oli'iUIng Control - [OITLtne Window]
FJe Edt Compile Window Help 1 FormOnlineWhdow | 2 0ffl

JS Alignm ent
One Point | Tkvee Pdnls X Coctfdinate
P o in l(C A D n

Y Coordinate

Z CtmnSnate

PointfMAqi

am
Figure 5-15 After One-Point Alignment.

74

Window A

C9

Centred - [OMüne Wvttbw]

2P c n rO lre w tid D w]O fT U -^ x v d » #

KCo5»drabe

1

RcwjrtAcr PoWKADC 1Û P o W & rg B.G6 POHIWU D PiMMACp «

Figure 5-16 After Three-Point Alignment.

5.3 Sum m ary The structure o f the existing tripod control software was reviewed. In order to improve the functions o f the current system, a new software structure was developed which includes five blocks. New modules, including G-code parser, OpenGL visualization, part alignment, surface m easurem ent, and surface reconstruction modules were added and implemented in the new system.

75

Chapter 6 Simulations and Experiments
This chapter presents simulation and experiment. The experiment is on polishing the edge of a doorstop using the Tripod. This experiment validates the software developed in chapter 5 and demonstrates the effectiveness of the proposed methods. The simulation is carried out by MATLAB program. It demonstrates how to use the iterative method presented in chapter 3 to determine the optimal sampling frequency of a damaged part from partially known information. After that, the part surface is reconstructed by B-Spline interpolation. The trajectory planning is performed on the reconstructed B-Spline surface. Finally, the tracking errors of the three-axis motion control are plotted. 6.1 Experiment The experiment set up is shown in Figure 6-1. The task of the experiment is to polish the edge of the doorstop without CAD model. The enlarged picture of the doorstop is shown in Figure 6-2. The edge of the doorstop consists of several plane curves. Each curve is probed point by point based on the iterative spectra comparison method presented in Chapter 3. Figure 6-3 shows the main interface of the edge following. Area D shows the spectra comparison of the two times sampling of the first plane curve, edge 1 as shown in Figure 6-2. The probe stops after the second probing since the spectra error is less than the given tolerance. B-Spline curves are reconstructed as a wire frame CAD model for the part as shown in Figure 6-4. The trajectory is planned based on the reconstructed B-Spline curves as shown in figure 6-5. Then the TTP is changed to a polishing tool-bit. Since the length of the TTP and the polish tool-bit is different, alignment has to be performed on the planned tool trajectory. Finally, the tripod drives the polish tool-bit to perform the edge following task while polishing the edge. Figure 6-5 shows the result after the following task. Window B shows the planned trajectory. Window B shows the actual visualized tool track. Window C shows the current state of Tripod.

76

Figure 6-1 Experiment Setup.

Edge 1

JP
Figure 6-2 Doorstop Used in the Experiment.

77

AreaD
tncMSeNiig

«nitivD ndH R r AtmgY <s- MgngZ

|XCoo^W i# Y C w W * Z C ow dhiii Û5Û 691 691 691 690 6S8 691 097 240 331 5 26  6 66 011) '96} 1651 19.B5 20.73 -21.99 ^ .3 5 25 (6 ^ 7 i3 :^ a s d --*

|(*-*lm i|lX

f c j [|W 1

( 6 .3 1 ,2 1 4 0 .- i a « 3 | ^

SsectmBnif

' #1**96 1 16652 1

k5#p' v s w |0 !

xwM
Y E iil]n O

I 6 .3 1 ,2 1 4 0 ,-1 0 771 I 6 3 1 ,2 0 55.-17101 I 6 3 1 .1 7 70.-16431 I 6 3 1 . K M . -15671 { 6 W . 1200.-15.731

\

.Z A otllO O

ZEndi-iaO

DwApsT r otM
»egneflli I

P brtjâ
r sjbk

HE ô a © > 3 `1 5 .7 3 1 (G -M .9 1 J. ie .9 1 ) iG M .G % .lG i5j i $K . 337.17% )
i 6 9 1 . DJO. I S 51) 2

6M

4

Figure 6-3 Main interface of the Edge Probing. a ir a*]

L 3 Polifliinq C ontrol - [R e v erse CnqmeeHng Window] IS T « te ffc E(K Conpi» V*dow Heto l ReverseE rq ro srflW n io w 2 form Or*»WWow 3 0ftL rc W W w

10

0 .0 0 0 ,d - 0 .0 0 0 ,* 3o 0 .0 0 0 ,s i-

djKO,sS-

0 .0 0 0| AlAirotAersen^

Figure 6-4 Interpolated Edge.

78

ESQSQ

...... ........................................................................
^ r«,,a».w% b. >c *m

} f<*a Wt eth CMCk

W ^oJ

W indow C

Window B

B
W indow A

m
ti«

m

a9 »

Isa

«

E > .ii s

^

18

* a c e r , - « a x ' , «4 -

-«oa: |fw#,ocw#A*

Figure 6-5 The comparison of Planned Path (bottom), Actual Path (upper) and the State Monitoring of Tripod.

6.2 Sim ulation In this section, sim ulation is carried out for the problem of repairing a damaged part. The assum ed surface o f the perfect part is modeled by eqn. (6-1), as shown in Figure 6-6. The dam aged surface is modeled using eqn. (6-2), as shown in Figure 6-7. The task is to model the damaged part and plan an accurate path to follow the contour.

Zo (%,);) = 3 ( 1 - % ) " g

(-W / M< x < \d m \-2 d m

2d m )

( 6- 1)

z(%,y) = 0

{-\d m < x < -Q 3 d m \ ( o th e rs)

0.5 < y < 0.8jm)

z{x, y) = Z o ix ,y )

(6-2)

79

Ongnal CAO

YAm

Figure 6-6 Surface Model of the Original Part.
damaged part

Y A xis

Figure 6-7 Surface Model of the Damaged Part.

SO

50

t F teq w cyinY (W rr# Figure 6-8 Power Spectrum of the First Segment. First, the part is evenly divided to 2 by 4 segments. The widths of the segment in the x direction and y direction are all 1 decimeter (dm). The first segment along x is from -1 dm to 0 dm and along y is from -2 dm to 1 dm. In the surface measurement, two-dimensional FFT

Frequency inX(1/mm

80

are perform ed on each segment and 99% BW for each segment are found. Figure 6-8 shows the pow er spectrum o f the first segment.

From the spectrum , the initial digitizing distance is chosen as 1/20 dm and 1/16 dm. After that, the dam aged part is digitized twice. The two spectra are compared and relative M SE is calculated as 2.081% , which is lower than the preset value of 10%. Therefore, none o f these two digitizing are undersam pling and no more digitizing is needed for this segment. For the third segm ent where x is from -1 dm to 0 dm and y is from 0 to 1dm, the relative M SE o f the first two digitizing is calculated as 11.04% that is large than the preset value. Therefore, one m ore iteration is needed and the M SE of the second time is calculated as 6.7279% that is acceptable. A fter all the segments are finished, the digitized points are shown in Figure 6-9. In these segm ents, the M SE error is below 5% except the third segment which contains the damaged portion. The digitized data are sent to surface reconstruction block.

D igitized Data

·1 0
·OS

Figure 6-9 Digitized Data.
R esam pled Data

YAua

Figure 6-10 Resampled data.

81

Figure 6-11 Reconstructed Surface.

Figure 6-10 shows the re-sampled data and Figure 6-11 shows the final reconstructed surface. The reconstructed surface is sent to the tool trajectory planning block. Figure 6-12 shows the top view of the planned command points and Figure 6-13 shows the discrete command points viewed from the side. It can be seen that when the slope is sharp, the command points are dense.

Figure 6-12 Top View of the Planned Trajectory.

82

VM « çM W S # p p m g # k m 8 W e

7

-2

-,

X A lll

Figure 6-13 Side View of planned Trajectory.

Track of X Axis

Track o f y A x is

Track of 2 Axis

05

20 40 G O Tims (e) Tracking Error ofX Ans 0.08 0.06 0.04 0.02
0.04

20

40

80

Tim e (s) T racking Error o f Y A x is

0.06

Time (·) Tracking Error of Z Axis
0.2

0.02
-01
- 0.2

80
Time (s)

Figure 6-14 Three-axis Tracks and Tracking Errors.

A fter trajectory planning, the discrete command points are sent to the Simulink model o f a three-axis m achine to simulate the result. Figure 6-14 shows the comparison o f the command points and the tracking o f the toolhead of the first line of ar axis motion and y axis motion. In Figure 6-14, the solid line donates the command points and the dot line donates the tracking o f the tool. The solid lines and the dot lines coincide with each other in the picture since the deviation between them are small. Figure 6-14 also shows the tracking error of the Simulink model. T he result shows that the Simulink model can accurately follow the planned trajectory.

6.3 S u m m ary This chapter presented the simulation and experiment. The task of the experiment is to polish the edge o f a doorstop using the Tripod. This experiment validated the software developed in chapter 5, and dem onstrated the effectiveness o f the proposed methods. The simulation was 83

carried out by MATLAB program. It demonstrated how to use the iterative method presented in chapter 3 to determine the optimal sampling frequency of a damaged part from partially known information. After that, the part surface was reconstructed by B-Spline interpolation. The trajectory planning was performed on the reconstructed B-Spline surface. Finally, the tracking errors of the three-axis motion control were plotted.

84

Chapter 7 Conclusions
A new shape adaptive motion control system is proposed in this thesis. The system consists o f five blocks, surface m easurement, surface reconstruction, tool trajectory planning, axis motion control and alignm ent. The method for each block is presented and their integration is provided. The effectiveness o f the proposed system is demonstrated by simulation on damaged part repair and experiment on edge polishing.

The main contribution o f the thesis is the integration of the five blocks.

·

In the surface m easurem ent block, a new iterative spectra comparison method is proposed to determine the optimal sampling frequency with or without CAD model.

·

In the surface reconstruction block, spatial spectral analysis method is applied to com pare the perform ance o f different interpolation methods. B-Spline interpolation method is selected and implemented in the spatial spectral domain.

·

In the tool trajectory planning block, a new trajectory planning method is introduced for accurate trajectory planning based on CAD model.

·

In the part alignment, an existing three-point alignment method is extended to align both CAD model and tool trajectory.

·

A new software package based on the proposed methods has been implemented on Tripod, together with three-dimensional visualization.

Further w ork is suggested as follows:

·

In surface m easurement, the Short Time Fourier Transform has been implemented A nature extension o f this work will be on wavelet-based techniques.

·

In surface reconstruction, the further work would be on investigating the N on U niform Rational B-Splines (NURBS) surface reconstruction method.

85

In tool trajectory planning, more topics such as collision detection and avoidance would be included. In part alignment, the current method can align CAD model in STL file format. The methods to align the CAD model in other file formats can be studied.

86

Appendix A Introduction to Spatial Spectral Analysis
In signal processing, there are three commonly used domains, time domain, spatial domain, and spectral dom ain. The time domain is used when a signal is measured with respect to time, such as current. The spatial domain is used when a signal is measured with respect to space, such as curve, surface. The spectral domain is defined when signals are transformed to use frequency as an independent variable [24]. There are tw o points o f view o f spatial spectral analysis, namely, from signal point of view and from system point o f view. For the first viewpoint, the objects under study are Fourier transform , pow er spectrum, and bandwidth. Fourier transform is one of the basic tools used to transform signals from one domain to another domain. For the spatial spectral analysis, the Fourier Transform o f a two dimensional spatial curve z=f(x) can be written as:

/ W =
jfc = - o o

(A-1)

where coefficient c(k) is calculated as

c(k) = - [ z - e - ^ ^ '^'^^dx L ^

(A-2)

In eqs. (A-1) and (A-2), signal with length L,

is the base frequency o f the signal. For two- dimensional spatial is the reciprocal o f L. is usually called Fourier Series. In [7 - 10],

Ck is defined as Fourier Descriptor.

The reason that the Fourier series are commonly used is because it has clear physical meaning. From the viewpoint o f signal decomposition, when a signal is decom posed to a harm onic series, c* are the coefficients of the decomposed series. Therefore, discrete series c* can be used to determine the continuous spatial signal/(jr).

87

Two commonly used frequency features are power spectrum and bandwidth. Spectrum is used to extract the frequency contents from a signal [24]. Power spectrum is the square of the magnitude of the Fourier coefficients. The physical meaning of the power spectrum is the power distribution of the harmonic components. Parseval Theorem is an import theorem in the spatial spectral analyzing, as given below

£|Z(w)| dx

(A-3)

The left-hand side of the eqn. (A-3) is the signal energy expressed in the spatial domain. The right-hand side of the equation is the signal energy expressed in the spectral domain. The Parseval's relation unveils that the signal energy is fully conserved in the frequency domain after the Fourier Transformation. Since a spatial signal has only limited length and carries only finite energy, it is possible to find a frequency, above which all the power of the harmonic components of the spectrum is 0. This frequency is defined as bandwidth (BW). A signal with BW is defined as band limited signal. In some research [24], the sum of the power spectrum below certain value / i s defined as the accumulation spectrum.

Usually, the spatial signals of geometrical parts are all band-unlimited. This means that the spectra of these signals extend to infinity. However, based on the Parseval's relation, the energy of all the frequency components must be limited in the spectral domain. Since the signal carries only limited energy in the spatial domain, the trend of power spectrum decreases as the frequency increases. The percentage of energy at a frequency may be defined relative to BW. For example, a 99% BW corresponds to a -20dB loss in spectrum [16]. The main problem associated with the Fourier transform is that the spectrum does not contain the location information. That is, from the spectrum, it is not known where high components lie. The intuitive solution to this problem is to segment the entire spatial axis to small lengths

88

and apply the Fourier transform on each one. The transform o f this type is called the Short Time Fourier Transform (STFT). For a signal z=f(x), the STFT is expressed as

F{m , w) =

2

/(« ) ·

- m )e^^

(A-4)

where w(n-m) is the sliding window o f function w(n) located at m, and w(n) is selected as a rectangle window or Gaussian window [24].

For curves, one-dim ensional Fourier transform is used, and for surfaces, two- dimensional Fourier transform is used. In general, a surface is expressed as z=f(x,y), and two-dim ensional Fourier transform is given as

F ( u, v)=

j j /U ,y ) e -- (A-5)

f ( X , y) = j | f ( « ,

It can be seen that the two-dimensional Fourier transform has a similar eoneept o f speetrum and bandwidth. In this case, the speetrum is two-dimensional, and the bandwidths are defined in both X and y direetion.

The objects under study from the viewpoint of systems are system and its properties including input and output, impulse response and frequency response. In general, systems can be classified into

· · · ·

Continuous time or discrete time; Causal or non-eausal; Linear or nonlinear; Time-invariant or time-varying.

89

The signal input and output relation may be expressed as

x(t) - ^ T ^ y{t) or T(x(t)) = y(t)

where T is the system model, jcftj is the input signal, and y(t) is the output signal.

In this thesis, we are concerned about the characteristics of Linear Time-Invariant Systems (LTI). A time-invariant system means that the parameters of the system model do not change with time. A system is defined as linear when all input and output signals satisfy:

iTfyl. x(f)) =

. T(x(f))

T (x, (0 + ^2 (0) = T (x, {t)) + T (X; (0)

A very important function is impulse function or delta function. Delta function is defined as

ô{t) = 0 x { t ) ^ 0 r ^ I â(t)dt = l

(A-7)

In the physical world, the delta function is the abstraction of the phenomenon, which lasts at a very short interval. One of the most intuitive representations of the delta function in the physical world is the ideal digitizing process in which the digitizing time is supposed to approach zero. At this time, once digitizing is represented by the multiplication of the delta function and the surface model. The multiple digitizing (Figure A-1(c)) is represented as the multiplication of the delta train (Figure A-1(a)) and the surface model (Figure A-1(b)).
Z i

^

^

Delta Train

I I
0



(a). Delta train

90

z t Curve

0

........

(b). Curve

1
delta function. It can be expressed as

OigltizeiJ Sam ples

(c) Digitized Samples Figure A-1 Delta Train and Sampling

The im pulse response (IR) o f a L T I system is defined as the response of the system to the

/i(0 = W ( 0 )

( A- 8)

The freq u en cy response (FR) o f the system is defined as the Fourier transform of the impulse response.

H { w ) = FTi h{t ))

(A -9)

From the definition o f the LTI and the sampling characteristic o f delta function, it can be derived that

(A -10)

91

where x(t), h(t) and y(t) are input signal, impulse response and output signal of the system, respectively.

Anther important concept is Convolution. For a discrete system, we have

y{n) = ^ x { n ) - h { n - k )
i= 0

(A-11)

The above calculation is defined as convolution and expressed as

y{n) = x{n) * h{n)

(A-12)

Furthermore, from the definition of the Fourier transform, we have

Y{w) = X{w)  H{w)

(A-13)

where Y(w), X(w) and H(w) are the Fourier transform of the y(t), x(t) and h(t), respectively.

The Nyquist theorem is also called the sampling theorem for it answers the question of what size of digitizing points is sufficient to fully recover the signal from the digitized point set. As explained in the spatial spectral analysis, the ideal surface measurement is to multiply the original spatial signals by the delta train [24]. From the convolution theorem, the multiplication in the spatial domain equals the convolution in spectral domain and vice visa. Therefore, O k and bk are the coefficients of the decomposition and defined as a Fourier Series. Conversely, when the signal is sampled less than the twice of the bandwidth, the spectral spectrum has alias effects in the spectral domain and distortion in the spatial domain. In this case, the signal cannot be fully recovered.

From the view point of signal processing, surface interpolation and surface reconstruction can be considered as processing the digitized data by a reconstruction filter. Therefore, the procedure of calculating the coefficients involves de-convolution and filter operations.

92

DigtDzation

Interpôlâtiân -----F,

/\
c)

.

Figure A-2 Spatial Spectral Analysis of Measurement and Reconstruction.

The above figure explains the surface digitization and surface interpolation in spectral domain. Figure A-2 (a) shows the spectrum of the original signal, and Figure A-2 (b) shows the spectrum o f the digitized data. The spectrum of the digitized data is the convolution of the spectrum o f the original signal with the spectrum of the delta function. In Figure A-3 (b), the dot-line represents a ideal low pass filter. By multiply the spectrum by a low pass filter, the spectrum o f the original signal can be fully recovered.

93

References
[1] Y. Altintas, Manufacturing Automation. Cambridge University Press, 2001. [2] M. W. Cho and T. I. Seo, "Inspection Planning Strategy for On-Machine Measurement Process Based on CAD /CAM/ CAI Integration", International Journal Manufacture Technology, Vol. 19, pp. 607-617, 2002. [3] S. C. Chung, "CAD/CAM Integration of On-The-Machine Measuring and Inspection System for Tree-Formed Surfaces". Proceedings o f American Society fo r Precision Engineering, Vol. 20, pp. 267-270, 1999. [4] H. J. Pahk, Y. H. Kim, Y. S. Kim and S. G. Kim, "Development of Computer-Aided Inspection System with CMM for Integrated Mold Manufacturing", Annals CIRP, 42(1), pp. 557-560, 1993. [5] K. I. Kim, "Integrated Computer Aided Manufacturing System for Sculptured Surfaces", PhD dissertation. University of Chicago, 1993. [6] M. W. Cho, "Flexible Inspection System Using CAD Database and Vision Guided Coordinate Measurement Machine", PhD Thesis, University of Illinois at Chicago, IL., 1992. [7] H.T. Sheu and M.-F. Wu, "Fourier Descriptor Based Technique for Reconstructing 3D Contours From Stereo Images", IEEE Proceedings on Vision, Image and Signal, \o l. 142, pp. 95 - 104, April 1993 [8] J. Li and A. O. Hero, "A Spectral Method for Solving Elliptic Equations for Surface Reconstruction and 3D Active Contours", International Conference on Image Processing, 2001. Vol. 3, pp. 1067-1070, October 2001 [9] M.F Wu and H.T. Sheu, "Representation of 3D Surfaces by Two Variable Fourier Descriptors", IEEE Trans On Pattern Analysis and Machine Intelligence, Vol. 20, No. 8, A u ^ s t 1998. [10] I. Kunttu, L.Lepisto, J. Rauhamaa, and A. Visa, "Multiscale Fourier Descriptor for Shape Classification", IEEE Proc. Of the 12' International Conference on Image Analysis and Processing, 2003. [11] G. Bonmassar and E. L. Schwartz, "Real-Time Restoration of Image Degraded by Uniform Motion Blur in Foveal Active Vision Systems", IEEE Transactions On Image Processing, Vol. 8, No. 12, December 1999. [12] L. Lucchese and S. K. Mitra, "A new Class of Chronmatic Filters for Color Processing. Theorj^and Applications", IEEE Transactions On Image Processing, Vol. 13, No. 4,

[13] R.W. Cox and R.Tong, "Two and Three-Dimensional Image Rotation Using the FFT", IEEE Transactions on Image Processing, Vol. 8, No. 9, September 1999. [14] R.D. Webb, "Spatial Frequency Based Close-Loop Control of Sheet Metal Forming",

94

^ //D Thesis, D epartm ent o f Mechanical Engineering, Massachusetts Institute of Technology, ly y /. [15] D. G. Lamb, D. G. Baird and M A. Greenspan, "An automation system for industrial 3D laser digitizing In Proceedings o f the Second International Conference on 3-D D igital Im aging an d M odeling, pp. 148-157, 1999. [16] C. C. Huang and Y. F. Z l^ng, "Determining digitizing distances on sculptured surfaces using short time Fourier Transform , IE E E International Conference on Robotics and Autom ation, Vol. 2, pp. 1493-1498, 1996. [17] T. Tsukada and K. Sasaiima, "An optimum sampling interval for digitizing surface asperity profiles". Wear, Vol. 83, pp. 119-128, 1982. [18] T. W oo and R. Liang, "Dim ensional M easurement of Surface and Their Sampling", Com puter A id ed Design, Vol. 25, No. 4, pp. 233-239, 1993. [19] M. W ieczorow ski, "Spiral Sampling as a Fast Way o f Data Acquisition in Surface T opography", International Journal o f M achine Tools & Manufacture, 2001. [20] K.H. Lee, H. W oo and T. Suk, "Point D ata Reduction Using 3D Grids", International Journal o f A dvanced m anufacturing Technology, Vol. 18. pp. 201-210, 2001. [21] Y. H. Chen, C. T. Ng and Y. Z. Wang, "Data Reduction in Integrated Reverse Engineering and RapicT Prototyping", International Journal o f Computer Integrated m anufacturing. Vol. 12, pp. 97-103, 1999. [22] B. H am ann, "A D ata Reduction Scheme for Triangulation Surfaces", Computer Aided G eometric D esign, Wo\. 11, pp. 194-214, 1994. [23] C. E. Shannon, "Com m unication in the presence of noise," In Proceedings o f IRE, Vol. 37, pp. 10-21, 1949. [24] J. G. Proakis and D. M anolakis, D igital signal processing: Principles, Algorithms and Applications, Prentice Hall, 1995. [25] M. Lhuillier and L., Quan, "Surface Reconstruction by Integrating 3D and 2D Data o f M ultiple V iew s", 9 IE E E International Conference on Computer Vision Proceedings, Vol. 2, pp. 1313-1320, 2003. [26] E. Boyer and M. O. Berger, "Smooth Surface Reconstruction from Image S eq u en ce", International Conference on Image Processing, 1995, Proceedings!] Vol. 1, pp. 3984 0 1 ,1 9 9 5 . [27] V. N, Sm elyanskiy, P. Cheeseman, D. A. Maluf, R. D. Morris, "Bayesian SuperResolved Surface Reconstruction from Images" , IEEE Conference on Computer Vision and Pattern Recognition, Vol. 1, pp. 375-382, 2Ô02. [28] J. Z. L iu^W . K. Cham, Q.R. Chen and H. T. Tsui, "3D surface Reconstruction from Single 2 t) Line D raw ings and Its Application to Advertising on the Internet , Proceedings o f 2001 International Symposium on Intelligent Multimedia, Video and Speech Processing, pp. 453-456, 2001.

95

[29] G. Chong and B. Parvin, "Surface Reconstruction from Sparse Fringe Contours", IEEE Workshop on Applications o f Computer Vision, October 1998. [30] E. Boyer and S. Petitjean, "Curve and Surface Reconstruction from Regular and NonRegular Point Sets", IEEE Conference on Computer Vision and Pattern Recognition, Vol. 2, pp. 659 - 665, June 2000. [31]B.A. Payne and A.W. Toga, "Surface Reconstruction by Multiaxial Triangulation", Computer Graphics and Applications, IEEE, Vol. 14, pp. 28 - 35, November 1994. [32] B. S. Jong, T. Wu. Lin, W. H. Yang and K. S. Jong, "An Improved Alpha Shape Algorithm for Geometric Reconstruction", 22 International Conference on Distributed Computing Systems Workshops, pp. 228 - 232, July, 2002. [33] K. Kang, J. P. Tarel and R. Fishman, "A Linear Dual-Space Approach to 3D Surface Reconstruction from Occluding Contours Using Algebraic Surfaces", 8 IEEE International Conference on Computer Vision, Vol. 1, pp. 198-204, July 2001. [34] J. K. Johnstone, K. R. Sloan, "Tensor Product Surfaces Guided by Minimal Surface Area Triangulations", IEEE Conference on Visualization, pp. 254-261, 1995. [35] Y. He and H. Qin, "Surface Reconstruction with Triangular B-Splines", Proceedings o f the Geometric Modeling and Processing, pp. 279-287, 2004.

[37] I. Douros, L. Dekker and B. F. Buxton, "An Improved Algorithm for Reconstruction of the Surface of the Human Body from 3D Scanner Data Using Local B-spline Patches", IEEE International Workshop on Modelling People, pp. 29 - 36, 1999. [38] T. M. Lehmann, C. Gonner and K. Spitzer, "Survey: Interpolation Methods in Medical Image Processing", IEEE Transactions on Medical Imaging, Vol. 18, No. 11, pp. 10491075,1999. [39] A. Hace, M. Rodic, M. Terbuc and K. Jezernik "Robust Motion Control and Trmectory Planning for Planar Laser Cutting System", 5 International Workshop on Advanced Motion Control, pp. 53 - 58, July 1998. [40] A. Piazzi and A. Visioli, "A Cutting-Plane Algorithm, for Minimum-Time Trajectory Planning of Industrial Robots", Proceedings o f the 36 IEEE Conference on Decision and Control, Vol. 2, pp. 1216-1218, 1997. [41] S. H. Suh Planning International [42] Y. Mizugaki M. Sakamoto and K. Kamijo, "Fractal Path Application in a Metal Modi Polishing Robot System , 5 International Conference on Advanced Robotics, Vol. 1, pp.431 - 436, June 1991 [43] Y. Takeuchi, D. Ge and N. Asakawa, "Automated Polishing Process with a Human-like

96

pp. 950-956, M ay 1993

^^tem ational Conference on Robotics and Automation, Vol. 3. '

[44] A. R. Ross, "M odeling and Analysis o f a Reconfigurable Parallel Kinematic Machine for R econfigurable M anufacturing", master thesis. Faculty o f Engineering Science The University o f W estern Ontario. 1999. [45] S. P. Austin, R. B. Jerard and R. L. Drysdale, "Comparison o f Discretization Algorithms for N U R BS Surface with Application to Numerically Controlled M a& ining". Com puter-Aided D esign, Vol. 29, No. 1, pp. 71-83, 1997. [46] J. B. Bobrow , "N C M achine Tool Path Generation From CSG Part Representations". Robotics, Vol. 17, M arch 1985. [47] A. A. Shabana, Com putational Dynamics, John Willey & Sons, Inc., 2002. [48] O. Com pany, F. M arquet and F. Pierrot, "A new High-Speed 4-DOF Parallel Robot Synthesis and M odeling Issues", IEE E Transactions on Robotics and Automation, Vol. 19, pp. 411 - 4 2 0 , June 2003. [49] M. A lm onacid, R.. J. Saltaren , R. Aracil and O. Reinoso "Motion planning o f a Clim bing Parallel R obot", IE E E Transactions on Robotics ana Automation, Vol. 19, pp. 485-489, June 2003. [50] G. Yang, I. M. Chen, W. K. Lim and S. H. Yeo, " Design and Kinematic Analysis o f M odular Reconfigurable Parallel R o b o ts", IEEE International Conference on Robotics and Autom ation, 1999, Vol. 4, pp. 2501-2506, May 1999. [51] F. F. Xi, W. Z. Han, M. Vernel and A. Ross, "Development of a Sliding-Leg Tripod as an A dd-on Device for M anufacturing", Robotica, Vol. 19, pp. 285-294, ^ 0 1 . [52] N.K.S. Lee,"An U ltra-Precision Alignment System for Micro Machining", IEEE International Conference on Industrial Technology, Vol. 2, pp. 1142 - 1145, December 2002 . [53] S. Sirichotiyakul, D. Blaauw, Oh Chanhee ; R. Levy, V. Zolotov, J. Zuo,"Driver m odeling and alignm ent for worst-case delay noise". Design Automation Conference, 2001, pp. 720 - 725, June 2001. [54] D. Nancoo, "A Constrained Total Least Squares Algorithm for Optimal Registration in Laser Scanning", m aster thesis. Faculty of Engineering Science, The University of W estern Ontario, 2002. [55] J. I. M aletic, J. L eigL A , M arcus, G. Dunlap,"Visualizing Object-Oriented Software in V irtual Reality", I& IE T International Workshop on Program Comprehension, pp. 26 3 5 ,2 0 0 1 . [56] R.A Cross, A.J. H anson,,"V irtual Reality Performance for Virtual Geometry , IEEE Conference on Visualization, pp. 156 - 163, 1994. [57] W. Ribarsky, J. Bolter; A. O. d. Bosch, R. v . T e y l i n g e n , " Visualization and A n a ly st V irtual Reality", Com puter Graphics a n d Applications, IEEE, Vol. 14, pp. 10-12.

97

[58] S. Sarathv, K. Shuiaee and K. Cannon, "Visualization of Large Complex Datasets Using Virtual Reality", International Conference on Information Technology: Coding and Computing, pp. 522-526, March 2000. [59] J. Whyte, D. Bouchlaghem and T. Thorpe,"Visualization and information: a Building Design Perspective", IEEE International Conference on Information Visualization, pp. 104-109, July 1999. [60] J. Berta, "Integrating VR and CAD", Computer Graphics and Applications, IEEE, Vol. 19, pp. 14-19, October 1999. [61] H. S. Kim, H. Ko. K. Lee and C. Lee, "A Collision Detection Method for Real Time Assembly Simulation", IEEE International Symposium on Assembly and Task Planning, pp. 387 - 392, August 1995. [62] M. Tory, "Mental Registration of 2D and 3D Visualizations (An Empirical Study)", Visualization, IEEE, Vol. 19-24 pp. 371 - 378, 2003. [63] E. Sacks, C. Pisula and L. Joskowicz,"Visualizing 3D Configuration Spaces for Mechanical Design", Computer Graphics and Applications, IEEE, Vol. 19, pp. 50-53, October 1999. [64] K. Wooyoung, H. C. Lim, 0. Kim, Y. K. Choi and I. Lee ,"Visualized Construction Process on Virtual Reality" , 5" International Conference on Information Visualization, pp. 684- 689, July 2001. [65] M. d. Berg, M. v. Kreveld, M.Overmars, 0. Schwarzkopf, Computational Geometry, Algorithms and Applications, Springer, 2002. [66] M. E. Mortenson, P. Townsend, Geometry Modeling, Springer, 1996. [67] M. Unser, A. Aldroubi and M. Eden, "Fast B-Spline transforms for continuous image representation and interpolation", IEEE Transactions o f Pattern Analysis and Machine Intelligence, Vol. 13, No. 3, pp. 821-833, 1991. [68] Z. Mihajlovic, A. Gfoluban and M. Zagar, "Frequency Domain Analysis of B-Spline Interpolation", /EÊE, 1999. [69] K. M. Bolton, "Biarc Curves", 1974 r681http://www.sdsc.edu/tmf7Stl-specs/stl.html [69] http://computing-dictionarv.thefreedictionarv.com/G-Code

98


