HOT PIXEL DETECTION FOR STAR TRACKERS

by

K. Christy Fernando, BASc
Space Engineering York University, 2009

A thesis presented to Ryerson University in partial fulfillment of the requirements for the degree of

Master of Applied Science
in the program of

Aerospace Engineering

Toronto, Ontario, Canada. c K. Christy Fernando 2012

Author's Declaration
I hereby declare that I am the sole author of this thesis. I authorize Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research.

I further authorize Ryerson University to reproduce this thesis by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research.

ii

Abstract

This thesis examines the damage induced by proton radiation on the Sinclair Interplanetary S3S star tracker. The star tracker is made from commercial off the shelve (COTS) components, which are not specifically designed for use within a radiation environment. The detector was irradiated with high energy protons of 100MeV to a 9krad total ionizing dose (TID). After high temperature annealing process, the sensor was analysed for functionality and image quality. Immediate responses to the radiation include the rise in dark current and the creation of hot pixels. The combination of the damage introduced false detections of stars from the matching algorithm. By adjusting image correction parameters, which includes the raw threshold and the size of the point spread function (PSF), false detections were reduced. Finally we examine ways of detecting hot pixels from the irradiated unit.

iii

Acknowledgements

I would like to start by thanking my supervisor, Dr. John Enright for giving me the opportunity to pursue my Masters degree. Your expertise in the field combined with your knowledge and guidance took my limitations to new heights. Secondly I would like to thank many of my colleagues from EPH basement. Although we did not have a lot of Sun light, you guys made it easy to be in a basement day in and day out. Of course not all the time was used for pure productivity, the fun times we had there will never be forgotten. Special thanks to Tom, Geoff and Dmitri for keeping the faith that I would actually finish this in time, even when I lost some faith in myself. Another big thanks to my "brothers" Mike and Marc from York University. Ever since we met in undergrad, we have always pursued knowledge and self improvement. It is extremely refreshing to have friends like minded as yourselves for support. Special thanks to Tabia, for believing in what I do and one of the only persons that understood my drive for science amongst my love to do many other things at the same time. You have been a great inspiration to me, and I wish you the best on your pursuit of your Masters degree. Finally I would like to thank my parents, my mom and my grandmother. This degree would have not happened without your loving support. Simply I would like to say thank you.

iv

Dedication

The thesis is dedicated to all young scientist and engineers to keep your goals high, and always try your best.

v

Table of Contents
1 Introduction 1.1 1.2 1.3 1.4 Background . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Overview of Star Detection . . . . . . . . . . . . . . . . . . . . . . . S3S Star Tracker . . . . . . . . . . . . . . . . . . . . . . . . . . . . Radiation Environment . . . . . . . . . . . . . . . . . . . . . . . . . 1 2 3 4 6 10

2 S3S Star Detection 2.1 2.2 2.3

Black Level Image Correction . . . . . . . . . . . . . . . . . . . . . 11 Threshold and Blobbing . . . . . . . . . . . . . . . . . . . . . . . . 13 Image Quality and Centroiding . . . . . . . . . . . . . . . . . . . . 15 19 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19

3 Radiation Testing 3.1 3.2 3.3 3.4 Previous Work

S3S Radiation Testing . . . . . . . . . . . . . . . . . . . . . . . . . 20 Displacement Damage . . . . . . . . . . . . . . . . . . . . . . . . . 21 Temperature Testing . . . . . . . . . . . . . . . . . . . . . . . . . . 25 32

4 Tuning Image Processing Parameters 4.1 4.2

Adjustment for Dark Current . . . . . . . . . . . . . . . . . . . . . 33 False Detections . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39 42

5 Hot Pixel Identification 5.1 5.2

Photo Response of Irradiated Unit . . . . . . . . . . . . . . . . . . 42 Hot Pixels . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43 50

6 Conclusion

vi

6.1 6.2 6.3 6.4

Radiation Testing . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50 Temporal Effects on Image Quality . . . . . . . . . . . . . . . . . . 51 Hot Pixel Detection . . . . . . . . . . . . . . . . . . . . . . . . . . . 52 Future Work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52

vii

List of Tables
1.1 2.1 3.1 3.2 3.3 S3S Specifications. [1] . . . . . . . . . . . . . . . . . . . . . . . . . . 3

Table of sample PSFs on the detector and their integrated brightness. 15 TRIUMF proton beam calibrated parameters. . . . . . . . . . . . . 23 Lit pixels over the temperatures test range. . . . . . . . . . . . . . . 26 Average dark pixel values vs temperature. AC - Active Pixels. DR - Dark Pixels. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29

3.4

STD of dark pixel values vs temperature. AC - Active Pixels. DR - Dark Pixels. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29

viii

List of Figures
1.1 1.2 1.3 1.4 2.1 2.2 2.3 2.4 2.5 2.6 3.1 3.2 3.3 3.4 3.5 3.6 3.7 3.8 3.9 Picture of the S3S Star Tracker. [2] . . . . . . . . . . . . . . . . . . Sample star image. [3] . . . . . . . . . . . . . . . . . . . . . . . . . Trajectory of particles in the magnetosphere. [4] . . . . . . . . . . . Proton flux based on Earth radii. [4] . . . . . . . . . . . . . . . . . 3 4 7 8

Example of detector array, showing active area with 134 dark columns. 12 BLC uncorrected and corrected image example. . . . . . . . . . . . 13 Full PSF image, BLC uncorrected. . . . . . . . . . . . . . . . . . . 14 BLC corrected full PSF. . . . . . . . . . . . . . . . . . . . . . . . . 14 Example of contiguous pixels (left), and non-contiguous (right). . . 15 Pixel error vs total brightness with attached hot pixel. . . . . . . . 18 Pre- and post- irradiation from 3MP sensor at 5krad. [5] . . . . . . 20 Particle collision causing various effects. . . . . . . . . . . . . . . . 21

Lit pixels vs detector temperature for 9krad unit. . . . . . . . . . . 23 Lit pixels vs detector temperature for 0krad unit. . . . . . . . . . . 24 Temperature test setup. . . . . . . . . . . . . . . . . . . . . . . . . 25 Histogram for first 4 colour channels (9krad at -20 C). . . . . . . . 28 Histogram for the first 4 colour channels (non-irradiated at -20 C). 28

Histogram for the first 4 colour channels (9krad at 30 C). . . . . . . 30 Histogram for the first 4 colour channels (non-irradiated at 30 C). . 30

3.10 Green(1,1) channel for 0krad and the 9krad unit at various temperatures. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31 4.1 4.2 Lit pixels vs raw threshold change, 9krad unit. . . . . . . . . . . . . 33 Lit pixels vs raw threshold change, 0krad unit. . . . . . . . . . . . . 34

ix

4.3 4.4 4.5 4.6 4.7 4.8 4.9

Raw threshold vs lit pixels per channel, 9krad unit. . . . . . . . . . 35 Raw threshold vs lit pixels per channel, 0krad unit. . . . . . . . . . 36 EM camera. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37 HD115735, magnitude of 5.15. . . . . . . . . . . . . . . . . . . . . . 37 Raw threshold test on visual magnitude 5.15 star. . . . . . . . . . . 38 HD115735 star, 5.15 Visual Magnitude . . . . . . . . . . . . . . . . 39 Number of false detections vs raw threshold increase. . . . . . . . . 40

4.10 False star matches and lit pixels vs the raw threshold. . . . . . . . . 41 5.1 5.2 5.3 5.4 5.5 5.6 5.7 Response to light on 9krad unit. . . . . . . . . . . . . . . . . . . . . 43 Response to light on 0krad unit. . . . . . . . . . . . . . . . . . . . . 43 Sample false detection PSF 1. . . . . . . . . . . . . . . . . . . . . . 44 Sample false detection PSF 2. . . . . . . . . . . . . . . . . . . . . . 45 False detections after the removal of hot pixels. . . . . . . . . . . . 46 Permanent hot pixels vs raw threshold. . . . . . . . . . . . . . . . . 47 Identifying hot pixels from star images. . . . . . . . . . . . . . . . . 48

x

1

Introduction

Star tracker measurement accuracy can be greatly effected by ageing and radiation damage. The affects of ageing can be a small increase in dark current, and introduction of a very few warm or hot pixels over several years of use, however radiation damage can cause these effects very rapidly. Space qualified sensors are usually rated by the amount of total ionization dose (TID) the sensor can handle before it may require annealing or unusable. Based on the mission parameters, this number can give a rough idea if the sensor is useful for a particular mission. The radiation damage has several effects on the detector. The most notable effects include rise in dark current, and the creation of hot pixels on the detector. Hot pixels are damaged pixels on the detector which reads a high value consistently when not illuminated, and are always in the same position on an image. The main damage mechanism behind this is displacement damage from particle collisions. With the increase of the noise and hot pixels, there are increased chances of false detections of stars. This brings up several adjustments to the processing of the image in order to regain reasonable performance. In this thesis, damage on a nanosatellite CMOS active pixel sensor (APS) was analysed, after radiation testing. This includes emphasis on damage characteristics on the detector and tuning the image processing parameters to obtain acceptable performance.

1

1.1

Background

Attitude sensors are used to aid in the control of spacecraft orientation and location. These sensors include inertial measurement units (IMU), accelerometers, gyroscopes, magnetometers, sun sensors and star trackers. The data from these sensors are fused together to obtain an optimal solution. With most sensors, the accuracy obtained is in the arc-minute range, however with a star tracker the accuracy will be in the arc-second range [6]. The star tracker is an imaging device used to take a picture of the night sky and returns the attitude of the spacecraft in relation to a fixed reference frame. Earlier star trackers however did not have processing capabilities on board, therefore the picture was sent do the main processors of the spacecraft for processing. With the advent of more powerful microprocessors star cameras are able to do image acquisition and online processing for an attitude solution [6]. Typical star tracker can weigh from 1-7kg and can consume up to 15W of power. These sensors are not suitable for applications on small satellites, nanosatellites or smaller, due to their high demand of power and weight. Major factors that affect mission design are cost and the weight of the systems. Missions which require high performance on a modest budget, including emerging technology demonstrations, can be aided with a good quality star tracker for simplicity of use and reliability on accuracy. The S3S Nano-satellite Star Tracker is specifically designed to the application of small satellites and is the primary star tracker used in this thesis. The S3S star tracker was developed by the Space Avionics and Instrumentation Laboratory (SAIL) at Ryerson University along with industry partners. The specifications for the S3S are given in Table 1.1. The S3S unit is shown in Figure 1.1. 2

Figure 1.1: Picture of the S3S Star Tracker. [2] Table 1.1: S3S Specifications. [1] Size Mass Power Accuracy Update Rate 59 x 56 x 31.5 mm  90g <0.5W average  0.01 with 85% confidence 2Hz

1.2

Overview of Star Detection

In this section, the general processing chain of a star tracker during regular operation is discussed. Specific details of the S3S processing methods are discussed in the next chapter. A typical image from a star tracker is shown in Figure 1.2. Each star in the image is usually in the form of a Point Spread Function (PSF). After some image corrections, the centroid of each PSF is calculated on the image plane. Although two stars can be used to obtain a solution for the attitude, much more robust solutions are obtained when matching three or more stars. A simple outline of a star trackers processing routine is given below:

3

Figure 1.2: Sample star image. [3] 1. Image acquisition. 2. Centroiding of the PSF. 3. Matching the centroids to an internal catalogue. 4. Output the attitude quaternion. The centroids are matched to star triplets in most cases from an internal catalogue. The catalogues can vary depending on the detection capabilities of the star tracker which is governed by the minimum magnitudes of the stars it is capable of detecting. The corresponding catalogue for the star tracker will then depend on this restriction consisting of several million triangles.

1.3

S3S Star Tracker

As mentioned above, the S3S star tracker was designed with the intention of being used on small spacecraft. Using commercial off the shelf (COTS) components, it 4

is possible to make an affordable device minimizing costs. This would make it viable for low budget missions to have a high precise attitude sensor. The primary requirements for the S3S sensor are outlined in [2]. Some main requirements include availability of star detection, tolerable slew rate, and accuracy. With the secondary requirements being power and volume as it has to fit the power and weight budget of nanosatellites. With the average power consumption of <0.5 Watts and a weight of 90g, the device is perfectly suited for use with small satellites. The S3S uses an Aptina MT9P031, 5 mega-pixel CMOS active pixel sensor (APS) with an active pixel area of 2592x1944. It also uses a F/1.2 CCTV lens with a focal length of 16mm; this gives a total field of view of 15x20.2 degrees. The star tracker uses an Texas Instrument OMAP3530 using an ARM Cortex A8. For storage and processing, the star tracker has a 256MB NAND flash memory for firmware, and 256MB of RAM for computations. The communication interface to the satellite is done through serial RS-485. In addition, the star tracker also has an 8051 micro controller which is used as a supervisor to the OMAP3530. The 8051 processor turns the OMAP processor on for the image acquisition and attitude determination phases; at which point the software is copied to RAM for processing. The OMAP processes the image and returns the telemetry to the 8051, at which point the OMAP is powered down. This makes it so that every time an attitude solution is obtained the previous solution has no barring on the new solution. Due to the star tracker's power and weight restrictions, it does suffer from some drawbacks. The main ones being no mechanical shutter, and the communications interface bandwidth through the RS-485 serial connection. 5

The RS-485 serial connection is very sufficient and reliable for the star tracker under normal operation. If a full image is required for analysis, it is possible to take up to 30 minutes for a full image transfer. The current design of the star tracker is also limited on image storage, and no compression of the image is available at this time. Therefore, it can only hold very few images on the flash storage. The flash storage is also limited by the number of read and write cycles. Analysis of the image is not available for the user under real time operation which makes it difficult to perform corrections for false detections. The S3S currently does not have a shutter, which makes it difficult to take true dark images in space. Dark images are important for the detection and classification of hot pixels within the image which contributes to false detections. Later in this thesis, we will see how exactly false detections can occur and how radiation plays a major role in creating these effects.

1.4

Radiation Environment

One of the main things to consider when designing a space mission is the radiation environment. Every instrument is affected by different forms of radiation beyond Earth's atmosphere. The radiation comes from various sources outside our galaxy and from the Sun, which includes galactic cosmic rays (GCR), and solar particle events. Particles of GCRs vary from all different elements, and have very high energies. These particles usually cause single event effects (SEE) in microelectronics and photonics [7]. Solar particle events consist of high energy protons from Coronal Mass Ejections (CME). These effects cause permanent damage increasing the TID, and in the case of photo detectors, Displacement Damage(DD) on the lattice structure of the silicon. 6

Most small satellite missions are restricted to low Earth orbits, altitude between 400-1000km. Since the satellites are outside of Earth's atmosphere, they are easily susceptible to radiation damage. At this orbit the dominant type of ionizing particles are high energy protons. Most having energies less than 100MeV [8]. The flux of the protons is also dependant on the solar cycle, increasing during the solar minimum [7]. Dose rates can also vary depending on the inclination of the orbit. The trapped radiation around Earth's magnetosphere which have been modelled gives an idea of the dosage that could be experienced by the spacecraft. Figure 1.3 is an illustration of the motion of these trapped particles and Figure 1.4 shows the flux of proton particles based on Earth radii. Using these models, it is possible to predict the amount of radiation which will be experienced, omitting SEEs, and build radiation hardened equipment.

Figure 1.3: Trajectory of particles in the magnetosphere. [4] The S3S unit was subjected to proton radiation, the dominant particle in LEO. Proton interactions with semiconductor devices cause DD in the junctions [9]. DD is caused by the collisions of an excited particle with atoms of the lattice structure of an electronic device. There is also a chance that atoms of the silicon lattice structure that were originally excited will recoil causing additional perma7

Figure 1.4: Proton flux based on Earth radii. [4] nent damage. Due to the displacement the electrical properties of the circuit are changed, increasing the dark current. Like most space instruments the S3S was subjected to radiation testing to determine end of life (EOL) performance of the unit. From the testing, presented later, we can clearly see a performance difference in the operational characteristics of the sensor. The damage seen is comparable to known imaging devices which are currently in space whether the technology used is CCD or CMOS. Certain effects of direct radiation include rises in dark current, and damaged pixels which can include warm pixels or hot pixels. The rise in dark current is readily seen in many sensors, one of the greatest examples being from the Hubble Space Telescope (HST). The HST is in Low Earth Orbit (LEO) at an altitude of 580km with an inclination of 28.5 degrees. At this particular inclination the telescope not only faces radiation trapped from the Van Allen radiation belts but it also experiences radiation through the passage of the South Atlantic Anomaly (SAA) [10]. Certain sensors react differently based on their purpose, which is evident from the HST study by Sirianni et al. However the imaging sensors exhibit 8

similar damage properties with those found in the testing of the S3S unit. Two S3S unit were subjected to high energy proton beam radiation. Both units were tested to TID of 5krad and the other at 9.4krad, with the larger dose corresponding to the EOL for most small satellites [11]. The sensors underwent an annealing process at 125 C for 48 hours. Certain immediate effects that were seen were the increase of dark current on the detector, the sensitivity to temperature, and the creation of hot pixels. In prior work, Becker, et al [5], also tested the radiation tolerance of the MT9P031. Their tests consisted of a 50 MeV proton beam at dose levels of 500 rad to 5 krad TID. Their findings also show an increase in dark current, as well as hot pixels. The strategy employed by them to remove hot pixels from images was to subtract two images, however this strategy is only effective if the camera has a mechanical shutter. Therefore for the unit like the S3S, the detection parameters have to be altered in order to obtain sensible output. The two units that are used in this thesis is a non-irradiated unit which will be referred to as the "0krad", and the irradiated unit referred to as the "9krad". With the increase of dark current and hot pixels on the detector, false detections of stars were became very common from the images. Ways of reducing the effect of radiation damage on image quality is examined throughout the thesis. This includes tuning image threshold parameters to minimize false detections and find the locations of hot pixels for image correction. In the next chapter we look at the decision making schemes of the star tracker. This includes image correction and processing the PSFs present in the image in order for star matching.

9

2

S3S Star Detection

The S3S undergoes several processing steps from image acquisition to the quaternion output. This includes several levels of correction to the image before the star matching process. In this section, the processing chain will be explained in detail as it relates to the decision making during star matching and why false detections can occur. The quality of the attitude solution is very dependant on the image quality. As outlined in [11] the order of importance on performance is: 1. Maximum sensitivity to light required to detect faint stars of low visual magnitudes. 2. Low temporal noise, which improves centroiding accuracy. 3. Response of the star on the detector (i.e. the PSF is spread over several pixels on the detector adjacent to the centre pixel). 4. Maximizing the dynamic range of the detector. This helps reduce the number of stars that may be saturated in the image. In order to understand some of the image correction and processing decisions done by the S3S, first we need to look at some of the on-chip processes of the detector. The MT9P031 sensor has four colour pixel cells. Each channel, Green1, Red, Blue and Green2, has its own offsets that are used in the image acquisition stage. This is called the analogue offset. The analogue offset is unique for every S3S unit, and is calibrated based on temporal RMS noise response for that particular detector. If the analogue offsets are set to low, it is possible that the analogue

10

to digital converter (ADC) will output zeros when the detector is not illuminated. This is why the analogue offsets of the detector has to be finely calibrated so that it will not cut off dim stars, low magnitude stars. In addition to the four separate channels, each channel is separated into two different signal chains. This makes it so that there are eight different signal chains all together. In order to get proper image correction for the dark noise, the eight different signal chains has to be corrected accordingly using the masked dark pixels on the detector array. This process is called black level correction (BLC).

2.1

Black Level Image Correction

The user may do the black level correction (BLC) in several different ways. Along with the active pixels of the detector, there are several rows and columns of pixels that are inactive and masked. These pixels can be used to correct for the dark current on the detector which is usually induced by changes in the temperature of the detector. The user may opt to let the hardware correct for the black level or as in the case of the S3S, the correction is done by the software. During hardware black level correction (HW-BLC), the detector uses the dark rows and columns around the active array to automatically estimate values for the analogue offsets in order to keep the black level at a target level. These are calculated for each colour channel. Although this does an adequate job of taking care of the spatial variation amongst the pixels and each of the colour channels, it tends to clip the pixels at the low end of detection, which was observed from the radiation testing. SEEs from proton collision could cause the detector to have incorrect dark values. High dark values cause the analogue offsets to be set low causing a loss in dynamic range, lower sensitivity to light for dim stars. To gain 11

more control of the per pixel correction, software black level correction (SW-BLC) is done by the S3S on the image. SW-BLC uses several columns of masked dark pixels at the end of the image to calculate the proper dark values. These pixels are amongst the same signal and colour chains as the active area, therefore it yields a good estimate of the dark values. Since this is done on the image itself, it avoids the clipping due to analogue offsets being set by the HW-BLC which effects the image at the acquisition phase. Figure 2.1 is an example of the pixel arrangement on an image. The active area is 1944 by 2592 pixels. The end of the array has 134 dark columns which are used for black level correction. The maximum value given for the digital read out of a pixel value is 4095. To properly perform dark level correction, just taking average values from the dark pixels is not enough. As mentioned earlier there are eight different signal chains, each of which acts differently. Therefore eight different values are calculated, one for each signal chain. This is simply the average of the pixel values for the chain.

Figure 2.1: Example of detector array, showing active area with 134 dark columns. The difference between a corrected and an uncorrected image can be seen in 12

500 5 10 15 20 10 20 400 300 200 100 0 15 20 10 20 5 10

500 400 300 200 100 0

Figure 2.2: BLC uncorrected and corrected image example. Figure 2.2 for an unexposed part of an image. Without the black level correction we see a non-uniformity in the pixel variations. After the SW-BLC correction, the next step is to find the PSFs within the image after applying various thresholds which are presented in the next section.

2.2

Threshold and Blobbing

For the PSF to be considered for star matching, there are still three more criteria that it must pass. These are the raw threshold, the size of the PSF in terms of the number of pixels, and the bin threshold which are discussed below. The detector outputs a value per pixel in terms of pixel counts. This is a 16 bit value which ranges from 0-4095. The raw threshold determines which pixels on the image will be considered as a "lit-pixel", one that maybe not effected by noise, but rather illuminated by a star on the image. Therefore the pixels that are deemed as lit must be above the raw threshold value. The second factor is the size of the star on the detector. When the star tracker takes the picture of the sky, the illumination of the star is usually spread over several pixels, usually in the shape of a PSF. A picture from the S3S is shown in Figure 2.3 with the corrected PSF shown in Figure 2.4, from our calibration and testing table. This was taken using a pinhole setup on a collimated light source. 13

The size of the PSF has to be at least six pixels or more, until the next criteria is met which is the threshold on the integrated brightness, the bin threshold.
4000 3500 3000 2500 2000 1500 1000 500 0

Figure 2.3: Full PSF image, BLC uncorrected.

4000 3500 3000 2500 2000 1500 1000 500 0

Figure 2.4: BLC corrected full PSF. If the PSF gets past the first two stages, the final criteria is that the given PSF has to be over 1000 counts in total. For example the PSF which has at least 6 pixels has to have a total integrated brightness of 1000 total counts, known as the bin threshold. Table 2.1 shows a list of PSFs that are considered for matching and their location on the detector. Also note that saturated pixels are not counted into the brightness total.

14

Table 2.1: Table of sample PSFs on the detector and their integrated brightness. X-Coordinate 606 1858 1845 1307 1848 755 784 1943 806 1237 Y-Coordinate Integrated Brightness 672 173508 440 110675 259 88208 1329 81106 623 58531 1366 23390 1271 10104 2282 7753 1339 6367 1158 5718

2.3

Image Quality and Centroiding

Once the PSFs on the image a determined, the centroids of the PSFs are calculated, and these are used for the matching process. The pixels considered for the PSF are only the adjacent connecting pixels. An examples of this is shown in Figure 2.5 . If the pixel is connected to a contiguous set by the corners, it will not be counted into the set. This brings up the issue of hot pixels and their connectivity to a PSF.

Figure 2.5: Example of contiguous pixels (left), and non-contiguous (right). Hot pixels that are introduced can cause centroiding shifts of the PSFs, if they are considered as a contiguous part of the PSF. A centroid shift on the PSF will have a couple of effects on star matching and finally a bigger error on attitude 15

solution. Since the stars are matched based on the angles between the star triplets, a shift in the centroid may yield in no attitude solution. The effects of the centroid shift within an image of the S3S and its processing chain can be analysed using the following model. A PSF can be represented as a bi-variate Gaussian distribution [12]. The distribution on the focal plane can be described as the following: A S (x, y ) = e 2 2
2 (x-µx )2 +(y -µy ) 2 2

=

A e 2 2

r2 2 2

(1)

where A is the integrated intensity of the PSF on the image plane,  is the size of the PSF, (µx , µy ) are the coordinates of the star's centroid, and r is the radial distance of a point (x, y ) from the centre of the PSF. In our case, the distance would be in terms of pixel size. Using eq.1 the centroid error based on the brightness of the PSF and hot pixels can be calculated. First a 2 dimensional integration must be done as given in eq.2.
2 r

IT OT =

A
0 0

1 r2 exp - rdrd 2 2 2 2

(2)

In this integration we are integrating over the radius of the PSF, and angle of 2 , where IT OT is the total intensity of the PSF. Integrating the equation yields the following result shown in eq.3. -r 2 2 2

IT OT = A 1 - exp

(3)

Using this equation we can now fully evaluate the PSF based on a given brightness. To find the bounds of the radius, a Gaussian function is used as shown in eq.4 and eq.5, assuming the peak is centred at the origin. Where ILP is the lit

16

pixel threshold, ISAT is the intensity of what is considered a saturated pixel, rLP is the total radius of the lit pixels and rSAT is the radius of the saturated pixels.
2 -rLP 2 2

ILP = Aexp

(4)

ISAT = Aexp

2 -rSAT 2 2

(5)

Using equations 4 and 5, solving for the radius, the integrated intensity that we consider for centroid calculations, excluding the saturated pixels, can be derived by simple substitution to eq.3.
2 rLP 2 2 2 rSAT 2 2

IP SF = A

1 - exp

- 1 - exp

(6)

Where IP SF is the integrated intensity of the PSF, without the saturated pixels. Assuming that the centroid of the peak intensity is at the origin, and a hot pixel is at the edge of the PSF at rLP , the approximate centroid error can be expressed as the following in eq.7. rLP · IHOT IHOT + IP SF

=

(7)

Using the equations above the error  was calculated based on the total intensity A. The results are shown in Figure 2.6. The above test was done assuming that a hot pixel is at the edge of the PSF of a detector count value of 4095. As expected, the hot pixel has a major effect on the centroid of a PSF of low brightness. The pixel error decreases as the intensity increases. A hot pixel at the edge of the PSF will have the most effect on centroid error, hence why this example was chosen. This result will change if there are more 17

4 3.5

Centroid Shift (pixels)

3 2.5 2 1.5 1 0.5 0 0

0.5

1

1.5

2

2.5

3

3.5

4

4.5 x 10

5
4

Integrated Intensity

Figure 2.6: Pixel error vs total brightness with attached hot pixel. hot pixel that is connected to the PSF. With increase dose of radiation, we will see more and more hot pixels. This also has an affect on the rise of dark current of the detector. In the next chapter we will see the effect of radiation damage on the S3S unit.

18

3

Radiation Testing

The S3S unit is made from COTS components which are not specifically designed with radiation in mind. The detector is the key component of the star tracker and unlike other sensors such as IMU's, gyroscope, accelerometers etc., the star tracker detector must always be exposed to the environment in order to obtain an image. The S3S was subjected to high energy radiation dose tests to assess the performance of the unit at EOL.

3.1

Previous Work

Becker et al. 3.1 from NASA Jet Propulsion Laboratory (JPL) have performed similar radiation testing of commercial sensors, this included two different versions of the MPT9P031 sensor, a 3 mega-pixel (MP) and a 5MP. The JPL radiation tests consisted of a 50MeV proton beam with both sensors. The sensors were tested at various levels of TID, from 500rad - 5krad (500, 1k, 2k and 5k), one sensor for each level of radiation to retain and recreate data if needed. Dark readings from the sensors were taken post radiation which shows the following effects: · Increase in dark noise · Increase in the number of hot pixels · Increase in photo-response non-uniformity (PRNU) Along with various others damaging effects, which are presented, the most significant effects are the ones listed above. The creation of hot pixels from one of the sensors after 5krad TID is shown in the following Figure 3.1. 19

Figure 3.1: Pre- and post- irradiation from 3MP sensor at 5krad. [5] With the increase of noise and the hot pixels corrections for the image are needed. These recommendations include black level correction and calibration for the dark noise, this includes analogue offset calibration on a colour-wise basis. For the removal of hot pixels, it is recommended to use a shutter to obtain dark images which allows the user to map the pixel locations. Similar results were attained for the S3S unit during proton radiation testing. The dark values of the detector increased, as well as the creation of hot pixels. Temporal response from the unit increased, decreasing the performance of the unit. In the next section we will see how the radiation effects the performance characteristics especially as it relates to star measurements and tracking.

3.2

S3S Radiation Testing

The S3S 5MP sensor was subjected to a much higher energy proton beam than the one presented by Becker et al. The tests were done at the TRIUMPH facility in Vancouver, Canada. Using a high energy proton beam at 100MeV the S3S was tested to 9krad TID. After annealing the sensor to mitigate some of the sensor 20

damage and regain functionality the performance of the unit was assessed. The 9krad unit was also calibrated to the proper analogue offsets as a flight unit, to insure there will not be any clipping on the colour channels. Unfortunately preirradiation calibrated results are not available for the particular unit, however all the results are compared to the controlled non-irradiated unit, the 0krad.

3.3

Displacement Damage

One of the most common causes of damage done by radiation in general is displacement damage (DD). DD occurs when an energetic particle whether it is a high energy proton/electron or a neutron collides and travels through the lattice structure of a material, as illustrated in Figure 3.2. As the particle travels through the material the collisions with the lattice structure results in two different types of damage that have many different effects on the operational characteristics of the device. The type of damage can be classified into ionization and displacement damage. Ionization is the result of energy loss producing electron-hole pairs and displacement damage occurs when an atom from the lattice structure is displaced and allowed to roam [13].

Exit Particle Vacancy Intersitial Particle Incident Particle Particle in latice

Figure 3.2: Particle collision causing various effects.

21

Atoms usually find the stable position within a structure, eventually over time the displaced atoms will find stable forms within the lattice structure or the surround materials. This process is called annealing. Annealing can occur naturally at room temperature or rapidly at higher temperatures. Certain spacecraft have specific annealing cycles for their devices. For example in the case of the HST, which has many imaging sensors, has annealing processes that are set to specific times and temperatures. The annealing process can work two ways one being "forward annealing" (annealing) or "reverse annealing". The standard annealing process reduces some of the damage as particles settle in more stable forms. However, reverse annealing is a damaging process, where the freed particles form more effective defects. To mitigate the damage from radiation manufacturers of sensors and electronic components often include radiation hardening and shielding. However when using COTS components, this is not expected. Many references to various effects due to DD and radiation are given in [13] with extensive detail. Only two main overall effects are examined in this thesis which affect star detection and matching, these are the increase in dark current due to the amount of Displacement Damage Dose (DDD) and the creation of hot pixels. The total DDD can be calculated for the S3S sensor, from the given equation below:

DDD = N IEL · 

(8)

where NIEL is the non-ionizing energy loss of the particle, the material the target is made from, and  is the test particle's fluence. The NIEL value for Si(21eV) for high energy proton at 100MeV is 2.598 × 22

10-3 MeV.cm2 /g. The calibration parameters for the proton beam in order to calculate the fluence of the beam is given in Table 3.1. Table 3.1: TRIUMF proton beam calibrated parameters. 9.35 × 104 p+ /cm2 /MC (MC = Monitor Count) 8.47 × 10-3 rads/MC 1 krad = 118000 MC

The fluence for the beam is calculated to be 9.9297 × 1010 p+ /cm2 . Using Equation 8 the DDD is calculated to be 2.5797 × 108 MeV/g. With this, we can get an idea of how the total dose of radiation effects the material and as a manufacturer this can be used to help in radiation hardening of the material. The following simple test was done at room temperature with the irradiated 9krad unit and the 0krad unit taking dark images. One of the immediate responses from the irradiated unit was the increase in dark current of the detector and retain of the charge within the pixel wells. This can be observed in Figure 3.3.
10 9.5 9 8.5 x 10
4

33 32 31 30 29 28 27 26 25

8 7.5 7 6.5 6 5.5 0

20

40

60

80

100

Temperature in degrees Celcius

# of lit pixels

20

40

60

80

100

Measurement number

Measurement number

Figure 3.3: Lit pixels vs detector temperature for 9krad unit.

23

8400 8200 8000

33 32 31
Temperature in degrees C

7800

# of lit pixels

7600 7400 7200 7000 6800 6600 6400 0 20 40 60 80 100

30 29 28 27 26 25

20

40

60

80

100

Measurement number

Measurement number

Figure 3.4: Lit pixels vs detector temperature for 0krad unit. The measurements were taken immediately after power was given to the sensor, to see the effect of dark current accumulation. The raw threshold deems the definition of a lit pixel from an image after SW-BLC correction. In this case the raw threshold was 120 detector counts. We can see that from frame to frame, the number of lit pixels grow rapidly. Comparing the results with the 0krad unit given in Figure 3.4 the distinction between the two sensors is very clear. As expected the number of lit pixels is higher for the irradiated unit than the controlled unit. Although the analogue offsets for both sensors were calibrated, the temporal shift on the 9krad is still dominating. By observation of an image from the 9krad unit, it was clear that this affect could only be changed by tuning the raw threshold to minimize the number of lit pixels.

24

3.4

Temperature Testing

To study the pixel population distribution which is greatly effected by temperature, a controlled experiment was conducted at Sinclair Interplanetary. The temperature test was done with both the 0krad unit and the 9krad unit. The experimental setup is shown in Figure 3.5.

Figure 3.5: Temperature test setup. The glass chamber allows for controlled temperature change. The temperature was adjusted until the detector temperature reached the desired value. At this time histograms of the pixel distribution was downloaded for the images for their respective channels. In addition the images were also saved for full analysis. The purpose of the test is to see the temperature response from the units. It is expected that the dark response from the irradiated unit to be significantly higher. In addition this lets us study the per channel pixel distribution and their characteristics based on temperature. In order to take full dark images, both units lens' were covered with a standard 25

lens cap, in addition the lens was fully covered by a metal cap which covered the entire lens apparatus. This assured full dark image acquisition during the temperature test. The two units were tested at various temperatures from a range of -20 C to 60 C. Table 3.2 shows the number of lit pixels versus the temperature increase on the detector. The response from the 0krad unit is as expected, the dark level response is very uniform until the temperature was raised to 60 degrees Celsius. At 60 degrees the star tracker is out of its nominal working temperature range. Significantly lowering the temperature has a major effect on the dark current of the detector. This result is also seen on the HST imaging detectors. This shows how active cooling could play a significant role in the performance of the star tracker. This also shows the importance of thermal management of the sensor towards EOL. The current lit pixel limit on the unit is 100,000. The matching algorithm does not proceed if there are too many lit pixels within the frame. From the 9krad unit, there are still a significant amount of lit pixels even at standard operating temperatures. Table 3.2: Lit pixels over the temperatures test range. Temperature ( C) Lit Pixels 9krad Lit Pixels non-irradiated -20 3051 5009 -10 4880 4922 0 10804 4970 10 23927 4872 20 45253 5654 30 131941 9234 40 454090 20543 60 2933171 104397

26

To see how the lit pixels are distributed across the detector, at the various temperatures, histograms were downloaded from the devices. Figure 3.6 presents the number of pixels for each channel binned by the count for the 9krad unit. Similarly the 0krad unit is presented in Figure 3.7 . These figures represent the distribution at -20 C, and only the first four signal chains are given as the rest of the chains follow a similar response. For the four different colours channels on the detector Green1, Green2, Red and Blue, the corresponding signal chains respectively are: Green(1,1), Green(1,2), Green(2,1), Green(2,2), Red(1), Red(2), Blue(1) and Blue(2). We can see how the four signal chains react differently from one another. But we found that the alternating chains behave similarly to one another. For example Green(1,1) behaves similar to Green(2,1), and Green(1,2) behaves similar to Green(2,2), and the alternating colours follow the same pattern. To study the effect of growing temperature, histograms of the distribution were taken at room temperature. The detector will always be a few degrees higher than room temperature, the results are represented in Figures 3.8 and 3.9. We can see that the pixel distribution per channel gets wider. The distribution of the pixels on the irradiated unit are slightly brighter. From Table 3.2 it is evident that most of the dark noise caused by temperature variations is taken care of by the SW-BLC, by looking at the average pixel value per channel, correction until the temperature reaches above 40 degrees Celsius. The temperature effect is much greater on the 9krad unit as expected. Table 3.3 shows the average pixel count for all eight signal chains for the active and the dark areas for the 9krad unit. The dark pixel array does represent the dark current very well, even as the temperature was increased. Looking at the 27

6

x 10

5

5

Green(1,1) Red(1) Green(1,2) Red(2)

Number of pixels.

4

3

2

1

0

0

500

1000

1500

2000 2500 Pixel count.

3000

3500

4000

4500

Figure 3.6: Histogram for first 4 colour channels (9krad at -20 C).
6 x 10
5

5

Green(1,1) Red(1) Green(1,2) Red(2)

Number of pixels.

4

3

2

1

0

0

500

1000

1500

2000 2500 Pixel count.

3000

3500

4000

4500

Figure 3.7: Histogram for the first 4 colour channels (non-irradiated at -20 C). standard deviation (STD) of the pixel values given in Table 3.4 also suggests that the pixel value fluctuation between the dark and active areas are very small. The lit pixel count due to the temperature change of the detector is unavoidable 28

Table 3.3: Average dark pixel values vs temperature. AC - Active Pixels. DR - Dark Pixels. 60

29 30 AC 138 145 143 145 147 142 146 144 DR 110 119 124 126 120 119 120 122 AC 218 227 222 224 232 224 231 227

-20 Channel AC DR G(1,1) 126 140 R(1) 316 328 G(1,2) 164 176 R(2) 387 399 B(1) 322 334 G(2,1) 128 142 B(2) 393 404 G(2,2) 172 182 Table 3.4: AC 215 350 295 451 342 214 441 293 Dark 40 DR 180 185 195 201 193 198 191 193 AC 427 441 422 432 520 501 510 493 60 DR 432 447 429 441 593 560 557 520 DR 194 328 273 428 321 195 421 273 Pixels.

Temperature ( C) -10 0 10 20 30 40 AC DR AC DR AC DR AC DR AC DR AC DR 286 295 156 170 179 188 210 215 240 242 269 267 140 155 276 284 255 261 237 240 224 225 212 210 359 367 250 256 277 281 308 311 340 340 370 367 223 230 349 356 329 335 313 317 301 302 288 285 140 156 278 286 258 265 236 241 222 225 210 210 288 298 156 170 183 193 207 213 236 239 265 264 225 231 351 359 332 339 313 318 300 302 286 285 361 370 250 256 280 285 306 309 336 337 365 363 STD of dark pixel values vs temperature. AC - Active Pixels. DR -

Temperature ( C) -20 -10 0 10 20 Channel AC DR AC DR AC DR AC DR AC DR G(1,1) 14 51 32 54 36 60 45 53 75 69 R(1) 2 9 23 50 31 49 47 58 78 72 G(1,2) 40 75 34 58 37 65 50 59 80 74 R(2) 10 58 37 67 38 61 49 63 79 76 B(1) 3 8 17 48 28 46 51 56 83 72 G(2,1) 9 48 33 53 39 59 48 53 78 75 B(2) 12 54 37 68 38 60 50 58 80 71 G(2,2) 40 77 36 58 39 62 48 57 78 69

9000 8000 7000 6000 5000 4000 3000 2000 1000 0 Green(1,1) Red(1) Green(1,2) Red(2)

Number of pixels.

0

500

1000

1500

2000 2500 Pixel count.

3000

3500

4000

4500

Figure 3.8: Histogram for the first 4 colour channels (9krad at 30 C).
12000 Green(1,1) Red(1) Green(1,2) Red(2)

10000

Number of pixels.

8000

6000

4000

2000

0

0

500

1000

1500

2000 2500 Pixel count.

3000

3500

4000

4500

Figure 3.9: Histogram for the first 4 colour channels (non-irradiated at 30 C). if the thresholds are not adjusted. Another factor is the sensitivity of the detector to temperature changes. This requires some changes to the analogue offsets of the detector to adjust for the noise. Further increase of the temperature only broadens the width of the pixel distribution. This result is shown in Figure 3.10. Since the result is the same amongst 30

all signal chains, only the first green signal chain is shown for clarity. The overall distribution of the pixels behaves alike until higher temperature is reached; At which point the 9krad unit exhibits anomalous behaviour. At the edge of the histogram plot, there is a population of pixels which read 4095. The distribution of the pixels on the 0krad unit is within a reasonable range.
10000 # of lit pixels 8000 6000 4000 2000 0 0 500 1000 1500 2000 2500 3000 3500 4000 0°C 20°C 40°C 60°C

15000 0°C # of lit pixels 10000 20°C 40°C 60°C

5000

0

0

500

1000

1500

2000 2500 Pixel count.

3000

3500

4000

Figure 3.10: Green(1,1) channel for 0krad and the 9krad unit at various temperatures. With the overall noise increase on the detector, several image processing parameters must change. To reduce the number of lit pixels, the raw threshold has to be adjusted. This also includes changes to the size of the PSF. Although the raw threshold change reduces the number of lit pixels, it also introduced more false detections of stars. This required a change to the size of the PSF. In the next chapter we explore the results of these changes as we tune the parameters to reduce the number of false detections. 31

4

Tuning Image Processing Parameters

As mentioned in Chapter 2, the S3S image processing step has various parameters which can be adjusted to optimize performance if needed from the default settings. This includes the raw threshold, bin threshold, and for matching purpose the star PSF size on the image. In this chapter, the changes to these various parameters on full images are examined. This includes real star images which were taken from the engineering model (EM) camera using the same lens and dark images that were downloaded from the 9krad for the purpose of testing for false detections and threshold testing. The initial raw threshold and the integrated brightness, bin threshold, values were empirically chosen to reduce the amount of false detections. On the 9krad unit however with the increase in dark current and hot pixels they are much more common. From radiation damage the overall detector has a great increase in dark current. Hot pixels combined with surrounding pixels that may have been affected by DD and the general increase of dark current has a chance of being incorrectly considered to be suitable candidates for star matching. To get any type of attitude solution trusted or not, as long as there are three "stars" within the image, some solution will be calculated. The star matching algorithm will not occur if there are to many lit pixels. So one of the first things to adjust and correct for is the raw threshold to reduce the lit pixels. After which other parameters such as the PSF size could be adjusted for the star matching phase. This study is conducted to see which parameters works best towards the EOL of the detector. This is mainly to reduce the number of false detections. Since the change to the raw threshold will have an effect on dim stars, we must be careful

32

with the parameter change to not lose to much performance. These effects are examined in this chapter.

4.1

Adjustment for Dark Current

One of the ways that was mentioned in the previous chapters to reduce the number of lit pixels is the adjustment of the raw threshold. Using a full dark image from the 9krad downloaded at room temperature, an offline test was done where the image was corrected for dark current and the raw threshold was raised to see its effect on the lit pixel count. The result is shown in Figure 4.1, with the processing algorithm cut off value of 100,000 lit pixels. Comparing the result with the 0krad unit shown in Figure 4.2 there are far less lit pixels.
x 10
4

14

X: 100 Y: 1.205e+005

Lit Pixels Algorithm Cutoff

12

10 Number of lit pixels.

X: 120 Y: 8.733e+004

8

6
X: 264 Y: 3.476e+004 X: 455 Y: 2.404e+004

4

2

0 100

200

300 400 Raw threshold.

500

600

Figure 4.1: Lit pixels vs raw threshold change, 9krad unit. 33

12000
X: 100 Y: 1.158e+004

10000

Number of lit pixels.

8000

X: 120 Y: 7270

6000

4000

2000
X: 300 Y: 271

0 100

200

300 400 Raw threshold.

500

600

Figure 4.2: Lit pixels vs raw threshold change, 0krad unit. The lit pixel population distribution for the 9krad and the 0krad unit based on the signal chains is shown in Figure 4.3 and 4.4 after SW-BLC. It is evident that each chain reacts differently from one another, with the lit pixel count for the 9krad unit being higher than the 0krad unit. The difference between the pixel populations of the signal chains however does not have a major effect in the performance of the unit, due to the spatial distribution of the pixels. Another thing to note is the pairing of the colour channels and their distributions based on their signal chains. From the figures we can also see that at about 200 detector counts on the raw threshold is where the population seems to converge together for all channels. To see how the raw threshold changes effect star identification, star images using the EM camera were obtained. The EM camera uses the same detector and 34

2 # of lit pixels. 1.5 1 0.5

x 10

4

Green(1,1) Green(1,2) Green(2,1) Green(2,2)

0 100 x 10
4

150

200

250

300

350

400

2 # of lit pixels. 1.5 1 0.5

R(1) R(2) B(1) B(2)

0 100

150

200

250 Raw threshold.

300

350

400

Figure 4.3: Raw threshold vs lit pixels per channel, 9krad unit. lens. The detector was also calibrated for the analogue offsets and the register settings were set exactly to the specifications of the star tracker for image acquisition. The camera is shown in Figure 4.5. It is connected through a USB interface to the computer which is much faster than a serial interface to capture and save images. The raw threshold effects the size of the PSF, since it depends on the number of lit pixels. Some pixels that maybe lit at a lower raw threshold has a chance of not being in the image for the higher values. In terms of stars, this will mainly effect dim stars of low magnitude. To study this effect a frequently identified star that was of magnitude 5.15, a PSF size of 8 pixels and the integrated brightness of 2939 was used. The PSF of the star is shown in Figure 4.6. The star ID from

35

2000 # of lit pixels. 1500 1000 500 0 100 2000 # of lit pixels. 1500 1000 500 0 100 R(1) R(2) B(1) B(2) Green(1,1) Green(1,2) Green(2,1) Green(2,2)

150

200

250

300

350

400

150

200

250 Raw threshold.

300

350

400

Figure 4.4: Raw threshold vs lit pixels per channel, 0krad unit. the Henrey-Draper (HD) catalogue is HD115735. To see if the star will be able to be identified as the raw threshold changes, the image was subjected to the same test as above; the results are shown on Figure 4.7. The changes to the raw threshold does not seem to effect the size of the PSF much. Also the total brightness still meets the requirement of the bin threshold, currently the default is 1000 detector counts. The sharp drop in the brightness value is due to a pixel which is left out of the PSF due to the raw threshold. The same star was identified and recorded in over 90 images. The PSF size, total integrated brightness, and the total saturated brightness of the star is given in Figure 4.8. Since this was a very dim star, no pixels were saturated, therefore the integrated and full brightness are the same. Throughout the time the star was in the field of view, it managed to stay at the necessary criteria needed for 36

Figure 4.5: EM camera.
835 836 500 837 838 839 840 841 842 843 1574 1576 1578 1580 1582 1584 0 200 100 400 300 600

Figure 4.6: HD115735, magnitude of 5.15. star matching. With the S3S taking two images per measurement cycle, it is very unlikely that the star will not be used for matching. This will only be hindered 37

2950 Integrated Brightness.

2900

2850

2800 100

110

120

130

140

150

160

170

180

190

200

8 PSF size (# pixels). 7.8 7.6 7.4 7.2 7 100 110 120 130 140 150 Raw Threshold. 160 170 180 190 200

Figure 4.7: Raw threshold test on visual magnitude 5.15 star. by noise if there was an SEE, high dark noise, and or hot pixels. In the Figure 4.8, it is evident that there is some fluctuation present between the images. This is caused by scintillation due to the atmosphere. The apparent brightness of the star varies rapidly from image to image. Since these images were taken near the city of Toronto, Canada, the atmospheric affect has a great impact on the image. This is largely due to pollution. This brings up the importance of having a good observation site away from major cities, or an astronomical observation site for nominal results. From dark images obtained from the 9krad unit, we saw the role of temperature change and how it effected the image. The higher noise combined with hot pixels leads the processing chain to obtain false detections. This relates back to the chosen default thresholds of the detector, for the raw threshold, PSF size, and bin threshold. In the next section, these parameters are adjusted to see their affect on false detections.

38

15 # of Pixels 10 5
X: 20 Y: 7.774

Blob size Average blob size

0

20

3000 # Counts. 2000 1000

40 60 80 100 Number of occurence. Integrated Brightness Average Integrated Brightness

0

20

40 60 Number of occurence.

80

100

3000 # Counts. 2000 1000

Full Brightness Average Full Brightness

0

20

40 60 Number of occurence.

80

100

Figure 4.8: HD115735 star, 5.15 Visual Magnitude

4.2

False Detections

With the increase of dark current and the creation of hot pixels, the processing chain will classify some combinations of pixel clusters as PSFs. These PSFs will then be used for matching to yield an attitude solution. To see the exact effect of the hot pixels and the PSFs they can create, several images were taken and downloaded over a course of several days for analysis. From the dark images collected from the 9krad unit, at a default threshold of 120, the sensor will always yield no solution due to the lit pixel limit. Cycling through the raw thresholds, it is possible to see the amount of false detections in the image. Another comparison was also made based on the PSF size. The results are shown in Figure 4.9. We can see that there are several hundred false detections at a PSF size of 4 pixels. The amount of false detections reduces greatly for a 39

PSF size of 5 and 6 pixels. The combination of the raw threshold increase and PSF size allows for fewer false detections.
250 4 pixels 5 pixels 6 pixels 200

# of false detections

150

100

50

0 100

150

200

250

300

350

400

Raw threshold

Figure 4.9: Number of false detections vs raw threshold increase.

The number of star matches from the false detections is shown in Figure 4.10. Although there are many false detections in the image, the matching algorithm only finds a few stars in the image. This shows how robust the matching algorithm is to discount many of the false detections. With the lit pixel size of 6, and a higher raw threshold of about 150 towards the EOL of the sensor, it is possible to minimize the effect of radiation damage and maintain some level of performance. One must remember however that the number of lit pixels and false detections is greatly effected by temperature, this was evident in the results from Chapter 3. It is very important, especially for irradiated units, to maintain detector temperature to minimize the effect due to temperature. Since the star tracker does take 40

4 3.5 3 4 pixels 5 pixels 6 pixels

# of stars identified.

2.5 2 1.5 1 0.5 0 100

150

200

250

300

350

400

Raw threshold.

Figure 4.10: False star matches and lit pixels vs the raw threshold. 2 images per processing cycle it is possible to compare the images and examine the validity of the output. For example if the quaternion output is vastly different from the two images, then both images cannot be trusted. This chapter presents various aspects of how a false detection and matching occurs from the 9krad unit. Although many false detections are present, only a few were being identified as stars. With the analysis of the dim star, we saw that even while changing the raw threshold it is possible that the star will remain available for matching. Examining the images further, it is possible to see the cause of a match, which was evidently linked to hot pixels as we will see in Chapter 5.

41

5

Hot Pixel Identification

In the previous chapters several key effects of radiation damage on CMOS imaging devices were introduced, with key analysis on the S3S star tracker CMOS-APS. This includes the processing steps in which the image is handled, to the reduction of false detections on the image while attempting to maintain performance on imaging dim stars. In this chapter the false detections and their respective matches are studied further. The PSFs are studied to show that most are caused by hot pixels on the image.

5.1

Photo Response of Irradiated Unit

Many examples in the previous chapters show models of PSFs or just plain dark images for analysis purposes. One of the main things to first look at to see if the irradiated unit still can be used is the photo response of the unit. To examine the quality of the image on the 0krad and the 9krad unit, PSFs were taken from our testing and calibration darkroom. This includes a collimated light source which is used to focus the star tracker to an infinite distance. The light source was geometrically centred for both detectors before the images were taken. The results are presented in Figures 5.1 and 5.2. Although the 9krad unit has various pixels around the PSF, the response from both sensors are very much alike to the same light source. The peaks and the distribution of the PSF are very similar. What this suggest is that although the 9krad sensor does have an increase in noise, the photo response of the unit is still very similar to a non-irradiated unit. The images presented are after the SW-BLC process.

42

3500 3000 2500 2000 1500 1000 500 0

Figure 5.1: Response to light on 9krad unit.

3500 3000 2500 2000 1500 1000 500 0

Figure 5.2: Response to light on 0krad unit.

Examining the PSFs we see that they have a very particular shape. This is the fact that the illumination from the photons are spread across several pixels on the detector plain, with the highest illumination being near the centre. Hot pixels however combined with the surrounding noise does not have this distribution as we will see in the next section.

5.2

Hot Pixels

From the previous chapter we saw that there were several false detections, as well as false star matches. Lets examine what the PSFs actually look like. From the

43

SW-BLC corrected dark image for the false detections presented in chapter 4, couple of windows were taken to examine the PSFs for the size of 6 pixels per PSF, this is shown in Figures 5.3 and 5.4. One of the most immediate observations is that the PSF consists of an extremely bright pixel while the surrounding pixels are several thousand detector counts lower. One would expect the spread of high intensity to be across several pixels if a real star is imaged, as seen by the above figures of the photo response. Hot pixels are permanently damaged by radiation. Although some pixels can be recovered by the annealing process, it is not guaranteed.

3000

2500

2000

1500

1000

500

0

Figure 5.3: Sample false detection PSF 1. Knowing how the false detections appear on the image is very important as it makes it much easier to track their locations and rule the pixel itself out as a damaged element. From the dark images obtained over a long period of time, it is possible to see exactly how much of the pixel population appear as lit in every image. The algorithm works the following way and happens before the matching process:

44

3000

2500

2000

1500

1000

500

0

Figure 5.4: Sample false detection PSF 2. 1. Adjust the raw threshold to a high value. 2. Take several hundred images keeping track of the lit pixel locations. 3. Use the list of hot pixels to correct the star images under regular operation. To do this on the ground taking dark images is much easier than real time operations in space. As mentioned, there is no mechanical shutter for the S3S so taking dark images is not an option as the stars will be in the FoV. But even if the stars are in the field of view, it is possible to examine the pixel distribution of the PSF, and the stars will move out of the FoV over a period of time. To give an example, if the star tracker is stationary on Earth, the longest time it will take for a star to move across the detector's FoV is 15 minutes across the longest side of the detector. Therefore having a pixel with a similar count as the previous image across that timespan is very rare. The dark images were downloaded from the 9krad unit, which was roughly 15 minutes apart. All together 100 images were collected over several days. Using these dark images a simple count was done to see which pixels appeared in every 45

image. Knowing these locations, the hot pixels were then removed from the image to test for the false detections. Pixels that appeared in all the images of over 1000 detector count value were removed. Figure 5.5 shows these results. A rapid reduction of false detections can be observed for the PSF with 4 pixels in size. The others reduced by a small very small amount. This suggest that random noise could be a major factor in creating the false detections. Next we see how fast we could identify the majority of the hot pixels during image collection.
180 160 140 4 pixels 5 pixels 6 pixels

# of false detections

120 100 80 60 40 20 0 100

150

200

250

300

350

400

Raw threshold

Figure 5.5: False detections after the removal of hot pixels. To see how fast we can identify most of the hot pixels within an image, the percent of pixels that were always showed a high value were recorded. This was done for pixels which were in the image 70 to 100 percent of the time at high detector count values. The results are shown in Figure 5.6. By examination we can see how the majority of the pixels were identified after 70 images were taken. 46

Also from the figure, we can see that there is a great majority of pixels that are hot but not reading the maximum value of over 4000 detector counts as we initially thought.
2 1.8 1.6 1.4 x 10
4

>=70% >=80% >=90% 100%

# of hot pixels

1.2 1 0.8 0.6 0.4 0.2 0

1000

1500

2000

2500

3000

3500

4000

Detector count

Figure 5.6: Permanent hot pixels vs raw threshold. It is very easy to capture dark images during operations on the ground. This is done by easily covering the star tracker's lens. Therefore to run the hot pixel detection in space, with no mechanical shutter, we must reduce the amount of stars being captured in the image. Although the stars will continuously move across the detector, it is possible that this will have an effect on the hot pixel count. To fix this issue, the simplest adjustment when trying to look for hot pixels in space is to reduce the exposure time to the minimum allowed value. What this will do is eliminate the majority of the stars except for the extreme bright stars in the

47

FoV if any is in view. With this new addition it will be extremely easy to find the hot pixel locations in space. Testing with the EM camera with true star images. A sample dataset viewing the sky was collected. From the data set, the stars were removed to create a sample list of hot pixels which always occur in the images. Keeping a list of hot pixels, using star images, a test was done to see if we could identify the known hot pixels. The result is shown in Figure 5.7.
6800 pixels detected as hot hot pixels from true # lit pixels 6600

# of pixels over 120 detector counts

6400

6200

6000

5800

5600

0

5

10

15

20

25

30

35

40

45

50

Image Number

Figure 5.7: Identifying hot pixels from star images. From this we can see that if a hot pixel list is known, it is possible to identify them again within 22 images at which point it reaches a steady state. This test does not take exposure time into account however. During regular operations we do not have a truth set of hot pixels. The test was done to merely see the performance of the algorithm. Also note that due to temperature changes the list may change. In this chapter we examined several ways of classifying hot pixels and presented ways of locating and improving the performance of the star tracker. Although testing for the dark images was only done under the MATLAB environment, the 48

identification process is actually fairly simple. Implementing a hot pixel algorithm on the S3S will require some architectural changes, which is something that must be explored for performance maintenance.

49

6

Conclusion

Radiation is an unavoidable factor in space. While many other sensors could be protected by shielding, star trackers unfortunately cannot be shielded from the environment. Although there are ways of mitigating the effects of radiation, such as radiation hardened components, to acquire these components are difficult and expensive. From this study of radiation damage on the S3S unit, it is possible to conclude that the performance of the unit can still be maintained towards the EOL of the sensor. Chapter 2 introduced the decision making process of the S3S. The steps in how the image is processed are very crucial as we used several parameters that were introduced in the chapter to correct the image. We saw the effect of proton radiation damage on the S3S in Chapter 3, which gives us good insight as to what type of damage is to be expected while the sensor is in space. Also we learned how to minimize certain damaging effects by tuning some of the processing parameters through Chapters 4 and 5.

6.1

Radiation Testing

For space instruments, maintaining performance in the space radiation environment is essential . Since the sensor was subjected to a high total dose to mimic EOL performance, it shows us what to expect under regular operations in space. A TID of 9krad will take several years to accumulate on an LEO orbit, but the average lifespan of a small satellite is usually around one year. Barring no SEE events, the S3S sensor should be able to perform well in space environment from the observed results. Throughout the operational lifespan of the sensor, as long as the temperature is maintained, the sensor will be under a constant annealing

50

process. An annealing period specifically set for the sensor will help maintain performance. Proton radiation only counts for the majority of the active particles within the near Earth space environment. There also exist various other extremely high energy particles as well as high energy ions which are much larger in size. These will have similar effects on the detector with much larger consequences. The overall effects of these interactions are very difficult to predict on Earth but can be observed by monitoring the radiation environment during known radiation events to see the effects of it on the detector.

6.2

Temporal Effects on Image Quality

As mentioned in chapter 4, one of the main effects from the radiation testing was the increase to temperature sensitivity. With recalibration of the analogue offsets, the effect of temporal noise on the amount of lit pixels can be reduced. By adjusting the raw threshold its possible to regain some control of the unit to give attitude solutions. Doing this, some false detections were introduced as the higher dark current pixels combined with certain hot pixels passed the image thresholding parameters. Combining the effect of the raw threshold change with the size of the PSF the number of false detections were further reduced. Although this parameter change does help to reduce false detections, hot pixels were still present in the image and their locations on the detector was still unknown.

51

6.3

Hot Pixel Detection

Chapters 2 through 4 characterized many aspects of the detector's response to radiation damage. Knowing all the characteristics of how the image is analysed is very important to identify and classifying hot pixels. From the images of the PSFs downloaded from the 9krad unit, it was evident that there were isolated spots on the detector where pixels were always reading a high value. It was shown that using images that were taken over a long period of time, it is possible to know where the locations of these pixels are; at which point it is possible to correct for them. But even if the location of the hot pixel is unknown, its possible to use the PSF itself to understand if the star was detected due to the existence of a hot pixel or not. Its possible to assess this by using the PSF itself, as one would expect a distribution of brightness across several pixels if a real star is present. If one pixel is well over several hundred to a thousand counts above the surround pixels the weighting on using this PSF for matching should be low. When implementing the detection algorithm for hot pixels, it is important to keep in mind the stars which could be in the FoV. As mentioned, by adjusting the exposure time to the minimum value allowed by the detector can easily solve this issue. Then it is extremely easy to keep track of which pixels are always bright.

6.4

Future Work

The radiation testing revealed a wealth of knowledge on damage and changes to the operational characteristics of the sensor. However pre-radiation calibrated results were unavailable to make a perfect comparison, referring mainly to the analogue offset calibration. Although the performance of the sensor was evaluated after the

52

radiation, it is difficult to say how much exactly that particular detector's offsets changed based on the level of radiation received. This information is useful if we wish to model the dark current increase of the detector based on the DDD. This also requires specific information of the materials used to create the detector. A more thorough study on the analogue offset calibration online and offline based on temporal effects is extremely important. The number of lit pixels decreased and increased based on the temperature change of the detector. With the combination of radiation damage the sensitivity to temperature changes increased over time. Unfortunately due to time constraints an online version of the analogue offset calibration was not implemented. This requires an extensive study on a calibrated detector pre- and post-radiation. In addition to the regular star tracking operations, a major recommendation for the S3S processing chain specifically is to allow the sensor to be under a maintenance mode. Several things could be done to the sensor at this time. This includes high temperature annealing, and sensor maintenance in the search for hot pixels. Temperature annealing process is fairly simple, this can be done simply by loading the sensor, or by application of heat for higher temperatures. For identifying hot pixels, with no help from a shutter, it is recommended to reduce the exposure time while taking star images. Doing this we can easily keep a count of the pixels which are always bright and then correct for them during regular operations accordingly. Removing the hot pixels from the image as a correction however is not recommended. Once the location is known, based on its brightness it is possible to have some form of weighting system which could be applied to the pixel under regular operations. This is mainly to minimize the effect of the hot pixel if it is 53

combined with a detected star. To accomplish this properly an extensive study must be done on how stars appear on the image based on its magnitude, pixel size and full brightness. This will give us an idea of how hot pixels could introduce error to mainly the centroiding of a PSF based on its position.

54

References
[1] T. D. . J. E. . G. M. . D. S. . C. C. Grant, "Commissioning the s3s nanosatellite star tracker," International Astronautical Congress, 2010. [2] T. Dzamba, J. Enright, G. McVittie, D. Sinclair, and C. C. Grant, "Commissioning the s3s nanosatellite star tracker," International Astronautical Congress, 2010. [3] C. C. Liebe, "Accuracy performance of star trackers - a tutorial," IEEE Transactions on Aerospace and Electronic Systems, vol. 38, pp. 587­599, 2002. [4] J. R. Schwank, "Basic mechanisms of radiation effects in the natural space environment," Master's thesis, Sandia National Laboratories - Radiation Technology and Assurance Department. [5] H. N. Becker, M. D. Dolphin, D. O. Thorbourn, J. W. Alexander, and P. M. Salomon, "Commercial sensor survey testing progress report," in NASA Electronic Parts and Packaging (NEPP) Program Office of Safety and Mission Assurance, 2008. [6] C. C. Liebe, "Star trackers for attitude determination," IEEE AES Systems Magazine, 1995. [7] S. Bourdarie and M. Xapsos, "The near earth space radiation environment," IEEE Transactions On Nuclear Science, vol. 55, No. 4, 2008. [8] J.-M. Lauenstein and J. L. Barth, "Radiation belt modeling for spacecraft design: Model comparisons for common orbits," Radiation Effects Data Workshop, IEEE, pp. 102­109, 2005. 55

[9] M. Cohen and J. P. David, "Radiation effects on active pixel sensors," IEEE, 2000. [10] M. Sirianni, M. Mutchler, J. B. Ron Gilliland, and R. Lucas, "Radiation damage in hubble space telescope detectors," IEEE, 2007. [11] J. Enright, D. Sinclair, and K. C. Fernando, "Cots detector for nanosatellite star trackers: A case study," 25th Annual AIAA/USU Conference on Small Satellites, 2011. [12] T. Dzamba, C. Fernando, and J. Enright, "An approach to star tracker onliy attitude and rate estimation using motion blur," AAS, 2011. [13] J. Srour, C. J. Marshall, and P. W. Marchall, "Review of displacement damage effects in silicon devices," IEEE, vol. 50, 2003.

56

